/**
 * Minified by jsDelivr using Terser v5.17.1.
 * Original file: /gh/Dddatt/bss@2.0.13/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function main(){async function e(){return await new Promise((async(e,t)=>{let i=window.indexedDB.open("IndexedDB_BeeSwarmSimulator",1);i.onupgradeneeded=function(e){e.target.result.createObjectStore("worlds",{keyPath:"id"}).createIndex("id","id",{unique:!0})},i.onsuccess=function(t){e(i.result)},i.onerror=function(e){t(e)}}))}async function t(t){return await new Promise((async(i,o)=>{let n=await e(),s=n.transaction("worlds","readwrite").objectStore("worlds"),r=t?s.get(t):s.getAll();r.onsuccess=function(e){i(r.result),n.close()},r.onerror=function(e){i(null),n.close()}}))}async function i(t,i){return new Promise((async(o,n)=>{let s=(await e()).transaction("worlds","readwrite").objectStore("worlds").put({id:t,data:i});s.onsuccess=function(){o(s.result)},s.onerror=function(e){n(e)}}))}async function o(t){return new Promise((async(i,o)=>{let n=(await e()).transaction("worlds","readwrite").objectStore("worlds").delete(t);n.onsuccess=function(){i(n.result)},n.onerror=function(e){o(e)}}))}function n(e){let t=document.getElementById(e+"_thumbnailCanvCopy"),i=t.getContext("2d");t.width=window.innerWidth,t.height=window.innerHeight,i.drawImage(document.getElementById("thumbnailCanv"),0,0)}window.createDatabase=e,window.loadFromDB=t,window.saveToDB=i,window.deleteFromDB=o,document.getElementById("mainNew").onclick=function(){for(let e in a)document.getElementById("savedGames").removeChild(a[e]);let e=window.open();e.document.open(),e.document.write("<!doctype html><html>"+document.querySelector("html").innerHTML),e.document.close()};let s,r,a=[];document.getElementById("mainPlay").onclick=function(){n("select"),document.getElementById("mainMenu").style.display="none",document.getElementById("mainSelectMenu").style.display="block",document.getElementById("createNewGame").onclick=function(){document.getElementById("mainSelectMenu").style.display="none",document.getElementById("mainMenu").style.display="none",BeeSwarmSimulator({id:Date.now(),name:"Untitled Save"})},document.getElementById("createImportedGame").onclick=function(){alert("\nTo import a game, you'll need a string containing the saved data of the game. Copy the string, and then use CTRL+V in this program to start the game.\n\nAn invalid code will create an error message. There is a chance errors in the save code are not detected and pass through. This may corrupt the game, resulting in crashes.")},document.onpaste=e=>{if(!s)return;s=!1;let t=e.clipboardData.getData("text/plain");document.getElementById("mainSelectMenu").style.display="none",document.getElementById("mainMenu").style.display="none",BeeSwarmSimulator({id:Date.now(),saveCode:t,name:"Untitled Import"})};for(let e in a)document.getElementById("savedGames").removeChild(a[e]);let e=document.createElement("div");s=!0,a=[e],e.innerHTML="<p style='text-align:center;color:rgb(60,60,60)'>You have no saves. Start a new game or import one.<br><br>Data is saved to this computer and only this computer's browser. To transfer data across multiple devices, use the save code feature.<br><br>Data may not be saved after abruptly closing the game. Data will not be saved while in incognito/private browser modes.</p>",document.getElementById("savedGames").appendChild(e),t().then((e=>{if(window.initSave=function(t){document.getElementById("mainSelectMenu").style.display="none",document.getElementById("mainInfoMenu").style.display="none",document.getElementById("mainMenu").style.display="none",BeeSwarmSimulator({id:e[t].id,name:e[t].data.name,saveCode:e[t].data.saveCode})},window.deleteSave=function(t){confirm('\nDo you really want to delete save "'+e[t].data.name+'"?')&&(deleteSaveConfirmation=!1,o(e[t].id),document.getElementById("mainPlay").onclick())},window.renameSave=function(t){o(e[t].id),i(e[t].id,{lastSaved:Date.now(),saveCode:e[t].data.saveCode,name:document.getElementById("saveName"+t).value}),document.getElementById("mainPlay").onclick()},window.getSave=function(t){navigator.clipboard.writeText(e[t].data.saveCode).then((()=>{alert('\nThe save code for save "'+e[t].data.name+'" has been copied to your clipboard.')})).catch((i=>{r&&document.getElementById("savedGames").removeChild(r);let o=document.createElement("div");r=o,o.innerHTML="<div style='font-size:10px;font-family:trebuchet ms;word-break:break-all;padding-left:10px;padding-right:10px;user-select:text'><br><br>"+e[t].data.saveCode+"<br><br><br><br><br></div>",document.getElementById("savedGames").appendChild(o),a.push(o),alert('\nThere was an error copying the save code for save "'+e[t].data.name+'" to your clipboard. The code has been printed at the bottom of the page instead.')}))},e.sort(((e,t)=>t.data.lastSaved-e.data.lastSaved)),e.length){for(let e in a)document.getElementById("savedGames").removeChild(a[e]);a=[]}for(let t in e){let i=document.createElement("div");i.style.marginLeft=(.5*window.innerWidth-250|0)+"px",i.style.width="500px",i.style.height="70px",i.style.borderRadius="5px",i.style.border="4px solid rgb(180,160,0)",i.style.backgroundColor="rgb(250,230,50)",i.style.marginBottom="15px",a.push(i);let o=new Date(e[t].data.lastSaved),n=o.getHours(),s=`${(o.getMonth()+1).toString().padStart(2,"0")}/${o.getDate().toString().padStart(2,"0")}/${o.getFullYear()}&nbsp;&nbsp;${(n>=12?n-12:n).toString().padStart(2,"0").replace("00","12")}:${o.getMinutes().toString().padStart(2,"0")}:${o.getSeconds().toString().padStart(2,"0")} ${n>=12?"PM":"AM"}`;i.innerHTML="<input id='saveName"+t+"' style='margin-top:3px;margin-left:3px;font-size:22px;background-color:rgb(0,0,0,0);border:none;font-family:comic sans ms;padding-left:4px;padding-bottom:5px;background-color:rgb(0,0,0,0.1)' spellcheck='false' size='17' value='"+e[t].data.name+"' onchange='window.renameSave("+t+")'><div style='margin-top:7px;margin-left:5px;font-size:14px;color:rgb(60,60,60)'>Last Saved: "+s+"</div><div style='margin-left:460px;margin-top:-25px;width:52px;height:27px;transform:translate(-50%,-50%);background-color:rgb(210,50,50);border-radius:4px;border:2px solid black;text-align:center;font-size:16px;cursor:pointer' onclick='window.deleteSave("+t+")'>Delete</div><div style='margin-left:395px;margin-top:-31px;width:52px;height:27px;transform:translate(-50%,-50%);background-color:rgb(195,100,255);border-radius:4px;border:2px solid black;text-align:center;font-size:16px;cursor:pointer' onclick='window.getSave("+t+")'>Export</div><div style='margin-left:330px;margin-top:-31px;width:52px;height:27px;transform:translate(-50%,-50%);background-color:rgb(50,210,50);border-radius:4px;border:2px solid black;text-align:center;font-size:16px;cursor:pointer' onclick='window.initSave("+t+")'>Play</div>",document.getElementById("savedGames").appendChild(i)}})).catch((e=>{let t=document.createElement("div");a.push(t),t.innerHTML="<p style='text-align:center;color:rgb(150,0,0)'>Error loading from IndexedDB. IndexedDB may not be supported.</p>",document.getElementById("savedGames").appendChild(t)}))},document.getElementById("mainInfo").onclick=function(){n("info"),document.getElementById("mainMenu").style.display="none",document.getElementById("mainInfoMenu").style.display="block"},document.getElementById("info_mainBack").onclick=document.getElementById("select_mainBack").onclick=function(){document.getElementById("mainInfoMenu").style.display="none",document.getElementById("mainSelectMenu").style.display="none",document.getElementById("mainMenu").style.display="block"},window.drawThumbnail(document.getElementById("thumbnailCanv"))}var _M=Math;function BeeSwarmSimulator(t){document.onpaste=void 0;let i,o=_M,n=window.thisProgramIsInFullScreen?500:window.innerWidth+1,s=window.thisProgramIsInFullScreen?500:window.innerHeight+1,r=.5*n,a=.5*s,l=n/s,d=!0,h=document.getElementById("gl-canvas"),m=h.getContext("webgl2",{antialias:!0}),c=document.getElementById("ui-canvas"),u=c.getContext("2d"),p=document.getElementById("tex-canvas").getContext("2d",{willReadFrequently:!0});if(!m)return void alert("WebGL2 is not supported. Switch to a compatiable browser or computer to play.");h.width=n,h.height=s,c.width=n,c.height=s,m.canvas.width=n,m.canvas.height=s,m.viewport(0,0,n,s),window.onresize=()=>{n=window.thisProgramIsInFullScreen?500:window.innerWidth+1,s=window.thisProgramIsInFullScreen?500:window.innerHeight+1,h.width=n,h.height=s,c.width=n,c.height=s,m.canvas.width=n,m.canvas.height=s,m.viewport(0,0,n,s),r=.5*n,a=.5*s,l=n/s,g.setProjectionMatrix(g.fov,l,.1,275),yt=bt("static_geometry_vsh","static_geometry_fsh"),vt=bt("dynamic_geometry_vsh","dynamic_geometry_fsh"),xt=bt("token_geometry_vsh","token_geometry_fsh"),At=bt("flower_geometry_vsh","flower_geometry_fsh"),Tt=bt("bee_geometry_vsh","bee_geometry_fsh"),wt=bt("particle_renderer_vsh","particle_renderer_fsh"),Bt=bt("explosion_renderer_vsh","explosion_renderer_fsh"),It=bt("text_renderer_vsh","text_renderer_fsh"),Et=bt("mob_renderer_vsh","mob_renderer_fsh"),kt=bt("trail_renderer_vsh","trail_renderer_fsh"),St=Pt({}),m.useProgram(yt),m.uniform1f(St.static_isNight,g.isNight),m.useProgram(vt),m.uniform1f(St.dynamic_isNight,g.isNight),m.useProgram(xt),m.uniform1f(St.token_isNight,g.isNight),m.useProgram(At),m.uniform1f(St.flower_isNight,g.isNight),m.useProgram(Tt),m.uniform1f(St.bee_isNight,g.isNight),m.useProgram(Et),m.uniform1f(St.mob_isNight,g.isNight),m.useProgram(kt),m.uniform1f(St.trail_isNight,g.isNight)};let f,g,b,y=0,v=0,x=0,A=0,T=0,w=!1,B=45,I=t.name===window.atob("YnVveWFudCBiZWUgcmFjY29vbg==");m.enable(m.BLEND),m.blendFunc(m.SRC_ALPHA,m.ONE_MINUS_SRC_ALPHA),m.enable(m.DEPTH_TEST),m.depthFunc(m.LEQUAL),m.enable(m.CULL_FACE),m.cullFace(m.BACK);let E=[{item:"gumdrops",req:[["pineapple",2],["strawberry",2],["blueberry",2]]},{item:"moonCharm",req:[["royalJelly",2],["pineapple",3],["gumdrops",3]]},{item:"redExtract",req:[["strawberry",35],["royalJelly",5]]},{item:"blueExtract",req:[["blueberry",35],["royalJelly",5]]},{item:"enzymes",req:[["pineapple",35],["royalJelly",5]]},{item:"oil",req:[["sunflowerSeed",35],["royalJelly",5]]},{item:"glue",req:[["gumdrops",35],["royalJelly",5]]},{item:"tropicalDrink",req:[["coconut",5],["oil",1],["enzymes",1]]},{item:"glitter",req:[["moonCharm",20],["magicBean",1]]},{item:"starJelly",req:[["royalJelly",75],["glitter",3]]},{item:"purplePotion",req:[["neonberry",3],["redExtract",2],["blueExtract",2],["glue",2]]},{item:"superSmoothie",req:[["neonberry",3],["starJelly",1],["purplePotion",1],["tropicalDrink",3]]},{item:"fieldDice",req:[["softWax",1],["whirligig",1],["redExtract",1],["blueExtract",1]]},{item:"smoothDice",req:[["fieldDice",2],["whirligig",2],["softWax",2],["oil",2]]},{item:"loadedDice",req:[["smoothDice",2],["hardWax",1],["oil",2],["glue",1]]},{item:"softWax",req:[["honeysuckle",5],["oil",1],["enzymes",1],["royalJelly",5]]},{item:"hardWax",req:[["softWax",2],["enzymes",2],["bitterberry",5],["royalJelly",25]]},{item:"swirledWax",req:[["hardWax",1],["softWax",2],["purplePotion",1],["royalJelly",75]]},{item:"causticWax",req:[["hardWax",3],["neonberry",5],["gumdrops",10],["royalJelly",175]]},{item:"turpentine",req:[["superSmoothie",3],["causticWax",3],["starJelly",5],["honeysuckle",50]]},{item:"diamondEgg",req:[["goldEgg",1],["swirledWax",1],["royalJelly",100]]}],k=[{item:"spiritPetal",rewardType:"honey",rewardAmount:15},{item:"treat",rewardType:"honey",rewardAmount:1},{item:"strawberry",rewardType:"honey",rewardAmount:1.5},{item:"blueberry",rewardType:"honey",rewardAmount:1.5},{item:"pineapple",rewardType:"honey",rewardAmount:1.5},{item:"sunflowerSeed",rewardType:"honey",rewardAmount:1.5},{item:"bitterberry",rewardType:"winds",rewardAmount:1},{item:"neonberry",rewardType:"winds",rewardAmount:1},{item:"moonCharm",rewardType:"winds",rewardAmount:1},{item:"royalJelly",rewardType:"honey",rewardAmount:2},{item:"starJelly",rewardType:"winds",rewardAmount:6},{item:"moonCharm",rewardType:"winds",rewardAmount:1},{item:"starTreat",rewardType:"winds",rewardAmount:14},{item:"atomicTreat",rewardType:"winds",rewardAmount:6},{item:"ticket",rewardType:"winds",rewardAmount:1.1},{item:"gumdrops",rewardType:"winds",rewardAmount:.8},{item:"coconut",rewardType:"winds",rewardAmount:1},{item:"stinger",rewardType:"loot",rewardAmount:1},{item:"microConverter",rewardType:"honey",rewardAmount:2.15},{item:"honeysuckle",rewardType:"honey",rewardAmount:2},{item:"whirligig",rewardType:"honey",rewardAmount:2.25},{item:"fieldDice",rewardType:"winds",rewardAmount:2},{item:"smoothDice",rewardType:"winds",rewardAmount:4},{item:"loadedDice",rewardType:"winds",rewardAmount:7},{item:"jellyBeans",rewardType:"honey",rewardAmount:3.5},{item:"redExtract",rewardType:"winds",rewardAmount:4},{item:"blueExtract",rewardType:"winds",rewardAmount:4},{item:"glitter",rewardType:"honey",rewardAmount:8},{item:"glue",rewardType:"winds",rewardAmount:4},{item:"oil",rewardType:"winds",rewardAmount:4},{item:"enzymes",rewardType:"winds",rewardAmount:4},{item:"tropicalDrink",rewardType:"winds",rewardAmount:5},{item:"purplePotion",rewardType:"winds",rewardAmount:9},{item:"magicBean",rewardType:"winds",rewardAmount:3.5},{item:"cloudVial",rewardType:"honey",rewardAmount:7},{item:"antPass",rewardType:"honey",rewardAmount:5},{item:"roboPass",rewardType:"honey",rewardAmount:8},{item:"softWax",rewardType:"honey",rewardAmount:3.5},{item:"hardWax",rewardType:"winds",rewardAmount:6},{item:"causticWax",rewardType:"winds",rewardAmount:8},{item:"swirledWax",rewardType:"honey",rewardAmount:10},{item:"turpentine",rewardType:"winds",rewardAmount:8},{item:"basicEgg",rewardType:"honey",rewardAmount:9},{item:"silverEgg",rewardType:"winds",rewardAmount:6},{item:"goldEgg",rewardType:"winds",rewardAmount:7.5},{item:"diamondEgg",rewardType:"winds",rewardAmount:10},{item:"mythicEgg",rewardType:"winds",rewardAmount:12},{item:"giftedSilverEgg",rewardType:"winds",rewardAmount:11},{item:"giftedGoldEgg",rewardType:"winds",rewardAmount:12},{item:"giftedDiamondEgg",rewardType:"winds",rewardAmount:13},{item:"giftedMythicEgg",rewardType:"winds",rewardAmount:14},{item:"starEgg",rewardType:"winds",rewardAmount:14}],P=document.getElementById("passiveActivationPopup"),S=document.getElementById("pollenAmount"),M=document.getElementById("honeyAmount"),_=document.getElementById("pollenAmount2"),R=document.getElementById("honeyAmount2"),F=document.getElementById("healthBar"),C=document.getElementById("capacityBar"),H=document.getElementById("inventoryButton"),D=document.getElementById("questButton"),L=document.getElementById("beesButton"),U=document.getElementById("settingsButton"),N=document.getElementById("beequipButton"),O=document.getElementsByClassName("uiPage"),Y=null,G=document.getElementsByClassName("hotbarSlot"),q=document.getElementsByClassName("autoHotbarButton"),W=(document.getElementById("roboQuestMenu"),O[0].innerHTML.split('<svg id="')),V={};W.shift();for(let e in W){let t=W[e].substr(0,W[e].indexOf('"'));W[e]='<svg id="'+W[e],V[t+"_description"]=W[e].split("<text");for(let e in V[t+"_description"])V[t+"_description"][e]=V[t+"_description"][e].substring(V[t+"_description"][e].indexOf(">")+1,V[t+"_description"][e].indexOf("<"));V[t+"_description"].shift(),V[t+"_description"].shift(),V[t+"_description"]=V[t+"_description"].join(" "),V[t]=W[e].split("</text>"),V[t]='<svg style="width:70px;height:70px;transform:SCALE">'+V[t][V[t].length-1].substr(0,V[t][V[t].length-1].indexOf("</svg>"))+"<title>"+MATH.doGrammar(t)+"</title></svg>"}for(let e in G)G[e].onmousedown=function(){if(g.itemDragging&&se[g.itemDragging].canUseOnSlot)g.addMessage("This item cannot be put into the hotbar!",ae.redArr);else if(g.itemDragging&&g.itemDragging!==G[e].itemType){G[e].innerHTML=V[g.itemDragging].replace("SCALE","scale(0.512,0.512);margin-left:-18px;margin-top:-19px")+"<div style='font-size:9px;text-align:right;margin-top:-30px'>x"+se[g.itemDragging].amount+"</div>",G[e].style.backgroundColor=se[g.itemDragging].amount>0?"rgb(235,235,235)":"rgb(190,190,190)",G[e].itemType=g.itemDragging,G[e].style.filter=se[g.itemDragging].amount>0?"none":"grayscale(1)",q[e].style.display=se[g.itemDragging].autoUse?"block":"none",q[e].autoEnabled=!1,q[e].style.backgroundColor="rgb(255,0,0,0.85)",q[e].innerHTML="AUTO: OFF",window.clearInterval(q[e].interval),q[e].onmousedown=function(){q[e].autoEnabled=!q[e].autoEnabled,q[e].style.backgroundColor=q[e].autoEnabled?"rgb(0,255,0,0.7)":"rgb(255,0,0,0.7)",q[e].innerHTML="AUTO: "+(q[e].autoEnabled?"ON":"OFF"),q[e].autoEnabled?q[e].interval=window.setInterval((function(){if(se[G[e].itemType].amount>0){let t=se[G[e].itemType].amount;se[G[e].itemType].use(),se[G[e].itemType].amount!==t&&(se[G[e].itemType].cooldown=T,g.stats[G[e].itemType]++,g.updateInventory())}}),1e3*se[G[e].itemType].maxCooldown):window.clearInterval(q[e].interval)};for(let t in G)G[t].itemType===g.itemDragging&&e!==t&&(G[t].innerHTML="",G[t].style.backgroundColor="rgb(0,0,0,0)",G[t].itemType=!1,q[t].style.display="none",q[t].autoEnabled=!1,window.clearInterval(q[t].interval));g.itemDragging=!1}else if(g.itemDragging===G[e].itemType)G[e].innerHTML="",G[e].style.backgroundColor="rgb(0,0,0,0)",G[e].itemType=!1,q[e].style.display="none",q[e].autoEnabled=!1,g.itemDragging=!1,window.clearInterval(q[e].interval);else if(!g.itemDragging&&G[e].itemType)if(se[G[e].itemType].canUseOnSlot)g.itemDragging=G[e].itemType;else if(T-se[G[e].itemType].cooldown>se[G[e].itemType].maxCooldown){if(se[G[e].itemType].amount>0){let t=se[G[e].itemType].amount;se[G[e].itemType].use(),se[G[e].itemType].amount!==t&&(se[G[e].itemType].cooldown=T,g.stats[G[e].itemType]++,g.updateInventory())}}else g.addMessage("Item is on a cooldown of "+MATH.doTime(se[G[e].itemType].maxCooldown-(T-se[G[e].itemType].cooldown))+"!",ae.redArr)};document.getElementById("honey").style.display="none",H.onclick=function(e){0!==Y?(null!==Y&&(O[Y].style.display="none"),Y=0,O[Y].style.display="block",g.itemDragging=!1,g.beequipDragging=!1):(O[Y].style.display="none",Y=null,g.itemDragging=!1,g.beequipDragging=!1)},D.onclick=function(e){1!==Y?(null!==Y&&(O[Y].style.display="none"),Y=1,O[Y].style.display="block",g.itemDragging=!1,g.beequipDragging=!1):(O[Y].style.display="none",Y=null,g.itemDragging=!1,g.beequipDragging=!1)},L.onclick=function(e){2!==Y?(null!==Y&&(O[Y].style.display="none"),Y=2,O[Y].style.display="block",g.itemDragging=!1,g.beequipDragging=!1,g.updateBeesPage()):(O[Y].style.display="none",Y=null,g.itemDragging=!1,g.beequipDragging=!1)},U.onclick=function(e){if(3!==Y){function t(){togglePollenText.innerHTML="Pollen Text: "+(g.extraInfo.enablePollenText?"On":"Off"),togglePollenText.style.color=g.extraInfo.enablePollenText?"rgb(0,150,0)":"rgb(180,0,0)",togglePollenAbv.innerHTML="Abbreviate Pollen: "+(g.extraInfo.enablePollenAbv?"On":"Off"),togglePollenAbv.style.color=g.extraInfo.enablePollenAbv?"rgb(0,150,0)":"rgb(180,0,0)"}null!==Y&&(O[Y].style.display="none"),Y=3,O[Y].style.display="block",g.itemDragging=!1,g.beequipDragging=!1,t(),document.getElementById("togglePollenText").onclick=function(){g.extraInfo.enablePollenText=!g.extraInfo.enablePollenText,t()},document.getElementById("togglePollenAbv").onclick=function(){g.extraInfo.enablePollenAbv=!g.extraInfo.enablePollenAbv,t()},document.getElementById("saveGame").onclick=function(){Li(),g.addMessage("Game Saved!")},document.getElementById("resetChar").onclick=function(){g.health=-100},document.getElementById("autoJellySettingsUntil").onclick=function(){g.autoRJSettings.until={rare:"epic",epic:"legendary",legendary:"mythic",mythic:"rare"}[g.autoRJSettings.until],autoJellySettingsUntil.innerHTML="Roll until: "+MATH.doGrammar(g.autoRJSettings.until)},document.getElementById("autoJellySettingsGifted").onclick=function(){g.autoRJSettings.gifted=!g.autoRJSettings.gifted,autoJellySettingsGifted.innerHTML="Require gifted: "+(g.autoRJSettings.gifted?"Yes":"No")}}else O[Y].style.display="none",Y=null,g.itemDragging=!1,g.beequipDragging=!1},N.onclick=function(e){4!==Y?(null!==Y&&(O[Y].style.display="none"),Y=4,O[Y].style.display="block",g.itemDragging=!1,g.beequipDragging=!1,g.beequipLookingAt=!1,g.updateBeequipPage()):(O[Y].style.display="none",Y=null,g.itemDragging=!1,g.beequipDragging=!1)};let X=new CANNON.World,Z=new CANNON.World;X.broadphase=new CANNON.SAPBroadphase(X),X.broadphase.useBoundingBoxes=!0,X.gravity.set(0,-25,0),X.quatNormalizeSkip=10,X.quatNormalizeFast=!0;let J=new CANNON.GSSolver;J.iterations=2,J.tolerance=1e5,X.solver=J,X.defaultContactMaterial.friction=0,X.defaultContactMaterial.restitution=0;let j={windShrine:{minX:65,maxX:71,minY:18,maxY:28,minZ:-24,maxZ:-18,isMachine:!0,message:"Inspect Wind Shrine",requirements:function(e){return e.extraInfo.windShrineDonate||(e.extraInfo.windShrineDonate=1),Date.now()-e.extraInfo.windShrineDonate<18e5?"The Wind Shrine is on cooldown! ("+MATH.doTime(3600-.001*(Date.now()-e.extraInfo.windShrineDonate)+"")+")":"block"===document.getElementById("shrineMenu").style.display?"You're looking at the Wind Shrine":void 0},func:function(e){document.exitPointerLock(),e.shrineIndex=0,e.updateShrineMenu()}},blender:{minX:55,maxX:62,minY:10,maxY:19,minZ:47.5,maxZ:54.5,isMachine:!0,message:"Use Blender",requirements:function(e){if("block"===document.getElementById("blenderMenu").style.display)return"You're using the Blender"},func:function(e){document.exitPointerLock(),e.blenderIndex=0,e.updateBlenderMenu()}},enter_ant_challenge:{minX:-23.5,maxX:-18.5,minY:2,maxY:10,minZ:-46.5,maxZ:-41.5,isMachine:!0,message:"Enter Ant Challenge<br>(1 Ant Pass)",requirements:function(e){if(se.antPass.amount<1)return"You need 1 ant pass to enter the Ant Challenge"},func:function(e){e.body.position.x=-21,e.body.position.y=7,e.body.position.z=-50,e.yaw=0,e.antChallenge={timer:300,score:0,pollenReq:1e3,pollenBeforeReq:e.stats.pollenFromAntField,spawnDelay:0,round:0,lawnMowerTimer:25},se.antPass.amount--,Kt.add(e.pollen*e.honeyPerPollen|0,[e.body.position.x,e.body.position.y+1.5,e.body.position.z],ae.honey,1,"⇆"),e.honey+=e.pollen*e.honeyPerPollen|0,e.pollen=0,e.addEffect("antChallenge"),e.updateInventory()}},blue_portal:{minX:-75,maxX:-71,minY:-3,maxY:3,minZ:29,maxZ:33,isMachine:!0,message:"Use Blue Teleporter",func:function(e){e.body.position.x=34.5,e.body.position.y=9.5,e.body.position.z=-23.2}},red_portal:{minX:46.75,maxX:50.75,minY:2,maxY:6,minZ:24.95,maxZ:28.95,isMachine:!0,message:"Use Red Teleporter",func:function(e){e.body.position.x=-78.5,e.body.position.y=31.5,e.body.position.z=48}},demon_killbrick:{minX:-65,maxX:-25,minY:-10,maxY:-5,minZ:-35,maxZ:-5,contactFunc:function(e){e.health=-1/0}},hive:{minX:-8.15,maxX:2.25-5.9,minY:-3.95,maxY:4.05,minZ:-6.25,maxZ:-1.75},blackBear_NPC:{minX:26.5,maxX:31.5,minY:-2,maxY:4,minZ:-2,maxZ:3},polarBear_NPC:{minX:-3.5,maxX:.5,minY:20,maxY:26,minZ:64,maxZ:68},roboBear_NPC:{minX:51,maxX:54.5,minY:0,maxY:10,minZ:38,maxZ:42},pandaBear_NPC:{minX:-39.5,maxX:-34.5,minY:3,maxY:9,minZ:44,maxZ:49},spiritBear_NPC:{minX:42.5,maxX:47.5,minY:12,maxY:25,minZ:-38,maxZ:-33},scienceBear_NPC:{minX:-76.5,maxX:-71.5,minY:20,maxY:30,minZ:47,maxZ:52},brownBear_NPC:{minX:-74,maxX:-69,minY:5,maxY:10,minZ:7,maxZ:12},datsocool_NPC:{minX:-25.5,maxX:-20.5,minY:30,maxY:39,minZ:122.5,maxZ:127.5},hbpencil_NPC:{minX:-27.5,maxX:-22.5,minY:47.5,maxY:56.5,minZ:122.5,maxZ:127.5},giftedBuckoBee_NPC:{minX:-78,maxX:-73,minY:7,maxY:16,minZ:31.5,maxZ:36.5},giftedRileyBee_NPC:{minX:46.25,maxX:51.25,minY:12,maxY:18,minZ:19.5,maxZ:24.5},honeyBee_NPC:{minX:49,maxX:54,minY:12,maxY:22,minZ:87,maxZ:92},gummyBear_NPC:{minX:-2.5,maxX:2.5,minY:1e3,maxY:1006,minZ:995.5,maxZ:1000.5},antChallengeSign_NPC:{minX:-16.5,maxX:-11.5,minY:2,maxY:6,minZ:-46.5,maxZ:-41.5},motherBear_NPC:{minX:15,maxX:20,minY:-2,maxY:3,minZ:34.5,maxZ:39.5},dapperBear_NPC:{minX:-106.5,maxX:-101.5,minY:20,maxY:27,minZ:110.5,maxZ:115.5},noob_shop:{minX:-50,maxX:-22.5,minY:-2,maxY:11,minZ:-9,maxZ:6},pro_shop:{minX:-51.6,maxX:-37.4,minY:10,maxY:18,minZ:78.5,maxZ:92.6},top_shop:{minX:-17.4,maxX:-5.7,minY:31,maxY:39,minZ:68.4,maxZ:79.7},blueHQ_shop:{minX:-76.5,maxX:-61.5,minY:-2,maxY:4,minZ:34,maxZ:42},redHQ_shop:{minX:36,maxX:46,minY:-2,maxY:7,minZ:21,maxZ:30},ace_shop:{minX:64,maxX:75,minY:8,maxY:16,minZ:30,maxZ:70},petal_shop:{minX:61,maxX:75,minY:0,maxY:15,minZ:-50,maxZ:-32},planter_shop:{minX:-109,maxX:-96,minY:0,maxY:30,minZ:104,maxZ:110.5},beequip_shop:{minX:-109,maxX:-96,minY:0,maxY:30,minZ:115.5,maxZ:122},ticketTent_shop:{minX:26.5,maxX:35.5,minY:0,maxY:5,minZ:-25,maxZ:-15},robo_shop:{minX:55.5,maxX:62,minY:7,maxY:13,minZ:36.5,maxZ:45},treat_shop:{minX:20.5,maxX:26.5,minY:-2,maxY:2,minZ:36,maxZ:42},royalJelly_shop:{minX:30.5,maxX:36.5,minY:7,maxY:13,minZ:46.75,maxZ:52.75},basicEgg_shop:{minX:7,maxX:13,minY:-2,maxY:3,minZ:10.5,maxZ:16.5},stinger_shop:{minX:-28.4,maxX:-22.4,minY:-2,maxY:8,minZ:-39,maxZ:-33},magicBean_shop:{minX:-87.5,maxX:-81.5,minY:15,maxY:23,minZ:58,maxZ:64},ticket_shop:{minX:-14.75,maxX:-8.75,minY:30,maxY:37,minZ:85.25,maxZ:91.25},gumdrops_shop:{minX:-31.5,maxX:-25.5,minY:0,maxY:6,minZ:43,maxZ:49},diamond_shop:{minX:27,maxX:31,minY:27,maxY:32,minZ:90,maxZ:93},demon_shop:{minX:-62,maxX:-57,minY:0,maxY:5,minZ:-14.5,maxZ:-8.5},lair_shop:{minX:-20,maxX:20,minY:990,maxY:1010,minZ:1003,maxZ:1011},coconutCave_shop:{minX:6,maxX:15,minY:10,maxY:18,minZ:-42,maxZ:-30},sprinkler_shop:{minX:45.925,maxX:53.425,minY:10,maxY:18,minZ:52.575,maxZ:65.575},red_cannon:{isMachine:!0,minX:27,maxX:33,minY:0,maxY:5,minZ:-12,maxZ:-6,message:"Use Red Cannon",func:function(e){e.stats.timesUsingTheRedCannon++,e.body.position.x=29,e.body.position.y=3,e.body.position.z=-6,e.body.velocity.x=-17,e.body.velocity.y=52,e.body.velocity.z=26,e.removeAirFrictionUntilGrounded=!0,e.isGliding=!1,e.grounded=!1,e.updateGear()},requirements:function(e){if(e.discoveredBees.length<25)return"Discover 25 bee types to use the Red Cannon!"}},yellow_cannon:{isMachine:!0,minX:-70,maxX:-64,minY:22,maxY:26,minZ:46,maxZ:52,message:"Use Yellow Cannon",func:function(e){e.stats.timesUsingTheYellowCannon++,e.body.position.x=-67,e.body.position.y=24,e.body.position.z=49,e.body.velocity.x=31,e.body.velocity.y=20,e.body.velocity.z=-19,e.removeAirFrictionUntilGrounded=!0,e.isGliding=!1,e.grounded=!1,e.updateGear()},requirements:function(e){if(e.discoveredBees.length<12)return"Discover 12 bee types to use the Yellow Cannon!"}},blue_cannon:{isMachine:!0,minX:32.5,maxX:40.5,minY:10,maxY:16,minZ:53.25,maxZ:61.25,message:"Use Blue Cannon",func:function(e){e.stats.timesUsingTheBlueCannon++,e.body.position.x=36.5,e.body.position.y=13,e.body.position.z=58,e.body.velocity.x=-35,e.body.velocity.y=25,e.body.velocity.z=-18,e.removeAirFrictionUntilGrounded=!0,e.isGliding=!1,e.grounded=!1,e.updateGear()},requirements:function(e){if(e.discoveredBees.length<16)return"Discover 16 bee types to use the Blue Cannon!"}},slingshot:{isMachine:!0,minX:-27.5,maxX:-22.5,minY:1,maxY:8,minZ:22,maxZ:27,message:"Use Slingshot",func:function(e){e.stats.timesUsingTheSlingshot++,e.body.position.x=-25,e.body.position.y=3.5,e.body.position.z=24.5,e.body.velocity.x=-12,e.body.velocity.y=32,e.body.velocity.z=21,e.removeAirFrictionUntilGrounded=!0,e.isGliding=!1,e.grounded=!1,e.updateGear()},requirements:function(e){if(e.discoveredBees.length<10)return"Discover 10 bee types to use the Slingshot!"}},mountain_instant_converter:{isMachine:!0,requirements:function(e){return e.pollen<1?"You must have pollen to use the instant converter!":se.ticket.amount<1?"You need 1 ticket to use the instant converter!":void 0},minX:-43,maxX:-35,minY:30,maxY:37,minZ:84,maxZ:92,message:"Use Instant Converter<br>(1 Ticket)",func:function(e){Kt.add(e.pollen,[e.body.position.x,e.body.position.y+1,e.body.position.z],ae.honey,1,"⇆"),e.honey+=o.ceil(e.pollen*e.honeyPerPollen),e.pollen=0,se.ticket.amount--,e.updateInventory()}},pineapple_instant_converter:{isMachine:!0,requirements:function(e){return e.pollen<1?"You must have pollen to use the instant converter!":se.ticket.amount<1?"You need 1 ticket to use the instant converter!":void 0},minX:-72,maxX:-66,minY:11,maxY:17,minZ:60,maxZ:65,message:"Use Instant Converter<br>(1 Ticket)",func:function(e){Kt.add(e.pollen,[e.body.position.x,e.body.position.y+1,e.body.position.z],ae.honey,1,"⇆"),e.honey+=o.ceil(e.pollen*e.honeyPerPollen),e.pollen=0,se.ticket.amount--,e.updateInventory()}},sunflower_instant_converter:{isMachine:!0,requirements:function(e){return e.pollen<1?"You must have pollen to use the instant converter!":se.ticket.amount<1?"You need 1 ticket to use the instant converter!":void 0},minX:8,maxX:13.5,minY:-4,maxY:2,minZ:17,maxZ:23,message:"Use Instant Converter<br>(1 Ticket)",func:function(e){Kt.add(e.pollen,[e.body.position.x,e.body.position.y+1,e.body.position.z],ae.honey,1,"⇆"),e.honey+=o.ceil(e.pollen*e.honeyPerPollen),e.pollen=0,se.ticket.amount--,e.updateInventory()}},moon_amulet_generator:{isMachine:!0,requirements:function(e){if(se.moonCharm.amount<50)return"You need 50 moon charms to create a moon amulet!"},minX:-17.25,maxX:-12.75,minY:11,maxY:18,minZ:58.5,maxZ:62.5,message:"Generate Moon Amulet<br>(50 Moon Charms)",func:function(e){se.moonCharm.amount-=50,e.updateInventory();let t=[];e.stats.moonAmulets++,e.stats.moonAmulets<25?e.addMessage("🌙 The moon seems to grow brighter... 🌙"):e.addMessage("🌙 The moon seems happy! 🌙"),t.push(("*"+o.min(1+.02*e.stats.moonAmulets,1.5).toFixed(2)+" capacityMultiplier").replace("0 "," "),"*"+o.min(1+.03*e.stats.moonAmulets,1.75).toFixed(2)+" convertRate");let i=o.min(e.stats.moonAmulets,25);o.random()<.2+.01*i&&t.push("*"+MATH.random(1.01+.001*i,1.02+.002*i).toFixed(2)+" nectarMultiplier"),o.random()<.25+.0125*i&&t.push("*"+MATH.random(1.02+.01*i,1.08+.02*i).toFixed(2)+" lootLuck"),o.random()<.6?t.push("*"+MATH.random(1.225,1.15+.014*i).toFixed(2)+" whitePollen"):t.push("*"+MATH.random(1.03,1.1).toFixed(2)+" bondFromTreats"),t.push(...MATH.selectFromArray(["*"+MATH.random(1.01+.001*i,1.04+.001*i).toFixed(2)+" POLLEN","*"+MATH.random(1.07+.005*i,1.15+.005*i).toFixed(2)+" pollenFromTools","*"+MATH.random(1.07+.006*i,1.15+.006*i).toFixed(2)+" pollenFromBees","+"+MATH.random(.01+.003*i,.04+.0036*i).toFixed(2)+" INSTANT_CONVERSION","*"+MATH.random(1.01+.001*i,1.02+.001*i).toFixed(2)+" honeyPerPollen"],25===i&&o.random()<.333?2:1)),e.showGeneratedAmulet("moonAmulet",t)}},bronze_star_amulet_generator:{isMachine:!0,requirements:function(e){return e.discoveredGifteds.length<5?"Discover 5 gifted bee types to generate a Bronze Star Amulet!":e.honey<25e6?"You need 25M honey to generate a Bronze Star Amulet!":void 0},minX:-35.5-3*o.sin(.79587048)-12.5*o.cos(.79587048)-3,maxX:-35.5-3*o.sin(.79587048)-12.5*o.cos(.79587048)+3,minY:11,maxY:50,minZ:3*o.cos(.79587048)-2.75-12.5*o.sin(.79587048)-3,maxZ:3*o.cos(.79587048)-2.75-12.5*o.sin(.79587048)+3,message:"Generate a Bronze Star Amulet(25M Honey)",func:function(e){e.honey-=25e6,e.addMessage("-25,000,000 Honey");let t=["*1.25 capacityMultiplier"];t.push(...MATH.selectFromArray(["*"+MATH.random(1.05,1.15).toFixed(2)+" POLLEN","*"+MATH.random(1.15,1.3).toFixed(2)+" redPollen","*"+MATH.random(1.15,1.3).toFixed(2)+" bluePollen","*"+MATH.random(1.15,1.3).toFixed(2)+" whitePollen","*"+MATH.random(1.15,1.3).toFixed(2)+" pollenFromBees","+"+MATH.random(.03,.08).toFixed(2)+" INSTANT_CONVERSION","*"+MATH.random(1.1,1.2).toFixed(2)+" convertRate","+"+MATH.random(.01,.05).toFixed(2)+" beeAbilityRate","+"+MATH.random(.01,.05).toFixed(2)+" criticalChance"],2)),e.showGeneratedAmulet("bronzeStarAmulet",t)}},silver_star_amulet_generator:{isMachine:!0,requirements:function(e){return e.discoveredGifteds.length<10?"Discover 10 gifted bee types to generate a Silver Star Amulet!":e.honey<5e7?"You need 50M honey to generate a Silver Star Amulet!":void 0},minX:6*o.sin(.79587048)-35.5-19.5*o.cos(.79587048)-3,maxX:6*o.sin(.79587048)-35.5-19.5*o.cos(.79587048)+3,minY:11,maxY:50,minZ:-2.75-6*o.cos(.79587048)-19.5*o.sin(.79587048)-3,maxZ:-2.75-6*o.cos(.79587048)-19.5*o.sin(.79587048)+3,message:"Generate a Silver Star Amulet(50M Honey)",func:function(e){e.honey-=5e7,e.addMessage("-50,000,000 Honey");let t=["*1.5 capacityMultiplier"];t.push(...MATH.selectFromArray(["*"+MATH.random(1.05,1.15).toFixed(2)+" POLLEN","*"+MATH.random(1.15,1.4).toFixed(2)+" redPollen","*"+MATH.random(1.15,1.4).toFixed(2)+" bluePollen","*"+MATH.random(1.15,1.4).toFixed(2)+" whitePollen","*"+MATH.random(1.15,1.4).toFixed(2)+" pollenFromBees","+"+MATH.random(.03,.1).toFixed(2)+" INSTANT_CONVERSION","*"+MATH.random(1.1,1.25).toFixed(2)+" convertRate","+"+MATH.random(.01,.05).toFixed(2)+" beeAbilityRate","+"+MATH.random(.01,.05).toFixed(2)+" criticalChance"],3)),e.showGeneratedAmulet("silverStarAmulet",t)}},gold_star_amulet_generator:{isMachine:!0,requirements:function(e){return e.discoveredGifteds.length<20?"Discover 20 gifted bee types to generate a Gold Star Amulet!":e.honey<25e7?"You need 250M honey to generate a Gold Star Amulet!":void 0},minX:-35.5-3*o.sin(.79587048)-26.5*o.cos(.79587048)-3,maxX:-35.5-3*o.sin(.79587048)-26.5*o.cos(.79587048)+3,minY:11,maxY:50,minZ:3*o.cos(.79587048)-2.75-26.5*o.sin(.79587048)-3,maxZ:3*o.cos(.79587048)-2.75-26.5*o.sin(.79587048)+3,message:"Generate a Gold Star Amulet(250M Honey)",func:function(e){e.honey-=25e7,e.addMessage("-250,000,000 Honey");let t=["*1.75 capacityMultiplier"];t.push(...MATH.selectFromArray(["*"+MATH.random(1.05,1.15).toFixed(2)+" POLLEN","*"+MATH.random(1.15,1.5).toFixed(2)+" redPollen","*"+MATH.random(1.15,1.5).toFixed(2)+" bluePollen","*"+MATH.random(1.15,1.5).toFixed(2)+" whitePollen","*"+MATH.random(1.15,1.5).toFixed(2)+" pollenFromBees","+"+MATH.random(.03,.1).toFixed(2)+" INSTANT_CONVERSION","*"+MATH.random(1.1,1.25).toFixed(2)+" convertRate","+"+MATH.random(.01,.05).toFixed(2)+" beeAbilityRate","+"+MATH.random(.01,.05).toFixed(2)+" criticalChance"],4)),e.showGeneratedAmulet("goldStarAmulet",t)}},diamond_star_amulet_generator:{isMachine:!0,requirements:function(e){return e.discoveredGifteds.length<30?"Discover 30 gifted bee types to generate a Diamond Star Amulet!":e.honey<1e9?"You need 1B honey to generate a Diamond Star Amulet!":void 0},minX:6*o.sin(.79587048)-35.5-33.5*o.cos(.79587048)-3,maxX:6*o.sin(.79587048)-35.5-33.5*o.cos(.79587048)+3,minY:11,maxY:50,minZ:-2.75-6*o.cos(.79587048)-33.5*o.sin(.79587048)-3,maxZ:-2.75-6*o.cos(.79587048)-33.5*o.sin(.79587048)+3,message:"Generate a Diamond Star Amulet(1B Honey)",func:function(e){e.honey-=1e9,e.addMessage("-1,000,000,000 Honey");let t=["*2 capacityMultiplier"];if(t.push(...MATH.selectFromArray(["*"+MATH.random(1.05,1.15).toFixed(2)+" POLLEN","*"+MATH.random(1.15,1.5).toFixed(2)+" redPollen","*"+MATH.random(1.15,1.5).toFixed(2)+" bluePollen","*"+MATH.random(1.15,1.5).toFixed(2)+" whitePollen","*"+MATH.random(1.15,1.5).toFixed(2)+" pollenFromBees","+"+MATH.random(.03,.1).toFixed(2)+" INSTANT_CONVERSION","*"+MATH.random(1.1,1.3).toFixed(2)+" convertRate","+"+MATH.random(.01,.05).toFixed(2)+" beeAbilityRate","+"+MATH.random(.01,.05).toFixed(2)+" criticalChance"],5)),o.random()<.5){let e=["guidingStarPassive","starShowerPassive"];t.push("P "+e[o.random()*e.length|0])}e.showGeneratedAmulet("diamondStarAmulet",t)}},supreme_star_amulet_generator:{isMachine:!0,requirements:function(e){return e.discoveredGifteds.length<40?"Discover 40 gifted bee types to generate a Supreme Star Amulet!":e.honey<5e9?"You need 5B honey to generate a Supreme Star Amulet!":void 0},minX:1.5*o.sin(.79587048)-35.5-43*o.cos(.79587048)-3,maxX:1.5*o.sin(.79587048)-35.5-43*o.cos(.79587048)+3,minY:11,maxY:50,minZ:-2.75-1.5*o.cos(.79587048)-43*o.sin(.79587048)-3,maxZ:-2.75-1.5*o.cos(.79587048)-43*o.sin(.79587048)+3,message:"Generate a Supreme Star Amulet(5B Honey)",func:function(e){e.honey-=5e9,e.addMessage("-5,000,000,000 Honey");let t=["*2.5 capacityMultiplier"];t.push(...MATH.selectFromArray(["*"+MATH.random(1.05,1.2).toFixed(2)+" POLLEN","*"+MATH.random(1.2,1.7).toFixed(2)+" redPollen","*"+MATH.random(1.2,1.7).toFixed(2)+" bluePollen","*"+MATH.random(1.2,1.7).toFixed(2)+" whitePollen","*"+MATH.random(1.2,1.7).toFixed(2)+" pollenFromBees","+"+MATH.random(.03,.15).toFixed(2)+" INSTANT_CONVERSION","*"+MATH.random(1.1,1.4).toFixed(2)+" convertRate","+"+MATH.random(.01,.08).toFixed(2)+" beeAbilityRate","+"+MATH.random(.01,.08).toFixed(2)+" criticalChance"],5));let i=["guidingStarPassive","starShowerPassive","popStarPassive","scorchingStarPassive","gummyStarPassive","starSawPassive"];if(i=i[o.random()*i.length|0],t.push("P "+i),o.random()<.3333){let e=["guidingStarPassive","starShowerPassive","popStarPassive","scorchingStarPassive","gummyStarPassive","starSawPassive"];e.splice(e.indexOf(i),1),t.push("P "+e[o.random()*e.length|0])}e.showGeneratedAmulet("supremeStarAmulet",t)}},strawberry_dispenser:{isMachine:!0,requirements:function(e){if(e.extraInfo.strawberryDispenser||(e.extraInfo.strawberryDispenser=1),Date.now()-e.extraInfo.strawberryDispenser<36e5)return"The Strawberry Dispenser is on cooldown! ("+MATH.doTime(3600-.001*(Date.now()-e.extraInfo.strawberryDispenser)+"")+")"},minX:42,maxX:46,minY:7.5,maxY:10.5,minZ:9,maxZ:14,message:"Use Strawberry Dispenser",func:function(e){e.extraInfo.strawberryDispenser=o.floor(Date.now());let t=0;for(let e in le.bees)"red"===K[le.bees[e].type].color&&t++;se.strawberry.amount+=t+3,e.addEffect("haste",!1,!1,void 0,5),e.addEffect("redBoost",!1,!1,void 0,10),e.honey+=1e3*t,e.updateInventory(),e.addMessage("+"+MATH.addCommas(1e3*t+"")+" Honey"),e.addMessage("+"+MATH.addCommas(t+3+"")+" Strawberries"),e.addMessage('Activated x10 "Red Boost"'),e.addMessage('Activated x5 "Haste"')}},blueberry_dispenser:{isMachine:!0,requirements:function(e){if(e.extraInfo.blueberryDispenser||(e.extraInfo.blueberryDispenser=1),Date.now()-e.extraInfo.blueberryDispenser<36e5)return"The Blueberry Dispenser is on cooldown! ("+MATH.doTime(3600-.001*(Date.now()-e.extraInfo.blueberryDispenser)+"")+")"},minX:-69,maxX:-65,minY:-2,maxY:1,minZ:29.25,maxZ:34.25,message:"Use Blueberry Dispenser",func:function(e){e.extraInfo.blueberryDispenser=o.floor(Date.now());let t=0;for(let e in le.bees)"blue"===K[le.bees[e].type].color&&t++;se.blueberry.amount+=t+3,e.addEffect("haste",!1,!1,void 0,5),e.addEffect("blueBoost",!1,!1,void 0,10),e.honey+=1e3*t,e.updateInventory(),e.addMessage("+"+MATH.addCommas(1e3*t+"")+" Honey"),e.addMessage("+"+MATH.addCommas(t+3+"")+" Blueberries"),e.addMessage('Activated x10 "Blue Boost"'),e.addMessage('Activated x5 "Haste"')}},treat_dispenser:{isMachine:!0,requirements:function(e){if(e.extraInfo.treatDispenser||(e.extraInfo.treatDispenser=1),Date.now()-e.extraInfo.treatDispenser<36e5)return"The Treat Dispenser is on cooldown! ("+MATH.doTime(3600-.001*(Date.now()-e.extraInfo.treatDispenser)+"")+")"},minX:-54.5,maxX:-50.5,minY:12,maxY:15,minZ:72.75,maxZ:76.75,message:"Use Treat Dispenser",func:function(e){e.extraInfo.treatDispenser=o.floor(Date.now());let t=0;for(let e in le.bees)"white"===K[le.bees[e].type].color&&t++;se.treat.amount+=4*le.bees.length+10,se.pineapple.amount+=t+3,e.addEffect("haste",!1,!1,void 0,5),e.honey+=250*t,e.updateInventory(),e.addMessage("+"+MATH.addCommas(250*t+"")+" Honey"),e.addMessage("+"+MATH.addCommas(4*le.bees.length+10+"")+" Treats"),e.addMessage("+"+MATH.addCommas(t+3+"")+" Pineapples"),e.addMessage('Activated x5 "Haste"')}},honey_dispenser:{isMachine:!0,requirements:function(e){if(e.extraInfo.honeyDispenser||(e.extraInfo.honeyDispenser=1),Date.now()-e.extraInfo.honeyDispenser<36e5)return"The Honey Dispenser is on cooldown! ("+MATH.doTime(3600-.001*(Date.now()-e.extraInfo.honeyDispenser)+"")+")"},minX:-21.5,maxX:-17.5,minY:-2,maxY:1,minZ:-8.5,maxZ:-4.5,message:"Use Honey Dispenser",func:function(e){e.extraInfo.honeyDispenser=o.floor(Date.now()),e.honey+=le.bees.length*le.bees.length*le.bees.length+100,e.addEffect("haste",!1,!1,void 0,5),e.addMessage("+"+MATH.addCommas(le.bees.length*le.bees.length*le.bees.length+100+"")+" Honey"),e.addMessage('Activated x5 "Haste"')}},scam_dispenser:{isMachine:!0,requirements:function(e){if(se.ticket.amount<6)return"You need 6 tickets to buy a Royal Jelly!"},minX:-29.5,maxX:-21.5,minY:.5,maxY:3.5,minZ:7.75,maxZ:11.75,message:"Use Royal Jelly Dispenser (6 Tickets)",func:function(e){se.royalJelly.amount++,se.ticket.amount-=6,e.addEffect("haste",!1,!1,void 0,10),e.updateInventory(),e.addMessage("Congrats you got scammed! 6 tickets is a big waste"),e.addMessage("-6 Tickets"),e.addMessage("+1 Royal Jelly"),e.addMessage('Activated x10 "Haste"')}},glue_dispenser:{isMachine:!0,requirements:function(e){if(e.extraInfo.glueDispenser||(e.extraInfo.glueDispenser=1),Date.now()-e.extraInfo.glueDispenser<54e6)return"The Glue Dispenser is on cooldown! ("+MATH.doTime(54e3-.001*(Date.now()-e.extraInfo.glueDispenser)+"")+")"},minX:-2,maxX:2,minY:-999.75,maxY:1002.75,minZ:1013,maxZ:1018,message:"Use Glue Dispenser",func:function(e){e.extraInfo.glueDispenser=o.floor(Date.now()),se.glue.amount+=3,se.gumdrops.amount+=10,e.updateInventory(),e.addMessage("+3 Glues"),e.addMessage("+10 Gumdrops")}},antPass_dispenser:{isMachine:!0,requirements:function(e){if(e.extraInfo.antPassDispenser||(e.extraInfo.antPassDispenser=1),Date.now()-e.extraInfo.antPassDispenser<12e5)return"The Ant Pass Dispenser is on cooldown! ("+MATH.doTime(1200-.001*(Date.now()-e.extraInfo.antPassDispenser)+"")+")"},minX:-31.5,maxX:-25.5,minY:0,maxY:8,minZ:-46,maxZ:-40,message:"Use Ant Pass Dispenser",func:function(e){e.extraInfo.antPassDispenser=o.floor(Date.now()),se.antPass.amount++,e.updateInventory(),e.addMessage("+1 Ant Pass")}},giftedRoyalJelly_dispenser:{isMachine:!0,requirements:function(e){if(e.extraInfo.giftedRoyalJellyDispenser||(e.extraInfo.giftedRoyalJellyDispenser=1),Date.now()-e.extraInfo.giftedRoyalJellyDispenser<72e5)return"The Gifted Royal Jelly Dispenser is on cooldown! ("+MATH.doTime(7200-.001*(Date.now()-e.extraInfo.giftedRoyalJellyDispenser)+"")+")"},minX:-39.35,maxX:-36.35,minY:10,maxY:16,minZ:-14.75,maxZ:-11.75,message:"Claim 1 Royal Jelly per Gifted Bee You Own",func:function(e){e.extraInfo.giftedRoyalJellyDispenser=o.floor(Date.now());let t=0;for(let e in le.bees)le.bees[e].gifted&&t++;se.royalJelly.amount+=t,e.updateInventory(),e.addMessage("+"+t+" Royal Jelly")}},gummyBee_tame:{isMachine:!0,requirements:function(e){return se.gummyBeeEgg.amount?"You already own a Gummy Bee!":se.gumdrops.amount<2500?"You need 2,500 gumdrops to form a Gummy Bee!":void 0},minX:-11.5,maxX:-5.5,minY:12,maxY:18,minZ:-43,maxZ:-37,message:"Combine 2,500 to form a Gummy Bee",func:function(e){se.gumdrops.amount-=2500,se.gummyBeeEgg.amount++,e.updateInventory(),e.addMessage("🎉 You formed a Gummy Bee! 🎉",[210,30,210]),e.addMessage("-2,500 Gumdrops"),e.addMessage("+1 Gummy Bee Egg")},contactFunc:function(e){(!e.lastGummyBeeMessage||T-e.lastGummyBeeMessage>3)&&(e.lastGummyBeeMessage=T,e.addMessage("Gummy Bee wants Gumdrops!",[0,200,100]))}},viciousBee_tame:{isMachine:!0,requirements:function(e){return se.viciousBeeEgg.amount?"You already own a Vicious Bee!":se.stinger.amount<250?"Turn in 250 stingers to claim a Vicious Bee!":void 0},minX:-1,maxX:5,minY:2,maxY:9,minZ:57,maxZ:63,message:"Turn in 250 stingers to claim a Vicious Bee",func:function(e){se.stinger.amount-=250,se.viciousBeeEgg.amount++,e.updateInventory(),e.addMessage("🎉 You claimed a Vicious Bee! 🎉",[0,0,0]),e.addMessage("-250 Stingers"),e.addMessage("+1 Vicious Bee Egg")}},sproutSummoner:{isMachine:!0,requirements:function(e){if(e.extraInfo.sproutSummoner||(e.extraInfo.sproutSummoner=1),Date.now()-e.extraInfo.sproutSummoner<72e5)return"The Sprout Summoner is on cooldown! ("+MATH.doTime(7200-.001*(Date.now()-e.extraInfo.sproutSummoner)+"")+")"},minX:29.3,maxX:32.7,minY:2,maxY:8,minZ:8.8,maxZ:12.2,message:"Use Sprout Summoner",func:function(e){e.extraInfo.sproutSummoner=o.floor(Date.now());let t=[];for(let e in ti)"AntField"!==e&&t.push(e);t=t[o.random()*t.length|0];let i=["rare","epic","gummy","legendary","supreme"];i=i[o.pow(o.random(),3)*o.pow(o.random(),3)*i.length|0],o.random()<.6&&e.isNight<.9&&(i="moon"),e.addMessage("You planted a "+MATH.doGrammar(i)+" Sprout!",{rare:[130,130,130],epic:[210,170,0],legendary:[0,190,220],supreme:[30,220,90],gummy:[230,70,230],moon:[140,200,230]}[i]),le.mobs.push(new st(t,i))}},fieldBooster:{isMachine:!0,requirements:function(e){if(e.extraInfo.fieldBooster||(e.extraInfo.fieldBooster=1),Date.now()-e.extraInfo.fieldBooster<18e5)return"The Field Booster is on cooldown! ("+MATH.doTime(1800-.001*(Date.now()-e.extraInfo.fieldBooster)+"")+")"},minX:-9.5,maxX:-6.5,minY:32.5,maxY:36,minZ:82,maxZ:85,message:"Use Field Booster",func:function(e){e.extraInfo.fieldBooster=o.floor(Date.now());let t=["3SunflowerField","3DandelionField","2SpiderField","2CloverField","2PineapplePatch","1PumpkinPatch","1CactusField"];t=t[o.random()*t.length|0];let i=t[0];t=t.substring(1,t.length),e.addEffect(t[0].toLowerCase()+t.substring(1,t.length)+"Boost",!1,!1,void 0,i),e.addMessage("Activated x"+i+' "'+MATH.doGrammar(t[0].toLowerCase()+t.substring(1,t.length))+' Boost"')}},redFieldBooster:{isMachine:!0,requirements:function(e){if(e.extraInfo.redFieldBooster||(e.extraInfo.redFieldBooster=1),Date.now()-e.extraInfo.redFieldBooster<18e5)return"The Red Field Booster is on cooldown! ("+MATH.doTime(1800-.001*(Date.now()-e.extraInfo.redFieldBooster)+"")+")"},minX:40.5,maxX:43.5,minY:1.5,maxY:5,minZ:15.5,maxZ:18.5,message:"Use Red Field Booster",func:function(e){e.extraInfo.redFieldBooster=o.floor(Date.now());let t=["3MushroomField","2StrawberryField","1RoseField"];t=t[o.random()*t.length|0];let i=t[0];t=t.substring(1,t.length),e.addEffect(t[0].toLowerCase()+t.substring(1,t.length)+"Boost",!1,!1,void 0,i),e.addMessage("Activated x"+i+' "'+MATH.doGrammar(t[0].toLowerCase()+t.substring(1,t.length))+' Boost"')}},blueFieldBooster:{isMachine:!0,requirements:function(e){if(e.extraInfo.blueFieldBooster||(e.extraInfo.blueFieldBooster=1),Date.now()-e.extraInfo.blueFieldBooster<18e5)return"The Blue Field Booster is on cooldown! ("+MATH.doTime(1800-.001*(Date.now()-e.extraInfo.blueFieldBooster)+"")+")"},minX:-66.5,maxX:-63.5,minY:8,maxY:11.5,minZ:36,maxZ:39,message:"Use Blue Field Booster",func:function(e){e.extraInfo.blueFieldBooster=o.floor(Date.now());let t=["3BlueFlowerField","2BambooField","1PineTreeForest"];t=t[o.random()*t.length|0];let i=t[0];t=t.substring(1,t.length),e.addEffect(t[0].toLowerCase()+t.substring(1,t.length)+"Boost",!1,!1,void 0,i),e.addMessage("Activated x"+i+' "'+MATH.doGrammar(t[0].toLowerCase()+t.substring(1,t.length))+' Boost"')}},enterTunnel:{isMachine:!0,minX:-70.8,maxX:-68.8,minY:17,maxY:20,minZ:58,maxZ:60,message:"Enter Mysterious Hole",func:function(e){e.body.position.set(-3,-23,45),e.body.velocity.set(0,0,0)}},exitTunnel:{isMachine:!0,minX:-35.17,maxX:-32.83,minY:-25,maxY:-22,minZ:43.83,maxZ:46.17,message:"Exit Tunnel",func:function(e){e.body.position.set(10.3,3.9,18.75),e.body.velocity.set(0,11,0)}}};I&&(j.become_attack_hive={isMachine:!0,minX:22,maxX:24,minY:-2,maxY:5,minZ:1,maxZ:3,message:"become super op attack hive",func:function(e){e.currentGear={tool:"darkScythe",boots:"gummyBoots",belt:"petalBelt",backpack:"coconutCanister",mask:"demonMask",leftGuard:"crimsonGuard",rightGuard:"cobaltGuard",glider:"glider",supremeStarAmulet:"*2.5 capacityMultiplier,*1.5 convertRate,*1.1 redPollen,*1.1 bluePollen,*1.1 whitePollen,*1.6 redPollen,+0.1 instantBlueConversion,+0.1 instantWhiteConversion,+0.1 instantRedConversion,+0.05 criticalChance,P scorchingStarPassive,P starSawPassive",sprinkler:"superSaturator",beequips:[]},e.updateGear(),e.addEffect("superSmoothieBuff"),e.addEffect("comfortingNectar",1),e.addEffect("refreshingNectar",1),e.addEffect("invigoratingNectar",1),e.addEffect("motivatingNectar",1),e.addEffect("satisfyingNectar",1),e.hive=[[]],e.addSlot("basic"),e.addSlot("looker"),e.addSlot("rage"),e.addSlot("commander"),e.addSlot("brave"),e.addSlot("ninja"),e.addSlot("shy"),e.addSlot("music"),e.addSlot("music"),e.addSlot("music"),e.addSlot("music"),e.addSlot("vicious"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("digital"),e.updateHive()}},j.become_mid_hive={minX:22,maxX:24,minY:-2,maxY:5,minZ:9,maxZ:11,isMachine:!0,message:"become midgame hive",func:function(e){e.currentGear={tool:"petalWand",boots:"mondoBoots",belt:"honeycombBelt",backpack:"porcelainOHive",mask:"honeyMask",leftGuard:"rileyGuard",rightGuard:"buckoGuard",glider:"glider",sprinkler:"superSaturator",beequips:[]},e.updateGear(),e.hive=[[]],e.addSlot("basic"),e.addSlot("looker"),e.addSlot("bomber"),e.addSlot("rascal"),e.addSlot("riley"),e.addSlot("cool"),e.addSlot("bumble"),e.addSlot("bucko"),e.addSlot("demo"),e.addSlot("commander"),e.addSlot("stubborn"),e.addSlot("hasty"),e.addSlot("rad"),e.addSlot("shocked"),e.addSlot("shocked",0),e.addSlot("exhausted"),e.addSlot("baby"),e.addSlot("baby",0),e.addSlot("baby",0),e.addSlot("crimson",0),e.addSlot("gummy",0),e.addSlot("cobalt",0),e.addSlot("fire"),e.addSlot("bubble"),e.addSlot("fire",0),e.addSlot("bubble",0),e.addSlot("frosty",0),e.addSlot("frosty"),e.addSlot("shy"),e.addSlot("tadpole",0),e.addSlot("ninja"),e.addSlot("tabby"),e.addSlot("rage",0),e.addSlot("rage",0),e.addSlot("rage"),e.addSlot("music"),e.addSlot("music",0),e.addSlot("music"),e.addSlot("lion"),e.addSlot("lion",0),e.addSlot("shy",0),e.addSlot("demon",0),e.addSlot("diamond"),e.addSlot("carpenter",0),e.addSlot("carpenter",0),e.addSlot("carpenter"),e.updateHive()}},j.become_red_hive={isMachine:!0,minX:22,maxX:24,minY:-2,maxY:5,minZ:3,maxZ:5,message:"become red hive",func:function(e){e.currentGear={tool:"darkScythe",boots:"gummyBoots",belt:"petalBelt",backpack:"coconutCanister",mask:"demonMask",leftGuard:"crimsonGuard",rightGuard:"cobaltGuard",glider:"glider",supremeStarAmulet:"*2.5 capacityMultiplier,*1.5 convertRate,*1.1 redPollen,*1.1 bluePollen,*1.1 whitePollen,*1.6 redPollen,+0.1 instantBlueConversion,+0.1 instantWhiteConversion,+0.1 instantRedConversion,+0.05 criticalChance,P scorchingStarPassive,P starSawPassive",sprinkler:"superSaturator",beequips:[]},e.updateGear(),e.addEffect("superSmoothieBuff"),e.addEffect("comfortingNectar",1),e.addEffect("refreshingNectar",1),e.addEffect("invigoratingNectar",1),e.addEffect("motivatingNectar",1),e.addEffect("satisfyingNectar",1),e.hive=[[]],e.addSlot("basic"),e.addSlot("looker"),e.addSlot("fire"),e.addSlot("rage"),e.addSlot("rad"),e.addSlot("rascal"),e.addSlot("commander"),e.addSlot("riley"),e.addSlot("shy"),e.addSlot("brave"),e.addSlot("bear"),e.addSlot("festive"),e.addSlot("windy"),e.addSlot("tabby"),e.addSlot("hasty"),e.addSlot("fuzzy"),e.addSlot("music"),e.addSlot("music"),e.addSlot("music"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("gummy"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("carpenter"),e.addSlot("carpenter"),e.addSlot("carpenter"),e.addSlot("photon"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("spicy"),e.addSlot("crimson"),e.addSlot("digital"),e.updateHive()}},j.become_blue_hive={isMachine:!0,minX:22,maxX:24,minY:-2,maxY:5,minZ:5,maxZ:7,message:"become blue hive",func:function(e){e.currentGear={tool:"tidePopper",boots:"gummyBoots",belt:"petalBelt",backpack:"coconutCanister",mask:"diamondMask",leftGuard:"crimsonGuard",rightGuard:"cobaltGuard",glider:"glider",supremeStarAmulet:"*2.5 capacityMultiplier,*1.5 convertRate,*1.1 redPollen,*1.1 bluePollen,*1.1 whitePollen,*1.6 bluePollen,+0.1 instantBlueConversion,+0.1 instantWhiteConversion,+0.1 instantRedConversion,+0.05 criticalChance,P popStarPassive,P starShowerPassive",sprinkler:"superSaturator",beequips:[]},e.updateGear(),e.addEffect("superSmoothieBuff"),e.addEffect("comfortingNectar",1),e.addEffect("refreshingNectar",1),e.addEffect("invigoratingNectar",1),e.addEffect("motivatingNectar",1),e.addEffect("satisfyingNectar",1),e.hive=[[]],e.addSlot("basic"),e.addSlot("looker"),e.addSlot("bomber"),e.addSlot("bubble"),e.addSlot("bumble"),e.addSlot("bucko"),e.addSlot("cool"),e.addSlot("frosty"),e.addSlot("commander"),e.addSlot("windy"),e.addSlot("tabby"),e.addSlot("diamond"),e.addSlot("hasty"),e.addSlot("fuzzy"),e.addSlot("ninja"),e.addSlot("vicious"),e.addSlot("bear"),e.addSlot("music"),e.addSlot("music"),e.addSlot("music"),e.addSlot("gummy"),e.addSlot("honey"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("buoyant"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("digital"),e.updateHive(),e.addEffect("balloonBlessing",!1,50),e.addEffect("tideBlessing",1),e.addEffect("bubbleBloat",1)}},j.become_white_hive={isMachine:!0,minX:22,maxX:24,minY:-2,maxY:5,minZ:7,maxZ:9,message:"become white hive",func:function(e){e.currentGear={tool:"gummyBaller",boots:"gummyBoots",belt:"petalBelt",backpack:"coconutCanister",mask:"gummyMask",leftGuard:"crimsonGuard",rightGuard:"cobaltGuard",glider:"glider",supremeStarAmulet:"*2.5 capacityMultiplier,*1.5 convertRate,*1.1 redPollen,*1.1 bluePollen,*1.1 whitePollen,*1.6 whitePollen,+0.1 instantBlueConversion,+0.1 instantWhiteConversion,+0.1 instantRedConversion,+0.05 criticalChance,P gummyStarPassive,P starSawPassive",sprinkler:"superSaturator",beequips:[]},e.updateGear(),e.addEffect("superSmoothieBuff"),e.addEffect("comfortingNectar",1),e.addEffect("refreshingNectar",1),e.addEffect("invigoratingNectar",1),e.addEffect("motivatingNectar",1),e.addEffect("satisfyingNectar",1),e.hive=[[]],e.addSlot("basic"),e.addSlot("bomber"),e.addSlot("looker"),e.addSlot("rage"),e.addSlot("brave"),e.addSlot("windy"),e.addSlot("bear"),e.addSlot("festive"),e.addSlot("honey"),e.addSlot("commander"),e.addSlot("shocked"),e.addSlot("hasty"),e.addSlot("music"),e.addSlot("music"),e.addSlot("music"),e.addSlot("crimson"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("tadpole"),e.addSlot("lion"),e.addSlot("gummy"),e.addSlot("photon"),e.addSlot("tabby"),e.addSlot("carpenter"),e.addSlot("carpenter"),e.addSlot("carpenter"),e.addSlot("carpenter"),e.addSlot("carpenter"),e.addSlot("demo"),e.addSlot("exhausted"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("vector"),e.addSlot("fuzzy"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("precise"),e.addSlot("digital"),e.updateHive()}},j.level_and_gift_bees={minX:18,maxX:20,minY:-2,maxY:5,minZ:9,maxZ:11,isMachine:!0,message:"level all bees to lvl 20 and make gifted and get buffs",func:function(e){e.extraInfo.drives={red:50,blue:50,white:50,glitched:50,maxed:!0},e.addEffect("tabbyLove",!1,!1,void 0,250),e.addEffect("scienceEnhancement",!1,!1,void 0,25),e.addEffect("polarPower",!1,!1,void 0,100);for(let t in e.hive)for(let i in e.hive[t])e.hive[t][i].bond+=25000000001,e.hive[t][i].gifted=!0;e.updateHive()}},j.cog_amulet={minX:16,maxX:18,minY:-2,maxY:5,minZ:9,maxZ:11,isMachine:!0,message:"generate supreme cog amulet",func:function(e){let t=[];t.push("*"+MATH.random(1.5,1.6).toFixed(2)+" capacityMultiplier"),t.push("*"+MATH.random(1.1,1.15).toFixed(2)+" beeAttack"),o.random()<.25?t.push("*"+MATH.random(1.05,1.1).toFixed(2)+" POLLEN"):t.push("*"+MATH.random(1.2,1.3).toFixed(2)+" "+["red","blue","white"][3*o.random()|0]+"Pollen"),o.random()<.333?t.push("+"+MATH.random(.07,.13).toFixed(2)+" instantRedConversion"):o.random()<.5?t.push("+"+MATH.random(.07,.13).toFixed(2)+" instantWhiteConversion"):t.push("+"+MATH.random(.07,.13).toFixed(2)+" instantBlueConversion"),o.random()<.333?t.push("*"+MATH.random(1.07,1.15).toFixed(2)+" flamePollen"):o.random()<.5?t.push("*"+MATH.random(1.07,1.15).toFixed(2)+" bubblePollen"):t.push("*"+MATH.random(1.04,1.08).toFixed(2)+" markDuration"),o.random()<.5?o.random()<.5?t.push("*1.05 nectarMultiplier"):t.push("*"+MATH.random(1.35,1.6).toFixed(2)+" honeyFromTokens"):o.random()<.5?t.push("*"+MATH.random(1.08,1.15).toFixed(2)+" superCritPower"):t.push("*"+MATH.random(1.2,1.3).toFixed(2)+" tokenLifespan"),e.showGeneratedAmulet("supremeCogAmulet",t)}},j.king_amulet={minX:14,maxX:16,minY:-2,maxY:5,minZ:9,maxZ:11,isMachine:!0,message:"generate king beetle amulet",func:function(e){let t=["*"+MATH.random(1.1,1.5).toFixed(2)+" capacityMultiplier","*"+MATH.random(1.15,1.5).toFixed(2)+" convertRate"];o.random()<.333?t.push("+1 redBeeAttack","+1 blueBeeAttack","+1 whiteBeeAttack"):t.push(o.random()<.5?"+1 redBeeAttack":"+1 blueBeeAttack"),t.push(...MATH.selectFromArray(["*"+MATH.random(1.02,1.07).toFixed(2)+" POLLEN","*"+MATH.random(1.05,1.2).toFixed(2)+" bluePollen","*"+MATH.random(1.05,1.2).toFixed(2)+" redPollen","*"+MATH.random(1.05,1.15).toFixed(2)+" whitePollen"],2)),e.showGeneratedAmulet("kingBeetleAmulet",t)}},j.ant_amulet={minX:12,maxX:14,minY:-2,maxY:5,minZ:9,maxZ:11,isMachine:!0,message:"generate supreme ant amulet",func:function(e){let t=[],i="supreme",o=["bronze","silver","gold","diamond","supreme"].indexOf(i);t.push("*1."+(o+1)+" capacityMultiplier","*"+MATH.random(1.05+.15*o,1.15+.15*o).toFixed(2)+" convertRate"),t.push(...MATH.selectFromArray(["*"+MATH.random(1.03+.05*o,1.1+.05*o).toFixed(2)+" redPollen","*"+MATH.random(1.03+.05*o,1.1+.05*o).toFixed(2)+" whitePollen","*"+MATH.random(1.03+.05*o,1.1+.05*o).toFixed(2)+" bluePollen","*"+MATH.random(1.01+.01*o,1.03+.01*o).toFixed(2)+" POLLEN","*"+MATH.random(1.01,1.06).toFixed(2)+" walkSpeed","+"+MATH.random(.01+.0075*o,.03+.0075*o).toFixed(2)+" criticalChance","*"+MATH.random(1.03+.05*o,1.1+.05*o).toFixed(2)+" pollenFromTools","*"+MATH.random(1.03+.05*o,1.1+.05*o).toFixed(2)+" pollenFromBees"],o+1)),e.showGeneratedAmulet(i+"AntAmulet",t)}},j.snail_amulet={minX:10,maxX:12,minY:-2,maxY:5,minZ:9,maxZ:11,isMachine:!0,message:"generate supreme snail amulet",func:function(e){let t=["*"+MATH.random(1.05,1.12).toFixed(2)+" goo"];t.push(...MATH.selectFromArray(["*"+MATH.random(1.37,1.1+.8).toFixed(2)+" lootLuck","+"+MATH.random(.06,.1).toFixed(2)+" INSTANT_CONVERSION","*"+MATH.random(1.05,1.09).toFixed(2)+" POLLEN","*"+MATH.random(1.114,1.21).toFixed(2)+" pollenFromTools","+"+MATH.random(.06,.055).toFixed(2)+" defense","*"+MATH.random(1.05,1.11).toFixed(2)+" honeyFromTokens"],4)),e.showGeneratedAmulet("supremeSnailAmulet",t)}});let Q=document.getElementById("hoverText"),K={basic:{u:0,v:0,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:14,convertSpeed:4,convertAmount:80,attack:1,energy:20,favoriteTreat:"sunflowerSeed",rarity:"common",color:"white",description:"An ordinary bee. Well rounded and hard working!",giftedHiveBonus:{oper:"*",stat:"redPollen,bluePollen,whitePollen",num:1.2}},looker:{u:.0625,v:0,meshPartId:0,gatherSpeed:4,gatherAmount:13,speed:14,tokens:["focus"],convertSpeed:4,convertAmount:160,attack:1,attackTokens:["focus"],energy:20,favoriteTreat:"sunflowerSeed",rarity:"rare",color:"white",description:"This silent bee is always watching and gaining valuable insights.",giftedHiveBonus:{oper:"+",stat:"criticalPower",num:.25}},music:{u:.125,v:0,meshPartId:5,gatherSpeed:4,gatherAmount:16,speed:16.1,tokens:["focus","melody","link"],convertSpeed:4,convertAmount:240,attack:1,attackTokens:["focus","melody","link"],energy:20,favoriteTreat:"blueberry",rarity:"legendary",color:"white",description:"This bee's buzz is so beautiful it can bring anyone to tears. It uses this gift to motivate others.",giftedHiveBonus:{oper:"*",stat:"pollenFromBees",num:1.25}},fire:{u:.1875,v:0,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:11.5,gatheringPassive:function(e){o.random()<(e.gifted?.5:.35)&&(le.explosions.push(new ce({col:[1,.5,0],pos:[o.round(e.pos[0]),e.pos[1]-.225,o.round(e.pos[2])],life:.5,size:1.5,speed:.5,aftershock:.01,height:.01})),le.flames.push(new pe(g.fieldIn,e.flowerCollecting[0],e.flowerCollecting[1])))},particles:function(e){$t.add({x:e.pos[0],y:e.pos[1],z:e.pos[2],vx:MATH.random(-.3,.3),vy:MATH.random(-.3,.3),vz:MATH.random(-.3,.3),grav:0,size:MATH.random(80,120),col:[g.isNight,MATH.random(.4,.7)*g.isNight,0],life:1.5,rotVel:MATH.random(-3,3),alpha:2.5})},convertSpeed:4,convertAmount:80,attack:4,tokens:["redBomb"],energy:25,favoriteTreat:"pineapple",rarity:"epic",color:"red",description:"As an egg, this bee was accidentally left in the trunk of a car in the middle of the summer for over 3 days!",giftedHiveBonus:{oper:"*",stat:"flamePollen",num:1.5}},bubble:{u:.25,v:0,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:16.1,gatheringPassive:function(e){o.random()<(e.gifted?.5:.35)&&le.bubbles.push(new fe(g.fieldIn,e.flowerCollecting[0],e.flowerCollecting[1]))},particles:function(e){$t.add({x:e.pos[0],y:e.pos[1],z:e.pos[2],vx:MATH.random(-.3,.3),vy:MATH.random(-.3,.3),vz:MATH.random(-.3,.3),grav:0,size:MATH.random(35,70),col:[MATH.random(.1,.3)*g.isNight,MATH.random(.4,.6)*g.isNight,MATH.random(.8,1)*g.isNight],life:1.5,rotVel:MATH.random(-3,3),alpha:2.5})},convertSpeed:4,convertAmount:160,attack:3,tokens:["blueBomb"],energy:20,favoriteTreat:"blueberry",rarity:"epic",color:"blue",description:"As a larva, this bee lived in the ocean. It loves Blue flowers cause they remind it of home.",giftedHiveBonus:{oper:"*",stat:"bubblePollen",num:1.5}},hasty:{u:.3125,v:0,meshPartId:0,gatherSpeed:3,gatherAmount:10,speed:19.6,tokens:["haste"],convertSpeed:3,convertAmount:80,attack:1,attackTokens:["haste"],energy:20,favoriteTreat:"pineapple",rarity:"rare",color:"white",description:"A quick bee who always zips arounds. Sometimes it even makes YOU move faster.",giftedHiveBonus:{oper:"*",stat:"walkSpeed",num:1.1}},bomber:{u:.375,v:0,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:15.4,tokens:["whiteBomb"],convertSpeed:4,convertAmount:120,attack:2,energy:20,favoriteTreat:"sunflowerSeed",rarity:"rare",color:"white",description:"This crafty bee makes bombs which collect pollen from all nearby flowers.",giftedHiveBonus:{oper:"*",stat:"redBombPollen,blueBombPollen,whiteBombPollen",num:1.25}},fuzzy:{u:.4375,v:0,meshPartId:7,gatherSpeed:6,gatherAmount:100,speed:11.9,convertSpeed:6,convertAmount:40,attack:3,energy:50,gatheringPassive:function(e){let t=[[0,0],[-1,-1],[1,-1],[1,1],[-1,1],[0,1],[0,-1],[1,0],[-1,0],[0,2],[2,0],[0,-2],[-2,0]],i=ti[g.fieldIn];for(let n=0,s=MATH.random(.05*e.level-1,6);n<s;n++){let n=o.random()*t.length|0,s=t[n][0]+e.flowerCollecting[0],r=t[n][1]+e.flowerCollecting[1];if(t.splice(n,1),s>=0&&s<i.width&&r>=0&&r<i.length){Ci(g.fieldIn,s,r,(function(e){e.level<5?(e.level++,e.pollinationTimer=1):e.height=1}),!0,!1,!0);for(let e=0;e<6;e++)$t.add({x:s+i.x,y:i.y+.5,z:r+i.z,vx:MATH.random(-1,1),vy:2*o.random(),vz:MATH.random(-1,1),grav:-3,size:100,col:[g.isNight,g.isNight,MATH.random(.6,1)*g.isNight],life:2.5,rotVel:MATH.random(-3,3),alpha:2})}}},particles:function(e){$t.add({x:e.pos[0],y:e.pos[1],z:e.pos[2],vx:MATH.random(-1,1),vy:MATH.random(.5,1.4),vz:MATH.random(-1,1),grav:-3,size:MATH.random(25,60),col:[g.isNight,g.isNight,MATH.random(.6,1)*g.isNight],life:.75,rotVel:MATH.random(-3,3),alpha:10})},tokens:["pollenHaze*","fuzzBomb","whiteBomb_"],favoriteTreat:"pineapple",rarity:"mythic",color:"white",description:"This unkempt ball of fluff is actually a bee. Its fur aids in the pollination of flowers.",giftedHiveBonus:{oper:"*",stat:"whiteBombPollen",num:1.1}},stubborn:{u:.5,v:0,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:11.9,tokens:["pollenMarkToken"],convertSpeed:3,convertAmount:80,attack:2,energy:20,favoriteTreat:"strawberry",rarity:"rare",color:"white",description:"A hardheaded bee who can't be bossed around. It tells others where to go.",giftedHiveBonus:{oper:"*",stat:"tokenLifespan",num:1.25}},spicy:{u:.5625,v:0,meshPartId:4,gatherSpeed:4,gatherAmount:14,speed:14,convertSpeed:2,convertAmount:200,tokens:["inferno","flameFuel*"],attack:5,attackTokens:["inferno","flameFuel*","rage"],energy:20,particles:function(e){g.flameHeatStack&&$t.add({x:e.pos[0],y:e.pos[1],z:e.pos[2],vx:MATH.random(-.7,.7),vy:MATH.random(-.3,.3),vz:MATH.random(-.7,.7),grav:1.25,size:110,col:[g.isNight,g.isNight,g.isNight],life:1.5,rotVel:MATH.random(-3,3),alpha:2*(g.flameHeatStack-1)})},favoriteTreat:"strawberry",rarity:"mythic",color:"red",description:"Some like it hot - this bee likes it scorching. Even the honey it makes is spicy.",giftedHiveBonus:{oper:"*",stat:"flameLife",num:1.25}},vector:{u:.625,v:0,meshPartId:2,gatherSpeed:4,gatherAmount:18,speed:16.24,convertSpeed:2.72,convertAmount:144,tokens:["pollenMarkToken","markSurge*","triangulate"],attack:5,energy:45.6,favoriteTreat:"pineapple",rarity:"mythic",color:"white",description:"A bee brought to life by an extremely complex trigonometric equation.",giftedHiveBonus:{oper:"*",stat:"markDuration",num:1.15}},tadpole:{u:.6875,v:0,meshPartId:0,gatherSpeed:6,gatherAmount:10,speed:11.2,convertSpeed:4,convertAmount:120,tokens:["summonFrog","blueBoost","babyLove*"],attack:.5,energy:10,gatheringPassive:function(e){o.random()<(e.gifted?.75:.55)&&le.bubbles.push(new fe(g.fieldIn,e.flowerCollecting[0],e.flowerCollecting[1]))},favoriteTreat:"blueberry",rarity:"mythic",color:"blue",description:"A tiny amphibious bee who wants to become a frog when it grows up.",giftedHiveBonus:{oper:"*",stat:"bluePollen",num:1.1},trails:[{length:8,size:.14,color:[29/215,133/215,72/215,1],skipFrame:3,skipAdd:3,vertical:!0}]},buoyant:{u:.75,v:0,meshPartId:3,gatherSpeed:5,gatherAmount:15,speed:14,convertSpeed:3,convertAmount:150,tokens:["inflateBalloons","surpriseParty*","blueBomb_"],attack:5,energy:60,favoriteTreat:"blueberry",rarity:"mythic",color:"blue",description:"Just like a balloon, nothing can keep this bee down. It's always ready to party.",giftedHiveBonus:{oper:"*",stat:"capacityMultiplier",num:1.2}},gummy:{u:.8125,v:0,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:14,convertSpeed:4,convertAmount:700,tokens:["gummyBlob","gummyBarrage","whiteBoost"],attack:3,energy:50,rarity:"event",color:"white",description:"A squishy bee who's sweet as sugar. Covers flowers in goo to grant you bonus honey!",giftedHiveBonus:{oper:"*",stat:"honeyPerPollen",num:1.05}},precise:{u:.875,v:0,meshPartId:1,gatherSpeed:4,gatherAmount:20,speed:11.2,convertSpeed:4,convertAmount:130,tokens:["targetPractice","redBomb_"],attack:8,energy:40,attackTokens:["targetPractice"],favoriteTreat:"sunflowerSeed",rarity:"mythic",color:"red",description:"This sharpshooting bee is always on point and expects the same of you.",giftedHiveBonus:{oper:"+",stat:"superCritChance",num:.05},trails:[{length:4,size:.25,triangle:!0,color:[219/255,72/255,92/255,1],skipFrame:5,skipAdd:5}]},rage:{u:.9375,v:0,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:15.4,convertSpeed:4,convertAmount:80,attack:4,tokens:["link"],energy:20,attackTokens:["rage","link"],favoriteTreat:"strawberry",rarity:"epic",color:"red",description:"A very angry bee who has been wronged its whole life. It harnesses its rage to become more powerful.",giftedHiveBonus:{oper:"+",stat:"whiteBeeAttack,redBeeAttack,blueBeeAttack",num:1}},crimson:{u:0,v:.125,meshPartId:20,gatherSpeed:4,gatherAmount:10,speed:18.2,convertSpeed:3,convertAmount:120,tokens:["redPulse","redBombSync"],attack:6,energy:35,rarity:"event",color:"red",description:"A superhero and defender of all things Red! Together with Cobalt Bee it works to unite bees of all colors.",giftedHiveBonus:{oper:"+",stat:"instantRedConversion",num:.1},trails:[{length:7,size:.2,triangle:!0,color:[1,0,0,1],skipFrame:3,skipAdd:3,beeOffset:-.05},{length:7,size:.075,triangle:!0,color:[1,1,1,1],skipFrame:3,skipAdd:3,beeOffset:.05}]},cobalt:{u:.0625,v:.125,meshPartId:20,gatherSpeed:4,gatherAmount:10,speed:18.2,convertSpeed:3,convertAmount:120,tokens:["bluePulse","blueBombSync"],attack:6,energy:35,rarity:"event",color:"blue",description:"A superhero and defender of all things Blue! Together with Crimson Bee it works to unite bees of all colors.",giftedHiveBonus:{oper:"+",stat:"instantBlueConversion",num:.1},trails:[{length:7,size:.2,triangle:!0,color:[0,0,1,1],skipFrame:3,skipAdd:3,beeOffset:-.05},{length:7,size:.075,triangle:!0,color:[1,1,1,1],skipFrame:3,skipAdd:3,beeOffset:.05}]},photon:{u:.125,v:.125,meshPartId:6,gatherSpeed:2,gatherAmount:20,speed:21,convertSpeed:2,convertAmount:240,tokens:["beamStorm","haste","whiteBoost"],attackTokens:["haste"],attack:3,energy:1/0,rarity:"event",color:"white",description:"An entity made of pure light temporarily taking on the form of a bee.",giftedHiveBonus:{oper:"+",stat:"instantWhiteConversion,instantBlueConversion,instantRedConversion",num:.05},trails:[{length:10,size:.25,color:[1,1,0,.5],skipFrame:2,skipAdd:2}]},bumble:{u:.1875,v:.125,meshPartId:0,gatherSpeed:4,gatherAmount:18,speed:10.5,tokens:["blueBomb"],convertSpeed:4,convertAmount:80,attack:1,attackTokens:[],energy:50,favoriteTreat:"blueberry",rarity:"rare",color:"blue",description:"A mellow fellow who moves a little slow, but works harder and longer than others.",giftedHiveBonus:{oper:"*",stat:"capacityMultiplier",num:1.1}},rascal:{u:.25,v:.125,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:16.1,tokens:["redBomb"],convertSpeed:4,convertAmount:80,attack:3,attackTokens:[],energy:20,favoriteTreat:"strawberry",rarity:"rare",color:"red",description:"A mischevious bee who moves quick and hits hard. Keep an eye out on this one!",giftedHiveBonus:{oper:"*",stat:"redBombPollen",num:1.3}},cool:{u:.3125,v:.125,meshPartId:0,gatherSpeed:3,gatherAmount:10,speed:14,tokens:["blueBoost"],convertSpeed:4,convertAmount:80,attack:2,attackTokens:[],energy:20,favoriteTreat:"blueberry",rarity:"rare",color:"blue",description:"A sarcastic bee who's a little better than the others. Sometimes boosts pollen from blue flowers.",giftedHiveBonus:{oper:"*",stat:"bluePollen",num:1.15}},rad:{u:.375,v:.125,meshPartId:0,gatherSpeed:4,gatherAmount:13,speed:14,tokens:["redBomb"],convertSpeed:3,convertAmount:80,attack:1,attackTokens:[],energy:20,favoriteTreat:"strawberry",rarity:"rare",color:"red",description:"A stylish bee with a taste for red flowers. Everyone wants to be this bee.",giftedHiveBonus:{oper:"*",stat:"redPollen",num:1.15}},brave:{u:.4375,v:.125,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:16.8,convertSpeed:4,convertAmount:200,attack:5,energy:30,favoriteTreat:"pineapple",rarity:"rare",color:"white",description:"This loyal bee will do anything to protect its owner.",giftedHiveBonus:{oper:"+",stat:"whiteBeeAttack,redBeeAttack,blueBeeAttack",num:1}},windy:{u:.5,v:.125,meshPartId:0,gatherSpeed:3,gatherAmount:10,speed:19.6,convertSpeed:2,convertAmount:180,tokens:["whiteBoost","rainCloud","tornado"],attackTokens:[],attack:3,energy:20,rarity:"event",color:"white",description:"An ethereal bee as powerful and unpredictable as the weather.",giftedHiveBonus:{oper:"+",stat:"instantWhiteConversion",num:.15},trails:[{length:15,size:.4,color:[.5,.5,.5,.4],skipFrame:4,skipAdd:4},{length:15,size:.4,color:[.5,.5,.5,.4],skipFrame:4,skipAdd:4,vertical:!0}]},bucko:{u:.5625,v:.125,meshPartId:8,gatherSpeed:4,gatherAmount:17,speed:15.4,convertSpeed:3,convertAmount:80,attack:5,energy:30,tokens:["blueBoost"],favoriteTreat:"blueberry",rarity:"epic",color:"blue",description:"Leader of the blue bees, and a long time rival of Riley Bee. It's tenacity is it's greatest strength.",giftedHiveBonus:{oper:"*",stat:"blueFieldCapacity",num:1.25}},riley:{u:.625,v:.125,meshPartId:8,gatherSpeed:2,gatherAmount:10,speed:15.4,convertSpeed:4,convertAmount:140,attack:5,energy:25,tokens:["redBoost"],favoriteTreat:"strawberry",rarity:"epic",color:"red",description:"Leader of the red bees, and a long time rival of Bucko Bee. It's fiery nature has elevated it above the rest.",giftedHiveBonus:{oper:"*",stat:"redFieldCapacity",num:1.25}},commander:{u:.6875,v:.125,meshPartId:9,gatherSpeed:4,gatherAmount:15,speed:14,convertSpeed:4,convertAmount:80,attack:4,energy:30,tokens:["focus","whiteBomb"],attackTokens:["focus"],favoriteTreat:"sunflowerSeed",rarity:"epic",color:"white",description:"A strong, no-nonsense bee who stays level headed when things get rough.",giftedHiveBonus:{oper:"+",stat:"criticalChance",num:.03}},honey:{u:.75,v:.125,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:14,convertSpeed:2,convertAmount:360,attack:1,energy:20,tokens:["honeyMarkToken"],favoriteTreat:"sunflowerSeed",rarity:"epic",color:"white",description:"A satisfied bee always full with the finest honey. If you're lucky it will share some.",giftedHiveBonus:{oper:"*",stat:"honeyFromTokens",num:1.5}},tabby:{u:.8125,v:.125,meshPartId:10,gatherSpeed:4,gatherAmount:10,speed:16.1,convertSpeed:3,convertAmount:160,attack:4,energy:28,tokens:["scratch","tabbyLove"],attackTokens:["tabbyLove"],rarity:"event",color:"white",description:"This affectionate bee was raised by cats. It becomes a better worker as it warms up to you",giftedHiveBonus:{oper:"+",stat:"criticalPower",num:.5}},diamond:{u:.875,v:.125,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:14,convertSpeed:4,convertAmount:1e3,attack:1,energy:20,tokens:["blueBomb_"],rarity:"legendary",color:"blue",description:"This affectionate bee was raised by cats. It becomes a better worker as it warms up to you",giftedHiveBonus:{oper:"*",stat:"convertRate",num:1.5},particles:function(e){$t.add({x:e.pos[0]+MATH.random(-.5,.5),y:e.pos[1]+MATH.random(-.5,.5),z:e.pos[2]+MATH.random(-.5,.5),vx:0,vy:0,vz:0,grav:0,size:MATH.random(15,70),col:[1,1,1],life:.25,rotVel:MATH.random(-6,6),alpha:1})},favoriteTreat:"blueberry"},demon:{u:.9375,v:.125,meshPartId:11,gatherSpeed:4,gatherAmount:35,speed:10.5,convertSpeed:4,convertAmount:60,attack:8,energy:20,tokens:["redBomb","redBomb_"],rarity:"legendary",color:"red",description:"A powerful bee with magical powers fueled by pure hatred.",giftedHiveBonus:{oper:"+",stat:"instantBombConversion",num:.15},gatheringPassive:function(e){o.random()<(e.gifted?.75:.55)&&(le.explosions.push(new ce({col:[1,.5,0],pos:[o.round(e.pos[0]),e.pos[1]-.225,o.round(e.pos[2])],life:.5,size:1.5,speed:.5,aftershock:.01,height:.01})),le.flames.push(new pe(g.fieldIn,e.flowerCollecting[0],e.flowerCollecting[1])))},particles:function(e){$t.add({x:e.pos[0],y:e.pos[1],z:e.pos[2],vx:MATH.random(-.3,.3),vy:MATH.random(-.3,.3),vz:MATH.random(-.3,.3),grav:0,size:MATH.random(80,130),col:[1,MATH.random(.4,.7),0],life:1.5,rotVel:MATH.random(-3,3),alpha:2.5})},favoriteTreat:"pineapple"},carpenter:{u:0,v:.25,meshPartId:12,gatherSpeed:3,gatherAmount:10,speed:11.2,convertSpeed:4,convertAmount:120,attack:4,energy:25,tokens:["pollenMarkToken","honeyMarkToken"],rarity:"legendary",color:"white",description:"A bee with a knack for construction. It built its own body out of wood.",giftedHiveBonus:{oper:"*",stat:"pollenFromTools",num:1.25},favoriteTreat:"sunflowerSeed"},lion:{u:.0625,v:.25,meshPartId:13,gatherSpeed:4,gatherAmount:20,speed:19.6,convertSpeed:2,convertAmount:160,attack:9,energy:60,tokens:["whiteBomb_"],rarity:"legendary",color:"white",description:"Half lion, half bee. This is the king of both the jungle and bee hive.",giftedHiveBonus:{oper:"+",stat:"whiteBeeAttack",num:2},favoriteTreat:"pineapple"},ninja:{u:.125,v:.25,meshPartId:0,gatherSpeed:2,gatherAmount:10,speed:21,convertSpeed:2,convertAmount:80,attack:4,energy:20,tokens:["haste","blueBomb_"],rarity:"legendary",color:"white",description:"This bee trained vigorously for years to become the swiftest bee that has ever lived.",giftedHiveBonus:{oper:"*",stat:"beeSpeed",num:1.05},favoriteTreat:"sunflowerSeed"},shy:{u:.1875,v:.25,meshPartId:0,gatherSpeed:2,gatherAmount:10,speed:18.2,convertSpeed:4,convertAmount:320,attack:2,energy:40,tokens:["redBoost","redBomb_"],rarity:"legendary",color:"white",description:"This talented bee doesn't like to socialize, it just wants to work and be left alone.",giftedHiveBonus:{oper:"*",stat:"redBeeAbilityRate",num:1.15},favoriteTreat:"sunflowerSeed",particles:function(e){o.random()<.2&&$t.add({x:e.pos[0],y:e.pos[1],z:e.pos[2],vx:MATH.random(-.1,.1),vy:MATH.random(-.1,.1),vz:MATH.random(-.1,.1),grav:0,size:MATH.random(200,350),col:[.6,.6,.6],life:1.5,rotVel:MATH.random(-2,2),alpha:.25})}},demo:{u:.25,v:.25,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:16.8,convertSpeed:4,convertAmount:200,attack:3,energy:20,tokens:["whiteBomb_"],rarity:"epic",color:"white",description:"An elite Bomber Bee who has worked its way up the ranks. It is an expert in explosives.",giftedHiveBonus:{oper:"*",stat:"whiteBombPollen",num:1.3},favoriteTreat:"sunflowerSeed"},exhausted:{u:.3125,v:.25,meshPartId:0,gatherSpeed:4.6,gatherAmount:10,speed:10.5,convertSpeed:4,convertAmount:240,attack:1,energy:1/0,tokens:["whiteBomb","link"],rarity:"epic",color:"white",description:"This bee suffers from insomnia. It moves slowly, but it never has to sleep.",giftedHiveBonus:{oper:"*",stat:"whiteFieldCapacity",num:1.2},favoriteTreat:"pineapple"},shocked:{u:.375,v:.25,meshPartId:0,gatherSpeed:4,gatherAmount:10,speed:19.6,convertSpeed:2,convertAmount:80,attack:2,energy:1/0,tokens:["haste","link"],rarity:"epic",color:"white",description:"This bee is startled by everything it comes across. It has learned special talents to cope.",giftedHiveBonus:{oper:"*",stat:"whitePollen",num:1.25},favoriteTreat:"pineapple"},frosty:{u:.4375,v:.25,meshPartId:14,gatherSpeed:4,gatherAmount:10,speed:11.2,convertSpeed:4,convertAmount:80,attack:1,energy:25,tokens:["blueBoost","blueBomb_"],rarity:"epic",color:"white",description:"A bee made of snow. It magically came to life after someone put a top hat on its head.",giftedHiveBonus:{oper:"*",stat:"blueBombPollen",num:1.3},favoriteTreat:"blueberry"},baby:{u:.5,v:.25,meshPartId:0,gatherSpeed:5,gatherAmount:10,speed:10.5,convertSpeed:5,convertAmount:80,attack:0,energy:15,tokens:["babyLove"],rarity:"legendary",color:"white",description:"This little bee isn't very good at bee tasks yet, but it's guaranteed to bring you joy (and luck).",giftedHiveBonus:{oper:"*",stat:"lootLuck",num:1.25},favoriteTreat:"strawberry"},vicious:{u:.5625,v:.25,meshPartId:15,gatherSpeed:4,gatherAmount:10,speed:17.5,convertSpeed:4,convertAmount:80,attack:8,energy:50,tokens:["blueBomb_"],attackTokens:["impale"],rarity:"event",color:"blue",description:"This cold-blooded bee takes great pleasure in inflicting pain.",giftedHiveBonus:{oper:"*",stat:"monsterRespawnTime",num:1.15}},bear:{u:.625,v:.25,meshPartId:16,gatherSpeed:2,gatherAmount:15,speed:14,convertSpeed:2,convertAmount:200,attack:5,energy:35,tokens:["bearMorphToken"],attackTokens:[],rarity:"event",color:"white",description:"A friendly bee who periodically transforms you into a bear!",giftedHiveBonus:{oper:"*",stat:"redPollen,bluePollen,whitePollen",num:1.1}},puppy:{u:.6875,v:.25,meshPartId:17,gatherSpeed:4,gatherAmount:25,speed:16.1,convertSpeed:4,convertAmount:280,attack:2,energy:40,tokens:["fetch","puppyLove"],attackTokens:["puppyLove"],rarity:"event",color:"white",description:"A playful bee who tries to be his best, but still is so bad for its price that you shouldn't buy it. Seriously.",giftedHiveBonus:{oper:"*",stat:"bondFromTreats",num:1.2}},festive:{u:.75,v:.25,meshPartId:18,gatherSpeed:4,gatherAmount:40,speed:16.1,convertSpeed:1,convertAmount:150,attack:1,energy:20,tokens:["festiveGifts","redBomb_","honeyMarkToken"],attackTokens:[],rarity:"event",color:"red",description:"A jolly bee who loves giving gifts! It's purely motivated by the joy of others.",giftedHiveBonus:{oper:"*",stat:"redPollen",num:1.15}},digital:{u:.8125,v:.25,meshPartId:19,gatherSpeed:4,gatherAmount:10,speed:11.9,convertSpeed:4,convertAmount:80,attack:1,energy:20,tokens:["glitch","mapCorruption*"],attackTokens:["mindHack"],rarity:"event",color:"white",description:"A virtual bee with a malfunctioning AI. It corrupts the game itself.",giftedHiveBonus:{oper:"+",stat:"abilityDuplicationChance",num:.01}}},$={scienceEnhancement:{u:0,v:0,svg:document.getElementById("scienceEnhancement"),cooldown:document.getElementById("scienceEnhancement_cooldown"),amount:document.getElementById("scienceEnhancement_amount"),maxCooldown:1/0,maxAmount:1e3,tokenLife:16,update:(e,t)=>{t.convertRate*=.1*e+1},getMessage:e=>"Science Enhancement\nx"+(.1*e+1)+" convert rate"},polarPower:{u:0,v:0,svg:document.getElementById("polarPower"),cooldown:document.getElementById("polarPower_cooldown"),amount:document.getElementById("polarPower_amount"),maxCooldown:1/0,maxAmount:1/0,tokenLife:16,update:(e,t)=>{t.beeEnergy*=.05*e+1},getMessage:e=>"Polar Power\nx"+(.05*e+1)+" bee energy"},dandelionFieldBoost:{u:0,v:0,svg:document.getElementById("dandelionFieldBoost"),cooldown:document.getElementById("dandelionFieldBoost_cooldown"),amount:document.getElementById("dandelionFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"DandelionField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Dandelion Field Boost\nx"+(.75*e+1)+" pollen in dandelion field"},sunflowerFieldBoost:{u:0,v:0,svg:document.getElementById("sunflowerFieldBoost"),cooldown:document.getElementById("sunflowerFieldBoost_cooldown"),amount:document.getElementById("sunflowerFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"SunflowerField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Sunflower Field Boost\nx"+(.75*e+1)+" pollen in sunflower field"},blueFlowerFieldBoost:{u:0,v:0,svg:document.getElementById("blueFlowerFieldBoost"),cooldown:document.getElementById("blueFlowerFieldBoost_cooldown"),amount:document.getElementById("blueFlowerFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"BlueFlowerField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Blue Flower Field Boost\nx"+(.75*e+1)+" pollen in blue flower field"},mushroomFieldBoost:{u:0,v:0,svg:document.getElementById("mushroomFieldBoost"),cooldown:document.getElementById("mushroomFieldBoost_cooldown"),amount:document.getElementById("mushroomFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"MushroomField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Mushroom Field Boost\nx"+(.75*e+1)+" pollen in mushroom field"},cloverFieldBoost:{u:0,v:0,svg:document.getElementById("cloverFieldBoost"),cooldown:document.getElementById("cloverFieldBoost_cooldown"),amount:document.getElementById("cloverFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"CloverField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Clover Field Boost\nx"+(.75*e+1)+" pollen in clover field"},strawberryFieldBoost:{u:0,v:0,svg:document.getElementById("strawberryFieldBoost"),cooldown:document.getElementById("strawberryFieldBoost_cooldown"),amount:document.getElementById("strawberryFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"StrawberryField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Strawberry Field Boost\nx"+(.75*e+1)+" pollen in strawberry field"},spiderFieldBoost:{u:0,v:0,svg:document.getElementById("spiderFieldBoost"),cooldown:document.getElementById("spiderFieldBoost_cooldown"),amount:document.getElementById("spiderFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"SpiderField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Spider Field Boost\nx"+(.75*e+1)+" pollen in spider field"},bambooFieldBoost:{u:0,v:0,svg:document.getElementById("bambooFieldBoost"),cooldown:document.getElementById("bambooFieldBoost_cooldown"),amount:document.getElementById("bambooFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"BambooField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Bamboo Field Boost\nx"+(.75*e+1)+" pollen in bamboo field"},pineapplePatchBoost:{u:0,v:0,svg:document.getElementById("pineapplePatchBoost"),cooldown:document.getElementById("pineapplePatchBoost_cooldown"),amount:document.getElementById("pineapplePatchBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"PineapplePatch"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Pineapple Patch Boost\nx"+(.75*e+1)+" pollen in pineapple patch"},stumpFieldBoost:{u:0,v:0,svg:document.getElementById("stumpFieldBoost"),cooldown:document.getElementById("stumpFieldBoost_cooldown"),amount:document.getElementById("stumpFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"StumpField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Stump Field Boost\nx"+(.75*e+1)+" pollen in stump field"},cactusFieldBoost:{u:0,v:0,svg:document.getElementById("cactusFieldBoost"),cooldown:document.getElementById("cactusFieldBoost_cooldown"),amount:document.getElementById("cactusFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"CactusField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Cactus Field Boost\nx"+(.75*e+1)+" pollen in cactus field"},pumpkinPatchBoost:{u:0,v:0,svg:document.getElementById("pumpkinPatchBoost"),cooldown:document.getElementById("pumpkinPatchBoost_cooldown"),amount:document.getElementById("pumpkinPatchBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"PumpkinPatch"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Pumpkin Patch Boost\nx"+(.75*e+1)+" pollen in pumpkin patch"},pineTreeForestBoost:{u:0,v:0,svg:document.getElementById("pineTreeForestBoost"),cooldown:document.getElementById("pineTreeForestBoost_cooldown"),amount:document.getElementById("pineTreeForestBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"PineTreeForest"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Pine Tree Forest Boost\nx"+(.75*e+1)+" pollen in pine tree forest"},roseFieldBoost:{u:0,v:0,svg:document.getElementById("roseFieldBoost"),cooldown:document.getElementById("roseFieldBoost_cooldown"),amount:document.getElementById("roseFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"RoseField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Rose Field Boost\nx"+(.75*e+1)+" pollen in rose field"},mountainTopFieldBoost:{u:0,v:0,svg:document.getElementById("mountainTopFieldBoost"),cooldown:document.getElementById("mountainTopFieldBoost_cooldown"),amount:document.getElementById("mountainTopFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"MountainTopField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Mountain Top Field Boost\nx"+(.75*e+1)+" pollen in mountain top field"},coconutFieldBoost:{u:0,v:0,svg:document.getElementById("coconutFieldBoost"),cooldown:document.getElementById("coconutFieldBoost_cooldown"),amount:document.getElementById("coconutFieldBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"CoconutField"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Coconut Field Boost\nx"+(.75*e+1)+" pollen in coconut field"},pepperPatchBoost:{u:0,v:0,svg:document.getElementById("pepperPatchBoost"),cooldown:document.getElementById("pepperPatchBoost_cooldown"),amount:document.getElementById("pepperPatchBoost_amount"),maxCooldown:900,maxAmount:4,tokenLife:4,update:(e,t)=>{"PepperPatch"===t.fieldIn&&(t.redPollen*=.75*e+1,t.whitePollen*=.75*e+1,t.bluePollen*=.75*e+1)},getMessage:e=>"Pepper Patch Boost\nx"+(.75*e+1)+" pollen in pepper patch"},dandelionFieldWinds:{u:.375,v:.375,svg:document.getElementById("dandelionFieldWinds"),cooldown:document.getElementById("dandelionFieldWinds_cooldown"),amount:document.getElementById("dandelionFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"DandelionField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Dandelion Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in dandelion field\n+"+(5*(e-1)+1)+"% instant conversion in dandelion field"},sunflowerFieldWinds:{u:.375,v:.375,svg:document.getElementById("sunflowerFieldWinds"),cooldown:document.getElementById("sunflowerFieldWinds_cooldown"),amount:document.getElementById("sunflowerFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"SunflowerField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Sunflower Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in sunflower field\n+"+(5*(e-1)+1)+"% instant conversion in sunflower field"},blueFlowerFieldWinds:{u:.375,v:.375,svg:document.getElementById("blueFlowerFieldWinds"),cooldown:document.getElementById("blueFlowerFieldWinds_cooldown"),amount:document.getElementById("blueFlowerFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"BlueFlowerField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Blue Flower Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in blue flower field\n+"+(5*(e-1)+1)+"% instant conversion in blue flower field"},mushroomFieldWinds:{u:.375,v:.375,svg:document.getElementById("mushroomFieldWinds"),cooldown:document.getElementById("mushroomFieldWinds_cooldown"),amount:document.getElementById("mushroomFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"MushroomField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Mushroom Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in mushroom field\n+"+(5*(e-1)+1)+"% instant conversion in mushroom field"},cloverFieldWinds:{u:.375,v:.375,svg:document.getElementById("cloverFieldWinds"),cooldown:document.getElementById("cloverFieldWinds_cooldown"),amount:document.getElementById("cloverFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"CloverField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Clover Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in clover field\n+"+(5*(e-1)+1)+"% instant conversion in clover field"},strawberryFieldWinds:{u:.375,v:.375,svg:document.getElementById("strawberryFieldWinds"),cooldown:document.getElementById("strawberryFieldWinds_cooldown"),amount:document.getElementById("strawberryFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"StrawberryField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Strawberry Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in strawberry field\n+"+(5*(e-1)+1)+"% instant conversion in strawberry field"},spiderFieldWinds:{u:.375,v:.375,svg:document.getElementById("spiderFieldWinds"),cooldown:document.getElementById("spiderFieldWinds_cooldown"),amount:document.getElementById("spiderFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"SpiderField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Spider Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in spider field\n+"+(5*(e-1)+1)+"% instant conversion in spider field"},bambooFieldWinds:{u:.375,v:.375,svg:document.getElementById("bambooFieldWinds"),cooldown:document.getElementById("bambooFieldWinds_cooldown"),amount:document.getElementById("bambooFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"BambooField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Bamboo Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in bamboo field\n+"+(5*(e-1)+1)+"% instant conversion in bamboo field"},pineapplePatchWinds:{u:.375,v:.375,svg:document.getElementById("pineapplePatchWinds"),cooldown:document.getElementById("pineapplePatchWinds_cooldown"),amount:document.getElementById("pineapplePatchWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"PineapplePatch"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Pineapple Patch Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in pineapple patch\n+"+(5*(e-1)+1)+"% instant conversion in pineapple patch"},stumpFieldWinds:{u:.375,v:.375,svg:document.getElementById("stumpFieldWinds"),cooldown:document.getElementById("stumpFieldWinds_cooldown"),amount:document.getElementById("stumpFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"StumpField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Stump Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in stump field\n+"+(5*(e-1)+1)+"% instant conversion in stump field"},cactusFieldWinds:{u:.375,v:.375,svg:document.getElementById("cactusFieldWinds"),cooldown:document.getElementById("cactusFieldWinds_cooldown"),amount:document.getElementById("cactusFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"CactusField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Cactus Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in cactus field\n+"+(5*(e-1)+1)+"% instant conversion in cactus field"},pumpkinPatchWinds:{u:.375,v:.375,svg:document.getElementById("pumpkinPatchWinds"),cooldown:document.getElementById("pumpkinPatchWinds_cooldown"),amount:document.getElementById("pumpkinPatchWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"PumpkinPatch"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Pumpkin Patch Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in pumpkin patch\n+"+(5*(e-1)+1)+"% instant conversion in pumpkin patch"},pineTreeForestWinds:{u:.375,v:.375,svg:document.getElementById("pineTreeForestWinds"),cooldown:document.getElementById("pineTreeForestWinds_cooldown"),amount:document.getElementById("pineTreeForestWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"PineTreeForest"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Pine Tree Forest Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in pine tree forest\n+"+(5*(e-1)+1)+"% instant conversion in pine tree forest"},roseFieldWinds:{u:.375,v:.375,svg:document.getElementById("roseFieldWinds"),cooldown:document.getElementById("roseFieldWinds_cooldown"),amount:document.getElementById("roseFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"RoseField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Rose Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in rose field\n+"+(5*(e-1)+1)+"% instant conversion in rose field"},mountainTopFieldWinds:{u:.375,v:.375,svg:document.getElementById("mountainTopFieldWinds"),cooldown:document.getElementById("mountainTopFieldWinds_cooldown"),amount:document.getElementById("mountainTopFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"MountainTopField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Mountain Top Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in mountain top field\n+"+(5*(e-1)+1)+"% instant conversion in mountain top field"},coconutFieldWinds:{u:.375,v:.375,svg:document.getElementById("coconutFieldWinds"),cooldown:document.getElementById("coconutFieldWinds_cooldown"),amount:document.getElementById("coconutFieldWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"CoconutField"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Coconut Field Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in coconut field\n+"+(5*(e-1)+1)+"% instant conversion in coconut field"},pepperPatchWinds:{u:.375,v:.375,svg:document.getElementById("pepperPatchWinds"),cooldown:document.getElementById("pepperPatchWinds_cooldown"),amount:document.getElementById("pepperPatchWinds_amount"),maxCooldown:1800,maxAmount:15,tokenLife:4,update:(e,t)=>{"PepperPatch"===t.fieldIn&&(t.redPollen*=.03*(e-1)+1.15,t.whitePollen*=.03*(e-1)+1.15,t.bluePollen*=.03*(e-1)+1.15,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*(e-1)+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*(e-1)+.1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*(e-1)+.1))},getMessage:e=>"Pepper Patch Winds\nx"+(.03*(e-1)+1.15).toFixed(2)+" pollen in pepper patch\n+"+(5*(e-1)+1)+"% instant conversion in pepper patch"},haste:{desc:"Grants x1.1 walkspeed for 25s. Stacks up to 10x, for a maximum of x2 walkspeed.",trialCooldown:15,trialRate:.5,statsToAddTo:["hasteTokens"],u:0,v:0,svg:document.getElementById("haste"),cooldown:document.getElementById("haste_cooldown"),amount:document.getElementById("haste_amount"),maxCooldown:25,maxAmount:10,tokenLife:4,update:(e,t)=>{t.walkSpeed*=t.roboChallenge?.02*e+1:.075*e+1,t.hasteStacks=e},getMessage:e=>"Haste\nx"+(g.roboChallenge?.02*e+1:.075*e+1).toFixed(1)+" walkspeed"+(g.roboChallenge?"\n\n(nerfed due to Robo Challenge!)":"")},haste_:{svg:document.getElementById("haste_"),cooldown:document.getElementById("haste__cooldown"),amount:document.getElementById("haste__amount"),maxCooldown:60,maxAmount:1,update:(e,t)=>{t.walkSpeed*=1.5},getMessage:e=>"Haste+\nx1.5 walkspeed"},focus:{desc:"Grants +3% critical chance for 20s. Stacks up to 10x, for a maximum of +30% critical chance.<br><br>Critical chance increases the chance of a critical hit, multiplying pollen collected or damage dealt by your critical power(x2 without any extra buffs).",trialCooldown:20,trialRate:.5,statsToAddTo:["focusTokens","battleTokens"],u:.0625,v:0,svg:document.getElementById("focus"),cooldown:document.getElementById("focus_cooldown"),amount:document.getElementById("focus_amount"),maxCooldown:20,maxAmount:10,tokenLife:4,update:(e,t)=>{t.criticalChance+=.03*e},getMessage:e=>"Focus\n"+3*e+"% critical chance"},melody:{desc:"Grants +100% critical power for 30s.",trialCooldown:35,trialRate:.35,statsToAddTo:["melodyTokens","battleTokens"],u:.125,v:0,svg:document.getElementById("melody"),cooldown:document.getElementById("melody_cooldown"),amount:document.getElementById("melody_amount"),maxCooldown:30,maxAmount:1,tokenLife:8,update:(e,t)=>{t.criticalPower+=1},getMessage:e=>"Melody\n+100% critical power"},link:{desc:"Collects all ability tokens and certain types of loot tokens.",trialCooldown:20,trialRate:.75,statsToAddTo:["battleTokens","linkTokens"],u:.1875,v:0,canBeLinked:!1,tokenLife:4,func:function(){for(let e in le.tokens)!le.tokens[e].canBeLinked||le.tokens[e]instanceof ni||le.tokens[e].collect()},backupFunc:function(){for(let e in le.tokens)!le.tokens[e].canBeLinked||le.tokens[e]instanceof ni||le.tokens[e].collect()}},bombCombo:{u:.25,v:0,svg:document.getElementById("bombCombo"),cooldown:document.getElementById("bombCombo_cooldown"),amount:document.getElementById("bombCombo_amount"),maxCooldown:5,maxAmount:10,tokenLife:4,update:(e,t)=>{t.redBombPollen*=.2*e+1,t.whiteBombPollen*=.2*e+1,t.blueBombPollen*=.2*e+1},getMessage:e=>"Bomb Combo\nx"+(.2*e+1).toFixed(1)+" bomb power"},whiteBomb:{desc:"Collects 7 pollen from 29 nearby flowers. Pollen is multipled by +10% per bee lvl.",trialCooldown:15,trialRate:.3,statsToAddTo:["bombTokens"],u:.25,v:0,tokenLife:4,func:function(e){if(g.fieldIn===e.field){let t=.1*(e.bee.level-1)+1;Hi({x:e.x,z:e.z,pattern:[[-2,0],[-1,-1],[-1,0],[-1,1],[0,-2],[0,-1],[0,0],[0,1],[0,2],[1,-1],[1,0],[1,1],[2,0]],amount:7,stackOffset:.4+.5*o.random(),multiplier:t*g.whiteBombPollen,instantConversion:g.instantBombConversion}),le.explosions.push(new ce({col:[1,1,1],pos:[ti[e.field].x+e.x,ti[e.field].y+.5,ti[e.field].z+e.z],life:.3,size:4,speed:.35,aftershock:.05}))}g.addEffect("bombCombo")}},redBomb:{desc:"Collects 10 red pollen from 29 nearby flowers. Pollen is multipled by +10% per bee lvl.",trialCooldown:15,trialRate:.3,statsToAddTo:["redBombTokens","redAbilityTokens","bombTokens"],u:.3125,v:0,tokenLife:4,func:function(e){if(g.fieldIn===e.field){let t=.1*(e.bee.level-1)+1;Hi({x:e.x,z:e.z,pattern:[[-2,0],[-1,-1],[-1,0],[-1,1],[0,-2],[0,-1],[0,0],[0,1],[0,2],[1,-1],[1,0],[1,1],[2,0]],amount:{r:10,w:g.redBombSync?7.5:0,b:g.redBombSync&&g.blueBombSync?5:0},stackOffset:.4+.5*o.random(),multiplier:t*g.redBombPollen,instantConversion:g.instantBombConversion}),le.explosions.push(new ce({col:[1,0,0],pos:[ti[e.field].x+e.x,ti[e.field].y+.5,ti[e.field].z+e.z],life:.3,size:4,speed:.35,aftershock:.05}))}g.addEffect("bombCombo")}},blueBomb:{desc:"Collects 10 blue pollen from 29 nearby flowers. Pollen is multipled by +10% per bee lvl.",trialCooldown:15,trialRate:.3,statsToAddTo:["blueBombTokens","blueAbilityTokens","bombTokens"],u:.375,v:0,tokenLife:4,func:function(e){if(g.fieldIn===e.field){let t=.1*(e.bee.level-1)+1;Hi({x:e.x,z:e.z,pattern:[[-2,0],[-1,-1],[-1,0],[-1,1],[0,-2],[0,-1],[0,0],[0,1],[0,2],[1,-1],[1,0],[1,1],[2,0]],amount:{r:g.blueBombSync&&g.redBombSync?5:0,w:g.blueBombSync?7.5:0,b:10},stackOffset:.4+.5*o.random(),multiplier:t*g.blueBombPollen,instantConversion:g.instantBombConversion}),le.explosions.push(new ce({col:[0,0,1],pos:[ti[e.field].x+e.x,ti[e.field].y+.5,ti[e.field].z+e.z],life:.3,size:4,speed:.35,aftershock:.05}))}g.addEffect("bombCombo")}},whiteBomb_:{desc:"Collects 10 pollen from 49 nearby flowers. Pollen is multipled by +15% per bee lvl.",trialCooldown:15,trialRate:.4,statsToAddTo:["bombTokens"],u:.4375,v:0,tokenLife:4,func:function(e){if(g.fieldIn===e.field){let t=.15*(e.bee.level-1)+1;Hi({x:e.x,z:e.z,pattern:[[-3,0],[-2,-2],[-2,-1],[-2,0],[-2,1],[-2,2],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[0,-3],[0,-2],[0,-1],[0,0],[0,1],[0,2],[0,3],[1,-2],[1,-1],[1,0],[1,1],[1,2],[2,-2],[2,-1],[2,0],[2,1],[2,2],[3,0]],amount:10,stackHeight:.4+.5*o.random(),multiplier:t*g.whiteBombPollen,instantConversion:g.instantBombConversion}),le.explosions.push(new ce({col:[1,1,1],pos:[ti[e.field].x+e.x,ti[e.field].y+.5,ti[e.field].z+e.z],life:.3,size:4,speed:.35,aftershock:.05}))}g.addEffect("bombCombo")}},redBomb_:{desc:"Collects 12.5 red pollen from 49 nearby flowers. Pollen is multipled by +20% per bee lvl.",trialCooldown:20,trialRate:.3,statsToAddTo:["redBombTokens","redAbilityTokens","bombTokens"],u:0,v:.0625,tokenLife:4,func:function(e){if(g.fieldIn===e.field){let t=.2*(e.bee.level-1)+1;Hi({x:e.x,z:e.z,pattern:[[-3,0],[-2,-2],[-2,-1],[-2,0],[-2,1],[-2,2],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[0,-3],[0,-2],[0,-1],[0,0],[0,1],[0,2],[0,3],[1,-2],[1,-1],[1,0],[1,1],[1,2],[2,-2],[2,-1],[2,0],[2,1],[2,2],[3,0]],amount:{r:12.5,w:g.redBombSync?10:0,b:g.redBombSync&&g.blueBombSync?7.5:0},stackHeight:.4+.5*o.random(),multiplier:t*g.redBombPollen,instantConversion:g.instantBombConversion}),le.explosions.push(new ce({col:[1,0,0],pos:[ti[e.field].x+e.x,ti[e.field].y+.5,ti[e.field].z+e.z],life:.3,size:4,speed:.35,aftershock:.05}))}g.addEffect("bombCombo")}},blueBomb_:{desc:"Collects 12.5 blue pollen from 49 nearby flowers. Pollen is multipled by +20% per bee lvl.",trialCooldown:20,trialRate:.3,statsToAddTo:["blueBombTokens","blueAbilityTokens","bombTokens"],u:.0625,v:.0625,tokenLife:4,func:function(e){if(g.fieldIn===e.field){let t=.2*(e.bee.level-1)+1;Hi({x:e.x,z:e.z,pattern:[[-3,0],[-2,-2],[-2,-1],[-2,0],[-2,1],[-2,2],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[0,-3],[0,-2],[0,-1],[0,0],[0,1],[0,2],[0,3],[1,-2],[1,-1],[1,0],[1,1],[1,2],[2,-2],[2,-1],[2,0],[2,1],[2,2],[3,0]],amount:{b:12.5,w:g.blueBombSync?10:0,r:g.blueBombSync&&g.redBombSync?7.5:0},stackHeight:.4+.5*o.random(),multiplier:t*g.blueBombPollen}),le.explosions.push(new ce({col:[0,0,1],pos:[ti[e.field].x+e.x,ti[e.field].y+.5,ti[e.field].z+e.z],life:.3,size:4,speed:.35,aftershock:.05,instantConversion:g.instantBombConversion}))}g.addEffect("bombCombo")}},blueBoost:{desc:"Grants x1.1 blue pollen for 25s. Stacks up to 10x, for a maximum of x2 blue pollen.",trialCooldown:20,trialRate:.4,statsToAddTo:["blueBoostTokens","blueAbilityTokens","boostTokens","markOrBoostTokens"],u:.125,v:.0625,svg:document.getElementById("blueBoost"),cooldown:document.getElementById("blueBoost_cooldown"),amount:document.getElementById("blueBoost_amount"),maxCooldown:25,maxAmount:10,tokenLife:4,update:(e,t)=>{t.bluePollen*=.1*e+1},getMessage:e=>"Blue Boost\nx"+(.1*e+1).toFixed(1)+" blue pollen"},redBoost:{desc:"Grants x1.1 red pollen for 25s. Stacks up to 10x, for a maximum of x2 red pollen.",trialCooldown:20,trialRate:.4,statsToAddTo:["redBoostTokens","redAbilityTokens","boostTokens","markOrBoostTokens"],u:.1875,v:.0625,svg:document.getElementById("redBoost"),cooldown:document.getElementById("redBoost_cooldown"),amount:document.getElementById("redBoost_amount"),maxCooldown:25,maxAmount:10,tokenLife:4,update:(e,t)=>{t.redPollen*=.1*e+1},getMessage:e=>"Red Boost\nx"+(.1*e+1).toFixed(1)+" red pollen"},whiteBoost:{desc:"Grants x1.1 white pollen for 25s. Stacks up to 10x, for a maximum of x2 white pollen.",trialCooldown:15,trialRate:.5,statsToAddTo:["boostTokens","markOrBoostTokens"],u:.25,v:.0625,svg:document.getElementById("whiteBoost"),cooldown:document.getElementById("whiteBoost_cooldown"),amount:document.getElementById("whiteBoost_amount"),maxCooldown:25,maxAmount:10,tokenLife:4,update:(e,t)=>{t.whitePollen*=.1*e+1},getMessage:e=>"White Boost\nx"+(.1*e+1).toFixed(1)+" white pollen"},babyLove:{desc:"Grants x1.5 pollen and +50% loot luck for 30s.",trialCooldown:30,trialRate:.4,u:.0625,v:.5,svg:document.getElementById("babyLove"),cooldown:document.getElementById("babyLove_cooldown"),amount:document.getElementById("babyLove_amount"),maxCooldown:30,maxAmount:1,tokenLife:8,update:(e,t)=>{t.redPollen*=1.5,t.whitePollen*=1.5,t.bluePollen*=1.5,t.lootLuck*=1.5},getMessage:e=>"Baby Love\nx1.5 pollen\nx1.5 loot luck"},inspire:{trialCooldown:60,trialRate:.0075,statsToAddTo:["inspireTokens"],u:.125,v:.5,svg:document.getElementById("inspire"),cooldown:document.getElementById("inspire_cooldown"),amount:document.getElementById("inspire_amount"),maxCooldown:5,maxAmount:50,tokenLife:4,update:(e,t)=>{t.redPollen*=.25*e+1,t.whitePollen*=.25*e+1,t.bluePollen*=.25*e+1},getMessage:e=>"Inspire\nx"+(.25*e+1).toFixed(2)+" pollen"},rage:{desc:"Grants +1 bee attack for 30s. Stacks up to 3x, for a maximum of +3 bee attack.",trialCooldown:25,trialRate:.8,statsToAddTo:["rageTokens","battleTokens","redAbilityTokens"],u:.375,v:.25,svg:document.getElementById("rage"),cooldown:document.getElementById("rage_cooldown"),amount:document.getElementById("rage_amount"),maxCooldown:30,maxAmount:3,tokenLife:24,update:(e,t)=>{t.whiteBeeAttack+=e,t.blueBeeAttack+=e,t.redBeeAttack+=e},getMessage:e=>"Rage\n+"+e+" bee attack"},flameHeat:{u:.3125,v:.0625,svg:document.getElementById("flameHeat"),cooldown:document.getElementById("flameHeat_cooldown"),amount:document.getElementById("flameHeat_amount"),maxCooldown:20,tokenLife:4,amountFromCooldown:!0,update:(e,t)=>{t.redPollen*=.75*e+1,t.beeAttack*=.2*e+1,t.flameHeatStack=e+1,t.flameHeatStackApplied=.5*e+1},getMessage:e=>"Flame Heat\nx"+(.75*e+1).toFixed(2)+"  red pollen\nx"+(.2*e+1).toFixed(2)+" bee attack"},darkHeat:{u:.3125,v:.0625,svg:document.getElementById("darkHeat"),cooldown:document.getElementById("darkHeat_cooldown"),amount:document.getElementById("darkHeat_amount"),maxCooldown:0,tokenLife:4,maxAmount:100,update:(e,t)=>{t.superCritPower*=.06*e+1,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.0025*e),t.beeAttack*=.02*e+1},getMessage:e=>"Dark Heat\nx"+(.06*e+1).toFixed(2)+" super-crit power\n+"+(.25*e|0)+"% instant red conversion\nx"+(.02*e+1)+" bee attack"},pollenMarkToken:{desc:"Marks a random spot on the field with a radius of 5 flowers for 7s(+0.2s per bee lvl).<br><br>Standing in the mark grants x1.15 pollen. Stacks up to 3x, for a maximum of x1.45 pollen.",trialCooldown:20,trialRate:.4,statsToAddTo:["markTokens","markOrBoostTokens"],u:.375,v:.0625,tokenLife:8,func:function(e){g.fieldIn===e.field&&le.marks.push(new be(e.field,MATH.random(.2,.8)*ti[e.field].width|0,MATH.random(.2,.8)*ti[e.field].length|0,"pollenMark",e.bee.level))}},honeyMarkToken:{desc:"Marks a random spot on the field with a radius of 5 flowers for 7s(+0.2s per bee lvl).<br><br>Standing in the mark converts 3x the average convert amount of all your bees, and grants x1.25 convert rate. Stacks up to 3x.",trialCooldown:17.5,trialRate:.5,statsToAddTo:["markTokens","markOrBoostTokens"],u:.4375,v:.0625,tokenLife:8,func:function(e){le.marks.push(new be(e.field,MATH.random(.2,.8)*ti[e.field].width|0,MATH.random(.2,.8)*ti[e.field].length|0,"honeyMark",e.bee.level))}},preciseMarkToken:{trialCooldown:30,trialRate:.5,statsToAddTo:["markTokens","markOrBoostTokens"],u:0,v:.5,tokenLife:8,func:function(e){}},pollenMark:{u:0,v:0,svg:document.getElementById("pollenMark"),cooldown:document.getElementById("pollenMark_cooldown"),amount:document.getElementById("pollenMark_amount"),maxCooldown:0,tokenLife:4,maxAmount:3,update:(e,t)=>{let i=.15*e+1;t.whitePollen*=i,t.redPollen*=i,t.bluePollen*=i},getMessage:e=>"Pollen Mark\nx"+(.15*e+1)+" pollen"},honeyMark:{u:0,v:0,svg:document.getElementById("honeyMark"),cooldown:document.getElementById("honeyMark_cooldown"),amount:document.getElementById("honeyMark_amount"),maxCooldown:0,tokenLife:4,maxAmount:3,update:(e,t)=>{t.convertRate*=.25*e+1},getMessage:e=>"Honey Mark\nConverts 3x the average of all your bee's convert amount of pollen.\nx"+(.25*e+1)+" convert rate"},preciseMark:{u:0,v:0,svg:document.getElementById("preciseMark"),cooldown:document.getElementById("preciseMark_cooldown"),amount:document.getElementById("preciseMark_amount"),maxCooldown:0,tokenLife:4,maxAmount:3,update:(e,t)=>{t.criticalChance+=.07*e,t.superCritChance+=.07*e},getMessage:e=>"Precise Mark\n+"+7*e+"% critical chance\n+"+7*e+"% super-crit chance"},inferno:{desc:"Summons 4 flames and 2 temporary Fire Bees that last for 15s(+1s per lvl). The Fire Bees are gifted if this bee is gifted.<br><br>Flames last for 3s, collecting 10R/4W/1B pollen from 9 nearby flowers every second. Pollen collected is multiplied by 4% per red bee(8% is gifted). Flames also deal 15 damage to mobs every second. Standing in flames grant Flame Heat, lasting for 20s, and giving up to x2 red pollen and x1.2 bee attack.",trialCooldown:20,trialRate:.5,statsToAddTo:["redAbilityTokens","battleTokens"],u:0,v:.125,tokenLife:4,func:function(e){g.fieldIn===e.field&&(e.x>=0&&e.x<ti[e.field].width&&e.z-1>=0&&e.z-1<ti[e.field].length&&le.flames.push(new pe(e.field,e.x,e.z-1)),e.x>=0&&e.x<ti[e.field].width&&e.z+1>=0&&e.z+1<ti[e.field].length&&le.flames.push(new pe(e.field,e.x,e.z+1)),e.x-1>=0&&e.x-1<ti[e.field].width&&e.z>=0&&e.z<ti[e.field].length&&le.flames.push(new pe(e.field,e.x-1,e.z)),e.x+1>=0&&e.x+1<ti[e.field].width&&e.z>=0&&e.z<ti[e.field].length&&le.flames.push(new pe(e.field,e.x+1,e.z)),le.tempBees.push(new me([ti[e.field].x+e.x,ti[e.field].y+.5,ti[e.field].z+e.z],"fire",o.max(e.bee.level-2,1),15+e.bee.level,e.bee.gifted)),le.tempBees.push(new me([ti[e.field].x+e.x,ti[e.field].y+.5,ti[e.field].z+e.z],"fire",o.max(e.bee.level-2,1),15+e.bee.level,e.bee.gifted)),le.explosions.push(new ce({col:[1,.5,0],pos:[ti[e.field].x+e.x,ti[e.field].y+.5,ti[e.field].z+e.z],life:.5,size:5,speed:.25,aftershock:.005})))},backupFunc:function(e){le.tempBees.push(new me(e.pos,"fire",o.max(e.bee.level-2,1),15+e.bee.level,e.bee.gifted)),le.flames.push(new pe(e.pos[0]-1,e.pos[1],e.pos[2],!0)),le.flames.push(new pe(e.pos[0]+1,e.pos[1],e.pos[2],!0)),le.flames.push(new pe(e.pos[0],e.pos[1],e.pos[2]+1,!0)),le.flames.push(new pe(e.pos[0],e.pos[1],e.pos[2]-1,!0))}},flameFuel:{desc:"For 15s, tosses oil onto new flames, increasing it's lifespan by x1.5 and makes it convert 2% of your hive's convert total of pollen into honey.",trialCooldown:30,trialRate:.3,u:.0625,v:.125,svg:document.getElementById("flameFuel"),cooldown:document.getElementById("flameFuel_cooldown"),amount:document.getElementById("flameFuel_amount"),maxCooldown:15,maxAmount:1,tokenLife:4,update:(e,t)=>{t.flameFuel=!0},getMessage:e=>"Flame Fuel\nx1.5 flame life"},markSurge:{desc:"Makes all active marks surge, collecting pollen and increasing it's lifespan by +1s(+0.1s per bee lvl). Marks can only surge 5 times.<br><br>Marks collect 7(13 if the mark is a Precise Mark) pollen from all flowers inside their radius. Pollen collected is multiplied by +10% per bee lvl.<br><br>• If the mark is a Honey Mark, it instantly converts all collected pollen.<br><br>• If the mark is a Precise Mark, it will always critical hit.",trialCooldown:20,trialRate:.25,u:.125,v:.125,tokenLife:4,func:function(){for(let e in le.marks)le.marks[e].surge(e/le.marks.length*.5)}},triangulate:{desc:"Draws a triangle between the token, the bee, and you. The bee will travel away from both points, maximizing the triangle's area. After 3s, all tokens inside the triangle is collected, pollen is collected, and marks inside the triangle surge.<br><br>10(+2 per bee lvl) pollen is collected from each flower inside the triangle.<br><br>• If the triangle contains a mark, it gains x1.5 pollen.<br><br>• If the triangle contains a Pollen Mark, it gains x2 white pollen.<br><br>• If the triangle contains a Honey Mark, it gains +50% instant conversion.<br><br>• If the triangle contains a Precise Mark, it always critical hits.",trialCooldown:20,trialRate:.25,u:.4375,v:.25,tokenLife:4,func:function(e){g.fieldIn===e.field&&(e.bee.startTriangulate([ti[e.field].x+e.x,ti[e.field].y+.75,ti[e.field].z+e.z]),le.triangulates.push(new Te(e.bee,[ti[e.field].x+e.x,ti[e.field].y+.75,ti[e.field].z+e.z]))),g.addEffect("bombCombo")}},pollenHaze:{desc:"Summons a haze over the field, lasting for 30s. Every 0.07s, a flower is pollinated. If the flower is already at it's maximum pollination, it is replenished.<br><br>When a flower is pollinated, it moves up a tier. Flowers can be at the single, double, triple, large, or star tier. Pollen from the flower is multiplied based on it's tier, and higher tier flowers deplete slower. Over time, flowers naturally downgrade to it's original tier.",trialCooldown:150,trialRate:1,u:0,v:.3125,tokenLife:8,func:function(e){g.fieldIn===e.field&&(ti[e.field].haze.start||le.explosions.push(new ce({col:[1,1,0],pos:[.5*(ti[e.field].width-1)+ti[e.field].x,ti[e.field].y+.75,.5*(ti[e.field].length-1)+ti[e.field].z],life:30,size:.5*(ti[e.field].width+ti[e.field].length)*1.5,speed:.1,aftershock:0,maxAlpha:.15,backface:!0,primitive:"cylinder_explosions",height:8/(.5*(ti[e.field].width+ti[e.field].length)*1.5)})),ti[e.field].haze={start:T,delay:T})}},fuzzBomb:{desc:"Summons 2(+1 per 5 bee lvls) fuzz bombs rolling around the field, lasting for 5s(+0.25s per bee lvl). Touching them collects 15W/10R/10B pollen from 25 nearby flowers and pollinates them. If the flower is already at it's maximum pollination, it is replenished.<br><br>When a flower is pollinated, it moves up a tier. Flowers can be at the single, double, triple, large, or star tier. Pollen from the flower is multiplied based on it's tier, and higher tier flowers deplete slower. Over time, flowers naturally downgrade to it's original tier.",trialCooldown:25,trialRate:.5,u:.0625,v:.3125,tokenLife:4,func:function(e){if(g.fieldIn===e.field)for(let t=0;t<2+(.2*e.bee.level|0);t++)le.fuzzBombs.push(new we(e.field,e.bee.level))}},precision:{u:.3125,v:.25,svg:document.getElementById("precision"),cooldown:document.getElementById("precision_cooldown"),amount:document.getElementById("precision_amount"),maxCooldown:60,tokenLife:4,maxAmount:10,update:(e,t)=>{t.superCritChance+=.02*e},getMessage:e=>"Precision\n+"+2*e+"% super-crit chance"},summonFrog:{desc:"Summons a frog on the field, lasting for 25s(+1s per bee lvl). If the bee is gifted, this has a 10%(+2% per bee lvl) chance to spawn a gifted frog instead.<br><br>Frogs hop around the field, creating bubbles every 2nd and 3rd jump. Frogs also collect nearby tokens, and creates another bubble when they do.<br><br>Gifted frogs have a higher chance to collect tokens can do so from further away.<br><br>Bubbles last for 10s. When popped, they collect 10B/6W/2R pollen and replenish 33 flowers. Pollen collected is multiplied by 10% per gifted blue bee type.",trialCooldown:30,trialRate:.33,statsToAddTo:["blueAbilityTokens","battleTokens"],u:.1875,v:.125,tokenLife:4,func:function(e){e.field===g.fieldIn&&le.mobs.push(new ye(e.field,e.x,e.z,e.bee))}},inflateBalloons:{desc:"Summons a balloon on the field, lasting for 20s(+1s per bee lvl), and with a capacity scaling off of the bee's lvl and the player's capacity. This also inflates existing balloons by 1%(+0.1% per bee lvl) of their capacity.<br><br>Ballons hover around the field, absorbing and storing pollen collected under them. If the pollen is blue, it is multiplied by 25%, otherwise, by 10%.<br><br>Standing under balloons grant Balloon Aura, giving x1.02 pollen and honey from tokens. Stacks up to 10x, for a maximum of x1.2 pollen and honey from tokens.<br><br>After filling up, ballons float back to the hive, filling up the hive balloon. Converting the hive balloon grants the Balloon Blessing buff, boosting capacity and honey at hive. If the new Balloon Blessing is higher than the previous one, it replaces the old buff, otherwise, it refreshes it. The hive balloon deflates over time, depending on your capacity relative to it.<br><br>Balloons can be inflated a maximum of 4(+1 per 4 bee lvls)(+4 if the field contains at least 50% blue flowers)(+2 if the field contains at least 50% white flowers) times.<br><br>If the bee is gifted, balloons have a 10%(+1% per bee lvl) to become golden. Golden balloons have x1.35 more capacity, turn bubbles into golden bubbles, and are more effective with Tidal Surge.<br><br>Golden bubbles collect x1.5 pollen, has a 25% chance to spawn a honey token worth 50% of the collected pollen. Also contributes 2x as much to Pop Star, Bubble Bloat, Tide Power, and 3x as much to Tidal Surge.",trialCooldown:30,trialRate:.25,statsToAddTo:["blueAbilityTokens"],u:.25,v:.125,tokenLife:4,func:function(e){if(e.field===g.fieldIn){for(let t in le.balloons){let i=le.balloons[t];"float"===i.state&&i.inflateCounter>0&&(i.inflateCounter--,i.pollen+=i.cap*(.01+.001*e.bee.level),le.explosions.push(new ue({col:i.golden?[.9,.9,0]:[0,0,.8],pos:i.pos,life:.75,size:i.displaySize+1,alpha:.9,height:1,primitive:"explosions",transformHeight:!0})))}le.balloons.push(new xe(e.field,e.x,e.z,e.bee.gifted&&o.random()<.1+.01*e.bee.level,e.bee.level-1))}}},surpriseParty:{desc:"Makes all active balloons on the field create random ability tokens and summons a golden balloon.<br><br>Golden balloons have x1.35 more capacity, turn bubbles into golden bubbles, and are more effective with Tidal Surge.<br><br>Golden bubbles collect x1.5 pollen, has a 25% chance to spawn a honey token worth 50% of the collected pollen. Also contributes 2x as much to Pop Star, Bubble Bloat, Tide Power, and 3x as much to Tidal Surge.",trialCooldown:150,trialRate:.05,statsToAddTo:["blueAbilityTokens"],u:.3125,v:.125,tokenLife:4,func:function(e){if(e.field===g.fieldIn){for(let t=le.balloons.length;t--;){let i=le.balloons[t];if("float"===i.state){let t=["focus","melody","haste","whiteBomb","link","blueBomb","whiteBomb_","blueBomb_","whiteBoost","blueBoost","pollenMarkToken","honeyMarkToken"];t=t[o.random()*t.length|0],le.tokens.push(new ii($[t].tokenLife,[i.pos[0],o.round(e.bee.pos)+.5,i.pos[2]],t,{field:i.field,x:i.x,z:i.z,bee:e.bee})),le.explosions.push(new ue({col:[0,1,.4],pos:i.pos,life:.75,size:i.displaySize+1,alpha:.9,height:1,primitive:"explosions",transformHeight:!0}))}}le.balloons.push(new xe(e.field,e.x,e.z,!0,e.bee.level))}}},balloonAura:{u:0,v:0,svg:document.getElementById("balloonAura"),cooldown:document.getElementById("balloonAura_cooldown"),amount:document.getElementById("balloonAura_amount"),maxCooldown:0,tokenLife:4,maxAmount:10,update:(e,t)=>{let i=.02*e+1;t.bluePollen*=i,t.redPollen*=i,t.whitePollen*=i,t.honeyFromTokens*=i},getMessage:e=>"Balloon Aura\nx"+(.02*e+1)+" pollen\nx"+(.02*e+1)+" honey from tokens"},balloonBlessing:{u:0,v:0,svg:document.getElementById("balloonBlessing"),cooldown:document.getElementById("balloonBlessing_cooldown"),amount:document.getElementById("balloonBlessing_amount"),maxCooldown:3600,tokenLife:4,maxAmount:1e4,update:(e,t)=>{t.capacity*=.02*e+1,t.honeyAtHive*=.015*e+1,t.buoyantBeeAttack*=o.min(.02*e+1,3)},getMessage:e=>"Balloon Blessing\nx"+(.02*e+1).toFixed(2)+" capacity\nx"+(.015*e+1).toFixed(3)+" honey at hive\nx"+o.min(.02*e+1,3).toFixed(2)+" buoyant bee attack"},gummyBlob:{desc:"Drops a blob of goo onto the field, covering nearby flowers with a radius of 2(4 if the bee is gifted) and replenishing them.",trialCooldown:10,trialRate:.6,u:.375,v:.125,tokenLife:8,func:function(e){if(g.stats.gummyMorph+=3,e.field===g.fieldIn){let t=e.bee.gifted?4:2,i=function(e){e.goo=1,e.height=1};for(let n=-t;n<=t;n++){let s=n+e.x;for(let n=-t;n<=t;n++){let r=n+e.z;o.abs(s-e.x)+o.abs(r-e.z)<=t&&s>=0&&s<ti[e.field].width&&r>=0&&r<ti[e.field].length&&Ci(e.field,s,r,i,!0,!0,!1)}}le.explosions.push(new ce({col:[1,.2,1],pos:[ti[e.field].x+e.x,ti[e.field].y+.5,ti[e.field].z+e.z],life:.75,size:t,speed:.5,aftershock:.005,height:.3}))}}},gummyBarrage:{desc:"Drops several blobs of goo onto the field, covering nearby flowers and replenishing them.",trialCooldown:15,trialRate:.6,u:.4375,v:.125,tokenLife:8,func:function(e){if(g.stats.gummyMorph+=3,e.field===g.fieldIn)for(let t=0,i=0|MATH.random(2,5);t<i;t++){let t=0|MATH.random(2,5),i=function(e){e.goo=1,e.height=1},n=o.random()*ti[e.field].width|0,s=o.random()*ti[e.field].length|0;for(let r=-t;r<=t;r++){let a=r+n;for(let r=-t;r<=t;r++){let l=r+s;o.abs(a-n)+o.abs(l-s)<=t&&a>=0&&a<ti[e.field].width&&l>=0&&l<ti[e.field].length&&Ci(e.field,a,l,i,!0,!0,!1)}}le.explosions.push(new ce({col:[1,.2,1],pos:[ti[e.field].x+n,ti[e.field].y+.5,ti[e.field].z+s],life:.75,size:1.5*t,speed:.5,aftershock:.005,height:.3}))}}},targetPractice:{desc:"Causes the bee to fly up, projecting 3 targets onto the field for 4s. Running over a target activates it. After 4s, the bee shoots the targets.<br><br>• Unactivated targets create a red boost token when shot<br><br>• If an activated target is shot, it will create a focus token and collect 50%(+5% per bee lvl) of the bee's attack from 49 flowers. The shot can gain up to 50% instant conversion and x3 pollen based on your Flame Heat.<br><br>• If all 3 targets are shot, all ability tokens will be collected and 1 of the targets will summon a red boost, focus, and precision token. Precision grants +2% super-crit chance and stacks up to 10x, giving a maximum of +20% super-crit chance.<br><br>• If the player stands under a target as it is shot, all ability tokens are collected and Flame Heat is consumed to convert 50% of the hive's convert total plus 15 times the bee's convert amount. The amount of pollen converted scales up to x10 with Flame Heat.<br><br>• If the bee is gifted, 1 of the targets are highlighted in purple. Activating this target but not all 3 will summon a Precise Mark for 15s(+0.2 per bee lvl) with a radius of 7 flowers. Standing in the Precise Mark grants +7% critical and super-crit chance, stacking up to 3x, for a maximum of +21% critical and super-crit chance.<br><br>Super-crit chance increases the chance of a super-crit happening if the hit is a critical hit, multiplying pollen collected or damage dealt by your critical power and super-crit power(x2 super-crit power without any extra buffs, x4 in total).",trialCooldown:22.5,trialRate:.25,statsToAddTo:["redAbilityTokens","battleTokens"],u:.25,v:.25,tokenLife:8,func:function(e){e.field===g.fieldIn&&g.fieldIn&&!g.attacked.length&&"shootTargetPractice"!==e.bee.state&&"moveToTargetPractice"!==e.bee.state?e.bee.startTargetPractice():(g.addEffect("precision"),g.addEffect("focus"),g.stats.focusTokens++,g.addEffect("redBoost"),g.stats.redBoostTokens++)}},glueBuff:{u:0,v:0,svg:document.getElementById("glueBuff"),cooldown:document.getElementById("glueBuff_cooldown"),amount:document.getElementById("glueBuff_amount"),maxCooldown:600,maxAmount:1,tokenLife:4,update:(e,t)=>{t.pollenFromTools*=1.25,t.pollenFromBees*=1.25},getMessage:e=>"Glue\nx1.25 pollen from bees\nx1.25 pollen from tools"},oilBuff:{u:0,v:0,svg:document.getElementById("oilBuff"),cooldown:document.getElementById("oilBuff_cooldown"),amount:document.getElementById("oilBuff_amount"),maxCooldown:600,maxAmount:1,tokenLife:4,update:(e,t)=>{t.walkSpeed*=1.05,t.beeSpeed*=1.05},getMessage:e=>"Oil\nx1.05 bee speed\nx1.05 walkspeed"},enzymesBuff:{u:0,v:0,svg:document.getElementById("enzymesBuff"),cooldown:document.getElementById("enzymesBuff_cooldown"),amount:document.getElementById("enzymesBuff_amount"),maxCooldown:600,maxAmount:1,tokenLife:4,update:(e,t)=>{t.convertRate*=1.5,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.12),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.12),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.12)},getMessage:e=>"Enzymes\nx1.5 convert rate\n+12% instant conversion"},redExtractBuff:{u:0,v:0,svg:document.getElementById("redExtractBuff"),cooldown:document.getElementById("redExtractBuff_cooldown"),amount:document.getElementById("redExtractBuff_amount"),maxCooldown:600,maxAmount:1,tokenLife:4,update:(e,t)=>{t.redPollen*=1.25},getMessage:e=>"Red Extract\nx1.25 red pollen"},blueExtractBuff:{u:0,v:0,svg:document.getElementById("blueExtractBuff"),cooldown:document.getElementById("blueExtractBuff_cooldown"),amount:document.getElementById("blueExtractBuff_amount"),maxCooldown:600,maxAmount:1,tokenLife:4,update:(e,t)=>{t.bluePollen*=1.25},getMessage:e=>"Blue Extract\nx1.25 blue pollen"},tropicalDrinkBuff:{u:0,v:0,svg:document.getElementById("tropicalDrinkBuff"),cooldown:document.getElementById("tropicalDrinkBuff_cooldown"),amount:document.getElementById("tropicalDrinkBuff_amount"),maxCooldown:600,maxAmount:1,tokenLife:4,update:(e,t)=>{t.whitePollen*=1.25,t.criticalChance+=.05},getMessage:e=>"Tropical Drink\nx1.25 white pollen\n+5% critical chance"},purplePotionBuff:{u:0,v:0,svg:document.getElementById("purplePotionBuff"),cooldown:document.getElementById("purplePotionBuff_cooldown"),amount:document.getElementById("purplePotionBuff_amount"),maxCooldown:600,maxAmount:1,tokenLife:4,update:(e,t)=>{t.capacity*=1.25,t.redPollen*=1.5,t.bluePollen*=1.5,t.pollenFromTools*=1.3,t.pollenFromBees*=1.3},getMessage:e=>"Purple Potion\nx1.25 capacity\nx1.5 pollen\nx1.3 pollen from tools\nx1.3 pollen from bees"},superSmoothieBuff:{u:0,v:0,svg:document.getElementById("superSmoothieBuff"),cooldown:document.getElementById("superSmoothieBuff_cooldown"),amount:document.getElementById("superSmoothieBuff_amount"),maxCooldown:1200,maxAmount:1,tokenLife:4,update:(e,t)=>{t.capacity*=1.5,t.whitePollen*=1.6,t.redPollen*=1.6,t.bluePollen*=1.6,t.pollenFromBees*=1.4,t.pollenFromTools*=1.4,t.convertRate*=2,t.honeyAtHive*=1.1,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.17),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.17),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.17),t.walkSpeed*=1.05,t.beeSpeed*=1.1,t.criticalChance+=.07,t.superCritChance+=.01},getMessage:e=>"Super Smoothie\nx1.5 capacity\nx1.6 pollen\nx1.4 pollen from bees\nx1.4 pollen from tools\nx2 convert rate\nx1.1 honey at hive\n+17% instant conversion\n+7% critical chance\nx1.05 walkspeed\nx1.1 bee speed\n+1% super-crit chance"},stingerBuff:{u:0,v:0,svg:document.getElementById("stingerBuff"),cooldown:document.getElementById("stingerBuff_cooldown"),amount:document.getElementById("stingerBuff_amount"),maxCooldown:45,maxAmount:1,tokenLife:4,update:(e,t)=>{t.beeAttack*=1.5},getMessage:e=>"Stinger\nx1.5 bee attack"},popStarAura:{svg:document.getElementById("popStarAura"),cooldown:document.getElementById("popStarAura_cooldown"),amount:document.getElementById("popStarAura_amount"),maxCooldown:45,maxAmount:1,update:(e,t)=>{t.bluePollen*=o.min(.0125*t.popStarSize+2,5),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05),t.bubblePollen*=1.25},getMessage:e=>"Pop Star Aura\nx"+o.min(.0125*g.popStarSize+2,5)+" blue pollen\n+5% instant blue conversion\nx1.25 bubble pollen"},scorchingStarAura:{svg:document.getElementById("scorchingStarAura"),cooldown:document.getElementById("scorchingStarAura_cooldown"),amount:document.getElementById("scorchingStarAura_amount"),maxCooldown:45,maxAmount:1,update:(e,t)=>{t.redPollen*=o.min(35e-5*t.scorchingStarSize+2,5),t.convertRate*=o.min(35e-5*t.scorchingStarSize+2,5),t.beeAttack*=o.min(15e-5*t.scorchingStarSize+1,1.5),t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.2)},getMessage:e=>"Scorching Star Aura\nx"+o.min(35e-5*g.scorchingStarSize+2,5).toFixed(2)+" red pollen\nx"+o.min(35e-5*g.scorchingStarSize+2,5).toFixed(2)+" convert rate\nx"+o.min(15e-5*g.scorchingStarSize+1,1.5).toFixed(2)+" bee attack\n+20% instant red conversion"},gummyStarAura:{svg:document.getElementById("gummyStarAura"),cooldown:document.getElementById("gummyStarAura_cooldown"),amount:document.getElementById("gummyStarAura_amount"),maxCooldown:45,maxAmount:1,update:(e,t)=>{t.goo*=o.min(3e-10*t.gummyStarSize+1,2),t.whitePollen*=o.min(2e-10*t.gummyStarSize+1,2),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.2)},getMessage:e=>"Gummy Star Aura\nx"+o.min(3e-10*g.gummyStarSize+1,2).toFixed(2)+" goo\nx"+o.min(2e-10*g.gummyStarSize+1,2).toFixed(2)+" white pollen\n+20% instant white conversion"},bubbleBloat:{u:.3125,v:.0625,svg:document.getElementById("bubbleBloat"),cooldown:document.getElementById("bubbleBloat_cooldown"),amount:document.getElementById("bubbleBloat_amount"),maxCooldown:3600,tokenLife:4,amountFromCooldown:!0,update:(e,t)=>{t.convertRateAtHive*=(6*e+1).toFixed(2),t.blueFieldCapacity*=(5*e+1).toFixed(2)},getMessage:e=>"Bubble Bloat\nx"+(6*e+1).toFixed(2)+" convert rate at hive\nx"+(5*e+1).toFixed(2)+" blue field capacity"},gummyBall:{u:.3125,v:.0625,svg:document.getElementById("gummyBall"),cooldown:document.getElementById("gummyBall_cooldown"),amount:document.getElementById("gummyBall_amount"),maxCooldown:180,tokenLife:4,amountFromCooldown:!0,update:(e,t)=>{t.gummyBallSize*=1.5*e+1,t.whitePollen*=.15*e+1,e>=.99&&t.fieldIn&&(t.addEffect("gummyBall",-e),le.mobs.push(new Ze))},getMessage:e=>"Gummyball\nx"+(1.5*e+1).toFixed(2)+" gummyball size\nx"+(.2*e+1).toFixed(2)+" white pollen"},gummyBallCombo:{u:0,v:0,svg:document.getElementById("gummyBallCombo"),cooldown:document.getElementById("gummyBallCombo_cooldown"),amount:document.getElementById("gummyBallCombo_amount"),maxCooldown:10,maxAmount:1e3,tokenLife:4,update:(e,t)=>{t.goo*=MATH.lerp(1,2,.001*e),t.whitePollen*=1.1},getMessage:e=>"Gummyball Combo\nx"+MATH.lerp(1,2,.001*e).toFixed(2)+" goo\nx1.1 white pollen"},guidingStarAura:{u:0,v:0,svg:document.getElementById("guidingStarAura"),cooldown:document.getElementById("guidingStarAura_cooldown"),amount:document.getElementById("guidingStarAura_amount"),maxCooldown:0,tokenLife:4,maxAmount:1,update:(e,t)=>{t.whitePollen*=2,t.redPollen*=2,t.bluePollen*=2,t.capacity*=2},getMessage:e=>"Guiding Star Aura\nx2 pollen\nx2 capacity"},popStarPassive:{isPassive:!0,svg:document.getElementById("popStarPassive"),cooldown:document.getElementById("popStarPassive_cooldown"),amount:document.getElementById("popStarPassive_amount"),maxCooldown:60,triggerVal:30,triggerType:"blueBombTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){le.mobs.push(new ze)},getMessage:e=>"Pop Star\nEvery 30 blue bomb tokens summons a Pop Star, lasting for 45s, and applies 1m of bubble bloat. It grows for every bubble popped, x1.25 bubble pollen, 20% instant blue conversion, and up to x5 blue pollen. Upon summoning, it also applies 30s of Bubble Bloat. Popping a bubble while the star is active gives 1s(2s if golden) of Bubble Bloat, up to 1h. Bubble Bloat gives up to x6 convert rate and x6 blue field capacity. When the Pop Star disappears, it spawns 1 bubble for every 10 of the star's size, with an extra 5. Cooldown: 1m"},scorchingStarPassive:{isPassive:!0,svg:document.getElementById("scorchingStarPassive"),cooldown:document.getElementById("scorchingStarPassive_cooldown"),amount:document.getElementById("scorchingStarPassive_amount"),maxCooldown:60,triggerVal:15,triggerType:"redBoostTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){le.mobs.push(new Ue)},getMessage:e=>"Scorching Star\nEvery 15 red boost tokens summons a Scorching Star, lasting for 45s. It grows by 75(100 if dark) every second for every flame nearby. It grants up to x5 red pollen, x5 convert rate, x1.5 bee attack, and +20% instant red conversion. Cooldown: 1m"},gummyStarPassive:{isPassive:!0,svg:document.getElementById("gummyStarPassive"),cooldown:document.getElementById("gummyStarPassive_cooldown"),amount:document.getElementById("gummyStarPassive_amount"),maxCooldown:60,triggerVal:25,triggerType:"gummyStar",currentVal:0,currentCooldown:0,startVal:0,activate(){le.mobs.push(new Ne)},getMessage:e=>"Gummy Star\nEvery gumdrop used or after 20 gumdrops has a 9% chance to summon a Gummy Star, lasting for 45s. It grows based on how much goo you collect, giving up to x2 goo and x2 white pollen, while always giving +15% instant white conversion and +15% instant goo conversion. After disappearing, it spreads 20(+the amount of digits in the star's size) honey tokens, with a total value of approximately 1,000(+7.5% of the star's size). Cooldown: 1m"},guidingStarPassive:{isPassive:!0,svg:document.getElementById("guidingStarPassive"),cooldown:document.getElementById("guidingStarPassive_cooldown"),amount:document.getElementById("guidingStarPassive_amount"),maxCooldown:300,triggerVal:250,triggerType:"boostTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){let e=[];for(let t in ti)e.push(t);for(let t in le.mobs){let i=le.mobs[t];i.guidingstarinstance&&e.indexOf(i.field)>-1&&e.splice(e.indexOf(i.field),1)}e.length&&(e=e[o.random()*e.length|0],le.mobs.push(new Ye(e)),g.addMessage("⭐Guiding Star on "+MATH.doGrammar(e)+"!⭐"))},getMessage:e=>"Guiding Star\nEvery 250th boost token summons a guiding star over a random field, granting x2.5 capacity and pollen for 10m. Cooldown: 5m"},starShowerPassive:{isPassive:!0,svg:document.getElementById("starShowerPassive"),cooldown:document.getElementById("starShowerPassive_cooldown"),amount:document.getElementById("starShowerPassive_amount"),maxCooldown:25,triggerVal:35,triggerType:"markOrBoostTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){g.fieldIn&&le.mobs.push(new Ge(g.fieldIn))},getMessage:e=>"Every 35 mark or boost tokens summons 10 falling stars on the field. Falling stars collect 30 pollen from 5 flowers and instantly converts it. Catching a falling star converts 10% of your convert total from your bag, and grants a stack of inspire. Cooldown: 25s"},starSawPassive:{isPassive:!0,svg:document.getElementById("starSawPassive"),cooldown:document.getElementById("starSawPassive_cooldown"),amount:document.getElementById("starSawPassive_amount"),maxCooldown:40,triggerVal:2,triggerType:"stingerUsed",currentVal:0,currentCooldown:0,startVal:0,activate(){se.stinger.amount++,g.updateInventory(),g.addMessage("+1 Stinger (from Star Saw Refund)"),le.mobs.push(new Oe)},getMessage:e=>"Every 2nd stinger used is refunded and summons a star saw for 45s. The star circles you, damaging mobs by 30% of your attack total, popping bubbles, fuzz bombs, collecting tokens, and collecting and converting 5(+0.05 per attack total) pollen from 5 flowers every 0.1s. The star saw also converts pollen from your backpack equal to the amount it collects. Cooldown: 40s"},petalStormPassive:{isPassive:!0,svg:document.getElementById("petalStormPassive"),cooldown:document.getElementById("petalStormPassive_cooldown"),amount:document.getElementById("petalStormPassive_amount"),maxCooldown:30,triggerVal:30,triggerType:"boostTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){for(let e=0;e<30;e++)window.setTimeout((function(){le.mobs.push(new Be([g.body.position.x,g.body.position.y+.25,g.body.position.z],[o.cos(.75*e),0,o.sin(.75*e)]))}),1e3*e*.15)},getMessage:e=>"Every 30th boost token shoots 30 petal shurikens in all directions. Petal shurikens collects tokens and causes bees to convert pollen."},tidePower:{u:0,v:0,svg:document.getElementById("tidePower"),cooldown:document.getElementById("tidePower_cooldown"),amount:document.getElementById("tidePower_amount"),maxCooldown:20,maxAmount:500,update:(e,t)=>{t.collectorSpeed*=.00175*e+1,t.tidePower*=.0025*e+1,e>=500&&(t.addEffect("tidalSurge",1),t.addEffect("tidePower",!1,!1,0),t.addEffect("tideBlessing",25/14400))},getMessage:e=>"Tide Power\nx"+(.00175*e+1).toFixed(3)+" collector speed\nx"+(.0025*e+1).toFixed(3)+" wave size"},tidalSurge:{u:.3125,v:.0625,svg:document.getElementById("tidalSurge"),cooldown:document.getElementById("tidalSurge_cooldown"),amount:document.getElementById("tidalSurge_amount"),maxCooldown:10,tokenLife:4,amountFromCooldown:!0,update:(e,t)=>{t.collectorSpeed=3,t.tidalSurge=!0,t.addEffect("tidePower",!1,!1,0)},getMessage:e=>"Tidal Surge\nx5 collector speed"},tideBlessing:{u:.3125,v:.0625,svg:document.getElementById("tideBlessing"),cooldown:document.getElementById("tideBlessing_cooldown"),amount:document.getElementById("tideBlessing_amount"),maxCooldown:14400,tokenLife:4,amountFromCooldown:!0,update:(e,t)=>{t.bluePollen*=.15*e+1,t.honeyFromTokens*=.15*e+1,t.convertRateAtHive*=.15*e+1,t.pollenFromTools*=.15*e+1,t.pollenFromBees*=.15*e+1},getMessage:e=>"Tidal Blessing\nx"+(.15*e+1).toFixed(2)+" blue pollen\nx"+(.15*e+1).toFixed(2)+" convert rate at hive\nx"+(.15*e+1).toFixed(2)+" honey from tokens\nx"+(.15*e+1).toFixed(2)+" pollen from tools\nx"+(.15*e+1).toFixed(2)+" pollen from bees"},coconutShield:{u:.375,v:.25,svg:document.getElementById("coconutShield"),cooldown:document.getElementById("coconutShield_cooldown"),amount:document.getElementById("coconutShield_amount"),maxCooldown:10,maxAmount:1,update:(e,t)=>{t.beeAttack*=1.25,t.defense=1},getMessage:e=>"Coconut Shield\n+100% defense\nx1.25 bee attack"},coconutSurge:{u:.375,v:.25,svg:document.getElementById("coconutSurge"),cooldown:document.getElementById("coconutSurge_cooldown"),amount:document.getElementById("coconutSurge_amount"),maxCooldown:2,maxAmount:1,update:(e,t)=>{t.walkSpeed*=1.15,t.beeSpeed*=1.5},getMessage:e=>"Coconut Surge\nx1.15 walkspeed\nx1.5 bee speed"},conversionBoost:{u:.375,v:.25,svg:document.getElementById("conversionBoost"),cooldown:document.getElementById("conversionBoost_cooldown"),amount:document.getElementById("conversionBoost_amount"),maxCooldown:1800,maxAmount:1,update:(e,t)=>{t.convertRate*=2},getMessage:e=>"Conversion Boost\nx2 convert rate"},gummyMorph:{u:.375,v:.25,svg:document.getElementById("gummyMorph"),cooldown:document.getElementById("gummyMorph_cooldown"),amount:document.getElementById("gummyMorph_amount"),maxCooldown:10,maxAmount:1,update:(e,t)=>{t.goo*=1.75,t.instantRedConversion=1,t.instantWhiteConversion=1,t.instantBlueConversion=1,t.walkSpeed*=1.1,t.jumpPower*=1.2},getMessage:e=>"Gummy Morph\nx1.75 goo\n+100% instant conversion\nx1.1 walkspeed\nx1.2 jump power"},focusPulserPassive:{isPassive:!0,svg:document.getElementById("focusPulserPassive"),cooldown:document.getElementById("focusPulserPassive_cooldown"),amount:document.getElementById("focusPulserPassive_amount"),maxCooldown:20,triggerVal:25,triggerType:"focusTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){le.mobs.push(new Ve("red"))},getMessage:e=>"Focus Pulser\nEvery 25 focus tokens collected activates a red pulse, hopping to every red bee twice, collecting pollen. Pollen collection increases with each hop. Cooldown: 20s"},hastePulserPassive:{isPassive:!0,svg:document.getElementById("hastePulserPassive"),cooldown:document.getElementById("hastePulserPassive_cooldown"),amount:document.getElementById("hastePulserPassive_amount"),maxCooldown:20,triggerVal:25,triggerType:"hasteTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){le.mobs.push(new Ve("blue"))},getMessage:e=>"Haste Pulser\nEvery 25 haste tokens collected activates a blue pulse, hopping to every blue bee twice, collecting pollen. Pollen collection increases with each hop. Cooldown: 20s"},inspireCoconutsPassive:{isPassive:!0,svg:document.getElementById("inspireCoconutsPassive"),cooldown:document.getElementById("inspireCoconutsPassive_cooldown"),amount:document.getElementById("inspireCoconutsPassive_amount"),maxCooldown:.5,triggerVal:5,triggerType:"inspireTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){if(g.fieldIn)for(let e=0;e<5;e++)le.mobs.push(new Je(o.random()*ti[g.fieldIn].width|0,o.random()*ti[g.fieldIn].length|0,.4*e))},getMessage:e=>"Inspire Coconuts\nEvery 5 inspire tokens collected summons 5 falling coconuts which collect pollen when the land. Standing under the coconut instantly converts the player's convert total into honey tokens."},emergencyCoconutShieldPassive:{isPassive:!0,svg:document.getElementById("emergencyCoconutShieldPassive"),cooldown:document.getElementById("emergencyCoconutShieldPassive_cooldown"),amount:document.getElementById("emergencyCoconutShieldPassive_amount"),maxCooldown:60,triggerVal:1,triggerType:"coconutShield",currentVal:0,currentCooldown:0,startVal:0,activate(){if(g.fieldIn)for(let e=0;e<5;e++)le.mobs.push(new Je(o.random()*ti[g.fieldIn].width|0,o.random()*ti[g.fieldIn].length|0,.4*e));g.addEffect("coconutShield")},getMessage:e=>"Emergency Coconut Shield\nTaking damage from a monster will activate a shield, granting 100% defense, x1.25 bee attack and will drop 5 falling coconuts if in a field. Cooldown: 1m"},coconutHastePassive:{isPassive:!0,svg:document.getElementById("coconutHastePassive"),cooldown:document.getElementById("coconutHastePassive_cooldown"),amount:document.getElementById("coconutHastePassive_amount"),maxCooldown:1,triggerVal:1,triggerType:"fallingCoconuts",currentVal:0,currentCooldown:0,startVal:0,activate(){g.addEffect("haste"),g.addEffect("coconutSurge")},getMessage:e=>'Coconut Haste\nCatching a falling coconut will apply a stack of "Haste" and grant "Coconut Surge", giving x1.2 walkspeed and x1.5 bee speed for 2s.'},xFlamePassive:{isPassive:!0,svg:document.getElementById("xFlamePassive"),cooldown:document.getElementById("xFlamePassive_cooldown"),amount:document.getElementById("xFlamePassive_amount"),maxCooldown:25,triggerVal:20,triggerType:"battleTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){let e=[[-1,1],[1,-1],[-1,-1],[1,1]];if(g.fieldIn&&!g.attacked.length){le.flames.push(new pe(g.fieldIn,g.flowerIn.x,g.flowerIn.z));for(let t in e)for(let i=1;i<8;i++){let o=e[t][0]*i+g.flowerIn.x,n=e[t][1]*i+g.flowerIn.z;o>=0&&o<ti[g.fieldIn].width&&n>=0&&n<ti[g.fieldIn].length&&le.flames.push(new pe(g.fieldIn,o,n))}}else{le.flames.push(new pe(g.body.position.x,g.body.position.y,g.body.position.z,!0));for(let t in e)for(let i=1;i<8;i++){let o=e[t][0]*i,n=e[t][1]*i;le.flames.push(new pe(g.body.position.x+o,g.body.position.y,g.body.position.z+n,!0))}}},getMessage:e=>"X Flame\nEvery 20 battle tokens collected summons 29 flames in an X shape, lasting for 3 secs. Each flame collects 6R/3W/1B pollen from nearby flowers and deals 15 damage to nearby enemies every sec. Cooldown: 15s"},ignitePassive:{isPassive:!0,svg:document.getElementById("ignitePassive"),cooldown:document.getElementById("ignitePassive_cooldown"),amount:document.getElementById("ignitePassive_amount"),maxCooldown:.5,triggerVal:10,triggerType:"redAbilityTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){let e=[[-1,0],[0,-1],[0,1],[1,0]];if(g.fieldIn&&!g.attacked.length){le.flames.push(new pe(g.fieldIn,g.flowerIn.x,g.flowerIn.z));for(let t in e)for(let i=1;i<2;i++){let o=e[t][0]*i+g.flowerIn.x,n=e[t][1]*i+g.flowerIn.z;o>=0&&o<ti[g.fieldIn].width&&n>=0&&n<ti[g.fieldIn].length&&le.flames.push(new pe(g.fieldIn,o,n))}}else{le.flames.push(new pe(g.body.position.x,g.body.position.y,g.body.position.z,!0));for(let t in e)for(let i=1;i<2;i++){let o=e[t][0]*i,n=e[t][1]*i;le.flames.push(new pe(g.body.position.x+o,g.body.position.y,g.body.position.z+n,!0))}}},getMessage:e=>"Ignite\nEvery 10 red ability tokens collected summons 5 flames in a + shape, lasting for 3 secs. Each flame collects 9R/5W/2B pollen from nearby flowers and deals 15 damage to nearby enemies every sec."},bubbleBombsPassive:{isPassive:!0,svg:document.getElementById("bubbleBombsPassive"),cooldown:document.getElementById("bubbleBombsPassive_cooldown"),amount:document.getElementById("bubbleBombsPassive_amount"),maxCooldown:.5,triggerVal:10,triggerType:"bombTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){if(g.fieldIn)for(let e=0;e<3;e++)le.bubbles.push(new fe(g.fieldIn,o.random()*ti[g.fieldIn].width|0,o.random()*ti[g.fieldIn].length|0))},getMessage:e=>"Bubble Bombs\nEvery 10 blue bomb tokens collected summons 3 bubbles around the field, lasting for 10 secs. Each bubble collects 2R/6W/10B pollen from nearby flowers and replenish them when popped."},coinScatterPassive:{isPassive:!0,svg:document.getElementById("coinScatterPassive"),cooldown:document.getElementById("coinScatterPassive_cooldown"),amount:document.getElementById("coinScatterPassive_amount"),maxCooldown:45,triggerVal:20,triggerType:"markTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){if(g.fieldIn){let e=o.min(o.ceil(3*g.convertTotal),g.pollen);if(e<=0)return;g.pollen-=e;let t=o.ceil(e/24);for(let e=0;e<24;e++)le.tokens.push(new oi(30,[ti[g.fieldIn].x+(o.random()*ti[g.fieldIn].width|0),ti[g.fieldIn].y+1,ti[g.fieldIn].z+(o.random()*ti[g.fieldIn].length|0)],"honey",t,!1,"Coin Scatter"))}},getMessage:e=>"Coin Scatter\nConverts 300% of the player's convert total into 24 honey tokens, which are scattered randomly in the field. Cooldown: 45s"},diamondDrainPassive:{isPassive:!0,svg:document.getElementById("diamondDrainPassive"),cooldown:document.getElementById("diamondDrainPassive_cooldown"),amount:document.getElementById("diamondDrainPassive_amount"),maxCooldown:35,triggerVal:35,triggerType:"blueAbilityTokens",currentVal:0,currentCooldown:0,startVal:0,activate(){if(g.fieldIn){le.mobs.push(new je);for(let e=0;e<15;e++)Ci(g.fieldIn,o.random()*ti[g.fieldIn].width|0,o.random()*ti[g.fieldIn].length|0,(function(e){e.level<5?(e.level++,e.pollinationTimer=1):e.height=1;for(let t=0;t<6;t++)$t.add({x:e.x+ti[g.fieldIn].x,y:ti[g.fieldIn].y+.5,z:e.z+ti[g.fieldIn].z,vx:MATH.random(-1,1),vy:2*o.random(),vz:MATH.random(-1,1),grav:-3,size:100,col:[1,1,MATH.random(.6,1)],life:2.5,rotVel:MATH.random(-3,3),alpha:2})}),!0,!1,!0)}},getMessage:e=>"Diamond Drain\nEvery 35th blue ability token summons a diamond that converts your convert total of pollen into honey. Honey converted is multiplied by 2x, and the diamond pollinates 15 flowers in the field. Cooldown: 35s"},gummyMorphPassive:{isPassive:!0,svg:document.getElementById("gummyMorphPassive"),cooldown:document.getElementById("gummyMorphPassive_cooldown"),amount:document.getElementById("gummyMorphPassive_amount"),maxCooldown:25,triggerVal:30,triggerType:"gummyMorph",currentVal:0,currentCooldown:0,startVal:0,activate(){if(g.addEffect("gummyMorph"),g.fieldIn){let e=function(e){e.goo=1,e.height=1};for(let t in Si[g.fieldIn])for(let i in Si[g.fieldIn][t])Ci(g.fieldIn,i,t,e,!0,!0,!1)}},getMessage:e=>"Gummy Morph\nEvery 10 gummy bee tokens or 30 gumdrops used covers the field in goo and grants x1.75 goo, 100% instant goo conversion, +30 walkspeed and +3 jump power for 10s. Cooldown: 25s"},redPulse:{desc:"Activates a red pulse, hopping to every red bee twice, collecting 4(+0.5 for every hop) pollen from 25 flowers. Pollen collection increases with each hop. If the player owns a Cobalt Bee, a blue pulse is fired as well.",trialCooldown:25,trialRate:.6,statsToAddTo:["redAbilityTokens"],u:.0625,v:.375,tokenLife:12,func:function(e){le.mobs.push(new Ve("red")),g.ownsCobaltBee&&le.mobs.push(new Ve("blue"))}},bluePulse:{desc:"Activates a blue pulse, hopping to every red bee twice, collecting 4(+0.5 for every hop) pollen from 25 flowers. Pollen collection increases with each hop. If the player owns a Crimson Bee, a red pulse is fired as well.",trialCooldown:25,trialRate:.6,statsToAddTo:["blueAbilityTokens"],u:.125,v:.375,tokenLife:12,func:function(e){le.mobs.push(new Ve("blue")),g.ownsCrimsonBee&&le.mobs.push(new Ve("red"))}},redBombSync:{desc:"Allows red bombs to collect 7.5(10 if Red Bomb+) pollen from white flowers. If blue bomb sync is active, applies to blue flowers as well, collecting 5(7.5 if Red Bomb+) blue pollen.",trialCooldown:35,trialRate:.7,statsToAddTo:["redAbilityTokens","redBombTokens"],u:.1875,v:.375,svg:document.getElementById("redBombSync"),cooldown:document.getElementById("redBombSync_cooldown"),amount:document.getElementById("redBombSync_amount"),maxCooldown:25,maxAmount:1,tokenLife:24,update:(e,t)=>{t.redBombSync=!0},getMessage:e=>"Red Bomb Sync\nAllows red bombs to collect from white flowers. If blue bomb sync is active, applies to blue flowers aswell."},blueBombSync:{desc:"Allows blue bombs to collect 7.5(10 if Blue Bomb+) pollen from white flowers. If red bomb sync is active, applies to red flowers as well, collecting 5(7.5 if Blue Bomb+) red pollen.",trialCooldown:35,trialRate:.7,statsToAddTo:["blueAbilityTokens","blueBombTokens"],u:.25,v:.375,svg:document.getElementById("blueBombSync"),cooldown:document.getElementById("blueBombSync_cooldown"),amount:document.getElementById("blueBombSync_amount"),maxCooldown:25,maxAmount:1,tokenLife:24,update:(e,t)=>{t.blueBombSync=!0},getMessage:e=>"Blue Bomb Sync\nAllows blue bombs to collect from white flowers. If red bomb sync is active, applies to red flowers aswell."},beamStorm:{desc:"Summons 25(+2 per bee lvl) beams of light, each collecting all pollen from a patch of flowers. If this bee is gifted, the pollen is instantly converted.",trialCooldown:30,trialRate:.4,statsToAddTo:[],u:.3125,v:.375,tokenLife:12,func:function(e){if(g.fieldIn){g.beamStormRayData=[];for(let t=0;t<25+2*e.bee.level;t++)le.mobs.push(new Xe(e,.075*t,g.fieldIn))}}},rainCloud:{desc:"Applies a stack of White Boost and summons a cloud in a field, lasting for 60s(+5s per bee lvl). There is a 25% chance of the cloud spawning in your current field, or else a random field is chosen.<br><br>Clouds float around the field, replenishing flowers. Standing under a cloud grants Cloud Boost, granting x1.15(x1.25 if you own a gifted windy bee) pollen for 7.5s.",trialCooldown:60,trialRate:.5,statsToAddTo:[],u:.375,v:.375,tokenLife:24,func:function(e){g.addEffect("whiteBoost");let t=o.random()<.25&&g.fieldIn?g.fieldIn:0;if(!t){t=[];for(let e in ti)t.push(e);t=t[o.random()*t.length|0]}le.mobs.push(new Qe(t,o.random()*ti[t].width|0,o.random()*ti[t].length|0,60+5*e.bee.level)),g.addMessage("☁️Your windy bee made a cloud in the "+MATH.doGrammar(t)+"!☁️")}},tornado:{desc:"Applies a stack of White Boost and summons a tornado in the field, lasting for 7.5s(+0.5s per bee lvl)(+1s per haste stack). The tornado is improved based on the amount of haste stacks you had when it was summoned.<br><br>The tornado moves around at the speed of 1(+0.05 per bee lvl)(+0.25 per haste stack) flowers per second, picking up tokens, popping bubbles and fuzz bombs, and also collects 7 pollen from 21 flowers every 0.25s.",trialCooldown:75,trialRate:.5,statsToAddTo:[],u:.4375,v:.375,tokenLife:24,func:function(e){g.addEffect("whiteBoost"),g.fieldIn&&le.mobs.push(new Ke(e.bee.level))}},cloudBoost:{u:.3125,v:.0625,svg:document.getElementById("cloudBoost"),cooldown:document.getElementById("cloudBoost_cooldown"),amount:document.getElementById("cloudBoost_amount"),maxCooldown:7.5,tokenLife:4,amountFromCooldown:!0,update:(e,t)=>{t.redPollen*=t.cloudBoostAmount,t.bluePollen*=t.cloudBoostAmount,t.whitePollen*=t.cloudBoostAmount},getMessage:e=>"Cloud Boost\nx"+g.cloudBoostAmount+"  pollen"+(g.cloudBoostAmount>1.25?"(you have gifted windy bee, so x1.25, not x1.15)":"")},scratch:{desc:"Collects 40(+1.5 per bee lvl) pollen from 12 flowers.",trialCooldown:35,trialRate:.333,statsToAddTo:[],u:.25,v:.4375,tokenLife:12,func:function(e){g.fieldIn&&le.mobs.push(new et(e.bee,e.x,e.z))}},tabbyLove:{desc:'Grants x1.04 Tabby Bee convert rate, Tabby Bee gather amount, and pollen from "Scratch". Stacks up to 250x, for a maximum of x11 Tabby Bee convert rate, Tabby Bee gather amount, and pollen from Scratch.',trialCooldown:65,trialRate:.9,statsToAddTo:[],u:.3125,v:.4375,svg:document.getElementById("tabbyLove"),cooldown:document.getElementById("tabbyLove_cooldown"),amount:document.getElementById("tabbyLove_amount"),maxCooldown:1/0,maxAmount:250,tokenLife:16,update:(e,t)=>{t.tabbyLoveStacks=.04*e+1},getMessage:e=>"Tabby Love\nx"+g.tabbyLoveStacks+" Tabby Bee convert rate\nx"+g.tabbyLoveStacks+" Tabby Bee gather amount\nx"+g.tabbyLoveStacks+' pollen from "Scratch"'},impale:{desc:"Summons a spike per bee lvl, attacking a random enemy. Each spike deals damage equal to 5% of the enemy's health + the bee's attack. The damage is heavily reduced is past 1,000, and can vary between x0.74 to x1.35. Multiple spikes targeting an enemy reduces damage by up to 75%.",trialCooldown:35,trialRate:.8,statsToAddTo:["blueAbilityTokens","attackTokens"],u:.375,v:.5625,tokenLife:24,func:function(e){for(let t=0;t<e.bee.level;t++)window.setTimeout((function(){le.mobs.push(new it(e.bee))}),300*t)}},comfortingNectar:{u:.3125,v:.0625,hideAmount:!0,svg:document.getElementById("comfortingNectar"),cooldown:document.getElementById("comfortingNectar_cooldown"),amount:document.getElementById("comfortingNectar_amount"),maxCooldown:21600,tokenLife:4,amountFromCooldown:!0,update:(e,t)=>{t.whiteConvertRate*=(.9*e+1.1).toFixed(2),t.bluePollen*=(.45*e+1.05).toFixed(2),t.convertRateAtHive*=(.9*e+1.1).toFixed(2),t.honeyPerPollen*=(.04*e+1.01).toFixed(2)},getMessage:e=>"Comforting Nectar\nx"+(.9*e+1.1).toFixed(2)+" white bee convert rate\nx"+(.45*e+1.05).toFixed(2)+" blue pollen\nx"+(.9*e+1.1).toFixed(2)+" convert rate at hive\nx"+(.04*e+1.01).toFixed(2)+" honey per pollen"},invigoratingNectar:{u:.3125,v:.0625,hideAmount:!0,svg:document.getElementById("invigoratingNectar"),cooldown:document.getElementById("invigoratingNectar_cooldown"),amount:document.getElementById("invigoratingNectar_amount"),maxCooldown:21600,tokenLife:4,amountFromCooldown:!0,update:(e,t)=>{t.convertRate*=(.45*e+1.05).toFixed(2),t.redPollen*=(.45*e+1.05).toFixed(2),t.convertRateAtHive*=(.09*e+1.01).toFixed(2),t.honeyPerPollen*=(.04*e+1.01).toFixed(2)},getMessage:e=>"Invigorating Nectar\nx"+(.45*e+1.05).toFixed(2)+" convert rate\nx"+(.45*e+1.05).toFixed(2)+" red pollen\nx"+(.09*e+1.01).toFixed(2)+" bee attack\nx"+(.04*e+1.01).toFixed(2)+" honey per pollen"},motivatingNectar:{u:.3125,v:.0625,hideAmount:!0,svg:document.getElementById("motivatingNectar"),cooldown:document.getElementById("motivatingNectar_cooldown"),amount:document.getElementById("motivatingNectar_amount"),maxCooldown:21600,tokenLife:4,amountFromCooldown:!0,update:(e,t)=>{t.convertRate*=(.45*e+1.05).toFixed(2),t.bluePollen*=(.45*e+1.05).toFixed(2),t.redBeeAbilityRate*=(.04*e+1.01).toFixed(2),t.whiteBeeAbilityRate*=(.04*e+1.01).toFixed(2),t.blueBeeAbilityRate*=(.04*e+1.01).toFixed(2),t.honeyPerPollen*=(.04*e+1.01).toFixed(2)},getMessage:e=>"Motivating Nectar\nx"+(.45*e+1.05).toFixed(2)+" convert rate\nx"+(.45*e+1.05).toFixed(2)+" blue pollen\nx"+(.04*e+1.01).toFixed(2)+" bee ability rate\nx"+(.04*e+1.01).toFixed(2)+" honey per pollen"},refreshingNectar:{u:.3125,v:.0625,hideAmount:!0,svg:document.getElementById("refreshingNectar"),cooldown:document.getElementById("refreshingNectar_cooldown"),amount:document.getElementById("refreshingNectar_amount"),maxCooldown:21600,tokenLife:4,amountFromCooldown:!0,update:(e,t)=>{t.blueConvertRate*=(.9*e+1.1).toFixed(2),t.redPollen*=(.45*e+1.05).toFixed(2),t.beeEnergy*=(.45*e+1.05).toFixed(2),t.honeyPerPollen*=(.04*e+1.01).toFixed(2)},getMessage:e=>"Refreshing Nectar\nx"+(.9*e+1.1).toFixed(2)+" blue bee convert rate\nx"+(.45*e+1.05).toFixed(2)+" red pollen\nx"+(.45*e+1.05).toFixed(2)+" bee energy\nx"+(.04*e+1.01).toFixed(2)+" honey per pollen"},satisfyingNectar:{u:.3125,v:.0625,hideAmount:!0,svg:document.getElementById("satisfyingNectar"),cooldown:document.getElementById("satisfyingNectar_cooldown"),amount:document.getElementById("satisfyingNectar_amount"),maxCooldown:21600,tokenLife:4,amountFromCooldown:!0,update:(e,t)=>{t.redConvertRate*=(.9*e+1.1).toFixed(2),t.whitePollen*=(.9*e+1.1).toFixed(2),t.honeyAtHive*=(.45*e+1.05).toFixed(2),t.honeyPerPollen*=(.04*e+1.01).toFixed(2)},getMessage:e=>"Satisfying Nectar\nx"+(.9*e+1.1).toFixed(2)+" red bee convert rate\nx"+(.9*e+1.1).toFixed(2)+" white pollen\nx"+(.45*e+1.05).toFixed(2)+" honey at hive\nx"+(.04*e+1.01).toFixed(2)+" honey per pollen"},corruption:{u:0,v:0,svg:document.getElementById("corruption"),cooldown:document.getElementById("corruption_cooldown"),amount:document.getElementById("corruption_amount"),maxCooldown:0,tokenLife:4,maxAmount:100,update:(e,t)=>{t.abilityDuplicationChance+=.001*e+.05},getMessage:e=>"Corruption\n+"+(.1*e+5|0)+"% ability duplication chance"},glitch:{desc:"Corrupts a random field 15x(+0.5x per bee lvl)(+ up to 15x depending on the bee's drives). Corruption stacks up to 100x, and standing in corrupted fields grant 5% to 15% ability dupication chance.<br><br>Ability dupication chance allows ability tokens to be duped, being reposition somewhere else on the field, lasting for x2(+0.1x per bee lvl) the original token's lifespan.<br><br>Standing under duped tokens for 1s will activate them. There is a 10%(+0.1% per glitched drive) that the duped token will become a ☺ token. ☺ tokens activate all duped tokens, add 3x corruption to the field, and collect x3 the bee's gather amount of pollen, instantly converting 50%. The pollen is multiplied by 25% for each duped token collected.",trialCooldown:120,trialRate:.35,u:.4375,v:.5625,tokenLife:8,func:function(e){ti[e.field].corruption=o.min(ti[e.field].corruption+15+.5*e.bee.level+15*(ti[e.field].generalColorComp.r*g.extraInfo.drives.red/50+ti[e.field].generalColorComp.w*g.extraInfo.drives.white/50+ti[e.field].generalColorComp.b*g.extraInfo.drives.blue/50+g.extraInfo.drives.glitched/50)/4,100),le.mobs.push(new ot(e.field,5))}},mindHack:{desc:"Stuns 3(+1 every 4 bee lvls) random nearby enemies for 3s(+0.1s per bee lvl). Stunned enemies take x1.25 damage.",trialCooldown:25,trialRate:.4,u:0,v:.625,tokenLife:16,func:function(e){let t=[];for(let e in g.attacked)t.push(g.attacked[e]);for(let i=0;i<3+.25*e.bee.level&&t.length;i++){let i=o.random()*t.length|0;t[i].mindHacked=3+.1*e.bee.level,t.splice(i,1)}}},mapCorruption:{desc:"Corrupts a random field you're not in by 30x(+2x per bee lvl)(+ up to 15x depending on the bee's drives and the field's color).",trialCooldown:100,trialRate:.25,u:.0625,v:.625,tokenLife:8,func:function(e){let t=[];for(let e in ti)t.push(e);t.splice(t.indexOf(e.field),1),t=t[o.random()*t.length|0],ti[t].corruption=o.min(ti[t].corruption+30+2*e.bee.level+15*(ti[t].generalColorComp.r*g.extraInfo.drives.red/50+ti[t].generalColorComp.w*g.extraInfo.drives.white/50+ti[t].generalColorComp.b*g.extraInfo.drives.blue/50+g.extraInfo.drives.glitched/50)/4,100),le.mobs.push(new ot(t,5)),g.addMessage("Your Digital Bee corrupted the"+MATH.doGrammar(t)+"!",[127.5,0,100])}},smiley:{trialCooldown:0,trialRate:0,u:.125,v:.625,tokenLife:12,func:function(e){let t=0;for(let e in le.tokens)le.tokens[e]instanceof ni&&(le.tokens[e].collect(),t++);e.field&&(ti[e.field].corruption=o.min(ti[e.field].corruption+3,100),Hi({x:e.x,z:e.z,pattern:[[-4,0],[-4,1],[-4,2],[-3,3],[-2,4],[-1,4],[0,4],[1,4],[2,4],[3,3],[4,2],[4,1],[4,0],[4,-1],[4,-2],[3,-3],[2,-4],[1,-4],[0,-4],[-1,-4],[-2,-4],[-3,-3],[-4,-2],[-4,-1],[-1,-1],[1,-1],[2,1],[1,2],[0,2],[-1,2],[-2,1]],amount:3*e.bee.gatherAmount,stackOffset:.4+.5*o.random(),multiplier:.25*t+1,instantConversion:.5,field:e.field}),le.mobs.push(new ot(e.field,2)))}},redJellyBean:{u:.25,v:.6875,svg:document.getElementById("redJellyBean"),cooldown:document.getElementById("redJellyBean_cooldown"),amount:document.getElementById("redJellyBean_amount"),maxCooldown:60,maxAmount:3,tokenLife:16,update:(e,t)=>{t.redPollen*=.075*e+1.1},getMessage:e=>"Red Jelly Bean\nx"+(.075*e+1.1).toFixed(2)+" red pollen"},whiteJellyBean:{u:.3125,v:.6875,svg:document.getElementById("whiteJellyBean"),cooldown:document.getElementById("whiteJellyBean_cooldown"),amount:document.getElementById("whiteJellyBean_amount"),maxCooldown:60,maxAmount:3,tokenLife:16,update:(e,t)=>{t.whitePollen*=.075*e+1.1},getMessage:e=>"White Jelly Bean\nx"+(.075*e+1.1).toFixed(2)+" white pollen"},blueJellyBean:{u:.375,v:.6875,svg:document.getElementById("blueJellyBean"),cooldown:document.getElementById("blueJellyBean_cooldown"),amount:document.getElementById("blueJellyBean_amount"),maxCooldown:60,maxAmount:3,tokenLife:16,update:(e,t)=>{t.bluePollen*=.075*e+1.1},getMessage:e=>"Blue Jelly Bean\nx"+(.075*e+1.1).toFixed(2)+" blue pollen"},pinkJellyBean:{u:.4375,v:.6875,svg:document.getElementById("pinkJellyBean"),cooldown:document.getElementById("pinkJellyBean_cooldown"),amount:document.getElementById("pinkJellyBean_amount"),maxCooldown:60,maxAmount:3,tokenLife:16,update:(e,t)=>{t.pollenFromBees*=.075*e+1.1},getMessage:e=>"Pink Jelly Bean\nx"+(.075*e+1.1).toFixed(2)+" pollen from bees"},brownJellyBean:{u:0,v:.75,svg:document.getElementById("brownJellyBean"),cooldown:document.getElementById("brownJellyBean_cooldown"),amount:document.getElementById("brownJellyBean_amount"),maxCooldown:60,maxAmount:3,tokenLife:16,update:(e,t)=>{t.pollenFromTools*=.075*e+1.1},getMessage:e=>"Brown Jelly Bean\nx"+(.075*e+1.1).toFixed(2)+" pollen from tools"},greenJellyBean:{u:.0625,v:.75,svg:document.getElementById("greenJellyBean"),cooldown:document.getElementById("greenJellyBean_cooldown"),amount:document.getElementById("greenJellyBean_amount"),maxCooldown:60,maxAmount:3,tokenLife:16,update:(e,t)=>{t.criticalChance+=.01*e+.03},getMessage:e=>"Green Jelly Bean\n+"+(e+3)+"% critical chance"},blackJellyBean:{u:.125,v:.75,svg:document.getElementById("blackJellyBean"),cooldown:document.getElementById("blackJellyBean_cooldown"),amount:document.getElementById("blackJellyBean_amount"),maxCooldown:60,maxAmount:3,tokenLife:16,update:(e,t)=>{t.whiteBombPollen*=.075*e+1.1,t.redBombPollen*=.075*e+1.1,t.blueBombPollen*=.075*e+1.1},getMessage:e=>"Black Jelly Bean\nx"+(.075*e+1.1).toFixed(2)+" bomb pollen"},yellowJellyBean:{u:.1875,v:.75,svg:document.getElementById("yellowJellyBean"),cooldown:document.getElementById("yellowJellyBean_cooldown"),amount:document.getElementById("yellowJellyBean_amount"),maxCooldown:60,maxAmount:3,tokenLife:16,update:(e,t)=>{t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,.05*e+.1),t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,.05*e+.1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,.05*e+.1)},getMessage:e=>"Yellow Jelly Bean\n+"+(5*e+10)+"% instant conversion"},roboChallengeBuff:{u:0,v:0,svg:document.getElementById("roboChallengeBuff"),cooldown:document.getElementById("roboChallengeBuff_cooldown"),amount:document.getElementById("roboChallengeBuff_amount"),maxCooldown:90,tokenLife:4,maxAmount:1,update:"",getMessage:""},redDriveBuff:{u:0,v:0,svg:document.getElementById("redDriveBuff"),cooldown:document.getElementById("redDriveBuff_cooldown"),amount:document.getElementById("redDriveBuff_amount"),maxCooldown:90,tokenLife:4,maxAmount:1,update:(e,t)=>{t.redPollen*=1.25,t.redFieldCapacity*=1.25,t.redBeeAttack++},getMessage:e=>"Red Drive\nx1.25 red pollen\nx1.25 red field capacity\n+1 red bee attack"},blueDriveBuff:{u:0,v:0,svg:document.getElementById("blueDriveBuff"),cooldown:document.getElementById("blueDriveBuff_cooldown"),amount:document.getElementById("blueDriveBuff_amount"),maxCooldown:90,tokenLife:4,maxAmount:1,update:(e,t)=>{t.bluePollen*=1.25,t.blueFieldCapacity*=1.25,t.blueBeeAttack++},getMessage:e=>"Blue Drive\nx1.25 blue pollen\nx1.25 blue field capacity\n+1 blue bee attack"},whiteDriveBuff:{u:0,v:0,svg:document.getElementById("whiteDriveBuff"),cooldown:document.getElementById("whiteDriveBuff_cooldown"),amount:document.getElementById("whiteDriveBuff_amount"),maxCooldown:90,tokenLife:4,maxAmount:1,update:(e,t)=>{t.whitePollen*=1.25,t.whiteFieldCapacity*=1.25,t.whiteBeeAttack++},getMessage:e=>"White Drive\nx1.25 white pollen\nx1.25 white field capacity\n+1 white bee attack"},glitchedDriveBuff:{u:0,v:0,svg:document.getElementById("glitchedDriveBuff"),cooldown:document.getElementById("glitchedDriveBuff_cooldown"),amount:document.getElementById("glitchedDriveBuff_amount"),maxCooldown:90,tokenLife:4,maxAmount:1,update:(e,t)=>{t.redPollen*=1.25,t.bluePollen*=1.25,t.whitePollen*=1.25,t.capacity*=1.25,t.whiteBeeAttack++,t.blueBeeAttack++,t.redBeeAttack++},getMessage:e=>"Glitched Drive\nx1.25 pollen\nx1.25 capacity\n+1 bee attack"},antChallenge:{u:0,v:0,svg:document.getElementById("antChallenge"),cooldown:document.getElementById("antChallenge_cooldown"),amount:document.getElementById("antChallenge_amount"),maxCooldown:300,tokenLife:4,maxAmount:1,update:(e,t)=>{t.instantRedConversion=1,t.instantWhiteConversion=1,t.instantBlueConversion=1},getMessage:e=>"Ant Challenge\n+100% instant conversion"},bearMorph:{u:0,v:0,svg:document.getElementById("bearMorph"),cooldown:document.getElementById("bearMorph_cooldown"),amount:document.getElementById("bearMorph_amount"),maxCooldown:30,maxAmount:1,update:(e,t)=>{t.redPollen*=1.25,t.bluePollen*=1.25,t.whitePollen*=1.25,t.walkSpeed*=1.1,t.jumpPower*=1.2},getMessage:e=>"Bear Morph\nx1.25 pollen\nx1.1 walkspeed\nx1.2 jump power"},bearMorph_:{u:0,v:0,svg:document.getElementById("bearMorph_"),cooldown:document.getElementById("bearMorph__cooldown"),amount:document.getElementById("bearMorph__amount"),maxCooldown:30,maxAmount:1,update:(e,t)=>{t.redPollen*=1.25,t.bluePollen*=1.25,t.whitePollen*=1.25,t.pollenFromBees*=1.25,t.pollenFromTools*=1.25,t.convertRate*=1.5,t.walkSpeed*=1.1,t.jumpPower*=1.2},getMessage:e=>"Bear Morph+\nx1.25 pollen\nx1.5 convert rate\nx1.25 pollen from bees\nx1.25 pollen from tools\nx1.1 walkspeed\nx1.2 jump power"},bearMorphToken:{desc:"Grants x1.25 pollen, x1.1 walkspeed, and x1.2 jump power for 10s. If the bee is gifted, this has a 20%(+1% per lvl) to grant an additional x1.5 convert rate, x1.25 pollen from bees, and x1.25 pollen from tools.",trialCooldown:120,trialRate:.25,u:.1875,v:.8125,tokenLife:16,func:function(e){o.random()<.2+.01*e.bee.level?g.addEffect("bearMorph_"):g.addEffect("bearMorph")}},fetch:{desc:"Summons a ball and starts a game of fetch. When you kick the ball, puppy bee will kick it back. The ball collects 5(+0.5 per lvl) pollen from 1 flower, picks up tokens, and more while it rolls. Every 4th hit will reward treats, with the amount of treats doubling every time. Treat rewards are stopped at 128.",trialCooldown:70,trialRate:.15,u:.25,v:.8125,tokenLife:8,func:function(e){let t=ti[e.field],i=new lt([t.x+e.x,t.y+1,t.z+e.z],e.bee);le.mobs.push(i),e.bee.fetchBall=i}},puppyLove:{desc:"Grants all bees in the hive 75(+20 per lvl) bond.",trialCooldown:30,trialRate:.2,u:.3125,v:.8125,tokenLife:8,func:function(e){le.explosions.push(new ce({col:[1,1,1],pos:[ti[e.field].x+e.x,ti[e.field].y+.5,ti[e.field].z+e.z],life:.5,size:6,speed:.25,aftershock:.05}));for(let t in g.hive)for(let i in g.hive[t])if(g.hive[t][i].type){let o=75+20*e.bee.level,n=g.hive[t][i].bee.pos.slice();g.hive[t][i].bond+=o,Kt.add(o+"",[n[0],n[1]+1,n[2]],ae.bondArr,0,"+",1.5)}}},festiveCheer:{u:.375,v:.8125,svg:document.getElementById("festiveCheer"),cooldown:document.getElementById("festiveCheer_cooldown"),amount:document.getElementById("festiveCheer_amount"),maxCooldown:10,maxAmount:1,update:(e,t)=>{t.convertRate*=2,t.instantRedConversion=MATH.applyPercentage(t.instantRedConversion,1),t.instantWhiteConversion=MATH.applyPercentage(t.instantWhiteConversion,1),t.instantBlueConversion=MATH.applyPercentage(t.instantBlueConversion,1)},getMessage:e=>"Festive Cheer\n+100% instant conversion\nx2 convert rate"},festiveGifts:{desc:"Creates a ring of 7(+1 per 4 lvls) gifts and grants Festive Cheer. Festive Cheer applies +100% instant conversion and x2 convert rate for 10s. Gifts given can include<br><br>• Common Gifts: honey, red boost tokens, treats, fruits, royal jelly, gumdrops.<br><br>• Rare Gifts: tickets, extracts, micro-converters, and magic beans.<br><br>• If the bee is gifted, these additional gifts maybe rewarded: glitter, oil, enzymes, and field dice.",trialCooldown:100,trialRate:.05,u:.375,v:.8125,tokenLife:8,func:function(e){g.addEffect("festiveCheer"),g.addMessage("🎁 Festive Bee created festive gifts! 🎁",ae.redArr);let t=7+.25*e.bee.level|0,i=.2*t+1.75,n=["redBoost","redBoost","redBoost","treat","treat","strawberry","blueberry","sunflowerSeed","pineapple","honey","honey","gumdrops","royalJelly"];n=[...n,...n,...n,"ticket","redExtract","blueExtract","microConverter","magicBean"],e.bee.gifted&&(n=[...n,...n,...n,"glitter","oil","enzymes","fieldDice","starJelly"]);let s=ti[e.field].x+e.x,r=ti[e.field].y+1,a=ti[e.field].z+e.z;for(let l=0,d=MATH.TWO_PI/t;l<MATH.TWO_PI;l+=d){let t=n[o.random()*n.length|0];"redBoost"===t?le.tokens.push(new ii(30,[s+o.cos(l)*i,r,a+o.sin(l)*i],"redBoost",{},!0)):le.tokens.push(new oi(30,[s+o.cos(l)*i,r,a+o.sin(l)*i],t,"honey"===t?(o.random()*e.bee.level+e.bee.level)*e.bee.level*50+2500:1,!0,MATH.doGrammar(this.type)))}}}},ee=[];for(let e in $){if($[e].statsToAddTo)for(let t in $[e].statsToAddTo)ee.indexOf($[e].statsToAddTo[t])<0&&ee.push($[e].statsToAddTo[t]);$[e].svg&&($[e].svg.addEventListener("mousemove",(function(t){let i;Q.style.display="block",Q.style.left=t.x+10+"px",Q.style.top=t.y+10+"px",Q.style.bottom="",Q.style.right="";for(let t in g.effects)if(g.effects[t].type===e){i=t;break}let o=$[e].getMessage(g.effects[i].amount,"\n"),n=o.indexOf("\n");$[e].amountFromCooldown||1===g.effects[i].amount||(o=o.substr(0,n)+" (x"+g.effects[i].amount+")"+o.substr(n,o.length)),Q.innerText=o+"\n"+($[e].isPassive||0===$[e].maxCooldown||$[e].maxCooldown===1/0?"":MATH.doTime((0|g.effects[i].cooldown).toString()))})),$[e].svg.addEventListener("mouseleave",(function(){Q.style.display="none"})))}let te=0,ie=document.getElementById("howManyToFeed"),oe=document.getElementById("howManyMessage"),ne=document.getElementById("feedAmount"),se={translator:{amount:0,u:0,v:0,value:1/0,use:function(){}},spiritPetal:{amount:0,u:0,v:0,value:1/0,use:function(){}},cog:{amount:0,u:0,v:0,value:1/0,use:function(){}},jellyBeans:{amount:0,u:.1875,v:.6875,value:20,cooldown:25,autoUse:!0,use:function(){if(g.fieldIn){se.jellyBeans.amount--;for(let e=0;e<15;e++)window.setTimeout((function(){if(g.fieldIn){let e=g.bodyDir.slice();e[1]=MATH.random(5,9),vec3.rotateY(e,e,MATH.ORIGIN,MATH.random(-.7,.7)),e[0]*=MATH.random(3,9),e[2]*=MATH.random(3,9);let t=[];t.push("redJellyBean","blueJellyBean","whiteJellyBean"),t.push("redJellyBean","blueJellyBean","whiteJellyBean"),t.push("redJellyBean","blueJellyBean","whiteJellyBean"),t.push("pinkJellyBean","brownJellyBean","blackJellyBean","yellowJellyBean","greenJellyBean"),le.mobs.push(new nt(g.fieldIn,e,t[o.random()*t.length|0]))}}),250*e)}else g.addMessage("You must be in a field to use Jelly Beans!",ae.redArr)}},ticket:{amount:0,u:.1875,v:.625,value:15,use:function(){}},antPass:{amount:0,u:.25,v:.625,value:1/0,use:function(){}},cloudVial:{amount:0,u:.3125,v:.75,value:25,use:function(){if(!g.fieldIn)return void g.addMessage("You must be in a field to use Cloud Vials!",ae.redArr);if("AntField"===g.fieldIn)return void g.addMessage("You can' use this item in the Ant Field!",ae.redArr);let e=0;for(let t in le.mobs)le.mobs[t]instanceof Qe&&le.mobs[t].field===g.fieldIn&&e++;e>6?g.addMessage("There are too many clouds in this field!",ae.redArr):(se.cloudVial.amount--,le.mobs.push(new Qe(g.fieldIn,g.flowerIn.x,g.flowerIn.z,180)))}},magicBean:{amount:0,u:.25,v:.75,value:25,use:function(){if(!g.fieldIn)return void g.addMessage("You must be in a field to use Magic Beans!",ae.redArr);if("AntField"===g.fieldIn)return void g.addMessage("You can' use this item in the Ant Field!",ae.redArr);for(let e in le.mobs)if(le.mobs[e]instanceof st&&le.mobs[e].field===g.fieldIn)return void g.addMessage("There is already a sprout in this field!",ae.redArr);se.magicBean.amount--;let e=["basic","rare","epic","gummy","legendary","supreme"];e=e[o.pow(o.random(),1.65)*o.pow(o.random(),1.65)*e.length|0],o.random()<.65&&g.isNight<.9&&(e="moon"),g.addMessage("You planted a "+MATH.doGrammar(e)+" Sprout!",{rare:[130,130,130],epic:[210,170,0],legendary:[0,190,220],supreme:[30,220,90],gummy:[230,70,230],moon:[140,200,230]}[e]),le.mobs.push(new st(g.fieldIn,e))}},comfortingVial:{amount:0,u:0,v:0,value:35,use:function(){se.comfortingVial.amount--,g.addEffect("comfortingNectar",3600/21600)}},invigoratingVial:{amount:0,u:0,v:0,value:35,use:function(){se.invigoratingVial.amount--,g.addEffect("invigoratingNectar",3600/21600)}},motivatingVial:{amount:0,u:0,v:0,value:35,use:function(){se.motivatingVial.amount--,g.addEffect("motivatingNectar",3600/21600)}},refreshingVial:{amount:0,u:0,v:0,value:35,use:function(){se.refreshingVial.amount--,g.addEffect("refreshingNectar",3600/21600)}},satisfyingVial:{amount:0,u:0,v:0,value:35,use:function(){se.satisfyingVial.amount--,g.addEffect("satisfyingNectar",3600/21600)}},redDrive:{amount:0,u:0,v:0,value:35,use:function(){g.roboChallenge?(se.redDrive.amount--,g.addEffect("redDriveBuff"),g.extraInfo.drives.red=o.min(g.extraInfo.drives.red+1,50)):g.addMessage("Drives can only be used in the Robo Challenge!",ae.redArr)}},blueDrive:{amount:0,u:0,v:0,value:35,use:function(){g.roboChallenge?(se.blueDrive.amount--,g.addEffect("blueDriveBuff"),g.extraInfo.drives.blue=o.min(g.extraInfo.drives.blue+1,50)):g.addMessage("Drives can only be used in the Robo Challenge!",ae.redArr)}},whiteDrive:{amount:0,u:0,v:0,value:35,use:function(){g.roboChallenge?(se.whiteDrive.amount--,g.addEffect("whiteDriveBuff"),g.extraInfo.drives.white=o.min(g.extraInfo.drives.white+1,50)):g.addMessage("Drives can only be used in the Robo Challenge!",ae.redArr)}},glitchedDrive:{amount:0,u:0,v:0,value:35,use:function(){g.roboChallenge?(se.glitchedDrive.amount--,g.addEffect("glitchedDriveBuff"),g.extraInfo.drives.glitched=o.min(g.extraInfo.drives.glitched+1,50)):g.addMessage("Drives can only be used in the Robo Challenge!",ae.redArr)}},roboPass:{amount:0,u:.375,v:.75,value:50,use:function(){}},fieldDice:{amount:0,u:.3125,v:.625,value:12,use:function(){se.fieldDice.amount--;let e=[];for(let t in ti)"AntField"!==t&&e.push(t);for(let t=0;t<1;t++){let t=o.random()*e.length|0;g.addEffect(e[t][0].toLowerCase()+e[t].substring(1,e[t].length)+"Boost",!1,!1,void 0,1),g.addMessage('Activated "'+MATH.doGrammar(e[t][0].toLowerCase()+e[t].substring(1,e[t].length))+' Boost"')}}},smoothDice:{amount:0,u:.375,v:.625,value:30,use:function(){se.smoothDice.amount--;let e=[];for(let t in ti)"AntField"!==t&&e.push(t);for(let t=0;t<2;t++){let t=o.random()*e.length|0;g.addEffect(e[t][0].toLowerCase()+e[t].substring(1,e[t].length)+"Boost",!1,!1,void 0,2),g.addMessage('Activated x2 "'+MATH.doGrammar(e[t][0].toLowerCase()+e[t].substring(1,e[t].length))+' Boost"'),e.splice(t,1)}}},loadedDice:{amount:0,u:.4375,v:.625,value:50,use:function(){se.loadedDice.amount--;let e=[];for(let t in ti)"AntField"!==t&&(e.push(t),t===g.fieldIn&&(e.push(t),e.push(t),e.push(t),e.push(t),e.push(t),e.push(t)));for(let t=0;t<3;t++){let t=o.random()*e.length|0;g.addEffect(e[t][0].toLowerCase()+e[t].substring(1,e[t].length)+"Boost",!1,!1,void 0,3),g.addMessage('Activated x3 "'+MATH.doGrammar(e[t][0].toLowerCase()+e[t].substring(1,e[t].length))+' Boost"');for(let i in e)e[i]===e[t]&&e.splice(i,1)}}},microConverter:{amount:0,u:0,v:.6875,value:16,cooldown:2,use:function(){g.pollen<1?g.addMessage("You must have pollen to use a micro-converter!",ae.redArr):(se.microConverter.amount--,Kt.add(g.pollen*g.honeyPerPollen|0,[g.body.position.x,g.body.position.y+2,g.body.position.z],ae.honey,1,"⇆"),g.honey+=g.pollen*g.honeyPerPollen|0,g.pollen=0)}},honeysuckle:{amount:0,u:.0625,v:.6875,value:13,cooldown:30,autoUse:!0,use:function(){if(g.pollen<.9*g.capacity)return void g.addMessage("Your container needs to be full!",ae.redArr);let e=o.min(.25*g.convertTotal,g.pollen);Kt.add(e*g.honeyPerPollen|0,[g.body.position.x,g.body.position.y+2,g.body.position.z],ae.honey,1,"⇆"),g.honey+=e*g.honeyPerPollen|0,g.pollen-=e,se.honeysuckle.amount--}},whirligig:{amount:0,u:.125,v:.6875,value:30,cooldown:60,use:function(){if(g.antChallenge)out.endAntChallenge();else{se.whirligig.amount--,g.hivePos[0]+=1.5,g.hivePos[2]+=2,g.body.velocity.x=0,g.body.velocity.y=0,g.body.velocity.z=0,g.body.position.x=g.hivePos[0],g.body.position.y=g.hivePos[1],g.body.position.z=g.hivePos[2];for(let e in le.bees)le.bees[e].pos=g.hivePos.slice(),le.bees[e].state="moveToPlayer";g.hivePos[0]-=1.5,g.hivePos[2]-=2}}},softWax:{canUseOnSlot:e=>e.beequip&&e.beequip.waxes.length<5,amount:0,u:.125,v:.5625,value:16,use:function(){g.addMessage("The wax improved the beequip!"),se.softWax.amount--,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.waxes.push("1softWax");let e=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee.split(","),t=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.potential>=3?2:1,i=[],n=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee.split(",");for(let n=0;n<t;n++){let t=o.random()*e.length|0;i.push(e[t]),e.splice(t,1)}for(let e in i)for(let t in n)if(i[e]===n[t]){let e=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.potential/5,i=Number("*"===n[t][0]?(MATH.random(.05,.1)*(.15*e+1)).toFixed(2):MATH.random(1,5)*(.5*e+1)|0);n[t]=n[t].substring(0,n[t].indexOf("(")+2)+(Number(n[t].substring(n[t].indexOf("(")+2,n[t].indexOf(")")))+i).toFixed(2).replaceAll(".00","")+")"}g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee=n.join(","),g.updateBeequipPage(),g.updateHive()}},hardWax:{canUseOnSlot:e=>e.beequip&&e.beequip.waxes.length<5,amount:0,u:.1875,v:.5625,value:26,use:function(){if(se.hardWax.amount--,o.random()>.6)return g.addMessage("The wax failed to improve the beequip!",ae.redArr),g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.waxes.push("0hardWax"),g.updateBeequipPage(),void g.updateHive();g.addMessage("The wax improved the beequip!"),g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.waxes.push("1hardWax");let e=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee.split(","),t=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.potential>=3&&o.random()<.5?3:2,i=[],n=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee.split(",");for(let n=0;n<t;n++){let t=o.random()*e.length|0;i.push(e[t]),e.splice(t,1)}for(let e in i)for(let t in n)if(i[e]===n[t]){let e=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.potential/5,i=Number("*"===n[t][0]?(MATH.random(.075,.125)*(.15*e+1)).toFixed(2):MATH.random(2,6)*(.5*e+1)|0);n[t]=n[t].substring(0,n[t].indexOf("(")+2)+(Number(n[t].substring(n[t].indexOf("(")+2,n[t].indexOf(")")))+i).toFixed(2).replaceAll(".00","")+")"}g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee=n.join(","),g.updateBeequipPage(),g.updateHive()}},causticWax:{canUseOnSlot:e=>e.beequip&&e.beequip.waxes.length<5,amount:0,u:.25,v:.5625,value:55,use:function(){if(se.causticWax.amount--,o.random()<.75){g.addMessage("The wax destroyed the beequip!",ae.redArr);for(let e in g.currentGear.beequips)g.currentGear.beequips[e].id===g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id&&(g.beequipLookingAt=Number(e));return void window.deleteBeequip()}g.addMessage("The wax improved the beequip!"),g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.waxes.push("1causticWax");let e=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee.split(","),t=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.potential>=4&&o.random()<.75?4:3,i=[],n=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee.split(",");for(let n=0;n<t;n++){let t=o.random()*e.length|0;i.push(e[t]),e.splice(t,1)}for(let e in i)for(let t in n)if(i[e]===n[t]){let e=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.potential/5,i=Number("*"===n[t][0]?(MATH.random(.1,.175)*(.15*e+1)).toFixed(2):MATH.random(4,9)*(.5*e+1)|0);n[t]=n[t].substring(0,n[t].indexOf("(")+2)+(Number(n[t].substring(n[t].indexOf("(")+2,n[t].indexOf(")")))+i).toFixed(2).replaceAll(".00","")+")"}g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee=n.join(","),g.updateBeequipPage(),g.updateHive()}},swirledWax:{canUseOnSlot:e=>e.beequip&&e.beequip.waxes.length<5,amount:0,u:.3125,v:.5625,value:42,use:function(){se.swirledWax.amount--,g.addMessage("The wax rerolled the beequip stats!"),g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.waxes.push("1swirledWax");let e=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee.split(",");for(let t in e){let i=Number(e[t].substring(1,e[t].indexOf(" ")))*("*"===e[t][0]?MATH.random(.8,1.25):MATH.random(.5,2));e[t]=e[t][0]+("+"===e[t][0]?o.round(i):i.toFixed(2).replace(".00",""))+e[t].substring(e[t].indexOf(" "),e[t].length)}g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee=e.join(","),g.updateBeequipPage(),g.updateHive()}},turpentine:{canUseOnSlot:e=>e.beequip&&e.beequip.waxes.length>0,amount:0,u:0,v:.8125,value:60,use:function(){se.turpentine.amount--,g.addMessage("The turpentine removed all waxes on the beequip!"),g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.waxes=[];let e=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee.split(",");for(let t in e)e[t]=e[t].substr(0,e[t].indexOf("("))+"(+0)";g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.stats.bee=e.join(","),g.updateBeequipPage(),g.updateHive()}},paperPlanter:{amount:0,u:0,v:0,value:1/0,use:function(){if(le.planters.length>=3)g.addMessage("You can only have 3 planters at once!",ae.redArr);else if(g.fieldIn){for(let e in le.planters){if(g.fieldIn===le.planters[e].field)return void g.addMessage("You can only have 1 planter in a field!",ae.redArr);if("paper"===le.planters[e].type)return void g.addMessage("You can only have 1 paper planter active!",ae.redArr)}se.paperPlanter.amount--,le.planters.push(new $e("paper"))}else g.addMessage("You must be in a field to place a planter!",ae.redArr)}},plasticPlanter:{amount:0,u:0,v:0,value:1/0,use:function(){le.planters.length>=3?g.addMessage("You can only have 3 planters at once!",ae.redArr):g.fieldIn?(se.plasticPlanter.amount--,le.planters.push(new $e("plastic"))):g.addMessage("You must be in a field to place a planter!",ae.redArr)}},candyPlanter:{amount:0,u:0,v:0,value:1/0,use:function(){le.planters.length>=3?g.addMessage("You can only have 3 planters at once!",ae.redArr):g.fieldIn?(se.candyPlanter.amount--,le.planters.push(new $e("candy"))):g.addMessage("You must be in a field to place a planter!",ae.redArr)}},redClayPlanter:{amount:0,u:0,v:0,value:1/0,use:function(){le.planters.length>=3?g.addMessage("You can only have 3 planters at once!",ae.redArr):g.fieldIn?(se.redClayPlanter.amount--,le.planters.push(new $e("redClay"))):g.addMessage("You must be in a field to place a planter!",ae.redArr)}},blueClayPlanter:{amount:0,u:0,v:0,value:1/0,use:function(){le.planters.length>=3?g.addMessage("You can only have 3 planters at once!",ae.redArr):g.fieldIn?(se.blueClayPlanter.amount--,le.planters.push(new $e("blueClay"))):g.addMessage("You must be in a field to place a planter!",ae.redArr)}},tackyPlanter:{amount:0,u:0,v:0,value:1/0,use:function(){le.planters.length>=3?g.addMessage("You can only have 3 planters at once!",ae.redArr):g.fieldIn?(se.tackyPlanter.amount--,le.planters.push(new $e("tacky"))):g.addMessage("You must be in a field to place a planter!",ae.redArr)}},pesticidePlanter:{amount:0,u:0,v:0,value:1/0,use:function(){le.planters.length>=3?g.addMessage("You can only have 3 planters at once!",ae.redArr):g.fieldIn?(se.pesticidePlanter.amount--,le.planters.push(new $e("pesticide"))):g.addMessage("You must be in a field to place a planter!",ae.redArr)}},petalPlanter:{amount:0,u:0,v:0,value:1/0,use:function(){le.planters.length>=3?g.addMessage("You can only have 3 planters at once!",ae.redArr):g.fieldIn?(se.petalPlanter.amount--,le.planters.push(new $e("petal"))):g.addMessage("You must be in a field to place a planter!",ae.redArr)}},plentyPlanter:{amount:0,u:0,v:0,value:1/0,use:function(){le.planters.length>=3?g.addMessage("You can only have 3 planters at once!",ae.redArr):g.fieldIn?(se.plentyPlanter.amount--,le.planters.push(new $e("plenty"))):g.addMessage("You must be in a field to place a planter!",ae.redArr)}},gumdrops:{amount:0,u:.0625,v:.4375,cooldown:4,autoUse:!0,value:5,use:function(){if(g.fieldIn){g.stats.gummyMorph++,g.stats.gummyStar++,o.random()<.09&&(g.stats.gummyStar+=20),se.gumdrops.amount--;for(let e=0,t=0|MATH.random(2,5);e<t;e++){let e=0|MATH.random(2,5),t=function(e){e.goo=1,e.height=1},i=o.random()*ti[g.fieldIn].width|0,n=o.random()*ti[g.fieldIn].length|0;for(let s=-e;s<=e;s++){let r=s+i;for(let s=-e;s<=e;s++){let a=s+n;o.abs(r-i)+o.abs(a-n)<=e&&r>=0&&r<ti[g.fieldIn].width&&a>=0&&a<ti[g.fieldIn].length&&Ci(g.fieldIn,r,a,t,!0,!0,!1)}}le.explosions.push(new ce({col:[1,.2,1],pos:[ti[g.fieldIn].x+i,ti[g.fieldIn].y+.5,ti[g.fieldIn].z+n],life:.75,size:1.5*e,speed:.5,aftershock:.005,height:.3}))}}else{if(j.gummyBee_tame.colliding)return se.gumdrops.amount--,g.body.position.set(0,1002,1013),void g.body.velocity.set(0,0,0);g.addMessage("You must be standing in a field to use gumdrops!",ae.redArr)}}},coconut:{amount:0,u:.125,v:.4375,cooldown:10,autoUse:!0,value:4,use:function(){g.fieldIn?(se.coconut.amount--,le.mobs.push(new Je(o.random()*ti[g.fieldIn].width|0,o.random()*ti[g.fieldIn].length|0,0))):g.addMessage("You must be standing in a field to use coconuts!",ae.redArr)}},stinger:{amount:0,u:.1875,v:.4375,value:10,use:function(){se.stinger.amount--,g.addEffect("stingerBuff"),g.stats.stingerUsed++}},glue:{amount:0,u:0,v:.1875,value:19,use:function(){for(let e in g.effects){if("purplePotionBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Purple Potion is active!",ae.redArr);if("superSmoothieBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Super Smoothie is active!",ae.redArr)}se.glue.amount--,g.addEffect("glueBuff")}},oil:{amount:0,u:.0625,v:.1875,value:17,use:function(){for(let e in g.effects)if("superSmoothieBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Super Smoothie is active!",ae.redArr);se.oil.amount--,g.addEffect("oilBuff")}},enzymes:{amount:0,u:.125,v:.1875,value:17,use:function(){for(let e in g.effects)if("superSmoothieBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Super Smoothie is active!",ae.redArr);se.enzymes.amount--,g.addEffect("enzymesBuff")}},redExtract:{amount:0,u:.1875,v:.1875,value:17,use:function(){for(let e in g.effects){if("purplePotionBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Purple Potion is active!",ae.redArr);if("superSmoothieBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Super Smoothie is active!",ae.redArr)}se.redExtract.amount--,g.addEffect("redExtractBuff")}},blueExtract:{amount:0,u:.25,v:.1875,value:17,use:function(){for(let e in g.effects){if("purplePotionBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Purple Potion is active!",ae.redArr);if("superSmoothieBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Super Smoothie is active!",ae.redArr)}se.blueExtract.amount--,g.addEffect("blueExtractBuff")}},tropicalDrink:{amount:0,u:.3125,v:.1875,value:22,use:function(){for(let e in g.effects)if("superSmoothieBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Super Smoothie is active!",ae.redArr);se.tropicalDrink.amount--,g.addEffect("tropicalDrinkBuff")}},purplePotion:{amount:0,u:.375,v:.1875,value:95,use:function(){for(let e in g.effects){if("redExtractBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Red Extract is active!",ae.redArr);if("blueExtractBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Blue Extract is active!",ae.redArr);if("glueBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Glue is active!",ae.redArr);if("superSmoothieBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Super Smoothie is active!",ae.redArr)}se.purplePotion.amount--,g.addEffect("purplePotionBuff")}},superSmoothie:{amount:0,u:.4375,v:.1875,value:120,use:function(){for(let e in g.effects){if("redExtractBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Red Extract is active!",ae.redArr);if("blueExtractBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Blue Extract is active!",ae.redArr);if("glueExtractBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Glue is active!",ae.redArr);if("enzymesBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Enzymes are active!",ae.redArr);if("oilBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Oil is active!",ae.redArr);if("tropicalDrinkBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Tropical Drink is active!",ae.redArr);if("purplePotionBuff"===g.effects[e].type)return void g.addMessage("Cannot use while Purple Potion is active!",ae.redArr)}se.superSmoothie.amount--,g.addEffect("superSmoothieBuff")}},bitterberry:{canUseOnSlot:e=>null!==e.type,amount:0,u:.375,v:.4375,value:10,use:function(){ie.style.display="block",ne.value=1,oe.innerHTML="How many bitterberries will you feed to "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee?",document.getElementById("feedUntilGifted").style.display="none",ie.onmousemove=ne.oninput=function(){let e=ne.value;ne.value=MATH.constrain(e,1,se.bitterberry.amount)},document.getElementById("cancelFeeding").onclick=function(){ie.style.display="none"},document.getElementById("feedThisAmount").onclick=function(){ie.style.display="none";let e=ne.value;if(se.bitterberry.amount-=e,g.stats.bitterberry+=Number(e),g.updateInventory(),o.random()<1-o.pow(1-1/(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].radioactive>0?30:100),e)){g.addMessage("☢️ "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" bee gained a mutation! ☢️",[50,225,90]);let e,t,i=["abilityRate","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack"],n=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.level-1;switch(i=i[o.random()*i.length|0],e=("attack"===i||"convertAmount"===i||"gatherAmount"===i)&&o.random()<.5?"+":"*",i){case"attack":t="+"===e?0|MATH.random(1+.1*n,3+.2*n):MATH.random(1.05,1.35+.02*n);break;case"gatherAmount":t="+"===e?0|MATH.random(4+.4*n,10+.8*n):MATH.random(1.1,1.3+.04*n);break;case"convertAmount":t="+"===e?0|MATH.random(7+.5*n,15+1*n):MATH.random(1.15,1.4+.04*n);break;case"maxEnergy":t=MATH.random(1.2,1.5+.04*n);break;case"abilityRate":t=MATH.random(1.05,1.15+.0175*n)}t=Number(t.toFixed(2)),g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.mutation=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].mutation={stat:i,num:t,oper:e},g.addMessage("☢️ "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" got "+e.replace("*","x")+t+" "+MATH.doGrammar(i.replace("max","")).toLowerCase()+"! ☢️",[50,225,90])}let t=100*e*g.bondFromTreats|0;g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bond+=t,Kt.add(t+"",[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[0],g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[1]+1,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[2]],ae.bondArr,0,"+",1.5),g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee's bond improved",ae.bondArr),g.addMessage("by "+MATH.addCommas(t+"")+"!",ae.bondArr),g.updateHive()}}},neonberry:{canUseOnSlot:e=>null!==e.type,amount:0,u:.4375,v:.4375,value:16,use:function(){ie.style.display="block",ne.value=1,oe.innerHTML="How many neonberries will you feed to "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee?",document.getElementById("feedUntilGifted").style.display="none",ie.onmousemove=ne.oninput=function(){let e=ne.value;ne.value=MATH.constrain(e,1,se.neonberry.amount)},document.getElementById("cancelFeeding").onclick=function(){ie.style.display="none"},document.getElementById("feedThisAmount").onclick=function(){ie.style.display="none";let e=ne.value;se.neonberry.amount-=e,g.stats.neonberry+=Number(e),g.updateInventory(),g.hive[g.hiveIndex[1]][g.hiveIndex[0]].radioactive=180+3*(e-1),g.addMessage("☢️ "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" bee became radioactive for "+MATH.doTime(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].radioactive)+" ☢️",[50,225,90]);let t=500*e*g.bondFromTreats|0;g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bond+=t,Kt.add(t+"",[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[0],g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[1]+1,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[2]],ae.bondArr,0,"+",1.5),g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee's bond improved",ae.bondArr),g.addMessage("by "+MATH.addCommas(t+"")+"!",ae.bondArr),g.updateHive()}}},moonCharm:{canUseOnSlot:e=>null!==e.type,amount:0,u:.4375,v:.75,value:10,use:function(){ie.style.display="block",ne.value=1,oe.innerHTML="How many moon charms will you feed to "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee?",document.getElementById("feedUntilGifted").style.display="none",ie.onmousemove=ne.oninput=function(){let e=ne.value;ne.value=MATH.constrain(e,1,se.moonCharm.amount)},document.getElementById("cancelFeeding").onclick=function(){ie.style.display="none"},document.getElementById("feedThisAmount").onclick=function(){ie.style.display="none";let e=ne.value;se.moonCharm.amount-=e,g.stats.moonCharm+=Number(e),g.updateInventory();let t=250*e*g.bondFromTreats|0;g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bond+=t,Kt.add(t+"",[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[0],g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[1]+1,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[2]],ae.bondArr,0,"+",1.5),g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee's bond improved",ae.bondArr),g.addMessage("by "+MATH.addCommas(t+"")+"!",ae.bondArr),g.updateHive()}}},treat:{canUseOnSlot:e=>null!==e.type,amount:0,u:0,v:.25,value:1,use:function(){ie.style.display="block",ne.value=1,oe.innerHTML="How many treats will you feed to "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee?",document.getElementById("feedUntilGifted").style.display="none",ie.onmousemove=ne.oninput=function(){let e=ne.value;ne.value=MATH.constrain(e,1,se.treat.amount)},document.getElementById("cancelFeeding").onclick=function(){ie.style.display="none"},document.getElementById("feedThisAmount").onclick=function(){ie.style.display="none";let e=ne.value;se.treat.amount-=e,g.stats.treat+=Number(e),g.updateInventory();let t=10*e*g.bondFromTreats|0;g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bond+=t,Kt.add(t+"",[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[0],g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[1]+1,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[2]],ae.bondArr,0,"+",1.5),g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee's bond improved",ae.bondArr),g.addMessage("by "+MATH.addCommas(t+"")+"!",ae.bondArr),g.updateHive()}}},starTreat:{canUseOnSlot:e=>null!==e.type,amount:0,u:.0625,v:.8125,value:1e3,use:function(){ie.style.display="block",ne.value=1,oe.innerHTML="How many star treats will you feed to "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee?",document.getElementById("feedUntilGifted").style.display="none",ie.onmousemove=ne.oninput=function(){let e=ne.value;ne.value=MATH.constrain(e,1,se.starTreat.amount)},document.getElementById("cancelFeeding").onclick=function(){ie.style.display="none"},document.getElementById("feedThisAmount").onclick=function(){ie.style.display="none";let e=ne.value;se.starTreat.amount-=e,g.stats.starTreat+=Number(e),g.updateInventory();let t=1e3*e*g.bondFromTreats|0;g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bond+=t,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=!0,g.addMessage("⭐ The treat made the bee gifted! ⭐",ae.honey),Kt.add(t+"",[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[0],g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[1]+1,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[2]],ae.bondArr,0,"+",1.5),g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee's bond improved",ae.bondArr),g.addMessage("by "+MATH.addCommas(t+"")+"!",ae.bondArr),g.updateHive()}}},atomicTreat:{canUseOnSlot:e=>null!==e.type,amount:0,u:.125,v:.8125,value:40,use:function(){ie.style.display="block",ne.value=1,oe.innerHTML="How many atomic treats will you feed to "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee?",document.getElementById("feedUntilGifted").style.display="none",ie.onmousemove=ne.oninput=function(){let e=ne.value;ne.value=MATH.constrain(e,1,se.atomicTreat.amount)},document.getElementById("cancelFeeding").onclick=function(){ie.style.display="none"},document.getElementById("feedThisAmount").onclick=function(){ie.style.display="none";let e=ne.value;se.atomicTreat.amount-=e,g.stats.atomicTreat+=Number(e),g.updateInventory();let t=1e3*e*g.bondFromTreats|0;g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bond+=t,g.addMessage("☢️ "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" bee gained a mutation! ☢️",[50,225,90]);let i,n,s=["abilityRate","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack","gatherAmount","convertAmount","maxEnergy","attack"],r=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.level-1;switch(s=s[o.random()*s.length|0],i=("attack"===s||"convertAmount"===s||"gatherAmount"===s)&&o.random()<.5?"+":"*",s){case"attack":n="+"===i?0|MATH.random(1+.1*r,3+.2*r):MATH.random(1.05,1.35+.02*r);break;case"gatherAmount":n="+"===i?0|MATH.random(4+.4*r,10+.8*r):MATH.random(1.1,1.3+.04*r);break;case"convertAmount":n="+"===i?0|MATH.random(7+.5*r,15+1*r):MATH.random(1.15,1.4+.04*r);break;case"maxEnergy":n=MATH.random(1.2,1.5+.04*r);break;case"abilityRate":n=MATH.random(1.05,1.15+.0175*r)}n=Number(n.toFixed(2)),g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.mutation=g.hive[g.hiveIndex[1]][g.hiveIndex[0]].mutation={stat:s,num:n,oper:i},g.addMessage("☢️ "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" got "+i.replace("*","x")+n+" "+MATH.doGrammar(s.replace("max","")).toLowerCase()+"! ☢️",[50,225,90]),Kt.add(t+"",[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[0],g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[1]+1,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[2]],ae.bondArr,0,"+",1.5),g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee's bond improved",ae.bondArr),g.addMessage("by "+MATH.addCommas(t+"")+"!",ae.bondArr),g.updateHive()}}},blueberry:{canUseOnSlot:e=>null!==e.type,amount:0,u:.0625,v:.25,value:2,use:function(){ie.style.display="block",ne.value=1,oe.innerHTML="How many blueberries will you feed to "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee?",document.getElementById("feedUntilGifted").style.display="blueberry"!==K[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type].favoriteTreat||g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted?"none":"block",ie.onmousemove=ne.oninput=function(){let e=ne.value;ne.value=MATH.constrain(e,1,se.blueberry.amount)},document.getElementById("cancelFeeding").onclick=function(){ie.style.display="none"};let e=function(e){ie.style.display="none",se.blueberry.amount-=e,g.stats.blueberry+=Number(e),g.updateInventory();let t="blueberry"===K[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type].favoriteTreat,i=25*e*(t?"buoyant"===g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type?3:2:1)*g.bondFromTreats|0;g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bond+=i,t&&g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee loves blueberries! ╰(*°▽°*)╯",ae.bondArr),Kt.add(i+"",[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[0],g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[1]+1,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[2]],ae.bondArr,0,"+",1.5),g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee's bond improved",ae.bondArr),g.addMessage("by "+MATH.addCommas(i+"")+"!",ae.bondArr),g.updateHive()};document.getElementById("feedThisAmount").onclick=function(){e(ne.value)},document.getElementById("feedUntilGifted").onclick=function(){let t=MATH.simulateProbabilityTries(1/("buoyant"===g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type?15e3/1.15:15e3));t<se.blueberry.amount?(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=!0,g.addMessage("After "+MATH.abvNumber(t+"")+" treats.....",ae.honey),g.addMessage("⭐ The treat made the bee gifted! ⭐",ae.honey),e(t)):(g.addMessage("The treat failed to make the bee gifted :(",ae.redArr),e(se.blueberry.amount))}}},strawberry:{canUseOnSlot:e=>null!==e.type,amount:0,u:.125,v:.25,value:2,use:function(){ie.style.display="block",ne.value=1,oe.innerHTML="How many strawberries will you feed to "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee?",document.getElementById("feedUntilGifted").style.display="strawberry"!==K[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type].favoriteTreat||g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted?"none":"block",ie.onmousemove=ne.oninput=function(){let e=ne.value;ne.value=MATH.constrain(e,1,se.strawberry.amount)},document.getElementById("cancelFeeding").onclick=function(){ie.style.display="none"};let e=function(e){ie.style.display="none",se.strawberry.amount-=e,g.stats.strawberry+=Number(e),g.updateInventory();let t="strawberry"===K[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type].favoriteTreat,i=25*e*(t?2:1)*g.bondFromTreats|0;g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bond+=i,t&&g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee loves strawberries! ╰(*°▽°*)╯",ae.bondArr),Kt.add(i+"",[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[0],g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[1]+1,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[2]],ae.bondArr,0,"+",1.5),g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee's bond improved",ae.bondArr),g.addMessage("by "+MATH.addCommas(i+"")+"!",ae.bondArr),g.updateHive()};document.getElementById("feedThisAmount").onclick=function(){e(ne.value)},document.getElementById("feedUntilGifted").onclick=function(){let t=MATH.simulateProbabilityTries(1/15e3);t<se.strawberry.amount?(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=!0,g.addMessage("After "+MATH.abvNumber(t+"")+" treats.....",ae.honey),g.addMessage("⭐ The treat made the bee gifted! ⭐",ae.honey),e(t)):(g.addMessage("The treat failed to make the bee gifted :(",ae.redArr),e(se.strawberry.amount))}}},pineapple:{canUseOnSlot:e=>null!==e.type,amount:0,u:.125,v:.3125,value:2,use:function(){ie.style.display="block",ne.value=1,oe.innerHTML="How many pineapples will you feed to "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee?",document.getElementById("feedUntilGifted").style.display="pineapple"!==K[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type].favoriteTreat||g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted?"none":"block",ie.onmousemove=ne.oninput=function(){let e=ne.value;ne.value=MATH.constrain(e,1,se.pineapple.amount)},document.getElementById("cancelFeeding").onclick=function(){ie.style.display="none"};let e=function(e){ie.style.display="none",se.pineapple.amount-=e,g.stats.pineapple+=Number(e),g.updateInventory();let t="pineapple"===K[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type].favoriteTreat,i=25*e*(t?2:1)*g.bondFromTreats|0;g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bond+=i,t&&g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee loves pineapples! ╰(*°▽°*)╯",ae.bondArr),Kt.add(i+"",[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[0],g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[1]+1,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[2]],ae.bondArr,0,"+",1.5),g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee's bond improved",ae.bondArr),g.addMessage("by "+MATH.addCommas(i+"")+"!",ae.bondArr),g.updateHive()};document.getElementById("feedThisAmount").onclick=function(){e(ne.value)},document.getElementById("feedUntilGifted").onclick=function(){let t=MATH.simulateProbabilityTries(1/15e3);t<se.pineapple.amount?(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=!0,g.addMessage("After "+MATH.abvNumber(t+"")+" treats.....",ae.honey),g.addMessage("⭐ The treat made the bee gifted! ⭐",ae.honey),e(t)):(g.addMessage("The treat failed to make the bee gifted :(",ae.redArr),e(se.pineapple.amount))}}},sunflowerSeed:{canUseOnSlot:e=>null!==e.type,amount:0,u:.1875,v:.3125,value:2,use:function(){ie.style.display="block",ne.value=1,oe.innerHTML="How many sunflower seeds will you feed to "+MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee?",document.getElementById("feedUntilGifted").style.display="sunflowerSeed"!==K[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type].favoriteTreat||g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted?"none":"block",ie.onmousemove=ne.oninput=function(){let e=ne.value;ne.value=MATH.constrain(e,1,se.sunflowerSeed.amount)},document.getElementById("cancelFeeding").onclick=function(){ie.style.display="none"};let e=function(e){ie.style.display="none",se.sunflowerSeed.amount-=e,g.stats.sunflowerSeed+=Number(e),g.updateInventory();let t="sunflowerSeed"===K[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type].favoriteTreat,i=25*e*(t?2:1)*g.bondFromTreats|0;g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bond+=i,t&&g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee loves sunflower seeds! ╰(*°▽°*)╯",ae.bondArr),Kt.add(i+"",[g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[0],g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[1]+1,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.pos[2]],ae.bondArr,0,"+",1.5),g.addMessage(MATH.doGrammar(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].bee.type)+" Bee's bond improved",ae.bondArr),g.addMessage("by "+MATH.addCommas(i+"")+"!",ae.bondArr),g.updateHive()};document.getElementById("feedThisAmount").onclick=function(){e(ne.value)},document.getElementById("feedUntilGifted").onclick=function(){let t=MATH.simulateProbabilityTries(1/15e3);t<se.sunflowerSeed.amount?(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=!0,g.addMessage("After "+MATH.abvNumber(t+"")+" treats.....",ae.honey),g.addMessage("⭐ The treat made the bee gifted! ⭐",ae.honey),e(t)):(g.addMessage("The treat failed to make the bee gifted :(",ae.redArr),e(se.sunflowerSeed.amount))}}},basicEgg:{canUseOnSlot:e=>"basic"!==e.type,amount:0,u:.25,v:.3125,value:60,use:function(){se.basicEgg.amount--,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type="basic",g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=o.random()<.01;for(let e in g.currentGear.beequips)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id===g.currentGear.beequips[e].id&&(g.currentGear.beequips[e].bee=void 0);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0,g.beePopup={type:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type,message:"You hatched a...",time:T,gifted:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted},g.updateHive()}},silverEgg:{canUseOnSlot:e=>!0,amount:0,u:.3125,v:.3125,value:90,use:function(){let e,t={mythic:1/4e3,legendary:.07475,epic:.325,rare:.6},i=o.random(),n=0;for(let o in t){if(i<=t[o]+n){e=o;break}n+=t[o]}t=[];for(let i in K)K[i].rarity===e&&t.push(i);e=t[o.random()*t.length|0],se.silverEgg.amount--,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type=e,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=o.random()<.01;for(let e in g.currentGear.beequips)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id===g.currentGear.beequips[e].id&&(g.currentGear.beequips[e].bee=void 0);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0,g.beePopup={type:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type,message:"You hatched a...",time:T,gifted:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted},g.updateHive()}},goldEgg:{canUseOnSlot:e=>!0,amount:0,u:.375,v:.3125,value:125,use:function(){let e,t={mythic:.002,legendary:.298,epic:.7},i=o.random(),n=0;for(let o in t){if(i<=t[o]+n){e=o;break}n+=t[o]}t=[];for(let i in K)K[i].rarity===e&&t.push(i);e=t[o.random()*t.length|0],se.goldEgg.amount--,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type=e,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=o.random()<.01;for(let e in g.currentGear.beequips)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id===g.currentGear.beequips[e].id&&(g.currentGear.beequips[e].bee=void 0);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0,g.beePopup={type:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type,message:"You hatched a...",time:T,gifted:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted},g.updateHive()}},diamondEgg:{canUseOnSlot:e=>!0,amount:0,u:.4375,v:.3125,value:200,use:function(){let e,t={mythic:.05,legendary:.95},i=o.random(),n=0;for(let o in t){if(i<=t[o]+n){e=o;break}n+=t[o]}t=[];for(let i in K)K[i].rarity===e&&t.push(i);e=t[o.random()*t.length|0],se.diamondEgg.amount--,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type=e,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=o.random()<.01;for(let e in g.currentGear.beequips)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id===g.currentGear.beequips[e].id&&(g.currentGear.beequips[e].bee=void 0);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0,g.beePopup={type:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type,message:"You hatched a...",time:T,gifted:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted},g.updateHive()}},mythicEgg:{canUseOnSlot:e=>!0,amount:0,u:0,v:.375,value:250,use:function(){let e=[];for(let t in K)"mythic"===K[t].rarity&&e.push(t);type=e[o.random()*e.length|0],se.mythicEgg.amount--,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type=type,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=o.random()<.01;for(let e in g.currentGear.beequips)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id===g.currentGear.beequips[e].id&&(g.currentGear.beequips[e].bee=void 0);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0,g.beePopup={type:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type,message:"You hatched a...",time:T,gifted:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted},g.updateHive()}},giftedSilverEgg:{canUseOnSlot:e=>!0,amount:0,u:.3125,v:.5,value:150,use:function(){let e,t={mythic:1/4e3,legendary:.07475,epic:.325,rare:.6},i=o.random(),n=0;for(let o in t){if(i<=t[o]+n){e=o;break}n+=t[o]}t=[];for(let i in K)K[i].rarity===e&&t.push(i);e=t[o.random()*t.length|0],se.giftedSilverEgg.amount--,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type=e,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=!0;for(let e in g.currentGear.beequips)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id===g.currentGear.beequips[e].id&&(g.currentGear.beequips[e].bee=void 0);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0,g.beePopup={type:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type,message:"You hatched a...",time:T,gifted:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted},g.updateHive()}},giftedGoldEgg:{canUseOnSlot:e=>!0,amount:0,u:.375,v:.5,value:225,use:function(){let e,t={mythic:.002,legendary:.298,epic:.7},i=o.random(),n=0;for(let o in t){if(i<=t[o]+n){e=o;break}n+=t[o]}t=[];for(let i in K)K[i].rarity===e&&t.push(i);e=t[o.random()*t.length|0],se.giftedGoldEgg.amount--,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type=e,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=!0;for(let e in g.currentGear.beequips)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id===g.currentGear.beequips[e].id&&(g.currentGear.beequips[e].bee=void 0);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0,g.beePopup={type:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type,message:"You hatched a...",time:T,gifted:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted},g.updateHive()}},giftedDiamondEgg:{canUseOnSlot:e=>!0,amount:0,u:.4375,v:.5,value:300,use:function(){let e,t={mythic:.05,legendary:.95},i=o.random(),n=0;for(let o in t){if(i<=t[o]+n){e=o;break}n+=t[o]}t=[];for(let i in K)K[i].rarity===e&&t.push(i);e=t[o.random()*t.length|0],se.giftedDiamondEgg.amount--,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type=e,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=!0;for(let e in g.currentGear.beequips)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id===g.currentGear.beequips[e].id&&(g.currentGear.beequips[e].bee=void 0);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0,g.beePopup={type:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type,message:"You hatched a...",time:T,gifted:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted},g.updateHive()}},giftedMythicEgg:{canUseOnSlot:e=>!0,amount:0,u:0,v:.5625,value:375,use:function(){let e=[];for(let t in K)"mythic"===K[t].rarity&&e.push(t);type=e[o.random()*e.length|0],se.giftedMythicEgg.amount--,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type=type,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=!0;for(let e in g.currentGear.beequips)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id===g.currentGear.beequips[e].id&&(g.currentGear.beequips[e].bee=void 0);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0,g.beePopup={type:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type,message:"You hatched a...",time:T,gifted:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted},g.updateHive()}},starEgg:{canUseOnSlot:e=>!0,amount:0,u:.0625,v:.5625,value:350,use:function(){let e=[],t=[];for(let e in le.bees)le.bees[e].gifted&&t.push(le.bees[e].type);for(let i in K)t.indexOf(i)<0&&e.push(i);type=e[o.random()*e.length|0],se.starEgg.amount--,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type=type,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=!0;for(let e in g.currentGear.beequips)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id===g.currentGear.beequips[e].id&&(g.currentGear.beequips[e].bee=void 0);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0,g.beePopup={type:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type,message:"You hatched a...",time:T,gifted:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted},g.updateHive()}},royalJelly:{canUseOnSlot:e=>e.type,amount:0,u:.1875,v:.5,value:10,use:function(){for(let e in g.currentGear.beequips)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id===g.currentGear.beequips[e].id&&(g.currentGear.beequips[e].bee=void 0);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0;let e=25e4;for(;e-- >=0&&se.royalJelly.amount-- >0;){let e,t={mythic:1/4e3,legendary:.07475,epic:.325,rare:.6},i=o.random(),n=0;for(let o in t){if(i<=t[o]+n){e=o;break}n+=t[o]}t=[];for(let i in K)K[i].rarity===e&&t.push(i);if(e=t[o.random()*t.length|0],g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type=e,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=o.random()<.01,["rare","epic","legendary","mythic"].indexOf(K[e].rarity)>=["rare","epic","legendary","mythic"].indexOf(g.autoRJSettings.until)&&(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted&&g.autoRJSettings.gifted||!g.autoRJSettings.gifted))break}25e4-e>1&&g.addMessage("After using "+MATH.addCommas(25e4-e+"")+" jellies..."),g.stats.royalJelly+=25e4-e,g.beePopup={type:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type,message:"You got a...",time:T,gifted:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted},g.updateInventory(),g.updateHive()}},starJelly:{canUseOnSlot:e=>e.type,amount:0,u:.25,v:.5,value:90,use:function(){for(let e in g.currentGear.beequips)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id===g.currentGear.beequips[e].id&&(g.currentGear.beequips[e].bee=void 0);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0;let e=25e4;for(;e-- >=0&&se.starJelly.amount-- >=0;){let e,t={mythic:1/4e3,legendary:.07475,epic:.325,rare:.6},i=o.random(),n=0;for(let o in t){if(i<=t[o]+n){e=o;break}n+=t[o]}t=[];for(let i in K)K[i].rarity===e&&t.push(i);if(e=t[o.random()*t.length|0],g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type=e,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=!0,["rare","epic","legendary","mythic"].indexOf(K[e].rarity)>=["rare","epic","legendary","mythic"].indexOf(g.autoRJSettings.until))break}25e4-e>1&&g.addMessage("After using "+MATH.addCommas(25e4-e+"")+" jellies..."),g.stats.starJelly+=25e4-e,g.beePopup={type:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type,message:"You got a...",time:T,gifted:g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted},g.updateInventory(),g.updateHive()}},glitter:{amount:0,u:0,v:.4375,value:25,cooldown:906,use:function(){if(g.fieldIn){if("AntField"===g.fieldIn)return void g.addMessage("You can' use this item in the Ant Field!",ae.redArr);let e=g.fieldIn;e=e[0].toLowerCase()+e.substring(1,e.length),g.addEffect(e+"Boost"),g.addMessage('Activated "'+MATH.doGrammar(e)+' Boost"'),se.glitter.amount--;for(let e in le.planters)le.planters[e].field!==g.fieldIn||le.planters[e].glistering||(le.planters[e].growthRate*=1.25,le.planters[e].glistering=!0)}else g.addMessage("You must be standing in a field to use glitter!",ae.redArr)}}};for(let e in K)if("event"===K[e].rarity){let t=e+"BeeEgg";O[0].innerHTML+="<svg id='"+t+"' style='width:200px;height:70px;cursor:pointer;border-radius:5px'><rect width='200' height='70' fill='rgb(255,255,255)'></rect><rect width='70' height='70' fill='rgb(225,225,225)'></rect><text x='132' y='18' style='font-family:trebuchet ms;font-size:16.5px;' fill='rgb(0,0,0)' text-anchor='middle'>"+MATH.doGrammar(e)+" Bee Egg</text><text x='132' y='39' style='font-family:trebuchet ms;font-size:12px;' fill='rgb(0,0,0)' text-anchor='middle'>A permanent egg that</text><text x='130' y='53' style='font-family:trebuchet ms;font-size:12px;' fill='rgb(0,0,0)' text-anchor='middle'>always hatches into</text><text x='132' y='66' style='font-family:trebuchet ms;font-size:12px;' fill='rgb(0,0,0)' text-anchor='middle'>a "+MATH.doGrammar(e)+" Bee!</text><text id='"+t+"_amount' x='67' y='67' style='font-family:calibri;font-size:14px;' fill='rgb(0,0,0)' text-anchor='end'></text><path fill='rgb(255,255,0)' stroke='rgb(0,0,0)' stroke-width='1.5' d='M35 15C 20 17 10 55 35 55M35 15C 50 17 60 55 35 55'></path><path fill='rgb(0,0,0)' d='M20 30 C 20 40 50 40 50 30L50 40C50 50 20 50 20 40'></path><path fill='rgb(0,0,0,0.3)' d='M47 25C 57 56 35 60 23 50C 32 48 41 50 50 35'></path></svg>",se[e+"BeeEgg"]={canUseOnSlot:e=>!0,amount:0,u:.25,v:.3125,value:1/0,use:function(){for(let t in le.bees)if(le.bees[t].type===e)return void g.addMessage("You can only have 1 "+MATH.doGrammar(e)+" Bee!",ae.redArr);g.hive[g.hiveIndex[1]][g.hiveIndex[0]].type=e,g.hive[g.hiveIndex[1]][g.hiveIndex[0]].gifted=!1,g.beePopup={type:e,message:"You hatched a...",time:T,gifted:!1},g.updateHive()}}}for(let e in se)se[e].maxCooldown=se[e].cooldown||0,se[e].cooldown=-1/0,"honey"!==e&&(se[e].svg=document.getElementById(e),se[e].amountText=document.getElementById(e+"_amount"),se[e].svg.onmousedown=function(t){g.itemDragging===e?g.itemDragging=!1:g.itemDragging=e});let re={pencil:{svgCode:"<svg onmousedown='window.functionToRunOnBeequipClick(#ID)' style='width:200px;height:70px;cursor:pointer;border-radius:8px'><rect width='200' height='70' fill='rgb(255,255,255)'></rect><rect width='70' height='70' fill='rgb(225,225,225)'></rect><text x='132' y='15' style='font-family:trebuchet ms;font-size:16.5px;' fill='rgb(0,0,0)' text-anchor='middle'>Pencil</text><text x='132' y='33' style='font-family:trebuchet ms;font-size:11px;' fill='rgb(0,0,0)' text-anchor='middle'>A special pencil only</text><text x='132' y='46' style='font-family:trebuchet ms;font-size:11px;' fill='rgb(0,0,0)' text-anchor='middle'>for the smartest of</text><text x='132' y='59' style='font-family:trebuchet ms;font-size:11px;' fill='rgb(0,0,0)' text-anchor='middle'>bees(and people).</text><text style=''></text><g transform='scale(0.9,0.9) rotate(20) translate(12,-15)'><rect x='34' y='16' width='7' height='40' stroke='black' stroke-width='2' fill='rgb(86, 252, 136)'></rect><rect x='34' y='15' width='7' height='7' stroke='black' stroke-width='2' fill='rgb(250, 110, 147)'></rect><rect x='34' y='20' width='7' height='4' stroke='black' stroke-width='2' fill='rgb(170,170,170)'></rect><path stroke='black' stroke-width='2' fill='rgb(214, 193, 101)' d='M 34 57 L 41 57L 37.5 65z'></path><rect x='36.6' y='61' width='1' height='1' stroke='black' stroke-width='2' fill='rgb(0,0,0)'></rect></g></svg>",potentials:[1,2,2,2,3],level:4,color:"blue",reqStr:"<br><br><br><br>",canUseOnSlot:function(e){return e.type},generateStats:function(e){let t="",i=e/5;return t+="*"+MATH.random(.92,.98).toFixed(2)+" abilityRate(+0),",o.random()<.85*i&&(t+="*"+MATH.random(1.1,.35*i+1).toFixed(2)+" maxEnergy(+0),"),o.random()<.35*i&&(t+="+"+(0|MATH.random(3,10))+" convertAmount(+0),"),{bee:","===t[t.length-1]?t.substr(0,t.length-1):t,player:","===""[-1]?"".substr(0,-1):""}},extraAbility:"gathering_focus"},bobertPlushie:{svgCode:"<svg onmousedown='window.functionToRunOnBeequipClick(#ID)' style='width:200px;height:70px;cursor:pointer;border-radius:8px'><rect width='200' height='70' fill='rgb(255,255,255)'></rect><rect width='70' height='70' fill='rgb(225,225,225)'></rect><text x='132' y='15' style='font-family:trebuchet ms;font-size:16.5px;' fill='rgb(0,0,0)' text-anchor='middle'>Bobert Plushie</text><text x='132' y='33' style='font-family:trebuchet ms;font-size:11px;' fill='rgb(0,0,0)' text-anchor='middle'>A slightly deformed</text><text x='132' y='46' style='font-family:trebuchet ms;font-size:11px;' fill='rgb(0,0,0)' text-anchor='middle'>plushie. It loves to</text><text x='132' y='59' style='font-family:trebuchet ms;font-size:11px;' fill='rgb(0,0,0)' text-anchor='middle'>terrorize bees and you.</text><text style=''></text><circle cx='38' cy='38' r='20' fill='black'></circle><circle cx='35' cy='35' r='20' fill='black'></circle><circle cx='38' cy='38' r='18' fill='rgb(207, 162, 48)'></circle><circle cx='35' cy='35' r='18' fill='rgb(255, 203, 61)'></circle><circle cx='28' cy='28' r='1.5' fill='black'></circle><circle cx='41' cy='28' r='1.5' fill='black'></circle><path fill='rgb(0,0,0,0)' stroke='black' stroke-width='1' d='M 42 37 C 41 39 30 41 29 37'></path><rect fill='white' x='35' y='39' width='3' height='4' stroke='black' stroke-width='1'></rect></svg>",potentials:[1,2,2,2,2,2,2,2,3,3,3,3,4],level:5,color:"white",reqStr:"<br><br><br><br>",canUseOnSlot:function(e){return e.type},generateStats:function(e){let t="";return t+="+"+(0|MATH.random(1,2*e+5))+" convertAmount(+0),",t+="+"+(0|MATH.random(1,2*e+5))+" gatherAmount(+0),",o.random()<.35&&(t+="+1 attack(+0),"),{bee:","===t[t.length-1]?t.substr(0,t.length-1):t,player:","===""[-1]?"".substr(0,-1):""}}},boombox:{svgCode:"<svg onmousedown='window.functionToRunOnBeequipClick(#ID)' style='width:200px;height:70px;cursor:pointer;border-radius:8px'><rect width='200' height='70' fill='rgb(255,255,255)'></rect><rect width='70' height='70' fill='rgb(225,225,225)'></rect><text x='132' y='15' style='font-family:trebuchet ms;font-size:16.5px;' fill='rgb(0,0,0)' text-anchor='middle'>Boombox</text><text x='132' y='31' style='font-family:trebuchet ms;font-size:10px;' fill='rgb(0,0,0)' text-anchor='middle'>Energize and motivate your</text><text x='132' y='43' style='font-family:trebuchet ms;font-size:9.9px;' fill='rgb(0,0,0)' text-anchor='middle'>bees with upbeat musical</text><text x='132' y='54' style='font-family:trebuchet ms;font-size:10px;' fill='rgb(0,0,0)' text-anchor='middle'>hits by Bee Gees or</text><text x='133' y='65' style='font-family:trebuchet ms;font-size:9.7px;' fill='rgb(0,0,0)' text-anchor='middle'>Beethoven!</text><text style=''></text><rect x='26' y='23' width='20' height='22' rx='6' stroke='rgb(0,170,0)' stroke-width='3.5' fill='rgb(0,0,0,0)'></rect>\n    <rect x='19' y='30' width='35' height='20' rx='4' stroke='black' stroke-width='1.5' fill='rgb(19, 93, 212)'></rect>\n    <circle cx='30' cy='38' r='5' stroke='black' stroke-width='1' fill='rgb(251, 255, 0)'></circle>\n    <circle cx='45' cy='38' r='5' stroke='black' stroke-width='1' fill='rgb(251, 255, 0)'></circle>\n    <circle cx='30' cy='38' r='1.5' fill='rgb(0, 0, 0)'></circle>\n    <circle cx='45' cy='38' r='1.5' fill='rgb(0, 0, 0)'></circle>\n    <rect x='32' y='45' width='5' height='3' fill='rgb(255,0,255)'></rect><rect x='39' y='45' width='5' height='3' fill='rgb(255,0,0)'></rect></svg>",potentials:[2,2,2,2,2,2,2,2,3,3,3,3,4],level:7,color:"any",reqStr:"<br><br><p style='font-size:13px;font-family:comic sans ms;'>Only For: Hasty, Cool, Looker, Exhausted, Riley, Shy, and Buoyant Bee</p><br>",canUseOnSlot:function(e){return["hasty","cool","looker","exhausted","riley","shy","buoyant"].indexOf(e.type)>-1},generateStats:function(e){let t="",i="",n=e/5;return t+="*"+(MATH.random(.9,.96)*(.1*n+1)).toFixed(2)+" abilityRate(+0),",t+="*"+MATH.random(1.01,.15*n+1).toFixed(2)+" maxEnergy(+0),",t+="*"+MATH.random(.95,1.05).toFixed(2)+" speed(+0),",o.random()<.35*n&&(i+="*"+(MATH.random(1.01,1.04)*(.01*n+1)).toFixed(2)+" convertRate(+0)"),{bee:","===t[t.length-1]?t.substr(0,t.length-1):t,player:","===i[i.length-1]?i.substr(0,i.length-1):i}},extraAbility:"gathering_melody"},candycane:{svgCode:"<svg onmousedown='window.functionToRunOnBeequipClick(#ID)' style='width:200px;height:70px;cursor:pointer;border-radius:8px'><rect width='200' height='70' fill='rgb(255,255,255)'></rect><rect width='70' height='70' fill='rgb(225,225,225)'></rect><text x='132' y='15' style='font-family:trebuchet ms;font-size:16.5px;' fill='rgb(0,0,0)' text-anchor='middle'>Candy Cane</text><text x='132' y='31' style='font-family:trebuchet ms;font-size:10px;' fill='rgb(0,0,0)' text-anchor='middle'>This stick of candy causes</text><text x='132' y='43' style='font-family:trebuchet ms;font-size:9.9px;' fill='rgb(0,0,0)' text-anchor='middle'>dramatic bee hyperactivity,</text><text x='132' y='54' style='font-family:trebuchet ms;font-size:10px;' fill='rgb(0,0,0)' text-anchor='middle'>sticks to pollen, and turns</text><text x='133' y='65' style='font-family:trebuchet ms;font-size:9.7px;' fill='rgb(0,0,0)' text-anchor='middle'>into a sharp, deadly weapon.</text><text style=''></text><defs><linearGradient id='candyStripes' x1='0' y1='0' x2='1' y2='-0.1'><stop offset='10%' stop-color='rgb(255,0,0)'/><stop offset='10%' stop-color='rgb(255,255,225)'/><stop offset='20%' stop-color='rgb(255,255,225)'/><stop offset='20%' stop-color='rgb(255,0,0)'/><stop offset='30%' stop-color='rgb(255,0,0)'/><stop offset='30%' stop-color='rgb(255,255,225)'/><stop offset='40%' stop-color='rgb(255,255,225)'/><stop offset='40%' stop-color='rgb(255,0,0)'/><stop offset='50%' stop-color='rgb(255,0,0)'/><stop offset='50%' stop-color='rgb(255,255,225)'/><stop offset='60%' stop-color='rgb(255,255,225)'/><stop offset='60%' stop-color='rgb(255,0,0)'/><stop offset='70%' stop-color='rgb(255,0,0)'/><stop offset='70%' stop-color='rgb(255,255,225)'/><stop offset='80%' stop-color='rgb(255,255,225)'/><stop offset='80%' stop-color='rgb(255,0,0)'/><stop offset='90%' stop-color='rgb(255,0,0)'/><stop offset='90%' stop-color='rgb(255,255,225)'/></linearGradient></defs><path fill='url(#candyStripes)' stroke='black' stroke-width='1' d='M-14 7L10 6C15 6 15 -5 10 -5L 8 -3C12 -3 12 3 8 3z' transform='translate(32,34) scale(1.75,1.75) rotate(-19.2)'></path></svg>",potentials:[1,2,2,4,3,3,3,3,3],level:8,color:"red",reqStr:"<br><br><br><br>",canUseOnSlot:function(e){return e.type},generateStats:function(e){let t="",i="",n=e/5;return o.random()<n&&(t+="+"+(MATH.random(2,6)*(.15*n+1)|0)+" gatherAmount(+0),"),o.random()<.65*n&&(t+="*1.05 abilityRate(+0),"),t+="*"+(MATH.random(1.05,1.1)*(.1*n+1)).toFixed(2)+" attack(+0),",t+="*"+MATH.random(.8,.95).toFixed(2)+" maxEnergy(+0),",t+="*"+(MATH.random(1.05,1.1)*(.05*n+1)).toFixed(2)+" speed(+0),",o.random()<.5*n&&(i+="*"+(MATH.random(1.01,1.04)*(.01*n+1)).toFixed(2)+" beeSpeed(+0),"),o.random()<.5*n&&(i+="*"+MATH.random(1.01,1.03).toFixed(2)+" redPollen(+0),"),{bee:","===t[t.length-1]?t.substr(0,t.length-1):t,player:","===i[i.length-1]?i.substr(0,i.length-1):i}}},books:{svgCode:"<svg onmousedown='window.functionToRunOnBeequipClick(#ID)' style='width:200px;height:70px;cursor:pointer;border-radius:8px'><rect width='200' height='70' fill='rgb(255,255,255)'></rect><rect width='70' height='70' fill='rgb(225,225,225)'></rect><text x='132' y='15' style='font-family:trebuchet ms;font-size:16.5px;' fill='rgb(0,0,0)' text-anchor='middle'>Books</text><text x='132' y='33' style='font-family:trebuchet ms;font-size:11px;' fill='rgb(0,0,0)' text-anchor='middle'>A set of books for</text><text x='132' y='46' style='font-family:trebuchet ms;font-size:11px;' fill='rgb(0,0,0)' text-anchor='middle'>bees to read. Improves</text><text x='132' y='59' style='font-family:trebuchet ms;font-size:11px;' fill='rgb(0,0,0)' text-anchor='middle'>the performance of bees.</text><text style=''></text><g transform='rotate(-15) translate(-30,-5)'><rect fill='rgb(242, 141, 119)' x='35' y='35' width='20' height='27' stroke='black' stroke-width='1.5' rx='2'></rect><path fill='rgb(0,0,0,0)' stroke='rgb(222, 199, 151)' stroke-width='7' d='M 35 47C 41 45 47 42 47 35'></path><path fill='rgb(0,0,0,0)' stroke='rgb(207, 119, 101)' stroke-width='2' d='M 38 47L 39 44L 43 44L 43 40L 48 40L 43 40'></path></g><g transform='rotate(20) translate(12,-27)'><rect fill='rgb(217, 159, 0)' x='35' y='35' width='20' height='27' stroke='black' stroke-width='1.5' rx='2'></rect><path fill='rgb(0,0,0,0)' stroke='rgb(0,0,0,0.1)' stroke-width='4' d='M 40 63L 45 47L 50 63'></path><path fill='rgb(0,0,0,0)' stroke='rgb(0,0,0,0.15)' stroke-width='1.5' d='M 39 42L 42 39L 44 41L 47 39L 51 42'></path></g></svg>",potentials:[1,2,3,3,3,4,5],level:9,color:"any",reqStr:"<br><br><p style='font-size:13px;font-family:comic sans ms;'>Bee must know a Mark ability.</p><br>",canUseOnSlot:function(e){return e.type&&K[e.type].tokens.join("").indexOf("Mark")>-1||"precise"===e.type},generateStats:function(e){let t="",i="",n=e/5;return t+="*"+(MATH.random(.89,.95)*(.1*n+1)).toFixed(2)+" abilityRate(+0),",t+="*"+(MATH.random(1.03,1.09)*(.1*n+1)).toFixed(2)+" maxEnergy(+0),",o.random()<.4+.2*n&&(i+="*"+(MATH.random(1.02,1.06)*(.01*n+1)).toFixed(2)+" pollenFromBees(+0),"),o.random()<.4+.2*n&&(i+="*"+(MATH.random(1.02,1.06)*(.01*n+1)).toFixed(2)+" pollenFromTools(+0),"),{bee:","===t[t.length-1]?t.substr(0,t.length-1):t,player:","===i[i.length-1]?i.substr(0,i.length-1):i}},extraAbility:"gathering_inspire"},coffeeMug:{svgCode:"<svg onmousedown='window.functionToRunOnBeequipClick(#ID)' style='width:200px;height:70px;cursor:pointer;border-radius:8px'><rect width='200' height='70' fill='rgb(255,255,255)'></rect><rect width='70' height='70' fill='rgb(225,225,225)'></rect><text x='132' y='15' style='font-family:trebuchet ms;font-size:16.5px;' fill='rgb(0,0,0)' text-anchor='middle'>Coffee Mug</text><text x='132' y='33' style='font-family:trebuchet ms;font-size:11px;' fill='rgb(0,0,0)' text-anchor='middle'>Bees drink *whatever*</text><text x='132' y='46' style='font-family:trebuchet ms;font-size:11px;' fill='rgb(0,0,0)' text-anchor='middle'>is in this coffee mug</text><text x='132' y='59' style='font-family:trebuchet ms;font-size:11px;' fill='rgb(0,0,0)' text-anchor='middle'>for a boost of energy!</text><text style=''></text><path d='M20 45C20 55 50 55 50 45C65 45 65 20 50 20C50 10 20 10 20 20Z' fill='rgb(255,255,255)' stroke='rgb(0,0,0)' stroke-width='1.5' transform='translate(0,3)'></path><path d='M50 40 C 60 40 60 25 50 25M50 40 L 50 25' fill='rgb(225,225,225)' stroke='rgb(0,0,0)' stroke-width='1.5' transform='translate(0,3)'></path><path d='M50 20C50 25 20 25 20 20' fill='rgb(0,0,0,0)' stroke='rgb(0,0,0)' stroke-width='1.5' transform='translate(0,3)'></path><circle cx='35' cy='53' r='8' fill='rgb(0,0,0,0.2)' transform='scale(1,0.4)'></circle><path d='M 27 36L 30 40L 33 37L 35 41L 38 36L 42 42' fill='rgb(0,0,0,0)' stroke='rgb(0,0,0,0.7)' stroke-width='1.5'></path></svg>",potentials:[2,2,3,3,3,4,4,5],level:10,color:"any",reqStr:"<br><br><p style='font-size:13px;font-family:comic sans ms;'>Only For: Gifted Bees</p><br>",canUseOnSlot:function(e){return e.type&&e.gifted},generateStats:function(e){let t="",i="",n=e/5;return o.random()<n&&(t+="*"+(MATH.random(1,1.1)*(.1*n+1)|0)+" gatherAmount(+0),"),o.random()<.65*n&&(t+="*"+(MATH.random(1.01,1.05)*(.07*n+1)).toFixed(2)+" abilityRate(+0),"),t+="*"+MATH.random(1.05,1.1).toFixed(2)+" maxEnergy(+0),",t+="*"+(MATH.random(1.01,1.07)*(.07*n+1)).toFixed(2)+" speed(+0),",o.random()<.75*n&&(i+="*"+MATH.random(1.02,1.05).toFixed(2)+" convertRate(+0),"),o.random()<.4*n+.2&&(i+="*1.305 lootLuck(+0),"),{bee:","===t[t.length-1]?t.substr(0,t.length-1):t,player:","===i[i.length-1]?i.substr(0,i.length-1):i}},extraAbility:"gathering_link"}},ae={blue:"rgb(20,84,186)",red:"rgb(255,0,0)",white:"rgb(255,255,255)",blueArr:[20,84,186],redArr:[255,0,0],whiteArr:[255,255,255],honey:[255,226,8],honey_normalized:[1,226/255,8/255],bondArr:[240,72,218]},le={tokens:[],bees:[],tempBees:[],explosions:[],flames:[],bubbles:[],marks:[],balloons:[],mobs:[],targets:[],triangulates:[],fuzzBombs:[],planters:[]},de={tokens:{instanceBuffer:m.createBuffer(),instanceData:[]},bees:{instanceBuffer:m.createBuffer(),instanceData:[]},explosions:{instanceBuffer:m.createBuffer(),instanceData:[]},cylinder_explosions:{instanceBuffer:m.createBuffer(),instanceData:[]}};class he{constructor(e,t,i,o,n,s,r){this.meshScale="baby"===t||"tadpole"===t?.65:1,this.GIFTED_BEE_TEXTURE_OFFSET=K[t].v+(o?.375:0),this.mutation=r,this.hiveX=n,this.hiveY=s,this.gifted=o,this.hivePos=e.slice(),this.pos=e.slice(),this.type=t,this.flowerIn=null,this.moveTo=[g.body.position.x,g.body.position.y,g.body.position.z],this.moveOffset=[MATH.random(-5,5),0,MATH.random(-5,5)],this.moveDir=[],this.computeLevel(i||1),this.convertTimer=0,this.flowerCollecting=[],this.state="moveToPlayer",this.emitParticle=T,this.collectRot=[],this.pollen=0,this.attackTimer=1,this.trail={addPos:function(){}},this.trails=[],this.beeOffsets=[];for(let e in K[this.type].trails)this.trails.push(new ei.ConstantTrail(K[this.type].trails[e])),this.beeOffsets.push(K[this.type].trails[e].beeOffset||0)}computeLevel(e){this.gatheringTokens=[{type:"inspire",cooldown:$.inspire.trialCooldown,rate:$.inspire.trialRate,timer:-1e4,requireGifted:!0}];for(let e in K[this.type].tokens){let t=K[this.type].tokens[e].replace("*",""),i=K[this.type].tokens[e].indexOf("*")>-1;this.gatheringTokens.push({type:t,cooldown:$[t].trialCooldown,rate:$[t].trialRate,timer:-1e4,requireGifted:i})}this.attackTokens=[];for(let e in K[this.type].attackTokens){let t=K[this.type].attackTokens[e].replace("*",""),i=K[this.type].attackTokens[e].indexOf("*")>-1;this.attackTokens.push({type:t,cooldown:$[t].trialCooldown,rate:$[t].trialRate,timer:-1e4,requireGifted:i})}if(this.level=e,e--,this.speed=K[this.type].speed,this.gatherSpeed=K[this.type].gatherSpeed,this.gatherAmount=K[this.type].gatherAmount,this.convertAmount=K[this.type].convertAmount,this.convertSpeed=K[this.type].convertSpeed,this.maxEnergy=K[this.type].energy,this.attack=K[this.type].attack,this.abilityRate=1,"digital"===this.type&&(this.attack+=.3*g.extraInfo.drives.red,this.convertAmount+=20*g.extraInfo.drives.blue,this.gatherAmount+=2.5*g.extraInfo.drives.white,this.abilityRate+=.0075*g.extraInfo.drives.glitched,g.extraInfo.drives.red>=50&&g.extraInfo.drives.blue>=50&&g.extraInfo.drives.white>=50&&g.extraInfo.drives.glitched>=50&&(this.speed+=10,g.extraInfo.drives.maxed=!0)),this.mutation&&("*"===this.mutation.oper?this[this.mutation.stat]*=this.mutation.num:this[this.mutation.stat]+=this.mutation.num),g.hive[this.hiveY][this.hiveX].beequip){let e=g.hive[this.hiveY][this.hiveX].beequip.stats.bee;e=e.split(",");for(let t in e){let i=e[t];"*"===i[0]?this[i.substring(i.indexOf(" ")+1,i.indexOf("("))]*=Number(i.substr(1,i.indexOf(" ")-1))+Number(i.substr(i.indexOf("(")+2,i.length).replace(")","")):this[i.substring(i.indexOf(" ")+1,i.indexOf("("))]+=Number(i.substr(1,i.indexOf(" ")-1))+Number(i.substr(i.indexOf("(")+2,i.length).replace(")",""))}if(re[g.hive[this.hiveY][this.hiveX].beequip.type].extraAbility){let e=re[g.hive[this.hiveY][this.hiveX].beequip.type].extraAbility.split("_");this[e[0]+"Tokens"].push({type:e[1],cooldown:$[e[1]].trialCooldown,rate:$[e[1]].trialRate,timer:-1e4})}}this.speed*=.03*e+1,this.gatherAmount*=.1*e+1,this.convertAmount*=.1*e+1,this.maxEnergy*=.05*e+1,this.gifted&&(this.gatherAmount*=1.5,this.convertAmount*=1.5,this.attack*=1.5),this.speed/=3.5,this.energy=MATH.random(.35,1)*this.maxEnergy}update(){this.fetchBall&&this.fetchBall.turn&&(this.state="moveToFetch");for(let e in this.trails)this.trails[e].addPos([this.pos[0],this.pos[1]+this.beeOffsets[e],this.pos[2]]);if((this.energy<=0&&"sleep"!==this.state&&"moveToTriangulate"!==this.state&&"moveToTargetPractice"!==this.state&&"shootTargetPractice"!==this.state&&"moveToFetch"!==this.state||g.hive[this.hiveY][this.hiveX].roboDisabled&&"sleep"!==this.state)&&(this.state="moveToSleep"),g.attacked.length>0&&"sleep"!==this.state&&"moveToSleep"!==this.state&&"attack"!==this.state&&"moveToAttack"!==this.state&&"moveToTriangulate"!==this.state&&"moveToTargetPractice"!==this.state&&"shootTargetPractice"!==this.state&&"moveToFetch"!==this.state){this.attackMob=g.attacked[o.random()*g.attacked.length|0],this.state="moveToAttack";let e=o.random()*MATH.TWO_PI;this.attackOffset=[2*o.cos(e),2*o.sin(e)]}switch(this.state){case"moveToAttack":if(!(g.attacked.length&&this.attackMob&&("attack"===this.attackMob.state||this.attackMob instanceof Se||this.attackMob instanceof Me)))return void(this.state="moveToPlayer");if(this.moveTo=[this.attackMob.pos[0]+this.attackOffset[0],this.attackMob.pos[1]+("precise"===this.type?1.25:.25),this.attackMob.pos[2]+this.attackOffset[1]],vec3.sub(this.moveDir,this.moveTo,this.pos),vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed*("spicy"===this.type?g.flameHeatStackApplied:1)),vec3.sqrDist(this.moveTo,this.pos)<.8){this.state="attack";let e=o.random()*MATH.TWO_PI,t="precise"===this.type?5:2;this.attackOffset=[o.cos(e)*t,o.sin(e)*t],this.attackTimer=(1.25+.5*o.random())*("precise"===this.type?1.6:1)}de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"attack":if(!(g.attacked.length&&this.attackMob&&("attack"===this.attackMob.state||this.attackMob instanceof Se||this.attackMob instanceof Me)))return void(this.state="moveToPlayer");if(this.attackTimer-=f,this.attackTimer<=0){if(this.energy--,this.state="moveToAttack",this.attackMob=g.attacked[o.random()*g.attacked.length|0],o.random()<(this.attackMob.blocking?.85:0))this.energy--,Kt.add("BLOCK",[this.attackMob.pos[0],this.attackMob.pos[1]+2.75*o.random()+1.5,this.attackMob.pos[2]],[255,255,255],0,"",1.75,!1);else if(o.random()<("precise"===this.type?o.max(o.pow(2,(this.gifted?2:1)+this.level-this.attackMob.level),.05):o.pow(2,this.level-this.attackMob.level))){let e=(this.attack+g[K[this.type].color+"BeeAttack"])*g.beeAttack*("precise"===this.type?this.gifted?2:1.5:1)*("buoyant"===this.type?g.buoyantBeeAttack:1);this.attackMob.damage(e),"precise"===this.type&&le.explosions.push(new ce({col:[1,0,0],pos:this.pos,life:.75,size:1.75,speed:.3,aftershock:0}))}else this.energy--,Kt.add("MISS",[this.attackMob.pos[0],this.attackMob.pos[1]+2.75*o.random()+1.5,this.attackMob.pos[2]],[255,255,255],0,"",1.75,!1);let e,t=[];for(let e in this.attackTokens){let i=this.attackTokens[e];(T-i.timer)*g[K[this.type].color+"BeeAbilityRate"]*this.abilityRate>=i.cooldown&&o.random()<.35*i.rate&&(i.requireGifted&&this.gifted||!i.requireGifted)&&t.push(e)}t.length&&(e=t[o.random()*t.length|0],this.attackTokens[e].timer=T,e=this.attackTokens[e].type,le.tokens.push(new ii($[e].tokenLife,[o.round(this.pos[0]),g.body.position.y+.5,o.round(this.pos[2])],e,{field:g.fieldIn,x:this.flowerCollecting[0],z:this.flowerCollecting[1],bee:this},!0)))}de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],5*T,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"moveToPlayer":if(g.fieldIn&&g.pollen<g.capacity){if(ti[g.fieldIn].planter){let e=MATH.lerp(.35,.02,le.bees.length/50)*("shy"===this.type?this.gifted?2.5:2:1),t=ti[g.fieldIn].planter;if("redClay"===t.type&&("red"===K[this.type]?e*=1.25:"blue"===K[this.type]&&(e=0)),"blueClay"===t.type&&("blue"===K[this.type]?e*=1.25:"red"===K[this.type]&&(e=0)),"pesticide"===t.type&&this.mutation&&(e*=1.3),"petal"===t.type&&"white"===K[this.type]&&(e*=1.5),"plenty"===t.type&&this.gifted&&(e*=1.5),o.random()<e){this.state="moveToPlanter";let e=o.random()*MATH.TWO_PI;return void(this.collectRot=[o.sin(e),-4,o.cos(e)])}}return void(this.state="moveToFlower")}if(this.moveTo=[g.body.position.x+this.moveOffset[0],g.body.position.y,g.body.position.z+this.moveOffset[2]],vec3.sub(this.moveDir,this.moveTo,this.pos),vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed*("spicy"===this.type?g.flameHeatStackApplied:1)),vec3.sqrDist(this.moveTo,this.pos)<.8&&(this.moveOffset=[MATH.random(-5,5),0,MATH.random(-5,5)]),de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId),g.converting&&g.pollen)return void(this.state="moveToHiveToConvert");g.convertingBalloon&&g.hiveBalloon.pollen&&(this.state="moveToHiveToConvertBalloon");break;case"moveToPlanter":if(!g.fieldIn||g.pollen>=g.capacity||!ti[g.fieldIn].planter){this.state="moveToPlayer";break}let e=ti[g.fieldIn].planter;if(this.moveTo=[e.pos[0],e.pos[1]+e.height+e.displaySize+.2,e.pos[2]],vec3.sub(this.moveDir,this.moveTo,this.pos),vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed*("spicy"===this.type?g.flameHeatStackApplied:1)),vec3.sqrDist(this.moveTo,this.pos)<.075)return this.state="collectPlanter",this.collectTimer=this.gatherSpeed*("spicy"===this.type?1/g.flameHeatStackApplied:1),void(this.planterSipTime=this.collectTimer);de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"collectPlanter":if(!g.fieldIn||g.pollen>=g.capacity||!ti[g.fieldIn].planter)return void(this.state="moveToPlayer");if(this.collectTimer-=f,this.collectTimer<=0){this.energy--,ti[g.fieldIn].planter.beeSipped(this);let e,t=[];for(let e in this.gatheringTokens){let i=this.gatheringTokens[e];(T-i.timer)*g[K[this.type].color+"BeeAbilityRate"]*this.abilityRate>=i.cooldown&&o.random()<=i.rate&&(i.requireGifted&&this.gifted||!i.requireGifted)&&t.push(e)}t.length&&(e=t[o.random()*t.length|0],this.gatheringTokens[e].timer=T,e=this.gatheringTokens[e].type,le.tokens.push(new ii($[e].tokenLife,[o.round(this.pos[0]),ti[g.fieldIn].y+1,o.round(this.pos[2])],e,{field:g.fieldIn,x:0|ti[g.fieldIn].x,z:0|ti[g.fieldIn].z,bee:this}))),this.state="moveToFlower"}de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.collectRot[0],this.collectRot[1],this.collectRot[2],y,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"moveToFlower":if(!g.fieldIn||g.pollen>=g.capacity){this.state="moveToPlayer";break}let t=ti[g.fieldIn];for(;void 0===this.flowerCollecting[0]||void 0===this.flowerCollecting[1]||this.flowerCollecting[0]<0||this.flowerCollecting[0]>=t.width||this.flowerCollecting[1]<0||this.flowerCollecting[1]>=t.length;){this.flowerCollecting[0]=g.flowerIn.x+o.round(MATH.random(-7,7)),this.flowerCollecting[1]=g.flowerIn.z+o.round(MATH.random(-7,7));let e=o.random()*MATH.TWO_PI;this.collectRot=[o.sin(e),-4,o.cos(e)]}if(this.moveTo=[t.x+this.flowerCollecting[0],t.y+.5*Si[g.fieldIn][this.flowerCollecting[1]][this.flowerCollecting[0]].height+.25,t.z+this.flowerCollecting[1]],vec3.sub(this.moveDir,this.moveTo,this.pos),vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed*("spicy"===this.type?g.flameHeatStackApplied:1)),vec3.sqrDist(this.moveTo,this.pos)<.075)return this.state="collectPollen",void(this.collectTimer=this.gatherSpeed*("spicy"===this.type?1/g.flameHeatStackApplied:1));de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"collectPollen":if(!g.fieldIn||g.pollen>=g.capacity)return void(this.state="moveToPlayer");if(this.collectTimer-=f,this.collectTimer<=0){this.energy--,Hi({x:this.flowerCollecting[0],z:this.flowerCollecting[1],pattern:[[0,0]],amount:this.gatherAmount,yOffset:MATH.random(.7,1.3),multiplier:{r:"red"===K[this.type].color?1.2*g.pollenFromBees*("tabby"===this.type?g.tabbyLoveStacks:1):g.pollenFromBees*("tabby"===this.type?g.tabbyLoveStacks:1),b:"blue"===K[this.type].color?1.2*g.pollenFromBees*("tabby"===this.type?g.tabbyLoveStacks:1):g.pollenFromBees*("tabby"===this.type?g.tabbyLoveStacks:1),w:g.pollenFromBees*("tabby"===this.type?g.tabbyLoveStacks:1)}}),K[this.type].gatheringPassive&&K[this.type].gatheringPassive(this);let e,t=[];for(let e in this.gatheringTokens){let i=this.gatheringTokens[e];(T-i.timer)*g[K[this.type].color+"BeeAbilityRate"]*this.abilityRate>=i.cooldown&&o.random()<=i.rate&&(i.requireGifted&&this.gifted||!i.requireGifted)&&t.push(e)}t.length&&(e=t[o.random()*t.length|0],this.gatheringTokens[e].timer=T,e=this.gatheringTokens[e].type,le.tokens.push(new ii($[e].tokenLife,[o.round(this.pos[0]),ti[g.fieldIn].y+1,o.round(this.pos[2])],e,{field:g.fieldIn,x:this.flowerCollecting[0],z:this.flowerCollecting[1],bee:this}))),this.flowerCollecting=[],this.state="moveToPlayer"}de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.collectRot[0],this.collectRot[1],this.collectRot[2],y,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"moveToHiveToConvert":if(!g.converting||!g.pollen)return void(this.state="moveToPlayer");if(this.moveTo=this.hivePos.slice(),vec3.sub(this.moveDir,this.moveTo,this.pos),vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed*("spicy"===this.type?g.flameHeatStackApplied:1)),vec3.sqrDist(this.moveTo,this.pos)<.8){this.pos=this.hivePos.slice(),this.state="convertHoney",this.convertTimer=this.convertSpeed;let e=o.min(o.round(this.convertAmount*g.convertRate*g[K[this.type].color+"ConvertRate"]*g.convertRateAtHive*("tabby"===this.type?g.tabbyLoveStacks:1)),g.pollen);e===g.pollen&&(this.lastBeeToConvert=!0),g.pollen-=e,this.pollen=e}de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"convertHoney":if(!g.converting)return g.pollen+=this.pollen,this.pollen=0,void(this.state="moveToPlayer");if(this.convertTimer-=f,de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,0,1,0,5*T,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId),this.convertTimer<=0){this.state="moveToHiveToConvert",g.honey+=o.ceil(this.pollen*g.honeyAtHive*g.honeyPerPollen*("diamond"===this.type?(1.4+.03*this.level)*(this.gifted?2:1):1)),Kt.add(o.ceil(this.pollen*g.honeyAtHive*g.honeyPerPollen*("diamond"===this.type?(1.4+.03*this.level)*(this.gifted?2:1):1)),[g.body.position.x,g.body.position.y+2*o.random()+.5,g.body.position.z],ae.honey,0,"+"),this.pollen=0,!g.pollen&&this.lastBeeToConvert&&(this.lastBeeToConvert=!1,g.converting=!1,g.stopConverting=!0);for(let e=0;e<10;e++)$t.add({x:this.pos[0],y:this.pos[1],z:this.pos[2],vx:MATH.random(-1,1),vy:MATH.random(-1,1),vz:MATH.random(0,3),grav:0,size:MATH.random(60,100),col:"diamond"===this.type?[.1,.7,.9]:ae.honey_normalized,life:.75,rotVel:MATH.random(-3,3),alpha:5})}break;case"moveToHiveToConvertBalloon":if(!g.convertingBalloon||!g.hiveBalloon.pollen)return void(this.state="moveToPlayer");if(this.moveTo=this.hivePos.slice(),vec3.sub(this.moveDir,this.moveTo,this.pos),vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed*("spicy"===this.type?g.flameHeatStackApplied:1)),vec3.sqrDist(this.moveTo,this.pos)<.8){this.pos=this.hivePos.slice(),this.state="convertBalloon",this.convertTimer=this.convertSpeed;let e=o.min(o.round(this.convertAmount*g.convertRate*("buoyant"===this.type?this.gifted?4:3:1)*g[K[this.type].color+"ConvertRate"]*g.convertRateAtHive*("tabby"===this.type?g.tabbyLoveStacks:1)),g.hiveBalloon.pollen);e===g.hiveBalloon.pollen&&(this.lastBeeToConvert=!0),g.hiveBalloon.pollen-=e,this.pollen=e}de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"convertBalloon":if(!g.convertingBalloon)return g.hiveBalloon.pollen+=this.pollen,this.pollen=0,void(this.state="moveToPlayer");if(this.convertTimer-=f,de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,0,1,0,5*T,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId),this.convertTimer<=0){this.state="moveToHiveToConvertBalloon",g.honey+=o.ceil(this.pollen*g.honeyAtHive*g.honeyPerPollen*("diamond"===this.type?(1.4+.03*this.level)*(this.gifted?2:1):1)),Kt.add(o.ceil(this.pollen*g.honeyAtHive*g.honeyPerPollen*("diamond"===this.type?(1.4+.03*this.level)*(this.gifted?2:1):1)),[g.body.position.x,g.body.position.y+2*o.random()+.5,g.body.position.z],ae.honey,0,"+"),this.pollen=0,!g.pollen&&this.lastBeeToConvert&&(this.lastBeeToConvert=!1,g.convertingBalloon=!1,g.stopConverting=!0);for(let e=0;e<10;e++)$t.add({x:this.pos[0],y:this.pos[1],z:this.pos[2],vx:MATH.random(-1,1),vy:MATH.random(-1,1),vz:MATH.random(0,3),grav:0,size:MATH.random(60,100),col:"diamond"===this.type?[.1,.7,.9]:ae.honey_normalized,life:.75,rotVel:MATH.random(-3,3),alpha:5})}break;case"moveToSleep":this.moveTo=this.hivePos.slice(),vec3.sub(this.moveDir,this.moveTo,this.pos),vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed*("spicy"===this.type?g.flameHeatStackApplied:1)),vec3.sqrDist(this.moveTo,this.pos)<1&&(this.pos=this.hivePos.slice(),this.sleepTimer=20,this.zzzTimer=0,this.state="sleep",this.sleepRotate=o.random()*MATH.TWO_PI),de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"sleep":this.sleepTimer-=f,this.zzzTimer-=f,this.sleepTimer<=0&&(this.energy=this.maxEnergy*g.beeEnergy,this.state="moveToPlayer"),this.zzzTimer<=0&&(this.zzzTimer=5,Kt.add("zzz",[this.pos[0]+MATH.random(-1,1),this.pos[1]+MATH.random(-1,1),this.pos[2]+o.random()+.25],[255,255,255],0,"",1.25)),de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,0,1,0,this.sleepRotate,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"moveToTargetPractice":if(!g.fieldIn)return void(this.state="moveToPlayer");if(vec3.sub(this.moveDir,this.moveTo,this.pos),vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed*1.5),vec3.sqrDist(this.moveTo,this.pos)<.7){this.pos=this.moveTo.slice(),this.targetPracticeTimer=4,this.targetExplosionTimer=0,this.state="shootTargetPractice",this.targetLookDir=[(.5*ti[g.fieldIn].width|0)+ti[g.fieldIn].x-this.pos[0],ti[g.fieldIn].y,(.5*ti[g.fieldIn].length|0)+ti[g.fieldIn].z-this.pos[2]],this.targets=[];for(let e=0;e<3;e++){let t=.5*ti[g.fieldIn].width+o.random()*this.targetPractice_q[0]*ti[g.fieldIn].width*.5|0,i=.5*ti[g.fieldIn].length+o.random()*this.targetPractice_q[1]*ti[g.fieldIn].length*.5|0;this.targets.push(new Ae(g.fieldIn,t,i,e+1,this)),le.targets.push(this.targets[this.targets.length-1])}}de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"shootTargetPractice":if(this.targetPracticeTimer-=f,this.targetExplosionTimer-=f,this.targets[0].activated&&this.targets[1].activated&&this.targets[2].activated&&this.targetPracticeTimer>.75&&(this.targetPracticeTimer=.75),this.targetPracticeTimer<=.5&&!this.shotParticleProjectile){this.shotParticleProjectile=!0;for(let e in this.targets){let t=this.targets[e].pos[0]-this.pos[0],i=this.targets[e].pos[1]-this.pos[1],n=this.targets[e].pos[2]-this.pos[2],s=o.sqrt(t*t+i*i+n*n),r=s/.5/s;$t.add({x:this.pos[0],y:this.pos[1],z:this.pos[2],vx:t*r,vy:i*r,vz:n*r,grav:0,size:400,col:[1,0,0],life:.4,rotVel:MATH.random(-9,9),alpha:1e3})}}if(this.targetPracticeTimer<=0){this.shotParticleProjectile=!1;let e=[this.targets[0].activated,this.targets[1].activated,this.targets[2].activated];if(e[0]&&e[1]&&e[2]){for(let e in le.tokens)!le.tokens[e].canBeLinked||le.tokens[e]instanceof ni||le.tokens[e].collect();le.tokens.push(new ii($.precision.tokenLife,[this.targets[2].pos[0],this.targets[2].pos[1]+.5,this.targets[2].pos[2]],"precision",{field:this.targets[2].field,x:this.targets[2].x,z:this.targets[2].z,bee:this})),le.tokens.push(new ii($.focus.tokenLife,[this.targets[2].pos[0]+1,this.targets[2].pos[1]+.5,this.targets[2].pos[2]],"focus",{field:this.targets[2].field,x:this.targets[2].x+1,z:this.targets[2].z,bee:this})),le.tokens.push(new ii($.redBoost.tokenLife,[this.targets[2].pos[0]-1,this.targets[2].pos[1]+.5,this.targets[2].pos[2]],"redBoost",{field:this.targets[2].field,x:this.targets[2].x-1,z:this.targets[2].z,bee:this}))}e[2]&&this.gifted&&(e[0]&&e[1]||le.marks.push(new be(this.targets[2].field,this.targets[2].x,this.targets[2].z,"preciseMark",this.level)));for(let e in this.targets){let t=this.targets[e];t.activated?(2!==e&&le.tokens.push(new ii($.focus.tokenLife,[t.pos[0],t.pos[1]+.5,t.pos[2]],"focus",{field:t.field,x:t.x,z:t.z,bee:this})),Hi({x:t.x,z:t.z,pattern:[[-4,0],[-3,-2],[-3,-1],[-3,0],[-3,1],[-3,2],[-2,-3],[-2,-2],[-2,-1],[-2,0],[-2,1],[-2,2],[-2,3],[-1,-3],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[-1,3],[0,-4],[0,-3],[0,-2],[0,-1],[0,0],[0,1],[0,2],[0,3],[0,4],[1,-3],[1,-2],[1,-1],[1,0],[1,1],[1,2],[1,3],[2,-3],[2,-2],[2,-1],[2,0],[2,1],[2,2],[2,3],[3,-2],[3,-1],[3,0],[3,1],[3,2],[4,0]],amount:(this.attack+g[K[this.type].color+"BeeAttack"])*g.beeAttack*(.1*this.level+1)*.5,yOffset:2+.4*o.random(),stackHeight:.5+.5*o.random(),instantConversion:.5*(g.flameHeatStack-1),multiplier:3*g.flameHeatStack,field:t.field})):le.tokens.push(new ii($.redBoost.tokenLife,[t.pos[0],t.pos[1]+.5,t.pos[2]],"redBoost",{field:t.field,x:t.x,z:t.z,bee:this}))}return this.targets[0].splice=!0,this.targets[1].splice=!0,this.targets[2].splice=!0,void(this.state="moveToPlayer")}this.targetExplosionTimer<=0&&(this.targetExplosionTimer=.8,le.explosions.push(new ce({col:[1,0,0],pos:this.pos,life:.75,size:1.75,speed:.3,aftershock:0}))),de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.targetLookDir[0],this.targetLookDir[1],this.targetLookDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"moveToTriangulate":this.triangulateTimer-=f;let i=[g.body.position.x-this.triangulateTokenPos[0],g.body.position.z-this.triangulateTokenPos[2]],n=[-i[1],i[0]],s=[this.pos[0]-g.body.position.x,this.pos[2]-g.body.position.z];n[0]*s[0]+n[1]*s[1]>0?this.moveDir=[n[0],0,n[1]]:this.moveDir=[i[1],0,-i[0]],vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed),this.triangulateTimer<=0&&(this.state="moveToPlayer"),de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"moveToFetch":if(!this.fetchBall||!this.fetchBall.turn)return void(this.state="moveToPlayer");if(this.moveDir=[this.fetchBall.body.position.x-this.pos[0],this.fetchBall.body.position.y-this.pos[1],this.fetchBall.body.position.z-this.pos[2]],o.abs(this.moveDir[0])+o.abs(this.moveDir[1])+o.abs(this.moveDir[2])<1.2){let e=[g.body.position.x-this.pos[0],g.body.position.z-this.pos[2]];vec2.normalize(e,e),this.fetchBall.kick(e[0]+MATH.random(-.2,.2),e[1]+MATH.random(-.2,.2))}vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed),de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId)}K[this.type].particles&&T-this.emitParticle>.2&&(K[this.type].particles(this),this.emitParticle=T),g.hive[this.hiveY][this.hiveX].radioactive>0&&Kt.addDecalRaw(...this.pos,0,0,...Kt.decalUV.glow,0,1,0,2.5,2.5,0),"buoyant"===this.type&&(this.gifted&&Kt.addDecalRaw(...this.pos,0,0,...Kt.decalUV.glow,1,1,.2,1.35,1.35,0),Kt.addDecalRaw(...this.pos,0,0,...Kt.decalUV.lightrays,1,1,.2,2.25,2.25,(1.25*T+this.hiveX+5*this.hiveY)*(this.hiveY%2?1:-1)))}startTargetPractice(){this.state="moveToTargetPractice";let e=MATH.random(.4,.9)*ti[g.fieldIn].width*(o.random()<.5?1:-1),t=MATH.random(.4,.9)*ti[g.fieldIn].length*(o.random()<.5?1:-1),i=o.random()*MATH.TWO_PI,n=o.sin(i)*e,s=o.cos(i)*t;this.moveTo=[ti[g.fieldIn].x+.5*ti[g.fieldIn].width+n,this.pos[1]+4+2*o.random(),ti[g.fieldIn].z+.5*ti[g.fieldIn].length+s],this.targetPractice_q=[o.sign(-n)||1,o.sign(-s)||1]}startTriangulate(e){this.state="moveToTriangulate",this.triangulateTimer=3,this.triangulateTokenPos=e,le.triangulates.push(new Te(this,e))}}class me{constructor(e,t,i,o,n){this.meshScale="baby"===t||"tadpole"===t?.65:1,this.GIFTED_BEE_TEXTURE_OFFSET=K[t].v+(n?.375:0),this.life=o,this.gifted=n,this.hivePos=e.slice(),this.pos=e.slice(),this.type=t,this.flowerIn=null,this.moveTo=[g.body.position.x,g.body.position.y,g.body.position.z],this.moveOffset=[MATH.random(-5,5),0,MATH.random(-5,5)],this.moveDir=[],this.computeLevel(i||1),this.convertTimer=0,this.flowerCollecting=[],this.state="moveToPlayer",this.emitParticle=T,this.collectRot=[],this.pollen=0,this.attackTimer=1,this.trail={addPos:function(){}},this.trails=[],this.beeOffsets=[];for(let e in K[this.type].trails)this.trails.push(new ei.ConstantTrail(K[this.type].trails[e])),this.beeOffsets.push(K[this.type].trails[e].beeOffset||0);this.gatheringTokens=[];for(let e in K[this.type].tokens)this.gatheringTokens[e]={type:K[this.type].tokens[e],cooldown:$[K[this.type].tokens[e]].trialCooldown,rate:$[K[this.type].tokens[e]].trialRate,timer:-1e4};this.attackTokens=[];for(let e in K[this.type].attackTokens)this.attackTokens[e]={type:K[this.type].attackTokens[e],cooldown:$[K[this.type].attackTokens[e]].trialCooldown,rate:$[K[this.type].attackTokens[e]].trialRate,timer:-1e4}}computeLevel(e){this.level=e,e--,this.speed=K[this.type].speed,this.gatherSpeed=K[this.type].gatherSpeed,this.gatherAmount=K[this.type].gatherAmount,this.attack=K[this.type].attack,this.speed*=.03*e+1,this.gatherAmount*=.1*e+1,this.gifted&&(this.gatherAmount*=1.5,this.attack*=1.5),this.speed/=3.5}update(){this.life-=f;for(let e in this.trails)this.trails[e].addPos([this.pos[0],this.pos[1]+this.beeOffsets[e],this.pos[2]]);if(g.attacked.length>0&&"sleep"!==this.state&&"moveToSleep"!==this.state&&"attack"!==this.state&&"moveToAttack"!==this.state){this.attackMob=g.attacked[o.random()*g.attacked.length|0],this.state="moveToAttack";let e=o.random()*MATH.TWO_PI;this.attackOffset=[2*o.cos(e),2*o.sin(e)]}switch(this.state){case"moveToAttack":if(!(g.attacked.length&&this.attackMob&&("attack"===this.attackMob.state||this.attackMob instanceof Se||this.attackMob instanceof Me)))return void(this.state="moveToPlayer");if(this.moveTo=[this.attackMob.pos[0]+this.attackOffset[0],this.attackMob.pos[1]+("precise"===this.type?1.25:.25),this.attackMob.pos[2]+this.attackOffset[1]],vec3.sub(this.moveDir,this.moveTo,this.pos),vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed*("spicy"===this.type?g.flameHeatStackApplied:1)),vec3.sqrDist(this.moveTo,this.pos)<.8){this.state="attack";let e=o.random()*MATH.TWO_PI,t="precise"===this.type?5:2;this.attackOffset=[o.cos(e)*t,o.sin(e)*t],this.attackTimer=1.25+.5*o.random()*("precise"===this.type?1.75:1)}de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"attack":if(!(g.attacked.length&&this.attackMob&&("attack"===this.attackMob.state||this.attackMob instanceof Se||this.attackMob instanceof Me)))return void(this.state="moveToPlayer");if(this.attackTimer-=f,this.attackTimer<=0){if(this.energy--,this.state="moveToAttack",this.attackMob=g.attacked[o.random()*g.attacked.length|0],o.random()<("precise"===this.type?o.max(o.pow(2,(this.gifted?2:1)+this.level-this.attackMob.level),.05):o.pow(2,this.level-this.attackMob.level))){let e=(this.attack+g[K[this.type].color+"BeeAttack"])*g.beeAttack*("precise"===this.type?this.gifted?2.25:1.5:1)*("buoyant"===this.type?g.buoyantBeeAttack:1);this.attackMob.damage(e),"precise"===this.type&&le.explosions.push(new ce({col:[1,0,0],pos:this.pos,life:.75,size:1.75,speed:.3,aftershock:0}))}else Kt.add("MISS",[this.attackMob.pos[0],this.attackMob.pos[1]+2.75*o.random()+1.5,this.attackMob.pos[2]],[255,255,255],0,"",1.25,!1);let e,t=[];for(let e in this.attackTokens){let i=this.attackTokens[e];(T-i.timer)*g[K[this.type].color+"BeeAbilityRate"]>=i.cooldown&&o.random()<=.35*i.rate&&t.push(e)}t.length&&(e=t[o.random()*t.length|0],this.attackTokens[e].timer=T,e=this.attackTokens[e].type,le.tokens.push(new ii($[e].tokenLife,[o.round(this.pos[0]),o.round(this.pos[1])+.5,o.round(this.pos[2])],e,{field:g.fieldIn,x:this.flowerCollecting[0],z:this.flowerCollecting[1],bee:this},!0)))}de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],5*T,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"moveToPlayer":if(g.fieldIn&&g.pollen<g.capacity)return void(this.state="moveToFlower");if(this.moveTo=[g.body.position.x+this.moveOffset[0],g.body.position.y,g.body.position.z+this.moveOffset[2]],vec3.sub(this.moveDir,this.moveTo,this.pos),vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed*("spicy"===this.type?g.flameHeatStackApplied:1)),vec3.sqrDist(this.moveTo,this.pos)<.8&&(this.moveOffset=[MATH.random(-5,5),0,MATH.random(-5,5)]),de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId),g.converting&&g.pollen)return void(this.state="moveToHiveToConvert");g.convertingBalloon&&g.hiveBalloon.pollen&&(this.state="moveToHiveToConvertBalloon");break;case"moveToFlower":if(!g.fieldIn||g.pollen>=g.capacity){this.state="moveToPlayer";break}let e=ti[g.fieldIn];for(;void 0===this.flowerCollecting[0]||void 0===this.flowerCollecting[1]||this.flowerCollecting[0]<0||this.flowerCollecting[0]>=e.width||this.flowerCollecting[1]<0||this.flowerCollecting[1]>=e.length;){this.flowerCollecting[0]=g.flowerIn.x+o.round(MATH.random(-7,7)),this.flowerCollecting[1]=g.flowerIn.z+o.round(MATH.random(-7,7));let e=o.random()*MATH.TWO_PI;this.collectRot=[o.sin(e),-4,o.cos(e)]}if(this.moveTo=[e.x+this.flowerCollecting[0],e.y+.5*Si[g.fieldIn][this.flowerCollecting[1]][this.flowerCollecting[0]].height+.25,e.z+this.flowerCollecting[1]],vec3.sub(this.moveDir,this.moveTo,this.pos),vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed*("spicy"===this.type?g.flameHeatStackApplied:1)),vec3.sqrDist(this.moveTo,this.pos)<.075)return this.state="collectPollen",void(this.collectTimer=this.gatherSpeed*("spicy"===this.type?1/g.flameHeatStackApplied:1));de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"collectPollen":if(!g.fieldIn||g.pollen>=g.capacity)return void(this.state="moveToPlayer");if(this.collectTimer-=f,this.collectTimer<=0){this.energy--,Hi({x:this.flowerCollecting[0],z:this.flowerCollecting[1],pattern:[[0,0]],amount:this.gatherAmount,yOffset:MATH.random(.7,1.3),multiplier:g.pollenFromBees}),K[this.type].gatheringPassive&&K[this.type].gatheringPassive(this);let e,t=[];for(let e in this.gatheringTokens){let i=this.gatheringTokens[e];(T-i.timer)*g[K[this.type].color+"BeeAbilityRate"]>=i.cooldown&&o.random()<=i.rate&&t.push(e)}t.length&&(e=t[o.random()*t.length|0],this.gatheringTokens[e].timer=T,e=this.gatheringTokens[e].type,le.tokens.push(new ii($[e].tokenLife,[o.round(this.pos[0]),ti[g.fieldIn].y+1,o.round(this.pos[2])],e,{field:g.fieldIn,x:this.flowerCollecting[0],z:this.flowerCollecting[1],bee:this}))),this.flowerCollecting=[],this.state="moveToFlower"}de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.collectRot[0],this.collectRot[1],this.collectRot[2],y,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"moveToTargetPractice":if(!g.fieldIn)return void(this.state="moveToPlayer");if(vec3.sub(this.moveDir,this.moveTo,this.pos),vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed*1.5),vec3.sqrDist(this.moveTo,this.pos)<.7){this.pos=this.moveTo.slice(),this.targetPracticeTimer=4,this.targetExplosionTimer=0,this.state="shootTargetPractice",this.targetLookDir=[(.5*ti[g.fieldIn].width|0)+ti[g.fieldIn].x-this.pos[0],ti[g.fieldIn].y,(.5*ti[g.fieldIn].length|0)+ti[g.fieldIn].z-this.pos[2]],this.targets=[];for(let e=0;e<3;e++){let t=.5*ti[g.fieldIn].width+o.random()*this.targetPractice_q[0]*ti[g.fieldIn].width*.5|0,i=.5*ti[g.fieldIn].length+o.random()*this.targetPractice_q[1]*ti[g.fieldIn].length*.5|0;this.targets.push(new Ae(g.fieldIn,t,i,e+1,this)),le.targets.push(this.targets[this.targets.length-1])}}de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"shootTargetPractice":if(this.targetPracticeTimer-=f,this.targetExplosionTimer-=f,this.targetPracticeTimer<=.35&&!this.shotParticleProjectile){this.shotParticleProjectile=!0;for(let e in this.targets){let t=this.targets[e].pos[0]-this.pos[0],i=this.targets[e].pos[1]-this.pos[1],n=this.targets[e].pos[2]-this.pos[2],s=o.sqrt(t*t+i*i+n*n),r=s/.35/s;$t.add({x:this.pos[0],y:this.pos[1],z:this.pos[2],vx:t*r,vy:i*r,vz:n*r,grav:0,size:MATH.random(300,350),col:[1,0,0],life:.4,rotVel:MATH.random(-9,9),alpha:1e3})}}if(this.targetPracticeTimer<=0){this.shotParticleProjectile=!1;let e=[this.targets[0].activated,this.targets[1].activated,this.targets[2].activated];if(e[0]&&e[1]&&e[2]){for(let e in le.tokens&&!(le.tokens[e]instanceof ni))le.tokens[e].canBeLinked&&le.tokens[e].collect();le.tokens.push(new ii($.precision.tokenLife,[this.targets[2].pos[0],this.targets[2].pos[1]+.5,this.targets[2].pos[2]],"precision",{field:this.targets[2].field,x:this.targets[2].x,z:this.targets[2].z,bee:this})),le.tokens.push(new ii($.focus.tokenLife,[this.targets[2].pos[0]+1,this.targets[2].pos[1]+.5,this.targets[2].pos[2]],"focus",{field:this.targets[2].field,x:this.targets[2].x+1,z:this.targets[2].z,bee:this})),le.tokens.push(new ii($.redBoost.tokenLife,[this.targets[2].pos[0]-1,this.targets[2].pos[1]+.5,this.targets[2].pos[2]],"redBoost",{field:this.targets[2].field,x:this.targets[2].x-1,z:this.targets[2].z,bee:this}))}e[2]&&this.gifted&&(e[0]&&e[1]||le.marks.push(new be(this.targets[2].field,this.targets[2].x,this.targets[2].z,"preciseMark",this.level)));for(let e in this.targets){let t=this.targets[e];t.activated?(2!==e&&le.tokens.push(new ii($.focus.tokenLife,[t.pos[0],t.pos[1]+.5,t.pos[2]],"focus",{field:t.field,x:t.x,z:t.z,bee:this})),Hi({x:t.x,z:t.z,pattern:[[-4,0],[-3,-2],[-3,-1],[-3,0],[-3,1],[-3,2],[-2,-3],[-2,-2],[-2,-1],[-2,0],[-2,1],[-2,2],[-2,3],[-1,-3],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[-1,3],[0,-4],[0,-3],[0,-2],[0,-1],[0,0],[0,1],[0,2],[0,3],[0,4],[1,-3],[1,-2],[1,-1],[1,0],[1,1],[1,2],[1,3],[2,-3],[2,-2],[2,-1],[2,0],[2,1],[2,2],[2,3],[3,-2],[3,-1],[3,0],[3,1],[3,2],[4,0]],amount:(this.attack+g[K[this.type].color+"BeeAttack"])*g.beeAttack*.75,yOffset:2+.4*o.random(),stackHeight:.5+.5*o.random(),instantConversion:.5*(g.flameHeatStack-1),multiplier:5*g.flameHeatStack,field:t.field})):le.tokens.push(new ii($.redBoost.tokenLife,[t.pos[0],t.pos[1]+.5,t.pos[2]],"redBoost",{field:t.field,x:t.x,z:t.z,bee:this}))}return this.targets[0].splice=!0,this.targets[1].splice=!0,this.targets[2].splice=!0,void(this.state="moveToPlayer")}this.targetExplosionTimer<=0&&(this.targetExplosionTimer=.8,le.explosions.push(new ce({col:[1,0,0],pos:this.pos,life:.75,size:1.75,speed:.3,aftershock:0}))),de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.targetLookDir[0],this.targetLookDir[1],this.targetLookDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId);break;case"moveToTriangulate":this.triangulateTimer-=f;let t=[g.body.position.x-this.triangulateTokenPos[0],g.body.position.z-this.triangulateTokenPos[2]],i=[-t[1],t[0]],n=[this.pos[0]-g.body.position.x,this.pos[2]-g.body.position.z];i[0]*n[0]+i[1]*n[1]>0?this.moveDir=[i[0],0,i[1]]:this.moveDir=[t[1],0,-t[0]],vec3.normalize(this.moveDir,this.moveDir),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f*this.speed*g.beeSpeed),this.triangulateTimer<=0&&(this.state="moveToPlayer"),de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.meshScale,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K[this.type].u,this.GIFTED_BEE_TEXTURE_OFFSET,K[this.type].meshPartId)}return K[this.type].particles&&T-this.emitParticle>.2&&(K[this.type].particles(this),this.emitParticle=T),this.life<=0}startTargetPractice(){this.state="moveToTargetPractice";let e=MATH.random(.4,.9)*ti[g.fieldIn].width*(o.random()<.5?1:-1),t=MATH.random(.4,.9)*ti[g.fieldIn].length*(o.random()<.5?1:-1),i=o.random()*MATH.TWO_PI,n=o.sin(i)*e,s=o.cos(i)*t;this.moveTo=[ti[g.fieldIn].x+.5*ti[g.fieldIn].width+n,this.pos[1]+4+2*o.random(),ti[g.fieldIn].z+.5*ti[g.fieldIn].length+s],this.targetPractice_q=[o.sign(-n)||1,o.sign(-s)||1]}startTriangulate(e){this.state="moveToTriangulate",this.triangulateTimer=3,this.triangulateTokenPos=e,le.triangulates.push(new Te(this,e))}}class ce{constructor(e){this.lifespan=1/e.life,this.params=e,this.size=this.reverse?e.size:0,this.params.height=this.params.height||1,this.maxAlpha=e.maxAlpha||1,this.backface=void 0!==e.backface&&e.backface,this.primitive=e.primitive||"explosions"}die(e){le.explosions.splice(e,1)}update(){return this.params.life-=f,this.size+=o.max((this.params.size-this.size)*this.params.speed,this.params.aftershock),de[this.primitive].instanceData.push(this.params.pos[0],this.params.pos[1],this.params.pos[2],this.params.col[0],this.params.col[1],this.params.col[2],o.min(this.params.life*this.lifespan,this.maxAlpha),this.backface?-this.size:this.size,this.params.height),this.params.life<=0}}class ue{constructor(e){this.transformHeight=e.transformHeight,this.primitive=e.primitive||"cylinder_explosions",this.lifespan=1/e.life,this.params=e,this.size=e.size,this.params.height=this.params.height||1,this.backface=void 0!==e.backface&&e.backface}die(e){le.explosions.splice(e,1)}update(){this.params.life-=f;let e=this.params.life*this.lifespan*this.size;return de[this.primitive].instanceData.push(this.params.pos[0],this.params.pos[1],this.params.pos[2],this.params.col[0],this.params.col[1],this.params.col[2],this.params.life*this.lifespan*this.params.alpha,this.backface?-e:e,this.transformHeight?this.params.height:this.params.height/e),this.params.life<=0}}class pe{constructor(e,t,i,n){g.stats.flames++,this.life=3*(g.flameFuel?1.5:1)*g.flameLife,this.isStatic=n,n?this.pos=[e,t,i]:(this.field=e,this.x=t,this.z=i,this.pos=[this.x+ti[this.field].x,ti[this.field].y+.5,this.z+ti[this.field].z]),this.collectTimer=T+MATH.random(.5,1),this.particleTimer=T,g.flameFuel&&(this.getRidOfOilTrailTimer=2,this.oilT=0,this.oilPos=[g.body.position.x,g.body.position.y+.3,g.body.position.z],this.oilTrail=new ei.Trail({length:10,size:.75,triangle:!0,color:[.1,0,0,1]}),g.pollen-=o.min(o.ceil(.02*g.convertTotal),g.pollen),g.honey+=o.ceil(o.min(o.ceil(.02*g.convertTotal),g.pollen)*g.honeyPerPollen),g.extraInfo.enablePollenText&&Kt.add(o.ceil(o.min(o.ceil(.02*g.convertTotal),g.pollen)*g.honeyPerPollen),[g.body.position.x,g.body.position.y+2*o.random()+.5,g.body.position.z],ae.honey,0,"+"))}die(e){this.oilTrail&&(this.oilTrail.splice=!0),le.flames.splice(e,1)}turnDark(){this.dark||(le.explosions.push(new ue({col:[1,0,1],pos:this.pos,life:.5,size:2,alpha:1,height:3})),this.dark=!0,g.flameFuel&&(this.life*=1.5,g.pollen-=o.min(o.ceil(.02*g.convertTotal),g.pollen),g.honey+=o.ceil(o.min(o.ceil(.02*g.convertTotal),g.pollen)*g.honeyPerPollen),g.extraInfo.enablePollenText&&Kt.add(o.ceil(o.min(o.ceil(.02*g.convertTotal),g.pollen)*g.honeyPerPollen),[g.body.position.x,g.body.position.y+2*o.random()+.5,g.body.position.z],ae.honey,0,"+"),this.getRidOfOilTrailTimer=2,this.oilT=0,this.oilPos=[g.body.position.x,g.body.position.y+.3,g.body.position.z],this.oilTrail?this.oilTrail.addPos([]):this.oilTrail=new ei.Trail({length:15,size:.75,triangle:!0,color:[.1,0,0,1]})))}update(){return this.life-=f,this.oilTrail&&(this.oilPos[0]=MATH.lerp(this.oilPos[0],this.pos[0],this.oilT),this.oilPos[2]=MATH.lerp(this.oilPos[2],this.pos[2],this.oilT),this.oilT=o.min(this.oilT+.5*f,1),this.oilTrail.addPos([...this.oilPos]),this.getRidOfOilTrailTimer-=f,this.getRidOfOilTrailTimer<=0&&(this.oilTrail.splice=!0,this.oilTrail=void 0)),T-this.collectTimer>1&&(this.collectTimer=T,this.isStatic||g.fieldIn!==this.field||Hi({x:this.x,z:this.z,pattern:this.dark?[[0,0],[1,1],[1,-1],[-1,1],[-1,-1],[1,0],[-1,0],[0,1],[0,-1],[2,0],[-2,0],[0,-2],[0,2]]:[[0,0],[1,1],[1,-1],[-1,1],[-1,-1],[1,0],[-1,0],[0,1],[0,-1]],amount:{r:10,w:4,b:1},stackHeight:.7,multiplier:g.flamePollen*g.flameBonus,instantConversion:g.instantFlameConversion,field:this.field})),this.dark&&g.addEffect("darkHeat"),T-this.particleTimer>.5&&(this.particleTimer=T,this.dark?$t.add({x:this.pos[0],y:this.pos[1],z:this.pos[2],vx:MATH.random(-.1,.1),vy:MATH.random(0,.3),vz:MATH.random(-.1,.1),grav:1,size:MATH.random(110,180),col:[1,0,o.random()],life:1.5,rotVel:MATH.random(-3,3),alpha:4.5}):$t.add({x:this.pos[0],y:this.pos[1],z:this.pos[2],vx:MATH.random(-.1,.1),vy:MATH.random(0,.3),vz:MATH.random(-.1,.1),grav:1,size:MATH.random(110,180),col:[1,MATH.random(.3,1),0],life:1.5,rotVel:MATH.random(-3,3),alpha:4.5})),o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.y-this.pos[1])+o.abs(g.body.position.z-this.pos[2])<2&&(g.stats.scorchingStar+=f*(this.dark?120:90),g.addEffect("flameHeat",this.dark?25e-5:1e-4)),this.life<=0}}class fe{constructor(e,t,i,o){this.golden=o,this.col=this.golden?[1,.6,.1]:[0,.4,.9],this.life=10,this.field=e,this.x=t,this.z=i,this.pos=[ti[this.field].x+this.x,ti[this.field].y+.5,ti[this.field].z+this.z],this.birth=T}die(e){le.bubbles.splice(e,1)}turnGolden(){if(!this.golden){this.golden=!0,this.col=[.74375,.85*.85,.085];for(let e=0;e<10;e++)$t.add({x:this.pos[0],y:this.pos[1],z:this.pos[2],vx:MATH.random(-2,2),vy:MATH.random(0,2),vz:MATH.random(-2,2),grav:0,size:MATH.random(30,100),col:[1,1,0],life:1.75,rotVel:MATH.random(-3,3),alpha:3})}}pop(){g.stats.bubbles++,g.popStarActive&&g.popStarActive.popParticles.push(this.pos),g.popStarActive&&(g.stats.popStar+=this.golden?2:1,g.addEffect("bubbleBloat",(this.golden?4:2)/3600)),"tidePopper"===g.currentGear.tool&&(g.addEffect("tidePower"),this.golden&&g.addEffect("tidePower"),g.tidalSurge&&g.addEffect("tidalSurge",this.golden?3e-5:1e-5)),le.explosions.push(new ce({col:this.col,pos:this.pos.slice(),life:.2,size:4,speed:.5,aftershock:.05}));let e=this.golden?1.5*g.bubblePollen:g.bubblePollen,t=Hi({x:this.x,z:this.z,pattern:[[0,0],[-1,-1],[-1,0],[-1,1],[1,-1],[1,0],[1,1],[0,1],[0,-1],[-2,0],[2,0],[0,2],[0,-2],[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[-1,2],[1,-2],[-1,-2],[3,0],[-3,0],[0,-3],[0,3],[3,1],[3,-1],[1,3],[-1,3],[-1,-3],[1,-3],[-3,1],[-3,-1]],amount:{r:2,w:6,b:10},stackHeight:.45+.5*o.random(),replenish:1,field:this.field,multiplier:e*g.bubbleBonus});this.golden&&t&&o.random()<.25&&le.tokens.push(new oi(30,[this.pos[0],this.pos[1]+.7,this.pos[2]],"honey",o.ceil(.5*t),!0,"Gold Bubble")),this.life=0}update(){return this.life-=f,vec3.sqrDist(this.pos,[g.body.position.x,g.body.position.y,g.body.position.z])<=4&&this.pop(),de.explosions.instanceData.push(this.pos[0],this.pos[1]+.3,this.pos[2],this.col[0]*g.isNight,this.col[1]*g.isNight,this.col[2]*g.isNight,o.min(.35*this.life,this.golden?.8:.7),o.min(15*(T-this.birth),3),1),this.life<=0}}class ge{constructor(){this.power=Xt.sprinkler[g.currentGear.sprinkler].power,this.rate=Xt.sprinkler[g.currentGear.sprinkler].rate,this.diameter=Xt.sprinkler[g.currentGear.sprinkler].diameter,this.timer=this.rate;let e=this.power;this.func=function(t){t.height+=e}}set(e,t,i){if(!ti[e])return;this.field=e,this.x=t,this.z=i,this.timer=this.rate,this.flowers=[];let o=.5*this.diameter|0;for(let e=-o;e<=o;e++)for(let t=-o;t<=o;t++){let i=e+this.x,n=t+this.z;e*e+t*t<=o*o&&i>=0&&i<ti[this.field].width&&n>=0&&n<ti[this.field].length&&this.flowers.push([i,n])}}update(){if(this.timer-=f,this.field&&this.timer<=0){this.timer=this.rate;for(let e in this.flowers)Ci(this.field,this.flowers[e][0],this.flowers[e][1],this.func,!0,!1,!1);le.explosions.push(new ce({col:[.1,.4,1],pos:[this.x+ti[this.field].x,ti[this.field].y+.5,this.z+ti[this.field].z],life:1,size:this.diameter,speed:.15,aftershock:.01,height:.075}))}}}class be{constructor(e,t,i,n,s){this.gummyBallHitTimer=0,this.beeLevel=s,this.life=(("precise"===n?15:7)+.2*(s-1))*g.markDuration,this.field=e,this.x=t,this.z=i,this.pos=[ti[this.field].x+this.x,ti[this.field].y+.5,ti[this.field].z+this.z],this.surgeLimit=5,this.rot=6.12*o.random(),this.diameter="precise"===n?14:10,this.sqSize=.5*this.diameter*(.5*this.diameter),this.type=n,this.typeCol={pollenMark:[0,1,0],honeyMark:ae.honey_normalized,preciseMark:[1,0,1]}[this.type],this.flowers=[];let r=.5*this.diameter|0;for(let e=-r;e<=r;e++)for(let t=-r;t<=r;t++)e*e+t*t<=r*r&&this.flowers.push([e,t]);this.honeyMarkConvert=0}surge(e=0){this.surgeLimit>0&&(this.surgeAfter=e)}die(e){le.marks.splice(e,1)}update(){if(this.life-=f,this.rot+=2*f,vec3.sqrDist(this.pos,[g.body.position.x,g.body.position.y,g.body.position.z])<=this.sqSize){if(w&&g.addEffect(this.type),de.explosions.instanceData.push(this.pos[0],this.pos[1]+3.6,this.pos[2],0,1,0,1,.45,1),"honeyMark"===this.type&&(this.honeyMarkConvert-=f,this.honeyMarkConvert<=0)){this.honeyMarkConvert=1;let e=o.min(o.round(3*g.convertTotal/(le.bees.length||1)),g.pollen);g.pollen-=e,g.honey+=o.ceil(e*g.honeyPerPollen),g.extraInfo.enablePollenText&&Kt.add(e,[g.body.position.x,g.body.position.y+2,g.body.position.z],ae.honey,0,"+")}}else de.explosions.instanceData.push(this.pos[0],this.pos[1]+3.6,this.pos[2],.8,.4,0,.85,.45,1);if(de.explosions.instanceData.push(this.pos[0],this.pos[1],this.pos[2],g.isNight,g.isNight,g.isNight,.05,this.diameter-.1,.01),de.cylinder_explosions.instanceData.push(this.pos[0],this.pos[1]+1.5,this.pos[2],.9*g.isNight,.8*g.isNight,.4*g.isNight,1,.125,27),de.cylinder_explosions.instanceData.push(this.pos[0],this.pos[1]+3.3,this.pos[2],.9,.8,.4,1,.4,.5),de.tokens.instanceData.push(this.pos[0],this.pos[1]+2.25,this.pos[2],this.rot,$[this.type+"Token"].u,$[this.type+"Token"].v,1,1.35),this.surgeAfter-=f,this.surgeAfter<=0){this.surgeAfter=1/0,this.surgeLimit--,this.life+=1+.1*this.beeLevel;let e=this;le.explosions.push(new ue({col:[1,1,0],pos:e.pos,life:.3,size:.8*this.diameter,alpha:.75})),"honeyMark"===e.type?Hi({x:e.x,z:e.z,pattern:e.flowers,amount:7,yOffset:2.25+.5*o.random(),stackOffset:.4+.6*o.random(),field:this.field,instantConversion:1,multiplier:.1*this.beeLevel+1}):"pollenMark"===e.type?Hi({x:e.x,z:e.z,pattern:e.flowers,amount:7,yOffset:2.25+.5*o.random(),stackOffset:.4+.6*o.random(),field:this.field,multiplier:.1*this.beeLevel+1}):"preciseMark"===e.type&&Hi({x:e.x,z:e.z,pattern:e.flowers,amount:12,yOffset:2.25+.5*o.random(),stackOffset:.4+.6*o.random(),field:this.field,alwaysCrit:!0,multiplier:.1*this.beeLevel+1})}return this.life<=0}}class ye{constructor(e,t,i,n){this.life=25+n.level,this.gifted=o.random()<.1+.02*n.level&&n.gifted,this.mesh=this.gifted?"giftedFrog":"frog",this.field=e,this.y=ti[e].y+.75,this.pos=[ti[e].x+t,this.y,ti[e].z+i],this.moveTo=[this.pos[0],this.pos[2]+.1],this.vel=0,this.jumpDelay=0,this.state=0,this.jumpCount=0,this.jumpPattern=[[-5,-3],[-5,-2],[-5,-1],[-5,0],[-5,1],[-5,2],[-5,3],[-4,-4],[-4,-3],[-4,3],[-4,4],[-3,-5],[-3,-4],[-3,4],[-3,5],[-2,-5],[-2,5],[-1,-5],[-1,5],[0,-5],[0,5],[1,-5],[1,5],[2,-5],[2,5],[3,-5],[3,-4],[3,4],[3,5],[4,-4],[4,-3],[4,3],[4,4],[5,-3],[5,-2],[5,-1],[5,0],[5,1],[5,2]]}die(e){le.explosions.push(new ce({col:[0,.5,1],pos:this.pos.slice(),life:.2,size:4,speed:.5,aftershock:.05})),le.mobs.splice(e,1)}update(){if(this.life-=f,0===this.state)this.jumpDelay-=f,this.jumpDelay<=0&&(this.state=1);else{let e=[this.moveTo[0]-this.pos[0],this.moveTo[1]-this.pos[2]],t=o.sqrt(e[0]*e[0]+e[1]*e[1]),i=1/t,n=f*i*4;if(this.pos[0]+=e[0]*n,this.pos[2]+=e[1]*n,t<1){let e=o.random()*this.jumpPattern.length|0,t=this.jumpPattern[e][0],i=this.jumpPattern[e][1];for(;o.round(this.moveTo[0]-ti[this.field].x+t)<0||o.round(this.moveTo[0]-ti[this.field].x+t)>=ti[this.field].width||o.round(this.moveTo[1]-ti[this.field].z+i)<0||o.round(this.moveTo[1]-ti[this.field].z+i)>=ti[this.field].length;)e=o.random()*this.jumpPattern.length|0,t=this.jumpPattern[e][0],i=this.jumpPattern[e][1];this.moveTo=[this.moveTo[0]+t,this.moveTo[1]+i],this.state=0,this.jumpDelay=.5,this.vel=.12,this.pos[1]=this.y,this.jumpCount++,this.jumpCount%3!=0&&le.bubbles.push(new fe(this.field,this.pos[0]-ti[this.field].x|0,this.pos[2]-ti[this.field].z|0));for(let e in le.tokens){let t=le.tokens[e];if(!t.collected&&vec3.sqrDist(t.pos,this.pos)<(this.gifted?14:9)&&o.random()<(this.gifted?.25:.4)&&!(le.tokens[e]instanceof ni)){le.explosions.push(new ce({col:[.9,0,.15],pos:t.pos.slice(),life:1.25,size:1.8,speed:.2,aftershock:.005}));let e=t.pos[0]-ti[this.field].x|0,i=t.pos[2]-ti[this.field].z|0;e>=0&&e<ti[this.field].width&&i>=0&&i<ti[this.field].length&&le.bubbles.push(new fe(this.field,e,i)),t.collect();break}}}this.pos[3]=o.atan2(e[1]*i,e[0]*i)+MATH.HALF_PI,this.vel-=.2*f,this.pos[1]=o.max(this.pos[1]+this.vel,this.y)}return m.bindBuffer(m.ARRAY_BUFFER,de[this.mesh].vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de[this.mesh].indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,.9,1),m.drawElements(m.TRIANGLES,de[this.mesh].indexAmount,m.UNSIGNED_SHORT,0),this.life<=0}}let ve=0;class xe{constructor(e,t,i,n,s=0){this.id=ve++,this.golden=n,this.col=this.golden?[.74375,.595,.085,.8]:[0,0,.6,.7],this.checkBubble=T,this.life=20+s,this.field=e,this.x=t,this.z=i,this._x=t,this._z=i,this.moveTo=[ti[this.field].x+this.x,ti[this.field].z+this.z],this.moveDir=[0,0],this.pos=[ti[this.field].x+this.x,ti[this.field].y+.55+4,ti[this.field].z+this.z],this.y=ti[this.field].y+.55+4,this.pollen=0,this.cap=o.round(.35*g.capacity*(this.golden?1.35:1)*(.0375*s+1)),this.invCap=1/this.cap,this.displaySize=0,this.state="float",this.inflateCounter=4+(.2*s|0)+(ti[this.field].generalColorComp.b>=.5?4:ti[this.field].generalColorComp.w>=.5?2:0),this.prevFlowers=[],this.flowers=[];for(let e=-4;e<=4;e++)for(let t=-4;t<=4;t++)e*e+t*t<=13.690000000000001&&this.flowers.push([e,t])}die(e,t=!1){!1===t&&(g.hiveBalloon.pollen+=this.pollen,g.hiveBalloon.maxPollen+=this.pollen),le.balloons.splice(e,1)}update(){if("float"===this.state){if(this.life-=f,this.pos[0]+=this.moveDir[0]*f,this.pos[2]+=this.moveDir[1]*f,this.x=o.round(this.pos[0]-ti[this.field].x),this.z=o.round(this.pos[2]-ti[this.field].z),this.x!==this._x||this.z!==this._z){for(let e in this.prevFlowers)Si[this.field][this.prevFlowers[e][1]][this.prevFlowers[e][0]].balloon===this&&(Si[this.field][this.prevFlowers[e][1]][this.prevFlowers[e][0]].balloon=!1);this.prevFlowers=[];for(let e in this.flowers){let t=this.flowers[e],i=t[0]+this.x,o=t[1]+this.z;i>=0&&i<ti[this.field].width&&o>=0&&o<ti[this.field].length&&((!Si[this.field][o][i].balloon||Si[this.field][o][i].balloon.pollen>this.pollen)&&(Si[this.field][o][i].balloon=this),this.prevFlowers.push([i,o]))}}this._x=this.x,this._z=this.z,this.pollen=o.min(o.round(this.pollen),this.cap);let e=this.pollen*this.invCap-1;if(e*=e,e*=e,this.size=(1-e)*(1.4+.075*this.pollen.toString().length)+.8,this.displaySize+=.025*(this.size-this.displaySize),this.pos[1]=this.y+.5*this.displaySize-1,de.cylinder_explosions.instanceData.push(this.pos[0],this.pos[1]-.5*this.displaySize-1,this.pos[2],g.isNight,g.isNight,g.isNight,.5,.03,67),de.explosions.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.col[0]*g.isNight,this.col[1]*g.isNight,this.col[2]*g.isNight,this.col[3],this.displaySize,1.03),de.explosions.instanceData.push(this.pos[0],this.y-4,this.pos[2],0,0,0,.35,7,.01),this.golden&&Kt.addDecalRaw(...this.pos,0,0,...Kt.decalUV.lightrays,1,1,.85,2,2,T),Kt.addSingle(this.pollen+"/"+this.cap,this.pos,ae.whiteArr,-.465,!0,!0,.175),Kt.addDecalRaw(...this.pos,0,0,...Kt.decalUV.rect,0,.4,0,1,.25,0),Kt.addDecalRaw(...this.pos,(this.pollen*this.invCap*.5-.5)/(this.pollen*this.invCap),0,...Kt.decalUV.rect,.1,.85,.1,this.pollen*this.invCap,.25,0),Kt.addDecalRaw(...this.pos,.6,-.1,...Kt.decalUV.flower,1,1,1,-.44,-.44,0),w&&vec3.sqrDist(this.pos,[g.body.position.x,g.body.position.y+4,g.body.position.z])<=6.25&&g.addEffect("balloonAura"),o.abs(this.pos[0]-this.moveTo[0])+o.abs(this.pos[2]-this.moveTo[1])<1&&(this.moveTo=[ti[this.field].x+(o.random()*ti[this.field].width|0),ti[this.field].z+(o.random()*ti[this.field].length|0)],this.moveDir=[this.moveTo[0]-this.pos[0],this.moveTo[1]-this.pos[2]],vec2.normalize(this.moveDir,this.moveDir),vec2.scale(this.moveDir,this.moveDir,.35)),this.golden&&T-this.checkBubble>.5){this.checkBubble=T;for(let e in le.bubbles){let t=le.bubbles[e];o.abs(this.pos[0]-t.pos[0])+o.abs(this.pos[2]-t.pos[2])<3.5&&t.turnGolden()}}if(this.life<=0||this.pollen>=this.cap){this.state="moveToHive",this.moveDir=vec3.sub([],[g.hivePos[0]+1.5,g.hivePos[1],g.hivePos[2]],this.pos),vec3.normalize(this.moveDir,this.moveDir);for(let e in this.flowers){let t=this.flowers[e][0]+this.x,i=this.flowers[e][1]+this.z;t>=0&&t<ti[this.field].width&&i>=0&&i<ti[this.field].length&&(Si[this.field][i][t].balloon=!1)}}}else{this.pollen=o.min(o.round(this.pollen),this.cap);let e=this.pollen*this.invCap-1;if(e*=e,e*=e,this.size=(1-e)*(1.4+.075*this.pollen.toString().length)+.8,this.displaySize+=.025*(this.size-this.displaySize),vec3.scaleAndAdd(this.pos,this.pos,this.moveDir,f),de.cylinder_explosions.instanceData.push(this.pos[0],this.pos[1]-.5*this.displaySize-1,this.pos[2],g.isNight,g.isNight,g.isNight,.5,.03,67),de.explosions.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.col[0]*g.isNight,this.col[1]*g.isNight,this.col[2]*g.isNight,this.col[3],this.displaySize,1.05),this.golden&&Kt.addDecalRaw(...this.pos,0,0,...Kt.decalUV.lightrays,1,1,.85,2,2,T),Kt.addSingle(this.pollen+"/"+this.cap,this.pos,ae.whiteArr,-.465,!0,!0,.175),Kt.addDecalRaw(...this.pos,1.1,-.1,...Kt.decalUV.flower,1,1,1,-.44,-.44,0),vec3.sqrDist(this.pos,g.hivePos)<9)return!0}}}class Ae{constructor(e,t,i,o,n){this.bee=n,this.field=e,this.x=t,this.z=i,this.type=o,this.pos=[ti[this.field].x+this.x,ti[this.field].y,ti[this.field].z+this.z],this.col=3===this.type&&n.gifted?[.9,0,.9]:[1,.7,0],this.trail=new ei.Trail({length:2,size:.04,color:[1,0,0,1]})}die(e){if(this.trail.splice=!0,le.explosions.push(new ue({col:this.activated?[0,1,0]:[1,0,0],pos:this.pos,life:.5,size:3,alpha:1,height:3})),vec3.sqrDist(this.pos,[g.body.position.x,g.body.position.y,g.body.position.z])<=4.5){let e=o.min(.5*g.convertTotal+15*this.bee.convertAmount*g.convertRate*g[K[this.bee.type].color+"ConvertRate"]*(10*g.flameHeatStack),g.pollen);g.pollen-=e,g.extraInfo.enablePollenText&&Kt.add(o.ceil(.5*e),[g.body.position.x,g.body.position.y+2*o.random()+.5,g.body.position.z],ae.honey,0,"+");let t=e/5;for(let e=0;e<MATH.TWO_PI;e+=MATH.TWO_PI/5)le.tokens.push(new oi(30,[this.pos[0]+o.cos(e),ti[this.field].y+1,this.pos[2]+o.sin(e)],"honey",o.ceil(t),!0,"Target Practice"));g.addEffect("flameHeat",-1)}le.targets.splice(e,1)}update(){return this.trail.addPos(this.pos),this.trail.addPos(this.bee.pos),this.trail.color=[...this.col,.75],vec3.sqrDist(this.pos,[g.body.position.x,g.body.position.y,g.body.position.z])<=4&&(this.col=[0,1,0],this.activated=!0),de.cylinder_explosions.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.col[0],this.col[1],this.col[2],.5,1.75,.75),this.splice}}class Te{constructor(e,t){this.life=MATH.random(2.9,3.1),this.field=g.fieldIn,this.tokenPos=t,this.bee=e,this.mesh=new _t(!0),this.offset=.075*(o.random()-.5)}die(e){let t=o.round(g.body.position.x-ti[this.field].x),i=o.round(g.body.position.z-ti[this.field].z),n=o.round(this.tokenPos[0]-ti[this.field].x),s=o.round(this.tokenPos[2]-ti[this.field].z),r=o.round(this.bee.pos[0]-ti[this.field].x),a=o.round(this.bee.pos[2]-ti[this.field].z),l=o.min(o.min(r,t),n),d=o.max(o.max(r,t),n),h=o.min(o.min(a,i),s),m=o.max(o.max(a,i),s);l=MATH.constrain(l,0,ti[this.field].width),d=MATH.constrain(d,0,ti[this.field].width),h=MATH.constrain(h,0,ti[this.field].length),m=MATH.constrain(m,0,ti[this.field].length);let c=[];for(let e=l;e<d;e++)for(let o=h;o<m;o++)MATH.pointInTriangle(e,o,t,i,n,s,r,a)&&c.push([e,o]);for(let e in le.tokens)!MATH.pointInTriangle(o.round(le.tokens[e].pos[0]-ti[this.field].x),o.round(le.tokens[e].pos[2]-ti[this.field].z),t,i,n,s,r,a)||le.tokens[e]instanceof ni||le.tokens[e].collect();let u,p,f=1,b=1;for(let e in le.marks)MATH.pointInTriangle(le.marks[e].x,le.marks[e].z,t,i,n,s,r,a)&&(b=1.5,"pollenMark"===le.marks[e].type?f=2:"honeyMark"===le.marks[e].type?u=!0:p=!0);Hi({x:0,z:0,pattern:c,amount:10+2*this.bee.level,yOffset:2.5,stackHeight:.8,field:this.field,otherPos:[.5*(l+d)+ti[this.field].x,g.body.position.y+.5,.5*(h+m)+ti[this.field].z],multiplier:{r:b,b:b,w:f*b},alwaysCrit:p,instantConversion:u?.5:0}),le.explosions.push(new ue({col:[1,1,1],pos:this.bee.pos.slice(),life:.25,size:2,alpha:1,height:1})),le.explosions.push(new ue({col:[1,1,1],pos:this.tokenPos,life:.25,size:2,alpha:1,height:1})),le.explosions.push(new ue({col:[1,1,1],pos:[g.body.position.x,g.body.position.y,g.body.position.z],life:.25,size:2,alpha:1,height:1})),le.triangulates.splice(e,1)}update(){this.life-=f;let e=o.max(1-.25*this.life,.2);return this.mesh.setMesh([this.tokenPos[0],this.tokenPos[1]+this.offset,this.tokenPos[2],e,e,e,1,0,0,0,this.bee.pos[0],this.tokenPos[1]+this.offset,this.bee.pos[2],e,e,e,1,0,0,0,g.body.position.x,this.tokenPos[1]+this.offset,g.body.position.z,e,e,e,1,0,0,0],[0,1,2,2,1,0]),this.mesh.setBuffers(),this.mesh.render(),this.life<=0}}class we{constructor(e,t){this.beeLevel=t,this.life=5+.25*(t-1),this.field=e,this.x=ti[e].width*o.random()|0,this.z=ti[e].length*o.random()|0,this.pos=[ti[this.field].x+this.x,ti[this.field].y+.5,ti[this.field].z+this.z],this.moveTo=[this.pos[0],this.pos[1]],this.moveTimer=0,this.moveTo=[(o.random()*ti[this.field].width|0)+ti[this.field].x,ti[this.field].y+.5,(o.random()*ti[this.field].length|0)+ti[this.field].z],le.explosions.push(new ce({col:[.5,.2,0],pos:this.pos.slice(),life:.4,size:4,speed:.5,aftershock:.05}))}die(e){le.fuzzBombs.splice(e,1)}pop(){if(g.fieldIn===this.field){this.x=o.round(this.pos[0]-ti[this.field].x),this.z=o.round(this.pos[2]-ti[this.field].z),le.explosions.push(new ce({col:[.5,.2,0],pos:this.pos.slice(),life:.4,size:4,speed:.5,aftershock:.05}));let e=[[0,0],[-1,-1],[-1,0],[-1,1],[1,-1],[1,0],[1,1],[0,1],[0,-1],[0,2],[2,0],[-2,0],[0,-2],[-1,2],[1,2],[2,-1],[2,1],[-1,-2],[1,-2],[-2,1],[-2,-1],[3,0],[-3,0],[0,-3],[0,3]];for(let t in e){let i=e[t][0]+this.x,o=e[t][1]+this.z;i>=0&&i<ti[this.field].width&&o>=0&&o<ti[this.field].length&&Ci(this.field,i,o,(function(e){e.level<5?(e.level++,e.pollinationTimer=1):e.height=1}),!0,!1,!0)}Hi({x:this.x,z:this.z,pattern:e,amount:{r:10,w:15,b:10},stackOffset:.35+.7*o.random(),multiplier:g.whiteBombPollen+.075*this.beeLevel,field:this.field}),g.addEffect("bombCombo");for(let e=0;e<40;e++)$t.add({x:this.pos[0]+MATH.random(-2,2),y:this.pos[1],z:this.pos[2]+MATH.random(-2,2),vx:MATH.random(-1,1),vy:2*o.random(),vz:MATH.random(-1,1),grav:-3,size:100,col:[1,1,MATH.random(.6,1)],life:1,rotVel:MATH.random(-3,3),alpha:2})}this.life=0}update(){if(this.life-=f,this.moveTimer-=f,this.moveTimer<=0){this.moveTimer=1;let e=[[0,0,1],[1,0,0]][2*o.random()|0];if(0===e[2]){let t=o.round(this.pos[0]-ti[this.field].x),i=MATH.random(-t,ti[this.field].width-t);i|=0,this.movePos=vec3.scale([],e,i),vec3.add(this.movePos,this.movePos,this.pos)}if(0===e[0]){let t=o.round(this.pos[2]-ti[this.field].z),i=MATH.random(-t,ti[this.field].length-t);i|=0,this.movePos=vec3.scale([],e,i),vec3.add(this.movePos,this.movePos,this.pos)}}return this.pos[0]+=(this.movePos[0]-this.pos[0])*f*5,this.pos[2]+=(this.movePos[2]-this.pos[2])*f*5,vec3.sqrDist(this.pos,[g.body.position.x,g.body.position.y,g.body.position.z])<=4&&this.pop(),de.explosions.instanceData.push(this.pos[0],this.pos[1],this.pos[2],.5,.2,0,o.min(this.life,.85),1.25,1),this.life<=0}}class Be{constructor(e,t){this.pos=[...e,0],this.vel=t,this.life=1.5,vec3.scale(t,t,10),this.hitBees=[]}die(e){le.mobs.splice(e,1)}update(){this.life-=f,this.pos[0]+=this.vel[0]*f,this.pos[2]+=this.vel[2]*f,this.pos[3]+=10*f;for(let e in le.bees){let t=le.bees[e];if(this.hitBees.indexOf(e)<0&&o.abs(t.pos[0]-this.pos[0])+o.abs(t.pos[1]-this.pos[1])+o.abs(t.pos[2]-this.pos[2])<1){le.explosions.push(new ce({col:o.random()<.5?[1,.9,0]:[1,0,.825],pos:this.pos.slice(),life:.5,size:1.2,speed:.35,aftershock:.005})),this.hitBees.push(e);let i=o.ceil(o.min(g.pollen,1e4+7.5*t.convertAmount*g[K[t.type].color+"ConvertRate"]));g.pollen-=i,g.honey+=o.ceil(i*g.honeyPerPollen),i&&Kt.add(o.ceil(i*g.honeyPerPollen)+"",[t.pos[0],t.pos[1]+.75,t.pos[2]],ae.honey,1,"⇆")}}for(let e in le.bubbles){let t=le.bubbles[e];vec3.sqrDist(this.pos,t.pos)<=4.5&&t.pop()}for(let e in le.fuzzBombs){let t=le.fuzzBombs[e];vec3.sqrDist(this.pos,t.pos)<=3.5&&t.pop()}for(let e in le.tokens){let t=le.tokens[e];vec3.sqrDist(this.pos,t.pos)<=3.5&&!(le.tokens[e]instanceof ni)&&t.collect()}return m.bindBuffer(m.ARRAY_BUFFER,de.petalShuriken.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.petalShuriken.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1,1.75*this.life),m.drawElements(m.TRIANGLES,de.petalShuriken.indexAmount,m.UNSIGNED_SHORT,0),this.life<=0}}class Ie{constructor(e,t,i,o,n,s){this.id=s,this.type=n,this.starSawHitTimer=0,this.level=i,this.health=o,this.maxHealth=this.health,this.spawnPos=e,this.pos=e,this.resMessPos=[e[0]-("tunnelBear"===this.type?6:0),e[1]+3,e[2]-("spider"===this.type?3:0)],this.state="hide",this.bounds=t,this.checkTimer=T,this.respawnTimer=0,this.flameTimer=0,this.damageTimer=0,this.mindHacked=0,this.grammaredName=MATH.doGrammar(n),g.extraInfo[this.id]>0&&(this.state="dead",this.respawnTimer=g.extraInfo[this.id])}die(e){le.mobs.splice(e,1)}damage(e){let t=o.random()<g.criticalChance,i=o.random()<g.superCritChance,n=e*(t?i?g.superCritPower*g.criticalPower:g.criticalPower:1);this.mindHacked>0&&(n*=1.25),this.health-=0|n;n.toString().length;Kt.add((0|n)+"",[this.pos[0],this.pos[1]+2.75*o.random()+1.5,this.pos[2]],[255,0,0],t?i?2:1:0,"",1.25)}update(){switch(this.state){case"hide":if(T-this.checkTimer>.5){this.checkTimer=T+.2*o.random();let e=this.bounds,t=g.body.position;t.x>e.minX&&t.x<e.maxX&&t.y>e.minY&&t.y<e.maxY&&t.z>e.minZ&&t.z<e.maxZ&&(this.state="attack",this.pos=this.spawnPos.slice(),this.aimPos=!1)}break;case"attack":if(this.health<=0){g.stats[this.type]++,this.state="dead",this.respawnTimer={rhinoBeetle:240,ladybug:240,spider:600,werewolf:900,mantis:420,scorpion:420,kingBeetle:3600,tunnelBear:7200}[this.type]/g.monsterRespawnTime;let e,t,i=g.lootLuck-1|0;switch(this.type){case"rhinoBeetle":i+=4,e=["blueberry","blueberry","blueberry","blueberry","blueberry","blueberry","blueberry","blueberry","blueberry","blueberry","blueberry","blueExtract","treat","treat","gumdrops","gumdrops"],t={blueberry:[1,1,1,1,1,1,1,1,1,1,1,3,3,5],blueExtract:[1,1,1,1,1,1,1,1,1,3],treat:[1,1,1,1,1,1,1,1,1,3,3,3,5,5,10],gumdrops:[1,1,1,1,1,1,1,3,3,5]};break;case"ladybug":i+=4,e=["strawberry","strawberry","strawberry","strawberry","strawberry","strawberry","strawberry","strawberry","strawberry","strawberry","strawberry","redExtract","treat","treat","gumdrops","gumdrops"],t={strawberry:[1,1,1,1,1,1,1,1,1,1,1,3,3,5],redExtract:[1,1,1,1,1,1,1,1,1,3],treat:[1,1,1,1,1,1,1,1,1,3,3,3,5,5,10],gumdrops:[1,1,1,1,1,1,1,3,3,5]};break;case"spider":i+=7,e=["treat","treat","treat","pineapple","sunflowerSeed","gumdrops","treat","treat","treat","pineapple","sunflowerSeed","gumdrops","glue","enzymes","oil","fieldDice","ticket","ticket","royalJelly","ticket","royalJelly","moonCharm","moonCharm","magicBean","magicBean","magicBean","magicBean","microConverter","microConverter","microConverter"],t={treat:[1,1,1,1,5,5,5,10,10,15],enzymes:[1,1,1,1,1,1,1,2,2,3],oil:[1,1,1,1,1,1,1,2,2,3],fieldDice:[1,1,1,1,1,2,2,3],glue:[1,1,1,1,1,1,3,3,5],pineapple:[1,1,1,1,1,1,1,3,3,3,5,5,10],sunflowerSeed:[1,1,1,1,1,1,1,3,3,3,5,5,10],gumdrops:[1,1,1,1,1,1,1,5,5,10],ticket:[1,1,1,1,1,1,1,1,3,3,5],royalJelly:[1,1,1,1,1,1,1,3,3,5],moonCharm:[1,1,1,1,3,3,5],magicBean:[1,1,1,1,1,1,2,2,3,5],microConverter:[1,1,1,1,3,5]};break;case"werewolf":i+=9,e=["treat","treat","treat","pineapple","sunflowerSeed","gumdrops","treat","treat","treat","pineapple","sunflowerSeed","gumdrops","gumdrops","glue","enzymes","oil","fieldDice","fieldDice","smoothDice","treat","treat","treat","pineapple","sunflowerSeed","gumdrops","treat","treat","treat","pineapple","sunflowerSeed","gumdrops","glue","glue","enzymes","oil","fieldDice","fieldDice","smoothDice","loadedDice","ticket","royalJelly","ticket","royalJelly","ticket","ticket","royalJelly","antPass","moonCharm","moonCharm","magicBean","microConverter","microConverter","microConverter","microConverter"],t={treat:[1,1,1,1,5,5,5,15,20,35],enzymes:[1,1,1,1,1,1,1,2,2,3],oil:[1,1,1,1,1,1,1,2,2,3],fieldDice:[1,1,1,1,1,2,2,3],smoothDice:[1,1,1,1,1,1,1,1,1,1,3],loadedDice:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3],glue:[1,1,1,1,1,1,1,3,3,5,10,15],pineapple:[1,1,1,1,1,1,3,3,3,5,5,10,15,25],sunflowerSeed:[1,1,1,1,1,1,3,3,3,5,5,10,15,25],gumdrops:[1,1,1,1,1,1,5,5,5,10,10,15],ticket:[1,1,1,1,1,1,3,3,5,10],royalJelly:[1,1,1,1,1,1,3,3,5,10,15],antPass:[1],moonCharm:[1,1,1,1,3,3,5],magicBean:[1,1,1,1,1,2,2,3,5],microConverter:[1,1,1,1,3,5]};break;case"scorpion":i+=7,e=["strawberry","strawberry","strawberry","strawberry","strawberry","strawberry","strawberry","redExtract","treat","treat","treat","gumdrops","gumdrops","gumdrops","ticket","royalJelly","ticket","royalJelly"],t={strawberry:[1,1,1,1,1,1,3,3,3,5,5,15],redExtract:[1,1,1,1,1,1,3,3,5],treat:[1,1,1,1,1,5,5,5,15,15,30],gumdrops:[1,1,1,1,1,1,3,3,5,15],ticket:[1,1,1,1,1,1,3,3,5],royalJelly:[1,1,1,1,1,1,3,3,5,10]};break;case"mantis":i+=7,e=["blueberry","blueberry","blueberry","blueberry","blueberry","blueberry","blueberry","blueExtract","treat","treat","treat","gumdrops","gumdrops","gumdrops","ticket","royalJelly","ticket","royalJelly"],t={blueberry:[1,1,1,1,1,1,3,3,3,5,5,15],blueExtract:[1,1,1,1,1,1,3,3,5],treat:[1,1,1,1,1,5,5,5,15,15,30],gumdrops:[1,1,1,1,1,1,3,3,5,15],ticket:[1,1,1,1,1,1,3,3,5],royalJelly:[1,1,1,1,1,1,3,3,5,10]};break;case"kingBeetle":if(i+=12,e=["treat","treat","treat","treat","treat","redExtract","blueExtract","redExtract","blueExtract","redExtract","blueExtract","gumdrops","ticket","royalJelly","gumdrops","ticket","royalJelly","gumdrops","ticket","royalJelly","microConverter","microConverter","microConverter","fieldDice","fieldDice","fieldDice","smoothDice","smoothDice","loadedDice","antPass","moonCharm","antPass","moonCharm","oil","enzymes","glitter","glue","purplePotion","roboPass","magicBean","magicBean","magicBean","magicBean"],t={treat:[15,15,15,20,25,25,25,50,50,50,50,100,100,100,150,150,175,175,250,350,500],redExtract:[1,1,1,1,1,1,1,3,3,3,5,5,10],blueExtract:[1,1,1,1,1,1,1,3,3,3,5,5,10],gumdrops:[3,3,3,3,5,5,5,15,15,25],ticket:[1,1,1,1,3,3,3,5,5,10],royalJelly:[1,1,3,3,3,3,3,5,5,10],microConverter:[1,1,1,1,1,3,3,5],fieldDice:[1,1,1,1,1,3,3,5],smoothDice:[1,1,1,1,1,1,2,2,2,3],loadedDice:[1],antPass:[1,1,1,1,1,3,3,3,5],moonCharm:[3,3,3,3,5,5,5,15,15,25],oil:[1,1,1,1,1,3,3,5],enzymes:[1,1,1,1,1,3,3,5],glitter:[1,1,1,1,1,3,3,5],glue:[1,1,1,1,1,3,3,5],purplePotion:[1],roboPass:[1,1,1,2],magicBean:[1,1,1,1,1,2,2,3,3,4,5]},o.random()<.5){let e=["*"+MATH.random(1.1,1.5).toFixed(2)+" capacityMultiplier","*"+MATH.random(1.15,1.5).toFixed(2)+" convertRate"];o.random()<.333?e.push("+1 redBeeAttack","+1 blueBeeAttack","+1 whiteBeeAttack"):e.push(o.random()<.5?"+1 redBeeAttack":"+1 blueBeeAttack"),e.push(...MATH.selectFromArray(["*"+MATH.random(1.02,1.07).toFixed(2)+" POLLEN","*"+MATH.random(1.05,1.2).toFixed(2)+" bluePollen","*"+MATH.random(1.05,1.2).toFixed(2)+" redPollen","*"+MATH.random(1.05,1.15).toFixed(2)+" whitePollen"],2)),g.showGeneratedAmulet("kingBeetleAmulet",e)}break;case"tunnelBear":i+=14,e=["treat","treat","treat","treat","treat","sunflowerSeed","sunflowerSeed","pineapple","pineapple","redExtract","blueExtract","redExtract","blueExtract","redExtract","blueExtract","gumdrops","ticket","royalJelly","gumdrops","ticket","royalJelly","gumdrops","ticket","royalJelly","microConverter","microConverter","microConverter","fieldDice","fieldDice","fieldDice","smoothDice","smoothDice","loadedDice","antPass","moonCharm","antPass","moonCharm","oil","enzymes","glitter","glue","loadedDice","purplePotion","superSmoothie","roboPass","magicBean","magicBean","magicBean","magicBean","magicBean"],e=[...e,...e,"giftedSilverEgg","giftedGoldEgg","giftedDiamondEgg"],t={treat:[25,25,25,50,50,50,100,100,250,500,1e3,5e3,1e4],sunflowerSeed:[10,10,15,15,20,20,25,50],pineapple:[10,10,15,15,20,20,25,50],redExtract:[1,1,1,1,1,1,1,3,3,3,5,5,10],blueExtract:[1,1,1,1,1,1,1,3,3,3,5,5,10],gumdrops:[3,3,3,3,5,5,5,15,15,25],ticket:[1,1,1,1,3,3,3,5,5,10],royalJelly:[1,1,3,3,3,3,3,5,5,10],microConverter:[1,1,1,1,1,3,3,5],fieldDice:[1,1,1,1,1,3,3,5],smoothDice:[1,1,1,1,1,1,2,2,2,3],loadedDice:[1],antPass:[1,1,1,1,1,3,3,3,5],moonCharm:[3,3,3,3,5,5,5,15,15,25],oil:[1,1,1,1,1,3,3,5],enzymes:[1,1,1,1,1,3,3,5],glitter:[1,1,1,1,1,3,3,5],glue:[1,1,1,1,1,3,3,5],loadedDice:[1],purplePotion:[1],superSmoothie:[1],giftedSilverEgg:[1],giftedGoldEgg:[1],giftedDiamondEgg:[1],roboPass:[1,1,1,1,1,2,2,3],magicBean:[1,1,1,3,3,5]}}let n=.2*i+1.5,s=2*-i;for(let r=0,a=MATH.TWO_PI/i;r<MATH.TWO_PI;r+=a){let i=1-o.pow(1-("tunnelBear"===this.type?.3:"kingBeetle"===this.type?.25:.2),1.5*g.lootLuck);if("tunnelBear"===this.type)if(s+=2,o.random()<i){let i=e[o.random()*e.length|0],n=t[i][o.random()*t[i].length|0];le.tokens.push(new oi(45,[this.pos[0]+s,this.pos[1]-1,this.pos[2]],i,n,!0,MATH.doGrammar(this.type)))}else le.tokens.push(new oi(45,[this.pos[0]+s,this.pos[1]-1,this.pos[2]],"honey",12500,!0,MATH.doGrammar(this.type)));else if(o.random()<i){let i=e[o.random()*e.length|0],s=t[i][o.random()*t[i].length|0];le.tokens.push(new oi(45,[this.pos[0]+o.cos(r)*n,this.pos[1],this.pos[2]+o.sin(r)*n],i,s,!0,MATH.doGrammar(this.type)))}else le.tokens.push(new oi(45,[this.pos[0]+o.cos(r)*n,this.pos[1],this.pos[2]+o.sin(r)*n],"honey",{rhinoBeetle:15,ladybug:15,spider:75,werewolf:900,scorpion:500,mantis:500,kingBeetle:2500}[this.type],!0,MATH.doGrammar(this.type)))}return}if(this.mindHacked-=f,this.starSawHitTimer-=f,this.flameTimer-=f,this.flameTimer<=0){this.flameTimer=1;for(let e in le.flames)o.abs(this.pos[0]-le.flames[e].pos[0])+o.abs(this.pos[2]-le.flames[e].pos[2])<2.25&&this.damage(le.flames[e].dark?25:15)}if(g.attacked.push(this),this.mindHacked<=0){if(T-this.checkTimer>.25){this.checkTimer=T+.2*o.random();let e=this.bounds,t=g.body.position;t.x>e.minX&&t.x<e.maxX&&t.y>e.minY&&t.y<e.maxY&&t.z>e.minZ&&t.z<e.maxZ||(this.state="moveToHide")}this.damageTimer-=f,this.damageTimer<=0&&this.aimTimer>0&&o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.y-this.pos[1])+o.abs(g.body.position.z-this.pos[2])<("tunnelBear"===this.type?5:1.5)&&(g.damage({rhinoBeetle:20,ladybug:18,spider:25,werewolf:35,scorpion:30,mantis:30,kingBeetle:75,tunnelBear:1e4}[this.type]),this.damageTimer=1.5);let e=[g.body.position.x-this.pos[0],g.body.position.z-this.pos[2]];vec2.normalize(e,e),this.aimPos?(this.aimTimer-=f,this.aimTimer<=0&&(this.lungeState?(e=[this.landPos[0]-this.pos[0],this.landPos[2]-this.pos[2]],vec2.normalize(e,e),this.pos[0]+=e[0]*f*15,this.pos[2]+=e[1]*f*15,o.abs(this.landPos[0]-this.pos[0])+o.abs(this.landPos[2]-this.pos[2])<.75&&(this.aimPos=void 0,this.aimTimer=1.5)):(e=[this.aimPos[0]-this.pos[0],this.aimPos[2]-this.pos[2]],vec2.normalize(e,e),this.pos[0]+=e[0]*f*15,this.pos[2]+=e[1]*f*15,o.abs(this.aimPos[0]-this.pos[0])+o.abs(this.aimPos[2]-this.pos[2])<1&&(this.lungeState=1,o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.y-this.pos[1])+o.abs(g.body.position.z-this.pos[2])<2&&g.damage({rhinoBeetle:20,ladybug:18,spider:25,werewolf:35,scorpion:30,mantis:30,kingBeetle:75,tunnelBear:1e4}[this.type]))))):o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.z-this.pos[2])>("tunnelBear"===this.type?4:6)?(this.pos[0]+=e[0]*f*("tunnelBear"===this.type?2:5),this.pos[2]+=e[1]*f*("tunnelBear"===this.type?2:5)):(this.aimPos=[g.body.position.x,g.body.position.y,g.body.position.z],this.landPos=this.pos.slice(),this.lungeState=0,this.aimTimer="tunnelBear"===this.type?0:1.5),this.pos[3]=o.atan2(e[1],e[0])+MATH.HALF_PI+(this.aimPos?0:.5*v)}else Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.smiley,.75,0,0,-2,-2,0);m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1,1),m.bindBuffer(m.ARRAY_BUFFER,de[this.type].vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de[this.type].indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.drawElements(m.TRIANGLES,de[this.type].indexAmount,m.UNSIGNED_SHORT,0),this.pos[1]+="werewolf"===this.type||"mantis"===this.type||"tunnelBear"===this.type?3:1,Kt.addCTX(MATH.doGrammar(this.type)+" (Level "+this.level+")",[this.pos[0],this.pos[1]+.4,this.pos[2]],ae.whiteArr,100),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.rect,.6,0,0,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.health/this.maxHealth*.5-.5)/(this.health/this.maxHealth),0,...Kt.decalUV.rect,.2,.85,.2,2.5*this.health/this.maxHealth,.4,0),Kt.addSingle("HP: "+MATH.addCommas((0|this.health)+""),this.pos,ae.whiteArr,-1,!1,!1),this.pos[1]-="werewolf"===this.type||"mantis"===this.type||"tunnelBear"===this.type?3:1;break;case"moveToHide":let e=this.bounds,t=g.body.position;if(t.x>e.minX&&t.x<e.maxX&&t.y>e.minY&&t.y<e.maxY&&t.z>e.minZ&&t.z<e.maxZ)return void(this.state="attack");if(o.abs(this.spawnPos[0]-this.pos[0])+o.abs(this.spawnPos[2]-this.pos[2])<1)return void(this.state="hide");let i=[this.spawnPos[0]-this.pos[0],this.spawnPos[2]-this.pos[2]];vec2.normalize(i,i),this.pos[0]+=i[0]*f*4,this.pos[2]+=i[1]*f*4,this.pos[3]=o.atan2(i[1],i[0])+MATH.HALF_PI,m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1,1),m.bindBuffer(m.ARRAY_BUFFER,de[this.type].vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de[this.type].indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.drawElements(m.TRIANGLES,de[this.type].indexAmount,m.UNSIGNED_SHORT,0),this.pos[1]+="werewolf"===this.type||"mantis"===this.type?3:1,Kt.addCTX("Rhino Beetle (Level "+this.level+")",[this.pos[0],this.pos[1]+.4,this.pos[2]],ae.whiteArr,100),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.rect,.6,0,0,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.health/this.maxHealth*.5-.5)/(this.health/this.maxHealth),0,...Kt.decalUV.rect,.2,.85,.2,2.5*this.health/this.maxHealth,.4,0),Kt.addSingle("HP: "+MATH.addCommas((0|this.health)+""),this.pos,ae.whiteArr,-1,!1,!1),this.pos[1]-="werewolf"===this.type||"mantis"===this.type?3:1;break;case"dead":this.respawnTimer-=f,g.extraInfo[this.id]=this.respawnTimer,this.respawnTimer<=0?g.fieldIn||(this.state="hide",this.health=this.maxHealth):(Kt.addSingle(this.grammaredName,this.resMessPos,ae.whiteArr,-1.5,!1,!1,0,.2),Kt.addSingle(MATH.doTime(this.respawnTimer),this.resMessPos,ae.whiteArr,-1.5,!1,!1,0,-.2))}}}class Ee{constructor(){this.field="MountainTopField",this.state="attack",this.starSawHitTimer=0,this.level=7,this.health=15e4,this.maxHealth=this.health,this.pos=[ti[this.field].x+.5*ti[this.field].width,ti[this.field].y+2.5,ti[this.field].z+.5*ti[this.field].length],this.checkTimer=T,this.flameTimer=0,this.waitTimer=0,this.target=[this.pos[0],this.pos[2]],this.damageTimer=0,this.bodySize=2.5,this.timeLimit=600,this.maxTimeLimit=this.timeLimit,this.fallenEggShellEffect=0,this.runningAmount=0,this.mindHacked=0,g.addMessage("🐣 Mondo Chicken has spawned! 🐣",[200,200,100])}die(e){le.mobs.splice(e,1)}damage(e){let t=o.random()<g.criticalChance,i=o.random()<g.superCritChance,n=e*(t?i?g.superCritPower*g.criticalPower:g.criticalPower:1);this.mindHacked>0&&(n*=1.25),this.health-=0|n,Kt.add((0|n)+"",[this.pos[0],this.pos[1]+2.75*o.random()+1.5,this.pos[2]],[255,0,0],t?i?2:1:0,"",[0,1.25,1.275,1.3,1.65,1.75][(o.min(n.toString().length),5)])}update(){switch(this.state){case"dead":return!0;case"attack":if(this.health<=0||this.timeLimit<=0){if(this.timeLimit<=0)return!0;g.stats.mondoChick++,this.state="dead";let e="",t=o.max(this.timeLimit/600,.25);e+="honey,".repeat(.5*MATH.random(100,225)*t|0),e+="treat,".repeat(.5*MATH.random(50,125)*t|0),e+="bitterberry,".repeat(.5*MATH.random(8,15)*t|0),e+="neonberry,".repeat(.5*MATH.random(4,10)*t|0),e+="fieldDice,".repeat(.5*MATH.random(1,7)*t|0),e+="microConverter,".repeat(.5*MATH.random(1,5)*t|0),e+="magicBean,".repeat(.5*MATH.random(1,4)*t|0),e=e.substring(0,e.length-1).split(",");for(let t=e.length;t--;){let i=this;window.setTimeout((function(){let n=o.random()*e.length|0;le.tokens.push(new oi(15,[ti[i.field].x+(ti[i.field].width*o.random()|0),ti[i.field].y+1,ti[i.field].z+(ti[i.field].length*o.random()|0),0],e[n],"honey"===e[n]?0|MATH.random(500,1500):0|MATH.random(1,4),!0,"Mondo Chick")),e.splice(t,1)}),300*t)}return}if(this.mindHacked-=f,this.timeLimit-=f,this.starSawHitTimer-=f,this.flameTimer-=f,this.flameTimer<=0){this.flameTimer=1;for(let e in le.flames)o.abs(this.pos[0]-le.flames[e].pos[0])+o.abs(this.pos[2]-le.flames[e].pos[2])<this.bodySize&&this.damage(le.flames[e].dark?25:15)}if(g.fieldIn===this.field&&g.attacked.push(this),this.mindHacked<=0){let e=[this.target[0]-this.pos[0],this.target[1]-this.pos[2]];o.abs(e[0])+o.abs(e[1])<.75&&(this.target=[ti[this.field].x+o.random()*ti[this.field].width,ti[this.field].z+o.random()*ti[this.field].length],e=[this.target[0]-this.pos[0],this.target[1]-this.pos[2]],this.runningAmount--,this.runningAmount<=0&&(this.waitTimer=5,this.runningAmount=0|MATH.random(4,8))),vec2.normalize(e,e),this.running=!1,this.waitTimer-=f,this.waitTimer<=0&&(this.pos[0]+=e[0]*f*7,this.pos[2]+=e[1]*f*7,this.running=!0),this.damageTimer-=f,o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.y-this.pos[1]+1)+o.abs(g.body.position.z-this.pos[2])<this.bodySize&&this.damageTimer<=0&&(g.damage(35),this.damageTimer=1),this.pos[3]=o.atan2(e[1],e[0])+MATH.HALF_PI+.2*o.sin(30*T)}else Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.smiley,.75,0,0,-2,-2,0);if(this.pos[1]+=2.4,Kt.addCTX("Mondo Chick (Level "+this.level+")",[this.pos[0],this.pos[1]+.9,this.pos[2]],ae.whiteArr,100),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,1.5,...Kt.decalUV.rect,.305,.21,.135,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.timeLimit/this.maxTimeLimit*.5-.5)/(this.timeLimit/this.maxTimeLimit),1.5,...Kt.decalUV.rect,.61,.42,.27,2.5*this.timeLimit/this.maxTimeLimit,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.rect,.6,0,0,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.health/this.maxHealth*.5-.5)/(this.health/this.maxHealth),0,...Kt.decalUV.rect,.2,.85,.2,2.5*this.health/this.maxHealth,.4,0),Kt.addSingle("HP: "+MATH.addCommas((0|this.health)+""),this.pos,ae.whiteArr,-1,!1,!1),Kt.addSingle("Time: "+MATH.doTime((0|this.timeLimit)+""),this.pos,ae.whiteArr,-1,!1,!1,0,.6),this.pos[1]-=2.4,this.blocking=!1,de.explosions.instanceData.push(this.pos[0],this.pos[1]+this.fallenEggShellEffect,this.pos[2],.9*g.isNight,.9*g.isNight,.9*g.isNight,.5*this.fallenEggShellEffect+1,4,1.15),!this.running)return this.mindHacked<=0&&(this.blocking=!0),void(this.fallenEggShellEffect=0);this.fallenEggShellEffect-=15*f,m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1,1),m.bindBuffer(m.ARRAY_BUFFER,de.mondoChick.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.mondoChick.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.drawElements(m.TRIANGLES,de.mondoChick.indexAmount,m.UNSIGNED_SHORT,0)}}}class ke{constructor(e,t){this.spikes=[],this.field=e,this.state="hiding",this.starSawHitTimer=0,this.level=t,this.health=1e3+2e3*(t-1),this.maxHealth=this.health,this.pos=[ti[this.field].x+(MATH.random(.2,.8)*ti[this.field].width|0),ti[this.field].y+3,ti[this.field].z+(MATH.random(.2,.8)*ti[this.field].length|0)],this.flameTimer=0,this.waitTimer=0,this.target=[this.pos[0],this.pos[2]],this.bodySize=1.5,this.timeLimit=300,this.maxTimeLimit=this.timeLimit,this.addSpikeAttackTimer=0,this.nextAttackTimer=0,this.attackAlternate=0,this.mindHacked=0}die(e){le.mobs.splice(e,1)}damage(e){let t=o.random()<g.criticalChance,i=o.random()<g.superCritChance,n=e*(t?i?g.superCritPower*g.criticalPower:g.criticalPower:1);this.mindHacked>0&&(n*=1.25),this.health-=0|n,Kt.add((0|n)+"",[this.pos[0],this.pos[1]+2.75*o.random()+1.5,this.pos[2]],[255,0,0],t?i?2:1:0,"",[0,1.25,1.275,1.3,1.65,1.75][(o.min(n.toString().length),5)])}update(){switch(this.state){case"dead":return!0;case"hiding":o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.z-this.pos[2])+o.abs(this.pos[1]-2.5-g.body.position.y)<2&&(le.explosions.push(new ce({col:[1,0,0],pos:[this.pos[0],this.pos[1]+.5,this.pos[2]],life:1,size:5,speed:.25,aftershock:.005})),g.addMessage("⚠️You've found a Rogue Vicious Bee!⚠️",[0,0,0]),this.state="attack",g.damage(20)),m.bindBuffer(m.ARRAY_BUFFER,de.spike.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.spike.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform2f(St.mob_instanceInfo2,.55,1),m.uniform4fv(St.mob_instanceInfo1,[this.pos[0],this.pos[1]-4,this.pos[2],0]),m.drawElements(m.TRIANGLES,de.spike.indexAmount,m.UNSIGNED_SHORT,0);break;case"attack":if(this.health<=0||this.timeLimit<=0){g.stats.rogueViciousBee++,this.state="dead";let e=o.floor(this.level*this.level*this.level*1e3+2500),t=3+(.5*this.level|0);return g.honey+=e,se.stinger.amount+=t,Kt.add(e+"",[g.body.position.x,g.body.position.y+2,g.body.position.z],ae.honey,0,"+"),g.addMessage("+"+MATH.addCommas(e+"")+" Honey (from Rogue Vicious Bee)"),g.addMessage("+"+MATH.addCommas(t+"")+" Stingers (from Rogue Vicious Bee)"),void g.updateInventory()}if(this.mindHacked-=f,this.timeLimit-=f,this.starSawHitTimer-=f,this.flameTimer-=f,this.flameTimer<=0){this.flameTimer=1;for(let e in le.flames)o.abs(this.pos[0]-le.flames[e].pos[0])+o.abs(this.pos[2]-le.flames[e].pos[2])<this.bodySize&&this.damage(le.flames[e].dark?25:15)}if(g.fieldIn===this.field&&g.attacked.push(this),this.mindHacked<=0){let e=[this.target[0]-this.pos[0],this.target[1]-this.pos[2]];o.abs(e[0])+o.abs(e[1])<.75&&void 0===this.attackState?(this.attackState=this.attackAlternate++%2,this.nextAttackTimer=7.5):void 0===this.attackState&&(vec2.normalize(e,e),this.pos[0]+=e[0]*f*6,this.pos[2]+=e[1]*f*6,de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1.5,e[0],0,e[1],v,K.vicious.u,K.vicious.v,K.vicious.meshPartId)),this.nextAttackTimer<=0&&(this.target=[ti[this.field].x+(o.random()*ti[this.field].width|0),ti[this.field].z+(o.random()*ti[this.field].length|0)],this.attackState=void 0,this.nextAttackTimer=1/0),0===this.attackState?(this.nextAttackTimer-=f,this.addSpikeAttackTimer-=f,de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1.5,o.sin(8*T),0,o.cos(8*T),v,K.vicious.u,K.vicious.v,K.vicious.meshPartId),this.addSpikeAttackTimer<=0&&(this.spikes.push({pos:[ti[this.field].x+(o.random()*ti[this.field].width|0),ti[this.field].y+.51-10,ti[this.field].z+(o.random()*ti[this.field].length|0),0],life:2.5,glow:0,y:ti[this.field].y+.51}),this.addSpikeAttackTimer=.15)):1===this.attackState&&(this.nextAttackTimer-=f,this.addSpikeAttackTimer-=f,de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1.5,g.body.position.x-this.pos[0],g.body.position.y-this.pos[1],g.body.position.z-this.pos[2],v,K.vicious.u,K.vicious.v,K.vicious.meshPartId),this.addSpikeAttackTimer<=0&&(this.spikes.push({pos:[ti[this.field].x+g.flowerIn.x,ti[this.field].y+.51-10,ti[this.field].z+g.flowerIn.z,0],life:2.5,glow:0,y:ti[this.field].y+.51}),this.addSpikeAttackTimer=.5)),m.bindBuffer(m.ARRAY_BUFFER,de.spike.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.spike.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform2f(St.mob_instanceInfo2,.5,1);for(let e=this.spikes.length;e--;){let t=this.spikes[e];this.spikes[e].life-=f,this.spikes[e].glow+=f,t.life<1&&t.life>.5?(t.pos[1]+=(t.y+2-t.pos[1])*f*22,de.cylinder_explosions.instanceData.push(t.pos[0],t.y,t.pos[2],1,0,0,t.glow,1.5,.001)):t.life<.5?t.pos[1]+=(t.y-10-t.pos[1])*f*10:de.cylinder_explosions.instanceData.push(t.pos[0],t.y,t.pos[2],1,0,0,t.glow,1.5,.001),o.abs(g.body.position.x-t.pos[0])+o.abs(g.body.position.z-t.pos[2])+o.abs(t.pos[1]-g.body.position.y)<1.5&&!t.damaged&&(t.damaged=!0,g.damage(40)),m.uniform4fv(St.mob_instanceInfo1,t.pos),m.drawElements(m.TRIANGLES,de.spike.indexAmount,m.UNSIGNED_SHORT,0),t.life<=0&&this.spikes.splice(e,1)}}else de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1.5,o.random()-.5,o.random()-.5,o.random()-.5,v,K.vicious.u,K.vicious.v,K.vicious.meshPartId),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.smiley,.75,0,0,-2,-2,0);this.pos[1]+=1.25,Kt.addCTX("Rogue Vicious Bee (Level "+this.level+")",[this.pos[0],this.pos[1]+.9,this.pos[2]],ae.whiteArr,100),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,1.5,...Kt.decalUV.rect,.305,.21,.135,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.timeLimit/this.maxTimeLimit*.5-.5)/(this.timeLimit/this.maxTimeLimit),1.5,...Kt.decalUV.rect,.61,.42,.27,2.5*this.timeLimit/this.maxTimeLimit,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.rect,.6,0,0,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.health/this.maxHealth*.5-.5)/(this.health/this.maxHealth),0,...Kt.decalUV.rect,.2,.85,.2,2.5*this.health/this.maxHealth,.4,0),Kt.addSingle("HP: "+MATH.addCommas((0|this.health)+""),this.pos,ae.whiteArr,-1,!1,!1),Kt.addSingle("Time: "+MATH.doTime((0|this.timeLimit)+""),this.pos,ae.whiteArr,-1,!1,!1,0,.6),this.pos[1]-=1.25}}}class Pe{constructor(e,t){this.field=e,this.starSawHitTimer=0,this.level=1,this.health=250,this.maxHealth=this.health,this.pos=t,this.pos[1]-=2,this.flameTimer=0,this.waitTimer=0,this.target=[this.pos[0],this.pos[2]],this.bodySize=1.5,this.timeLimit=300,this.maxTimeLimit=this.timeLimit,this.state="attack",this.mindHacked=0,this.tornados=[],this.nextAttackTimer=0,this.attackAlternate=0,this.trails=[new ei.ConstantTrail({length:9,size:.4,color:[.5,.5,.5,.6]}),new ei.ConstantTrail({length:9,size:.4,color:[.5,.5,.5,.6],vertical:!0})],this.whipWarning=new ei.ConstantTrail({length:5,size:.05,color:[.85,0,0,1]}),this.windWhipTrails=[{trail:new ei.ConstantTrail({length:10,triangle:!0,size:1.1,color:[.5,.6,.6,1]})},{trail:new ei.ConstantTrail({length:10,triangle:!0,size:1.9,color:[.8,.8,.8,1]})},{trail:new ei.ConstantTrail({length:10,triangle:!0,size:1.55,color:[.4,.5,.7,1]})}]}die(e){this.trails[0].splice=!0,this.trails[1].splice=!0,this.whipWarning.splice=!0;for(let e in this.windWhipTrails)this.windWhipTrails[e].trail.splice=!0;le.mobs.splice(e,1)}damage(e){let t=o.random()<g.criticalChance,i=o.random()<g.superCritChance,n=e*(t?i?g.superCritPower*g.criticalPower:g.criticalPower:1);this.mindHacked>0&&(n*=1.25),this.health-=0|n,Kt.add((0|n)+"",[this.pos[0],this.pos[1]+2.75*o.random()+1.5,this.pos[2]],[255,0,0],t?i?2:1:0,"",[0,1.25,1.275,1.3,1.65,1.75][(o.min(n.toString().length),5)])}update(){switch(A%6||(this.trails[0].addPos(this.pos.slice()),this.trails[1].addPos(this.pos.slice())),this.state){case"flee":if(this.mindHacked=0,this.pos[0]+=this.moveDir[0]*f,this.pos[1]+=this.moveDir[1]*f,this.pos[2]+=this.moveDir[2]*f,de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1.5,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K.windy.u,K.windy.v,K.windy.meshPartId),this.pos[1]>55)return!0;break;case"move":this.mindHacked=0,this.pos[0]+=this.moveDir[0]*f,this.pos[1]+=this.moveDir[1]*f,this.pos[2]+=this.moveDir[2]*f,de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1.5,this.moveDir[0],this.moveDir[1],this.moveDir[2],v,K.windy.u,K.windy.v,K.windy.meshPartId),T>this.timeAtArrival&&(this.state="attack",this.pos=this.moveTo,this.target=[ti[this.field].x+(o.random()*ti[this.field].width|0),ti[this.field].z+(o.random()*ti[this.field].length|0)]);break;case"attack":if(this.health<=0){let e=[];for(let t in ti)"AntField"!==t&&"StumpField"!==t&&t!==this.field&&e.push(t);e=e[o.random()*e.length|0];let t=[ti[this.field].x+.5*ti[this.field].width,this.pos[1]-1.5,ti[this.field].z+.5*ti[this.field].length],i=this.field;le.mobs.push(new Qe(this.field,.5*ti[this.field].width|0,.5*ti[this.field].length|0,180)),this.tornados=[],this.state="move",this.field=e,this.moveTo=[ti[e].x+(o.random()*ti[e].width|0),ti[e].y+.55+2,ti[e].z+(o.random()*ti[e].length|0)],this.moveDir=vec3.sub([],this.moveTo,this.pos);let n=vec3.len(this.moveDir);this.timeAtArrival=T+n/7,vec3.scale(this.moveDir,this.moveDir,7/n),this.level++,this.health=this.level*this.level*250+250,this.maxHealth=this.health;let s=0|MATH.random(10,14),r=["treat","treat","sunflowerSeed","sunflowerSeed","ticket","royalJelly","cloudVial","fieldDice","treat","treat","sunflowerSeed","sunflowerSeed","ticket","royalJelly","cloudVial","fieldDice","tropicalDrink","oil","glitter","magicBean","starJelly"],a=.2*s+1.5;"CoconutField"===i&&r.push("tropicalDrink");for(let e=0,i=MATH.TWO_PI/s;e<MATH.TWO_PI;e+=i)if(o.random()<.5){let i=r[o.random()*r.length|0];le.tokens.push(new oi(45,[t[0]+o.cos(e)*a,t[1],t[2]+o.sin(e)*a],i,1,!0,"Wild Windy Bee",["tokensFromWildWindyBee"]))}else le.tokens.push(new oi(45,[t[0]+o.cos(e)*a,t[1],t[2]+o.sin(e)*a],"honey",1e4*(this.level-2)+1e3,!0,"Wild Windy Bee",["tokensFromWildWindyBee"]));this.whipWarning.addPos([]),this.whipWarning.addPos([]),this.whipWarning.addPos([]),this.whipWarning.addPos([]),this.whipWarning.addPos([]);for(let e in this.windWhipTrails){let t=this.windWhipTrails[e];t.trail.addPos([]),t.trail.addPos([]),t.trail.addPos([]),t.trail.addPos([]),t.trail.addPos([]),t.trail.addPos([]),t.trail.addPos([])}}if(this.timeLimit<=0)return this.state="flee",this.moveDir=[100-this.pos[0],50-this.pos[1],-30-this.pos[2]],vec3.normalize(this.moveDir,this.moveDir),vec3.scale(this.moveDir,this.moveDir,7),void g.addMessage("☁️Wild Windy Bee is fleeing...☁️",[160,160,160]);if(this.mindHacked-=f,this.timeLimit-=f,this.starSawHitTimer-=f,this.flameTimer-=f,this.flameTimer<=0){this.flameTimer=1;for(let e in le.flames)o.abs(this.pos[0]-le.flames[e].pos[0])+o.abs(this.pos[2]-le.flames[e].pos[2])<this.bodySize&&this.damage(le.flames[e].dark?25:15)}if(g.fieldIn===this.field&&g.attacked.push(this),this.mindHacked<=0){let e=[this.target[0]-this.pos[0],this.target[1]-this.pos[2]];if(o.abs(e[0])+o.abs(e[1])<.75&&void 0===this.attackState){let e=o.random()<.35;if(this.nextAttackTimer=e?0:1.5,this.skipAttack=e,!e&&(this.attackState=this.attackAlternate++%2==0||this.tornados.length>=3?1:0,g.fieldIn===this.field&&this.attackState)){this.windWhipTimer=1,this.whipA=[this.pos[0],this.pos[1]-1.9,this.pos[2]],this.whipB=[g.body.position.x,this.pos[1]-1.9,g.body.position.z];let e=vec3.sub([],this.whipB,this.whipA);vec3.normalize(e,e),e[0]*=2,e[2]*=2;let t=[e[2],e[1],-e[0]];this.whipWarning.addPos(vec3.add([],this.whipA,t)),this.whipWarning.addPos(vec3.sub([],this.whipA,t)),this.whipWarning.addPos(vec3.add([],vec3.sub([],this.whipB,t),e)),this.whipWarning.addPos(vec3.add([],vec3.add([],this.whipB,t),e)),this.whipWarning.addPos(vec3.add([],this.whipA,t));for(let i in this.windWhipTrails){let o=this.windWhipTrails[i],n=MATH.random(-.01,.01)+.5,s=MATH.random(-.5,.5),r=MATH.random(.8,1);o.speed=MATH.random(10,14),o.pos=vec3.add([],this.whipA,[t[0]*s,n,t[2]*s]),o.target=vec3.add([],vec3.add([],this.whipB,[t[0]*s,n,t[2]*s]),[e[0]*r,0,e[2]*r])}}}else void 0===this.attackState&&(vec2.normalize(e,e),this.pos[0]+=e[0]*f*6,this.pos[2]+=e[1]*f*6,de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1.5,e[0],0,e[1],v,K.windy.u,K.windy.v,K.windy.meshPartId));if(this.nextAttackTimer<=0&&(this.skipAttack||this.attackState||this.tornados.push({pos:[...this.pos,0],timer:0,timeAtArrival:-1}),this.skipAttack=!1,this.target=[ti[this.field].x+(o.random()*ti[this.field].width|0),ti[this.field].z+(o.random()*ti[this.field].length|0)],this.attackState=void 0,this.nextAttackTimer=1/0),0===this.attackState?(this.nextAttackTimer-=f,de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1.5,o.sin(8*T),0,o.cos(8*T),v,K.windy.u,K.windy.v,K.windy.meshPartId)):1===this.attackState&&(this.nextAttackTimer-=f,de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1.5,g.body.position.x-this.pos[0],g.body.position.y-this.pos[1],g.body.position.z-this.pos[2],v,K.windy.u,K.windy.v,K.windy.meshPartId)),this.windWhipTimer>-.25){if(this.windWhipTimer-=f,this.windWhipTimer<=.25)for(let e in this.windWhipTrails){let t=this.windWhipTrails[e];vec3.lerp(t.pos,t.pos,t.target,f*t.speed),t.trail.addPos(t.pos.slice())}if(this.windWhipTimer<=-.25){for(let e in this.windWhipTrails){let t=this.windWhipTrails[e];t.trail.addPos([]),t.trail.addPos([]),t.trail.addPos([]),t.trail.addPos([]),t.trail.addPos([]),t.trail.addPos([]),t.trail.addPos([])}let e=MATH.closestPointOnLine(this.whipA,this.whipB,[g.body.position.x,this.pos[1]-1.9,g.body.position.z]),t=vec3.sqrDist(e,[g.body.position.x,this.pos[1]-1.9,g.body.position.z]);if(t<4){g.damage(15);let e=vec3.sub([],this.whipB,this.whipA);vec3.normalize(e,e),g.body.position.y+=.5,g.body.velocity.x=50*e[0],g.body.velocity.y=5*(4-t)+5,g.body.velocity.z=50*e[2],g.removeAirFrictionUntilGrounded=!0,g.isGliding=!1,g.grounded=!1,g.updateGear()}this.whipWarning.addPos([]),this.whipWarning.addPos([]),this.whipWarning.addPos([]),this.whipWarning.addPos([]),this.whipWarning.addPos([])}}let t=2*T;t=t-(0|t)<.5?"tornado_red":"tornado",m.bindBuffer(m.ARRAY_BUFFER,de[t].vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de[t].indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform2f(St.mob_instanceInfo2,.6,.7);for(let e=this.tornados.length;e--;){let i=this.tornados[e];if(i.timer-=f,i.pos[3]+=15*f,i.rised||(i.init||(i.y=i.pos[1]-1,i.pos[1]-=15,i.init=!0),i.pos[1]+=(i.y-i.pos[1])*f*5,o.abs(i.y-i.pos[1])<.1&&(i.rised=!0,i.pos[1]=i.y)),T>i.timeAtArrival){i.target=[ti[this.field].x+(o.random()*ti[this.field].width|0),ti[this.field].z+(o.random()*ti[this.field].length|0)];let e=[i.target[0]-i.pos[0],i.target[1]-i.pos[2]],t=vec2.len(e);e[0]*=7/t,e[1]*=7/t,i.moveDir=e,i.timeAtArrival=T+t/7}i.pos[0]+=i.moveDir[0]*f,i.pos[2]+=i.moveDir[1]*f,i.timer<=0&&(o.abs(g.body.position.x-i.pos[0])+o.abs(g.body.position.z-i.pos[2])+o.abs(i.pos[1]-g.body.position.y-1)<2.5&&(i.timer=.5,g.damage(.25*this.level+5)),Hi({x:o.round(i.pos[0]-ti[this.field].x),z:o.round(i.pos[2]-ti[this.field].z),field:this.field,pattern:[[-4,0],[-3,-2],[-3,-1],[-3,0],[-3,1],[-3,2],[-2,-3],[-2,-2],[-2,-1],[-2,0],[-2,1],[-2,2],[-2,3],[-1,-3],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[-1,3],[0,-4],[0,-3],[0,-2],[0,-1],[0,0],[0,1],[0,2],[0,3],[0,4],[1,-3],[1,-2],[1,-1],[1,0],[1,1],[1,2],[1,3],[2,-3],[2,-2],[2,-1],[2,0],[2,1],[2,2],[2,3],[3,-2],[3,-1],[3,0],[3,1],[3,2],[4,0]],amount:.35,multiplier:1e-11})),i.pos[1]-=1,m.uniform4fv(St.mob_instanceInfo1,i.pos),i.pos[1]+=1,m.drawElements(m.TRIANGLES,de[t].indexAmount,m.UNSIGNED_SHORT,0)}}else de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1.5,o.random()-.5,o.random()-.5,o.random()-.5,v,K.windy.u,K.windy.v,K.windy.meshPartId),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.smiley,.75,0,0,-2,-2,0);this.pos[1]+=1.25,Kt.addCTX("Wild Windy Bee (Level "+this.level+")",[this.pos[0],this.pos[1]+.9,this.pos[2]],ae.whiteArr,100),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,1.5,...Kt.decalUV.rect,.305,.21,.135,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.timeLimit/this.maxTimeLimit*.5-.5)/(this.timeLimit/this.maxTimeLimit),1.5,...Kt.decalUV.rect,.61,.42,.27,2.5*this.timeLimit/this.maxTimeLimit,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.rect,.6,0,0,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.health/this.maxHealth*.5-.5)/(this.health/this.maxHealth),0,...Kt.decalUV.rect,.2,.85,.2,2.5*this.health/this.maxHealth,.4,0),Kt.addSingle("HP: "+MATH.addCommas((0|this.health)+""),this.pos,ae.whiteArr,-1,!1,!1),Kt.addSingle("Time: "+MATH.doTime((0|this.timeLimit)+""),this.pos,ae.whiteArr,-1,!1,!1,0,.6),this.pos[1]-=1.25}}}class Se{constructor(){this.field="CoconutField",this.state="alignClaws",this.starSawHitTimer=0,this.level=10,this.health=1e5,this.maxHealth=this.health,this.pos=[ti[this.field].x,ti[this.field].y+.3,ti[this.field].z+2.5,0],this.flameTimer=0,this.waitTimer=0,this.damageTimer=0,this.bodySize=3,this.runningAmount=0,this.mindHacked=0,this.stateAlternate=2,this.timeToDefeat=0}die(e){le.mobs.splice(e,1),le.mobs.push(new Se)}damage(e){let t=o.random()<g.criticalChance,i=o.random()<g.superCritChance,n=e*(t?i?g.superCritPower*g.criticalPower:g.criticalPower:1);this.mindHacked>0&&(n*=1.25),this.health-=0|n,Kt.add((0|n)+"",[this.pos[0],this.pos[1]+2.75*o.random()+5,this.pos[2]],[255,0,0],t?i?2:1:0,"",[0,1.25,1.275,1.3,1.65,1.75][(o.min(n.toString().length),5)])}update(){if(this.isDead>0)return this.isDead-=f,g.extraInfo.mob_coco=this.isDead,Kt.addSingle("Coconut Crab",[26,17,-40],ae.whiteArr,-1.5,!1,!1,0,.2),Kt.addSingle(MATH.doTime(this.isDead),[26,17,-40],ae.whiteArr,-1.5,!1,!1,0,-.2),this.isDead<=0;if(this.health<=0||g.extraInfo.mob_coco>0){if(this.isDead=10800/g.monsterRespawnTime,g.extraInfo.mob_coco>0)return;let e="",t=MATH.constrain(o.pow(2,-.001*this.timeToDefeat),.1,1);e+="coconut,".repeat(.5*MATH.random(60,110)*t|0),e+="tropicalDrink,".repeat(MATH.random(4,10)*t|0),e+="microConverter,".repeat(MATH.random(4,12)*t|0),e+="starJelly,".repeat(MATH.random(2,5)*t|0),e+="glitter,".repeat(MATH.random(3,7)*t|0),e+="magicBean,".repeat(MATH.random(3,7)*t|0),e+="oil,".repeat(MATH.random(3,7)*t|0),e+="glue,".repeat(MATH.random(3,7)*t|0),e=e.substring(0,e.length-1).split(",");for(let t=e.length;t--;){let i=this;window.setTimeout((function(){let n=o.random()*e.length|0;le.tokens.push(new oi(15,[ti[i.field].x+(ti[i.field].width*o.random()|0),ti[i.field].y+1,ti[i.field].z+(ti[i.field].length*o.random()|0),0],e[n],"coconut"===e[n]?0|MATH.random(1,4):1,!0,"Coconut Crab")),e.splice(t,1)}),300*t)}}let e=g.body.position.x>ti[this.field].x&&g.body.position.x<ti[this.field].x+ti[this.field].width&&g.body.position.z>ti[this.field].z&&g.body.position.z<ti[this.field].z+ti[this.field].length;if(e)g.attacked.push(this);else{if(!(this.pos[0]>ti[this.field].x-8))return;this.pos[0]-=6.5*f,this.clawA=[this.pos[0]-1.5,this.pos[1]+1,this.pos[2]+2,0],this.clawB=[this.pos[0]+1.5,this.pos[1]+1,this.pos[2]+2,0]}if(this.timeToDefeat+=f,this.mindHacked-=f,this.starSawHitTimer-=f,this.flameTimer-=f,this.flameTimer<=0){this.flameTimer=1;for(let e in le.flames)o.abs(this.pos[0]-le.flames[e].pos[0])+o.abs(this.pos[2]-le.flames[e].pos[2])<this.bodySize&&this.damage(le.flames[e].dark?25:15)}if(this.mindHacked<=0){if(this.damageTimer-=f,o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.y-this.pos[1]+1)+o.abs(g.body.position.z-this.pos[2])<this.bodySize&&this.damageTimer<=0&&(g.damage(150),this.damageTimer=1.5),e)switch(this.state){case"alignClaws":if(this.pos[0]=this.pos[0]+f*o.sign(g.body.position.x-this.pos[0])*6.5,this.clawA=[this.pos[0]-1.5,this.pos[1]+1,this.pos[2]+2,0],this.clawB=[this.pos[0]+1.5,this.pos[1]+1,this.pos[2]+2,0],o.abs(g.body.position.x-this.pos[0])<.5){this.state="";let e=this;window.setTimeout((function(){e.state="clawAttack",e.cm=0,e._cm=6.5,window.setTimeout((function(){e.state="",e.clawA=[e.pos[0]-1.5,e.pos[1]+1,e.pos[2]+2,0],e.clawB=[e.pos[0]+1.5,e.pos[1]+1,e.pos[2]+2,0]}),1750),window.setTimeout((function(){if(e.stateAlternate--,e.stateAlternate<0)return e.state="alignMiddle",void(e.stateAlternate=3);e.state="alignClaws"}),2250)}),250)}break;case"clawAttack":(this.cm<0||this.cm>1)&&(this.cm=MATH.constrain(this.cm,0,1),this._cm*=-1,g.body.position.x>this.pos[0]-2.25&&g.body.position.x<this.pos[0]+2.25&&g.body.position.y>this.pos[1]-1&&g.body.position.y<this.pos[1]+3&&g.damage(12)),this.cm+=this._cm*f,this.clawA=[this.pos[0]-1.5,this.pos[1]+1,this.pos[2]+2+7*this.cm,0],this.clawB=[this.pos[0]+1.5,this.pos[1]+1,this.pos[2]+2+7*(1-this.cm),0];break;case"alignMiddle":if(this.pos[0]=MATH.constrain(this.pos[0]+f*o.sign(ti[this.field].x+.5*ti[this.field].width-this.pos[0])*6.5,ti[this.field].x,ti[this.field].x+ti[this.field].width),this.clawA=[this.pos[0]-1.5,this.pos[1]+1,this.pos[2]+2,0],this.clawB=[this.pos[0]+1.5,this.pos[1]+1,this.pos[2]+2,0],o.abs(ti[this.field].x+.5*ti[this.field].width-this.pos[0])<.5&&g.fieldIn===this.field){this.state="cocoAttack",this.cm=0,this._cm=0;let e=this;window.setTimeout((function(){e.state="alignClaws"}),9e3);for(let t=0;t<7;t++)window.setTimeout((function(){e._cm=14,le.mobs.push(new Je(t?MATH.random(.1,.9)*ti[e.field].width|0:g.flowerIn.x,t?MATH.random(.5,.9)*ti[e.field].length|0:g.flowerIn.z,0,!0)),window.setTimeout((function(){le.explosions.push(new ce({col:[.8,.8,.8],pos:e.pos.slice(),life:.5,size:11,speed:.2,aftershock:.03,maxAlpha:.15,primitive:"cylinder_explosions",height:.1}))}),500)}),1e3*t+1e3)}break;case"cocoAttack":this._cm-=45*f,this.cm+=this._cm*f,this.cm<0&&(this._cm*=-.3,this.cm=0),this.pos[1]=ti[this.field].y+.3+this.cm,this.clawA=[this.pos[0]-1.5,this.pos[1]+1,this.pos[2]+2,0],this.clawB=[this.pos[0]+1.5,this.pos[1]+1,this.pos[2]+2,0]}}else Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.smiley,.75,0,0,-2,-2,0);this.pos[1]+=4.3,Kt.addCTX("Coconut Crab (Level "+this.level+")",[this.pos[0],this.pos[1]+.4,this.pos[2]],ae.whiteArr,100),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.rect,.6,0,0,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.health/this.maxHealth*.5-.5)/(this.health/this.maxHealth),0,...Kt.decalUV.rect,.2,.85,.2,2.5*this.health/this.maxHealth,.4,0),Kt.addSingle("HP: "+MATH.addCommas((0|this.health)+""),this.pos,ae.whiteArr,-1,!1,!1),this.pos[1]-=4.3,m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1.3,1),m.bindBuffer(m.ARRAY_BUFFER,de.coconutCrab.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.coconutCrab.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.drawElements(m.TRIANGLES,de.coconutCrab.indexAmount,m.UNSIGNED_SHORT,0),m.uniform4fv(St.mob_instanceInfo1,this.clawA),m.uniform2f(St.mob_instanceInfo2,1,1),m.bindBuffer(m.ARRAY_BUFFER,de.crabClaw.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.crabClaw.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.drawElements(m.TRIANGLES,de.crabClaw.indexAmount,m.UNSIGNED_SHORT,0),m.uniform4fv(St.mob_instanceInfo1,this.clawB),m.uniform2f(St.mob_instanceInfo2,1,1),m.bindBuffer(m.ARRAY_BUFFER,de.crabClaw.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.crabClaw.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.drawElements(m.TRIANGLES,de.crabClaw.indexAmount,m.UNSIGNED_SHORT,0)}}class Me{constructor(){this.field="StumpField",this.moveToAngle=0,this.moveTo=[],this.starSawHitTimer=0,this.level=6,this.health=g.extraInfo.mob_snail_health||1e7,this.maxHealth=1e7,this.pos=[ti[this.field].x+.5*ti[this.field].width-19,ti[this.field].y+.3,ti[this.field].z+.5*ti[this.field].length,0],this.central=[ti[this.field].x+.5*ti[this.field].width,ti[this.field].z+.5*ti[this.field].length],this.flameTimer=0,this.waitTimer=0,this.damageTimer=0,this.bodySize=3,this.runningAmount=0,this.mindHacked=0}die(e){le.mobs.splice(e,1),le.mobs.push(new Se)}damage(e){let t=o.random()<g.criticalChance,i=o.random()<g.superCritChance,n=e*(t?i?g.superCritPower*g.criticalPower:g.criticalPower:1);this.mindHacked>0&&(n*=1.25),this.health-=0|n,Kt.add((0|n)+"",[this.pos[0],this.pos[1]+2.75*o.random()+3,this.pos[2]],[255,0,0],t?i?2:1:0,"",[0,1.25,1.275,1.3,1.65,1.75][(o.min(n.toString().length),5)])}update(){if(this.isDead>0)return this.isDead-=f,g.extraInfo.mob_snail=this.isDead,Kt.addSingle("Stump Snail",[-107,20,82],ae.whiteArr,-1.5,!1,!1,0,.2),Kt.addSingle(MATH.doTime(this.isDead),[-107,20,82],ae.whiteArr,-1.5,!1,!1,0,-.2),this.isDead<=0;if(this.health<=0||g.extraInfo.mob_snail>0){if(g.extraInfo.mob_snail_health=1e7,this.isDead=18e3/g.monsterRespawnTime,g.extraInfo.mob_snail>0)return;let e=o.min(g.stats.stumpSnail++,4),t=["*"+MATH.random(1.01+.01*e,1.02+.025*e).toFixed(2)+" goo"];t.push(...MATH.selectFromArray(["*"+MATH.random(1.05+.08*e,1.1+.2*e).toFixed(2)+" lootLuck","+"+MATH.random(.02+.01*e,.04+.015*e).toFixed(2)+" INSTANT_CONVERSION","*"+MATH.random(1.01+.01*e,1.03+.015*e).toFixed(2)+" POLLEN","*"+MATH.random(1.05+.016*e,1.09+.03*e).toFixed(2)+" pollenFromTools","+"+MATH.random(.01*e+.02,.01*e+.015).toFixed(2)+" defense","*"+MATH.random(1.01+.01*e,1.05+.015*e).toFixed(2)+" honeyFromTokens"],.5*e+2|0)),g.showGeneratedAmulet(["bronze","silver","gold","diamond","supreme"][e]+"SnailAmulet",t);let i="",n=o.min(.2*g.stats.stumpSnail,1);i+="ticket,".repeat(.5*MATH.random(50,175)*n|0),i+="glue,".repeat(.5*MATH.random(10,25)*n|0),i+="gumdrops,".repeat(.5*MATH.random(25,150)*n|0),i+="starJelly,".repeat(.5*MATH.random(-1,5)*n|0),i+="glitter,".repeat(.5*MATH.random(-2,7)*n|0),i+="oil,".repeat(.5*MATH.random(-2,7)*n|0),i+="enzymes,".repeat(.5*MATH.random(-2,7)*n|0),i+="magicBeans,".repeat(.5*MATH.random(2,12)*n|0);let s=["silverEgg","goldEgg","","giftedSilverEgg","","diamondEgg","","giftedGoldEgg","","mythicEgg","","giftedDiamondEgg","","","giftedMythicEgg","","","","starEgg",""];i+=s[o.min(g.stats.stumpSnail,s.length-1)],i=i.substring(0,i.length-1).split(",");for(let e=i.length;e--;){let t=this;window.setTimeout((function(){let n=o.random()*i.length|0;le.tokens.push(new oi(15,[ti[t.field].x+(ti[t.field].width*o.random()|0),ti[t.field].y+1,ti[t.field].z+(ti[t.field].length*o.random()|0),0],i[n],0|MATH.random(1,4),!0,"Stump Snail")),i.splice(e,1)}),300*e)}}let e=g.body.position.x>ti[this.field].x-4&&g.body.position.x<ti[this.field].x+ti[this.field].width+4&&g.body.position.z>ti[this.field].z-4&&g.body.position.z<ti[this.field].z+ti[this.field].length+4,t=o.cos(1.5*T);if(t*=t,t*=t,t=1.5*(.9*t+.1),e)g.attacked.push(this);else{if(!(this.pos[0]>this.central[0]-19))return void(this.moveToAngle=0);{let e=[this.central[0]-19-this.pos[0],this.central[1]-this.pos[2]];vec2.normalize(e,e),this.pos[0]+=e[0]*f*t,this.pos[2]+=e[1]*f*t,this.pos[3]=o.atan2(e[1],e[0])-MATH.HALF_PI}}if(this.mindHacked-=f,this.starSawHitTimer-=f,this.flameTimer-=f,g.extraInfo.mob_snail_health=this.health,this.flameTimer<=0){this.flameTimer=1;for(let e in le.flames)o.abs(this.pos[0]-le.flames[e].pos[0])+o.abs(this.pos[2]-le.flames[e].pos[2])<this.bodySize&&this.damage(le.flames[e].dark?25:15)}if(this.mindHacked<=0){if(this.damageTimer-=f,o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.y-this.pos[1]+1)+o.abs(g.body.position.z-this.pos[2])<this.bodySize&&this.damageTimer<=0&&(g.damage(25),this.damageTimer=1.5),e){let e=9*-o.cos(this.moveToAngle)+this.central[0],i=9*-o.sin(this.moveToAngle)+this.central[1];if(o.abs(this.pos[0]-e)+o.abs(this.pos[2]-i)<.1)this.moveToAngle+=.1*f*t,this.pos[0]=e,this.pos[2]=i,this.pos[3]=this.moveToAngle+o.PI;else{let n=[e-this.pos[0],i-this.pos[2]];vec2.normalize(n,n),this.pos[0]+=n[0]*f*t,this.pos[2]+=n[1]*f*t,this.pos[3]=o.atan2(n[1],n[0])-MATH.HALF_PI}}}else Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.smiley,.75,0,0,-2,-2,0);this.pos[1]+=2.5,Kt.addCTX("Stump Snail (Level "+this.level+")",[this.pos[0],this.pos[1]+.4,this.pos[2]],ae.whiteArr,100),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.rect,.6,0,0,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.health/this.maxHealth*.5-.5)/(this.health/this.maxHealth),0,...Kt.decalUV.rect,.2,.85,.2,2.5*this.health/this.maxHealth,.4,0),Kt.addSingle("HP: "+MATH.addCommas((0|this.health)+""),this.pos,ae.whiteArr,-1,!1,!1),this.pos[1]-=2.5,m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1,1),m.bindBuffer(m.ARRAY_BUFFER,de.stumpSnail.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.stumpSnail.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.drawElements(m.TRIANGLES,de.stumpSnail.indexAmount,m.UNSIGNED_SHORT,0)}}class _e{constructor(){window.setTimeout((()=>{this.flyBack=!0,window.setTimeout((()=>this.splice=!0),2e4)}),105e3),this.fireflies=[],this.cycle=3,this.field=["SpiderField","StrawberryField","RoseField","CactusField","BambooField","PineapplePatch"][6*o.random()|0],this.x=MATH.random(.4,.6)*ti[this.field].width,this.z=MATH.random(.4,.6)*ti[this.field].length;let e=ti[this.field].x+this.x,t=ti[this.field].z+this.z,i=MATH.random(3,5);for(let n=0;n<8;n++){let n=o.random()*MATH.TWO_PI;this.fireflies.push({pos:[-60,20,-30],toPos:[o.sin(n)*i+e|0,ti[this.field].y+.75,o.cos(n)*i+t|0],vel:[0,0,0],state:"moveToFlower"})}}die(e){le.mobs.splice(e,1)}update(){let e=this.fireflies.length;for(let t in this.fireflies){let i=this.fireflies[t];if(this.flyBack)vec3.sub(i.vel,[-60,20,-30],i.pos),vec3.normalize(i.vel,i.vel),vec3.scaleAndAdd(i.pos,i.pos,i.vel,4*f);else switch(i.state){case"moveToFlower":vec3.sub(i.vel,i.toPos,i.pos),vec3.normalize(i.vel,i.vel),vec3.scaleAndAdd(i.pos,i.pos,i.vel,4*f),o.abs(i.toPos[0]-i.pos[0])+o.abs(i.toPos[1]-i.pos[1])+o.abs(i.toPos[2]-i.pos[2])<.5&&(i.state="waitSquish",i.pos=i.toPos.slice(),vec3.sub(i.vel,[ti[this.field].x+this.x,ti[this.field].y+.75,ti[this.field].z+this.z],i.pos));break;case"waitSquish":if(o.abs(g.body.position.x-i.pos[0])+o.abs(g.body.position.y-i.pos[1])+o.abs(g.body.position.z-i.pos[2])<4){i.state="flyUp",i.toPos[1]+=5;let e="treat";o.random()<.35&&(e=o.random()<.5?"pineapple":"sunflowerSeed"),ti[this.field].generalColorComp.r>.5&&o.random()<.4&&(e="strawberry"),ti[this.field].generalColorComp.b>.5&&o.random()<.4&&(e="blueberry"),o.random()<.06&&(e=o.random()<.5?"gumdrops":"royalJelly"),le.tokens.push(new oi(30,[i.pos[0],ti[this.field].y+1,i.pos[2]],e,1,!1,"Fireflies"))}break;case"flyUp":vec3.sub(i.vel,i.toPos,i.pos),vec3.normalize(i.vel,i.vel),vec3.scaleAndAdd(i.pos,i.pos,i.vel,4*f),o.abs(i.toPos[0]-i.pos[0])+o.abs(i.toPos[1]-i.pos[1])+o.abs(i.toPos[2]-i.pos[2])<.5&&(i.state="waitAir",i.pos=i.toPos.slice(),vec3.sub(i.vel,[ti[this.field].x+this.x,ti[this.field].y+.75,ti[this.field].z+this.z],i.pos));break;case"waitAir":e--}de.bees.instanceData.push(i.pos[0],i.pos[1],i.pos[2],1,i.vel[0],i.vel[1],i.vel[2],v,.875,.625,0),Kt.addDecalRaw(...i.pos,0,0,...Kt.decalUV.glow,1,1,.2,2.5,2.5,0),Kt.addDecalRaw(...i.pos,0,0,...Kt.decalUV.lightrays,1,1,.2,3,3,T+.5*t),de.explosions.instanceData.push(...i.pos,1,1,.2,.2,.95,1)}if(!e){let e="moonCharm";if(o.random()<.07&&(e=o.random()<.1?"starJelly":"glitter"),le.tokens.push(new oi(30,[ti[this.field].x+this.x,ti[this.field].y+1,ti[this.field].z+this.z],e,1,!1,"Fireflies")),le.explosions.push(new ce({col:[0,1,1],pos:[ti[this.field].x+this.x,ti[this.field].y+1,ti[this.field].z+this.z],life:.75,size:6,speed:.2,aftershock:.05})),this.cycle--,this.cycle<=0){let e=["SpiderField","StrawberryField","RoseField","CactusField","BambooField","PineapplePatch"];e.splice(e.indexOf(this.field),1),this.field=e[5*o.random()|0],this.cycle=3}this.x=MATH.random(.4,.6)*ti[this.field].width,this.z=MATH.random(.4,.6)*ti[this.field].length;let t=ti[this.field].x+this.x,i=ti[this.field].z+this.z,n=MATH.random(3,5);for(let e in this.fireflies){let s=this.fireflies[e],r=o.random()*MATH.TWO_PI;s.toPos=[o.sin(r)*n+t|0,ti[this.field].y+.75,o.cos(r)*n+i|0],s.state="moveToFlower"}}return this.splice}}class Re{constructor(e,t,i){this.mega=i?"megaMechsquito":"mechsquito",this.isMega=i,this.field=e,this.state="attack",this.starSawHitTimer=0,this.level=t,this.health=.25*((t-1)*(t-1)*50+50),i&&(this.health=1.5*this.health),this.maxHealth=this.health,this.pos=[ti[this.field].x+o.random()*ti[this.field].width,ti[this.field].y+4,ti[this.field].z+o.random()*ti[this.field].length],this.checkTimer=T,this.flameTimer=0,this.waitTimer=0,this.target=[this.pos[0],this.pos[2]],this.damageTimer=0,this.bodySize=1.5,this.runningAmount=0,this.mindHacked=0,this.bullets=[],this.bulletTrail1=new ei.ConstantTrail({length:2,size:.1,color:[0,1,0]}),this.bulletTrail2=new ei.ConstantTrail({length:2,size:.1,color:[0,1,0],vertical:!0})}die(e){le.mobs.splice(e,1)}damage(e){let t=o.random()<g.criticalChance,i=o.random()<g.superCritChance,n=e*(t?i?g.superCritPower*g.criticalPower:g.criticalPower:1);this.mindHacked>0&&(n*=1.25),this.health-=0|n,Kt.add((0|n)+"",[this.pos[0],this.pos[1]+2.75*o.random()+1.5,this.pos[2]],[255,0,0],t?i?2:1:0,"",[0,1.25,1.275,1.3,1.65,1.75][(o.min(n.toString().length),5)])}update(){if("attack"===this.state){if(this.health<=0)return g.stats.mechsquito++,!0;if(this.mindHacked-=f,this.timeLimit-=f,this.starSawHitTimer-=f,this.flameTimer-=f,this.flameTimer<=0){this.flameTimer=1;for(let e in le.flames)o.abs(this.pos[0]-le.flames[e].pos[0])+o.abs(this.pos[2]-le.flames[e].pos[2])<this.bodySize&&this.damage(le.flames[e].dark?25:15)}if(g.fieldIn===this.field&&g.attacked.push(this),this.mindHacked<=0){let e=[this.target[0]-this.pos[0],this.target[1]-this.pos[2]];if(o.abs(e[0])+o.abs(e[1])<.75&&(this.target=[ti[this.field].x+o.random()*ti[this.field].width,ti[this.field].z+o.random()*ti[this.field].length],e=[this.target[0]-this.pos[0],this.target[1]-this.pos[2]],this.runningAmount--,this.runningAmount<=0)){this.waitTimer=1,this.runningAmount=3;let e,t=this;window.setTimeout((function(){e=[g.body.position.x-t.pos[0],g.body.position.y-t.pos[1],g.body.position.z-t.pos[2]]}),450),window.setTimeout((function(){if(g.fieldIn===t.field)if(vec3.normalize(e,e),vec3.scale(e,e,38),t.isMega)for(let i=0;i<6;i++){let i=[e[0]+MATH.random(-5,5),e[1]+MATH.random(-5,5),e[2]+MATH.random(-5,5)];t.bullets.push({pos:t.pos.slice(),vel:i,life:.5});let o=MATH.random(.05,.2);$t.add({x:t.pos[0],y:t.pos[1],z:t.pos[2],vx:i[0],vy:i[1],vz:i[2],grav:0,size:100,col:[1,o,o],life:.5,rotVel:MATH.random(-15,15),alpha:1e3})}else{t.bullets.push({pos:t.pos.slice(),vel:e,life:.5});let i=MATH.random(.05,.2);$t.add({x:t.pos[0],y:t.pos[1],z:t.pos[2],vx:e[0],vy:e[1],vz:e[2],grav:0,size:200,col:[1,i,i],life:.5,rotVel:MATH.random(-15,15),alpha:1e3})}}),600)}vec2.normalize(e,e),this.running=!1,this.waitTimer-=f,this.waitTimer<=0&&(this.pos[0]+=e[0]*f*6,this.pos[2]+=e[1]*f*6,this.running=!0),this.damageTimer-=f,o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.y-this.pos[1]-2.5)+o.abs(g.body.position.z-this.pos[2])<this.bodySize&&this.damageTimer<=0&&(g.damage(20),this.damageTimer=1),this.pos[3]=o.atan2(e[1],e[0])+MATH.HALF_PI+.1*o.sin(40*T)+(this.running?0:10*T);for(let e in this.bullets)this.bullets[e].life-=f,vec3.scaleAndAdd(this.bullets[e].pos,this.bullets[e].pos,this.bullets[e].vel,f),o.abs(this.bullets[e].pos[0]-g.body.position.x)+o.abs(this.bullets[e].pos[1]-g.body.position.y)+o.abs(this.bullets[e].pos[2]-g.body.position.z)<2&&(g.damage(7),this.bullets[e].damaged=!0),(this.bullets[e].life<=0||this.bullets[e].damaged)&&this.bullets.splice(e,1)}else this.pos[3]=6.2*o.random(),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.smiley,.75,0,0,-2,-2,0);this.pos[1]+=1,Kt.addCTX(MATH.doGrammar(this.mega)+" (Level "+this.level+")",[this.pos[0],this.pos[1]+.4,this.pos[2]],ae.whiteArr,100),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.rect,.6,0,0,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.health/this.maxHealth*.5-.5)/(this.health/this.maxHealth),0,...Kt.decalUV.rect,.2,.85,.2,2.5*this.health/this.maxHealth,.4,0),Kt.addSingle("HP: "+MATH.addCommas((0|this.health)+""),this.pos,ae.whiteArr,-1,!1,!1),this.pos[1]-=1,m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,this.isMega?1.25:.8,1),m.bindBuffer(m.ARRAY_BUFFER,de[this.mega].vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de[this.mega].indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.drawElements(m.TRIANGLES,de[this.mega].indexAmount,m.UNSIGNED_SHORT,0)}}}class Fe{constructor(e,t,i){this.gold=i?"goldenCogmower":"cogmower",this.isGold=i,this.field=e,this.state="attack",this.starSawHitTimer=0,this.level=t,this.health=.25*((t-1)*(t-1)*70+100),i&&(this.health=1.65*this.health),this.maxHealth=this.health,this.pos=[ti[this.field].x+o.random()*ti[this.field].width,ti[this.field].y+.75,ti[this.field].z+o.random()*ti[this.field].length],this.moveDir=[o.random()-.5,o.random()-.5],vec2.normalize(this.moveDir,this.moveDir),vec2.scale(this.moveDir,this.moveDir,4),this.checkTimer=T,this.flameTimer=0,this.waitTimer=0,this.damageTimer=0,this.bodySize=1.5,this.mindHacked=0;this.bounds={minX:ti[this.field].x+1-.5,maxX:ti[this.field].x+ti[this.field].width-1-.5,minZ:ti[this.field].z+1-.5,maxZ:ti[this.field].z+ti[this.field].length-1-.5}}die(e){le.mobs.splice(e,1)}damage(e){let t=o.random()<g.criticalChance,i=o.random()<g.superCritChance,n=e*(t?i?g.superCritPower*g.criticalPower:g.criticalPower:1);this.mindHacked>0&&(n*=1.25),this.health-=0|n,Kt.add((0|n)+"",[this.pos[0],this.pos[1]+2.75*o.random()+1.5,this.pos[2]],[255,0,0],t?i?2:1:0,"",[0,1.25,1.275,1.3,1.65,1.75][(o.min(n.toString().length),5)])}update(){if("attack"===this.state){if(this.health<=0)return g.stats.mechsquito++,!0;if(this.mindHacked-=f,this.timeLimit-=f,this.starSawHitTimer-=f,this.flameTimer-=f,this.flameTimer<=0){this.flameTimer=1;for(let e in le.flames)o.abs(this.pos[0]-le.flames[e].pos[0])+o.abs(this.pos[2]-le.flames[e].pos[2])<this.bodySize&&this.damage(le.flames[e].dark?25:15)}g.fieldIn===this.field&&g.attacked.push(this),this.mindHacked<=0?(this.pos[0]+=this.moveDir[0]*f,this.pos[2]+=this.moveDir[1]*f,this.pos[0]<=this.bounds.minX&&(this.pos[0]=this.bounds.minX,this.moveDir[0]=-this.moveDir[0]),this.pos[0]>=this.bounds.maxX&&(this.pos[0]=this.bounds.maxX,this.moveDir[0]=-this.moveDir[0]),this.pos[2]<=this.bounds.minZ&&(this.pos[2]=this.bounds.minZ,this.moveDir[1]=-this.moveDir[1]),this.pos[2]>=this.bounds.maxZ&&(this.pos[2]=this.bounds.maxZ,this.moveDir[1]=-this.moveDir[1]),this.damageTimer-=f,this.damageTimer<=0&&(o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.y-this.pos[1])+o.abs(g.body.position.z-this.pos[2])<this.bodySize&&g.damage(this.level-1+15),this.damageTimer=.5,Hi({x:o.round(this.pos[0]-ti[this.field].x),z:o.round(this.pos[2]-ti[this.field].z),field:this.field,pattern:[[0,0],[1,1],[1,-1],[-1,1],[-1,-1],[1,0],[-1,0],[0,1],[0,-1]],amount:30+this.level,multiplier:1e-11})),this.pos[3]=7*T):(this.pos[3]=6.2*o.random(),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.smiley,.75,0,0,-2,-2,0)),this.pos[1]+=1,Kt.addCTX(MATH.doGrammar(this.gold)+" (Level "+this.level+")",[this.pos[0],this.pos[1]+.4,this.pos[2]],ae.whiteArr,100),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.rect,.6,0,0,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.health/this.maxHealth*.5-.5)/(this.health/this.maxHealth),0,...Kt.decalUV.rect,.2,.85,.2,2.5*this.health/this.maxHealth,.4,0),Kt.addSingle("HP: "+MATH.addCommas((0|this.health)+""),this.pos,ae.whiteArr,-1,!1,!1),this.pos[1]-=1,m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1,1),m.bindBuffer(m.ARRAY_BUFFER,de[this.gold].vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de[this.gold].indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.drawElements(m.TRIANGLES,de[this.gold].indexAmount,m.UNSIGNED_SHORT,0)}}}class Ce{constructor(e,t,i){switch(this.side=i,this.field=e,this.state="attack",this.starSawHitTimer=0,this.level=t,this.health=.25*((t-1)*(t-1)*75+250),this.maxHealth=this.health,this.side){case 0:this.pos=[ti[this.field].x+o.random()*ti[this.field].width,ti[this.field].y+1,ti[this.field].z-.5,-MATH.HALF_PI],this.constraintAxis=0,this.constraintRange=[ti[this.field].x-.5,ti[this.field].x+ti[this.field].width-.5];break;case 1:this.pos=[ti[this.field].x+o.random()*ti[this.field].width,ti[this.field].y+1,ti[this.field].z+ti[this.field].length-.5,MATH.HALF_PI],this.constraintAxis=0,this.constraintRange=[ti[this.field].x-.5,ti[this.field].x+ti[this.field].width-.5];break;case 2:this.pos=[ti[this.field].x-.5,ti[this.field].y+1,ti[this.field].z+o.random()*ti[this.field].length,o.PI],this.constraintAxis=2,this.constraintRange=[ti[this.field].z-.5,ti[this.field].z+ti[this.field].length-.5];break;case 3:this.pos=[ti[this.field].x+ti[this.field].width-.5,ti[this.field].y+1,ti[this.field].z+o.random()*ti[this.field].length,0],this.constraintAxis=2,this.constraintRange=[ti[this.field].z,ti[this.field].z+ti[this.field].length]}this.checkTimer=T,this.flameTimer=0,this.waitTimer=0,this.damageTimer=0,this.bodySize=1.5,this.mindHacked=0,this.cogs=[],this.cogFireTimer=2}die(e){le.mobs.splice(e,1)}damage(e){let t=o.random()<g.criticalChance,i=o.random()<g.superCritChance,n=e*(t?i?g.superCritPower*g.criticalPower:g.criticalPower:1);this.mindHacked>0&&(n*=1.25),this.health-=0|n,Kt.add((0|n)+"",[this.pos[0],this.pos[1]+2.75*o.random()+1.5,this.pos[2]],[255,0,0],t?i?2:1:0,"",[0,1.25,1.275,1.3,1.65,1.75][(o.min(n.toString().length),5)])}update(){if("attack"===this.state){if(this.health<=0)return g.stats.mechsquito++,!0;if(this.mindHacked-=f,this.timeLimit-=f,this.starSawHitTimer-=f,this.flameTimer-=f,this.flameTimer<=0){this.flameTimer=1;for(let e in le.flames)o.abs(this.pos[0]-le.flames[e].pos[0])+o.abs(this.pos[2]-le.flames[e].pos[2])<this.bodySize&&this.damage(le.flames[e].dark?25:15)}if(g.fieldIn===this.field&&g.attacked.push(this),this.mindHacked<=0){if(this.cogFireTimer-=f,g.fieldIn===this.field){if(this.cogFireTimer<=0){let e=[0,0,0];e[2-this.constraintAxis]=8*o.sign(g.body.position[this.constraintAxis?"x":"z"]-this.pos[2-this.constraintAxis]),this.cogs.push({pos:[this.pos[0],this.pos[1]-.75,this.pos[2],0],vel:e,timer:0,deathY:this.pos[1]-3}),this.cogFireTimer=2}this.desiredPos=MATH.constrain(g.body.position[this.constraintAxis?"z":"x"],this.constraintRange[0],this.constraintRange[1]),this.pos[this.constraintAxis]+=(this.desiredPos-this.pos[this.constraintAxis])*f*5}this.damageTimer-=f,this.damageTimer<=0&&o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.y-this.pos[1])+o.abs(g.body.position.z-this.pos[2])<this.bodySize&&(g.damage(this.level-1+20),this.damageTimer=.5)}else Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.smiley,.75,0,0,-2,-2,0);this.pos[1]+=1,Kt.addCTX("Cogturret (Level "+this.level+")",[this.pos[0],this.pos[1]+.4,this.pos[2]],ae.whiteArr,100),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.rect,.6,0,0,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.health/this.maxHealth*.5-.5)/(this.health/this.maxHealth),0,...Kt.decalUV.rect,.2,.85,.2,2.5*this.health/this.maxHealth,.4,0),Kt.addSingle("HP: "+MATH.addCommas((0|this.health)+""),this.pos,ae.whiteArr,-1,!1,!1),this.pos[1]-=1,m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1,1),m.bindBuffer(m.ARRAY_BUFFER,de.cogTurret.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.cogTurret.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.drawElements(m.TRIANGLES,de.cogTurret.indexAmount,m.UNSIGNED_SHORT,0),m.bindBuffer(m.ARRAY_BUFFER,de.cog.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.cog.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform2f(St.mob_instanceInfo2,.6,1);for(let e=this.cogs.length;e--;){let t=this.cogs[e];t.timer-=f,t.pos[0]+=t.vel[0]*f,t.pos[2]+=t.vel[2]*f,t.pos[3]+=8*f,t.fx=o.round(t.pos[0]-ti[this.field].x),t.fz=o.round(t.pos[2]-ti[this.field].z),(t.fx<0||t.fx>=ti[this.field].width||t.fz<0||t.fz>=ti[this.field].length)&&(t.pos[1]-=10*f),t._fx===t.fx&&t._fz===t.fz||Hi({x:o.round(t.pos[0]-ti[this.field].x),z:o.round(t.pos[2]-ti[this.field].z),field:this.field,pattern:[[0,0]],amount:1e3,multiplier:1e-11}),t._fx=t.fx,t._fz=t.fz,o.abs(g.body.position.x-t.pos[0])+o.abs(g.body.position.z-t.pos[2])+o.abs(t.pos[1]-g.body.position.y)<1.5&&t.timer<=0&&(t.timer=.5,g.damage(15)),m.uniform4fv(St.mob_instanceInfo1,t.pos),m.drawElements(m.TRIANGLES,de.cog.indexAmount,m.UNSIGNED_SHORT,0),t.pos[1]<t.deathY&&this.cogs.splice(e,1)}}}}class He{constructor(e,t,i,n){switch(this.type=n,this.displayName=MATH.doGrammar(n),this.mesh=n,this.meshScale=.75,this.level=1+(e*MATH.random(.4,.6)*.5|0),this.health=5+(this.level*this.level*this.level*.4*MATH.random(2,6)|0),this.movespeed=2,this.attack=10,this.bodySize=.75,n){case"ant":case"fireAnt":break;case"armyAnt":this.health=1.5*this.health|0,this.attack*=2;break;case"flyingAnt":this.health=.65*this.health|0,this.movespeed*=1.5,this.attack*=1.25;break;case"giantAnt":this.health=2*this.health|0,this.movespeed*=.75,this.attack*=2,this.meshScale=1.5,this.mesh="ant",this.bodySize=1}this.state="spawning",this.field="AntField",this.starSawHitTimer=0,this.maxHealth=this.health,this.spawnPos=[-21,7,-61],this.pos=[ti[this.field].x+(t*ti[this.field].width|0),ti[this.field].y+this.meshScale,ti[this.field].z+(i*ti[this.field].length|0)],this.flameTimer=0,this.waitTimer=0,this.damageTimer=0,this.mindHacked=0,this.dir=[t-.5,i-.5],this.dir[1]=0===this.dir[1]&&0===this.dir[0]?o.random()<.5?-1:1:this.dir[1],vec2.normalize(this.dir,this.dir),this.bounds={minX:ti[this.field].x+1,maxX:ti[this.field].x+ti[this.field].width-1,minZ:ti[this.field].z+1,maxZ:ti[this.field].z+ti[this.field].length-1},this.fireTrailTimer=0}die(e){g.antChallenge&&g.antChallenge.score++,le.mobs.splice(e,1)}damage(e){let t=o.random()<g.criticalChance,i=o.random()<g.superCritChance,n=e*(t?i?g.superCritPower*g.criticalPower:g.criticalPower:1);this.mindHacked>0&&(n*=1.25),this.health-=0|n,Kt.add((0|n)+"",[this.pos[0],this.pos[1]+2.75*o.random()+1.5,this.pos[2]],[255,0,0],t?i?2:1:0,"",[0,1.25,1.275,1.3,1.65,1.75][(o.min(n.toString().length),5)])}update(){switch(this.state){case"spawning":this.spawnPos[0]+=(this.pos[0]-this.spawnPos[0])*f*5,this.spawnPos[1]+=(this.pos[1]-this.spawnPos[1])*f*5,this.spawnPos[2]+=(this.pos[2]-this.spawnPos[2])*f*5,o.abs(this.pos[1]-this.spawnPos[1])<.1&&(this.state="attack"),m.bindBuffer(m.ARRAY_BUFFER,de[this.mesh].vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de[this.mesh].indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform2f(St.mob_instanceInfo2,this.meshScale,1),m.uniform4fv(St.mob_instanceInfo1,[this.spawnPos[0],this.spawnPos[1],this.spawnPos[2],0]),m.drawElements(m.TRIANGLES,de[this.mesh].indexAmount,m.UNSIGNED_SHORT,0);break;case"attack":if(this.health<=0)return g.stats.ant++,"ant"!==this.type&&g.stats[this.type]++,!0;if(this.mindHacked-=f,this.starSawHitTimer-=f,this.flameTimer-=f,this.flameTimer<=0){this.flameTimer=1;for(let e in le.flames)o.abs(this.pos[0]-le.flames[e].pos[0])+o.abs(this.pos[2]-le.flames[e].pos[2])<this.bodySize&&this.damage(le.flames[e].dark?25:15)}g.attacked.push(this),this.mindHacked<=0?("fireAnt"===this.type&&(this.fireTrailTimer-=f,this.fireTrailTimer<=0&&(le.mobs.push(new De(this.pos.slice())),this.fireTrailTimer=.75)),"armyAnt"!==this.type&&"flyingAnt"!==this.type&&"giantAnt"!==this.type||(this.dir=[g.body.position.x-this.pos[0],g.body.position.z-this.pos[2]],vec2.normalize(this.dir,this.dir)),this.pos[0]+=this.dir[0]*f*this.movespeed,this.pos[2]+=this.dir[1]*f*this.movespeed,this.pos[3]=o.atan2(this.dir[1],this.dir[0])+MATH.HALF_PI,this.pos[0]<=this.bounds.minX&&(this.pos[0]=this.bounds.minX,this.dir[0]=-this.dir[0]),this.pos[0]>=this.bounds.maxX&&(this.pos[0]=this.bounds.maxX,this.dir[0]=-this.dir[0]),this.pos[2]<=this.bounds.minZ&&(this.pos[2]=this.bounds.minZ,this.dir[1]=-this.dir[1]),this.pos[2]>=this.bounds.maxZ&&(this.pos[2]=this.bounds.maxZ,this.dir[1]=-this.dir[1]),this.damageTimer-=f,o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.y-this.pos[1])+o.abs(g.body.position.z-this.pos[2])<1.5*this.bodySize&&this.damageTimer<=0&&(g.damage(this.attack),this.damageTimer=.75)):Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.smiley,.75,0,0,-2,-2,0),this.pos[1]+=1.25,Kt.addCTX(this.displayName+" (Level "+this.level+")",[this.pos[0],this.pos[1]+.5,this.pos[2]],ae.whiteArr,100),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.rect,.6,0,0,2.5,.4,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.health/this.maxHealth*.5-.5)/(this.health/this.maxHealth),0,...Kt.decalUV.rect,.2,.85,.2,2.5*this.health/this.maxHealth,.4,0),Kt.addSingle("HP: "+MATH.addCommas((0|this.health)+""),this.pos,ae.whiteArr,-1,!1,!1),this.pos[1]-=1.25,m.bindBuffer(m.ARRAY_BUFFER,de[this.mesh].vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de[this.mesh].indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,this.meshScale,1),m.drawElements(m.TRIANGLES,de[this.mesh].indexAmount,m.UNSIGNED_SHORT,0)}return!g.antChallenge}}class De{constructor(e){this.life=7.5,this.pos=e,this.damageTimer=0,this.particleTimer=0}die(e){le.mobs.splice(e,1)}update(){return this.life-=f,this.damageTimer-=f,this.particleTimer-=f,this.particleTimer<=0&&(this.particleTimer=.75,$t.add({x:this.pos[0]+MATH.random(-.5,.5),y:this.pos[1],z:this.pos[2]+MATH.random(-.5,.5),vx:0,vy:0,vz:0,grav:0,size:200,col:[.9,0,0],life:2,rotVel:MATH.random(-.3,.3),alpha:2})),this.damageTimer<=0&&o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.y-this.pos[1])+o.abs(g.body.position.z-this.pos[2])<.75&&(this.damageTimer=1,g.damage(8)),this.life<=0}}class Le{constructor(e){this.dir=o.random()<.5?-1:1,this.pos=[13*this.dir-21,6,(o.random()<.3333?-2.5:o.random()<.5?1.5:5.5)-55,(this.dir+1)*MATH.HALF_PI],this.warning=2,this.speed=o.min(12.5+.25*e,27.5)}die(e){le.mobs.splice(e,1)}update(){return this.warning>0?(this.warning-=f,(this.warning*this.speed*.35|0)%2&&(m.bindBuffer(m.ARRAY_BUFFER,de.lawnMowerWarning.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.lawnMowerWarning.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform2f(St.mob_instanceInfo2,1,1),m.uniform4fv(St.mob_instanceInfo1,[9.4*this.dir-21,7.5,this.pos[2],0]),m.drawElements(m.TRIANGLES,de.lawnMowerWarning.indexAmount,m.UNSIGNED_SHORT,0))):(!this.damaged&&o.abs(g.body.position.x-this.pos[0])+o.abs(g.body.position.z-this.pos[2])<1.667&&(this.damaged=!0,g.damage(20)),this.pos[0]-=this.dir*f*this.speed,m.bindBuffer(m.ARRAY_BUFFER,de.lawnMower.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.lawnMower.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform2f(St.mob_instanceInfo2,1,1),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.drawElements(m.TRIANGLES,de.lawnMower.indexAmount,m.UNSIGNED_SHORT,0)),this.pos[0]>-7||this.pos[0]<-35}}class ze{constructor(e){this.size=.5,this.life=45,this.startValue=g.stats.popStar,this.value=0,g.popStarSize=0,g.popStarActive=this,this.popParticles=[],g.addEffect("bubbleBloat",60/3600),g.addEffect("popStarAura")}die(e){g.popStarSize=0,g.popStarActive=void 0;let t=g.bodyDir.slice(),i=2*T,n=o.sin(i)*(this.size+1),s=o.cos(i)*(this.size+1);t[0]=t[0]*n-t[2]*s,t[2]=g.bodyDir[0]*s+t[2]*n;let r=[g.body.position.x+t[0],g.body.position.y+2*this.size+o.sin(3*T)*this.size-.5,g.body.position.z+t[2]];if(le.explosions.push(new ce({col:[0,.5,1],pos:r,life:.4,size:1.25*this.size,speed:.25,aftershock:.05,maxAlpha:.5})),le.explosions.push(new ce({col:[0,.5,1],pos:r,life:.4,size:1.5*this.size,speed:.7,aftershock:.1,maxAlpha:.3})),g.fieldIn)for(let e=0,t=.1*this.value+5;e<t;e++)le.bubbles.push(new fe(g.fieldIn,o.random()*ti[g.fieldIn].width|0,o.random()*ti[g.fieldIn].length|0));le.mobs.splice(e,1)}update(){this.life-=f,this.value=g.stats.popStar-this.startValue,this.size=o.min(.06*o.sqrt(this.value)+.5,2),g.popStarSize=this.value,m.bindBuffer(m.ARRAY_BUFFER,de.popStar.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.popStar.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12);let e=g.bodyDir.slice(),t=2*T,i=o.sin(t)*(this.size+1),n=o.cos(t)*(this.size+1);e[0]=e[0]*i-e[2]*n,e[2]=g.bodyDir[0]*n+e[2]*i;let s=[g.body.position.x+e[0],g.body.position.y+2*this.size+o.sin(3*T)*this.size-.5,g.body.position.z+e[2],-g.playerAngle+o.PI];for(let e in this.popParticles){let t=this.popParticles[e];vec3.lerp(t,t,s,7*f+.075),de.explosions.instanceData.push(t[0],t[1],t[2],1,1,1,1,.5,1),o.abs(t[0]-s[0])+o.abs(t[1]-s[1])+o.abs(t[2]-s[2])<1.75&&this.popParticles.splice(e,1)}return m.uniform4fv(St.mob_instanceInfo1,s),m.uniform2f(St.mob_instanceInfo2,this.size,.7),m.drawElements(m.TRIANGLES,de.popStar.indexAmount,m.UNSIGNED_SHORT,0),s[0]+=g.cameraDir[0],s[1]+=g.cameraDir[1],s[2]+=g.cameraDir[2],s[1]+=.1,Kt.addSingle(this.value.toString(),s.slice(),ae.whiteArr,-2),s[1]-=.3,Kt.addSingle(MATH.doTime(this.life),s,ae.whiteArr,-1),this.life<=0}}class Ue{constructor(e){this.size=.5,this.life=45,this.startValue=g.stats.scorchingStar,this.value=0,g.scorchingStarSize=0,g.addEffect("scorchingStarAura"),this.particleTimer=0}die(e){g.scorchingStarSize=0;let t=g.bodyDir.slice(),i=2*T+2*MATH.THIRD_PI,n=o.sin(i)*(this.size+1),s=o.cos(i)*(this.size+1);t[0]=t[0]*n-t[2]*s,t[2]=g.bodyDir[0]*s+t[2]*n;let r=[g.body.position.x+t[0],g.body.position.y+2*this.size+o.sin(3*T)*this.size-.5,g.body.position.z+t[2]];le.explosions.push(new ce({col:[.75,0,0],pos:r,life:.4,size:1.25*this.size,speed:.25,aftershock:.05,maxAlpha:.5})),le.explosions.push(new ce({col:[.75,0,0],pos:r,life:.4,size:1.5*this.size,speed:.7,aftershock:.1,maxAlpha:.3})),le.mobs.splice(e,1)}update(){this.life-=f,this.value=g.stats.scorchingStar-this.startValue,this.size=o.min(.05*o.sqrt(.045*this.value)+.5,2),g.scorchingStarSize=this.value,m.bindBuffer(m.ARRAY_BUFFER,de.scorchingStar.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.scorchingStar.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12);let e=g.bodyDir.slice(),t=2*T+2*MATH.THIRD_PI,i=o.sin(t)*(this.size+1),n=o.cos(t)*(this.size+1);e[0]=e[0]*i-e[2]*n,e[2]=g.bodyDir[0]*n+e[2]*i;let s=[g.body.position.x+e[0],g.body.position.y+2*this.size+o.sin(3*T)*this.size-.5,g.body.position.z+e[2],-g.playerAngle+o.PI];return this.particleTimer-=f,this.particleTimer<0&&($t.add({x:s[0]+MATH.random(-this.size,this.size),y:s[1]+MATH.random(-this.size,this.size),z:s[2]+MATH.random(-this.size,this.size),vx:0,vy:0,vz:0,grav:0,size:80,col:[1,.3*o.random()+.6,0],life:1,rotVel:0,alpha:2,rot:MATH.HALF_PI}),this.particleTimer=.1),m.uniform4fv(St.mob_instanceInfo1,s),m.uniform2f(St.mob_instanceInfo2,this.size,1),m.drawElements(m.TRIANGLES,de.scorchingStar.indexAmount,m.UNSIGNED_SHORT,0),s[0]+=g.cameraDir[0],s[1]+=g.cameraDir[1],s[2]+=g.cameraDir[2],s[1]+=.1,Kt.addSingle((0|this.value).toString(),s.slice(),ae.whiteArr,-2),s[1]-=.3,Kt.addSingle(MATH.doTime(this.life),s,ae.whiteArr,-1),this.life<=0}}class Ne{constructor(e){this.size=.5,this.life=45,this.startValue=g.stats.goo,this.value=0,g.gummyStarSize=0,g.addEffect("gummyStarAura")}die(e){g.gummyStarSize=0;let t=g.bodyDir.slice(),i=2*T+4*MATH.THIRD_PI,n=o.sin(i)*(this.size+1),s=o.cos(i)*(this.size+1);t[0]=t[0]*n-t[2]*s,t[2]=g.bodyDir[0]*s+t[2]*n;let r=[g.body.position.x+t[0],g.body.position.y+2*this.size+o.sin(3*T)*this.size-.5,g.body.position.z+t[2]];if(le.explosions.push(new ce({col:[.1,1,.5],pos:r,life:.4,size:1.25*this.size,speed:.25,aftershock:.05,maxAlpha:.5})),le.explosions.push(new ce({col:[1,.2,1],pos:r,life:.4,size:1.5*this.size,speed:.7,aftershock:.1,maxAlpha:.3})),g.fieldIn){let e=o.ceil(.05*this.value/20)+1e3;for(let t=0,i=20+this.value.toString().length;t<i;t++)le.tokens.push(new oi(30,[ti[g.fieldIn].x+(o.random()*ti[g.fieldIn].width|0),ti[g.fieldIn].y+1,ti[g.fieldIn].z+(o.random()*ti[g.fieldIn].length|0)],"honey",e,!1,"Gummy Star"))}le.mobs.splice(e,1)}update(){this.life-=f,this.value=g.stats.goo-this.startValue,g.gummyStarSize=this.value,this.size=o.min(.055*o.sqrt(this.value/71e6)+.5,2),m.bindBuffer(m.ARRAY_BUFFER,de.gummyStar.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.gummyStar.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12);let e=g.bodyDir.slice(),t=2*T+4*MATH.THIRD_PI,i=o.sin(t)*(this.size+1),n=o.cos(t)*(this.size+1);e[0]=e[0]*i-e[2]*n,e[2]=g.bodyDir[0]*n+e[2]*i;let s=[g.body.position.x+e[0],g.body.position.y+2*this.size+o.sin(3*T)*this.size-.5,g.body.position.z+e[2],-g.playerAngle+o.PI];return m.uniform4fv(St.mob_instanceInfo1,s),m.uniform2f(St.mob_instanceInfo2,this.size,.9),m.drawElements(m.TRIANGLES,de.gummyStar.indexAmount,m.UNSIGNED_SHORT,0),s[0]+=g.cameraDir[0],s[1]+=g.cameraDir[1],s[2]+=g.cameraDir[2],s[1]+=.1,Kt.addSingle(this.value.toString(),s.slice(),ae.whiteArr,-2),s[1]-=.3,Kt.addSingle(MATH.doTime(this.life),s,ae.whiteArr,-1),this.life<=0}}class Oe{constructor(e){this.collectTimer=0,this.lastCollectedAmount=0,this.life=45}die(e){let t=3*T,i=4*o.sin(t),n=4*o.cos(t),s=[g.body.position.x+i,g.body.position.y+.1,g.body.position.z+n];le.explosions.push(new ce({col:[.9,.9,.9],pos:s,life:.4,size:1,speed:.25,aftershock:.05,maxAlpha:.5,height:.25})),le.mobs.splice(e,1)}update(){this.life-=f,m.bindBuffer(m.ARRAY_BUFFER,de.starSaw.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.starSaw.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12);let e=3.5*T,t=4*o.sin(e),i=4*o.cos(e),n=[g.body.position.x+t,g.body.position.y+.1,g.body.position.z+i,10*T];m.uniform4fv(St.mob_instanceInfo1,n),m.uniform2f(St.mob_instanceInfo2,.65,1),m.drawElements(m.TRIANGLES,de.starSaw.indexAmount,m.UNSIGNED_SHORT,0);for(let e in le.bubbles){let t=le.bubbles[e];vec3.sqrDist(n,t.pos)<=5&&t.pop()}for(let e in le.fuzzBombs){let t=le.fuzzBombs[e];vec3.sqrDist(n,t.pos)<=4&&t.pop()}for(let e in le.tokens){let t=le.tokens[e];vec3.sqrDist(n,t.pos)<=4&&!(le.tokens[e]instanceof ni)&&t.collect()}for(let e in le.mobs){let t=le.mobs[e];t.health&&"attack"===t.state&&t.starSawHitTimer<=0&&vec3.sqrDist(n,t.pos)<=6&&(t.starSawHitTimer=.75,t.damage(.3*g.attackTotal))}if(this.collectTimer-=f,this.collectTimer<=0&&g.fieldIn){this.collectTimer=.1;let e=o.round(n[0]-ti[g.fieldIn].x),t=o.round(n[2]-ti[g.fieldIn].z),i=o.min(Hi({x:e,z:t,pattern:[[0,0],[-1,0],[1,0],[0,1],[0,-1]],amount:5+.05*g.attackTotal,stackHeight:.5,instantConversion:1}),g.pollen);i&&(g.pollen-=i,g.honey+=o.ceil(i*g.honeyPerPollen))}return this.life<=0}}class Ye{constructor(e){this.guidingstarinstance=!0,this.life=600,this.field=e,this.center=[ti[this.field].x+.5*ti[this.field].width,ti[this.field].y+3,ti[this.field].z+.5*ti[this.field].length],this.particleTimer=0}die(e){le.mobs.splice(e,1)}update(){g.fieldIn===this.field&&g.addEffect("guidingStarAura"),this.life-=f,m.bindBuffer(m.ARRAY_BUFFER,de.guidingStar.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.guidingStar.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12);let e=.75*T,t=o.sin(e)*ti[this.field].width*.4,i=o.cos(e)*ti[this.field].length*.4,n=[this.center[0]+t,this.center[1],this.center[2]+i,2*T];return m.uniform4fv(St.mob_instanceInfo1,n),m.uniform2f(St.mob_instanceInfo2,1.5,.4),m.drawElements(m.TRIANGLES,de.guidingStar.indexAmount,m.UNSIGNED_SHORT,0),this.particleTimer-=f,this.particleTimer<=0&&(o.random()<.25?$t.add({x:n[0]+MATH.random(-2,2),y:n[1]+MATH.random(-.5,.5),z:n[2]+MATH.random(-2,2),vx:MATH.random(-.1,.1),vy:0,vz:MATH.random(-.1,.1),grav:1,size:30,col:[1,.8,0],life:1.5,rotVel:MATH.random(-3,3),alpha:.25}):$t.add({x:ti[this.field].x+o.random()*ti[this.field].width,y:ti[this.field].y+3,z:ti[this.field].z+o.random()*ti[this.field].length,vx:MATH.random(-.1,.1),vy:0,vz:MATH.random(-.1,.1),grav:1,size:60,col:[1,.8,0],life:1.5,rotVel:MATH.random(-3,3),alpha:.5}),this.particleTimer=.2),this.life<=0}}class Ge{constructor(e){this.life=3,this.field=e,this.center=[ti[this.field].x+MATH.random(.25,.75)*ti[this.field].width,ti[this.field].y+1.5,ti[this.field].z+MATH.random(.25,.75)*ti[this.field].length],this.pos=[g.body.position.x,ti[this.field].y+1.5,g.body.position.z,10]}die(e){le.mobs.splice(e,1)}update(){if(this.life-=f,this.life<2.5&&(this.pos[0]+=(this.center[0]-this.pos[0])*f,this.pos[2]+=(this.center[2]-this.pos[2])*f,this.pos[3]*=.98),this.life<1&&!this.startShower){let e=this;for(let t=0;t<3.5;t+=.35)window.setTimeout((function(){le.mobs.push(new qe(e))}),1e3*t);this.startShower=!0}return m.bindBuffer(m.ARRAY_BUFFER,de.levitatingStarShower.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.levitatingStarShower.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1.5*o.min(3*this.life,1),o.min(.5*(3-this.life),1)),m.drawElements(m.TRIANGLES,de.levitatingStarShower.indexAmount,m.UNSIGNED_SHORT,0),this.life<=0}}class qe{constructor(e){this.life=2.25,this.field=e.field,this.land=e.center.slice(),this.land[0]+=MATH.random(-3,3),this.land[1]-=1,this.land[2]+=MATH.random(-3,3),this.x=o.round(this.land[0]-ti[this.field].x),this.z=o.round(this.land[2]-ti[this.field].z),this.pos=[this.land[0]+3,this.land[1]+10,this.land[2]+3],this.theta=6.2*o.random(),this.dir=vec3.sub([],this.pos,this.land),vec3.normalize(this.dir,this.dir)}die(e){if(Hi({x:this.x,z:this.z,pattern:[[0,0],[1,0],[-1,0],[0,-1],[0,1]],amount:30,stackHeight:.465+.7*o.random(),field:this.field,instantConversion:1}),vec3.sqrDist(this.pos,[g.body.position.x,g.body.position.y,g.body.position.z])<=6){let e=o.min(.1*g.convertTotal,g.pollen);g.pollen-=e,g.extraInfo.enablePollenText&&Kt.add(o.ceil(o.abs(e)),[g.body.position.x,g.body.position.y+2*o.random()+.5,g.body.position.z],ae.honey,0,"+"),g.addEffect("inspire")}le.mobs.splice(e,1)}update(){return this.life-=f,this.life<.75&&(this.life-=f,this.pos[3]+=5*f,vec3.scaleAndAdd(this.pos,this.pos,this.dir,30*-f)),this.theta+=20*f,this.pos[3]=this.theta,de.explosions.instanceData.push(this.land[0],this.land[1]+.1,this.land[2],0,10,0,3*(2.25-this.life),1.5,.001),m.bindBuffer(m.ARRAY_BUFFER,de.fallingStar.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.fallingStar.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,.8,1),m.drawElements(m.TRIANGLES,de.fallingStar.indexAmount,m.UNSIGNED_SHORT,0),this.life<=0}}class We{constructor(e,t){let i=g.tidalSurge?3.4:.85*g.tidePower+.45;this.pos=[...e,o.atan2(t[2],t[0])+.5*o.PI],this.vel=t,this.lifespan=3.5+.25*i,this.life=3.5+.25*i,this.y=e[1],vec3.scale(t,t,i+5),this.size=i,this.collectTimer=0,this.balloonsHit=[],this.hitBees=[]}die(e){le.mobs.splice(e,1)}update(){this.life-=f,this.pos[0]+=this.vel[0]*f,this.pos[2]+=this.vel[2]*f,this.pos[1]=o.min(this.y,this.y-(this.lifespan-this.life)*this.size)+.35*o.sin(12.5*T)*this.size;for(let e in le.bees){let t=le.bees[e];if(this.hitBees.indexOf(e)<0&&o.abs(t.pos[0]-this.pos[0])+o.abs(t.pos[1]-this.y)+o.abs(t.pos[2]-this.pos[2])<1){le.explosions.push(new ce({col:[.2,.5,1],pos:[this.pos[0],this.y,this.pos[2]],life:.5,size:1.2,speed:.35,aftershock:.005})),this.hitBees.push(e);let i=o.ceil(o.min(g.pollen,1e4+10*t.convertAmount*g[K[t.type].color+"ConvertRate"]));g.pollen-=i,g.honey+=o.ceil(i*g.honeyPerPollen),i&&Kt.add(o.ceil(i*g.honeyPerPollen)+"",[t.pos[0],t.pos[1]+.75,t.pos[2]],ae.honey,1,"⇆")}}for(let e in le.bubbles){let t=le.bubbles[e];vec3.sqrDist(this.pos,t.pos)<=4.5*this.size&&t.pop()}for(let e in le.fuzzBombs){let t=le.fuzzBombs[e];vec3.sqrDist(this.pos,t.pos)<=3.5*this.size&&t.pop()}for(let e in le.tokens){let t=le.tokens[e];"Balloon"!==t.from&&vec3.sqrDist(this.pos,t.pos)<=3.5*this.size&&!(le.tokens[e]instanceof ni)&&t.collect()}if(this.size>=3.25)for(let e in le.balloons){let t=le.balloons[e];if(o.random()<.3333&&"float"===t.state&&this.balloonsHit.indexOf(t.id)<0&&o.abs(this.pos[0]-t.pos[0])+o.abs(this.pos[2]-t.pos[2])<=.8*this.size){this.balloonsHit.push(t.id),le.explosions.push(new ce({col:[.1,.5,1],pos:[this.pos[0],this.y+4,this.pos[2]],life:.5,size:1.5*t.displaySize,speed:.4,aftershock:.01}));let i=o.round(o.min(t.pollen,.01*t.cap));t.pollen-=i;let n=o.round(i*(t.golden?1.05:1)/3),s=o.random()*MATH.TWO_PI;if(n)for(let e=s;e<MATH.TWO_PI+s;e+=MATH.TWO_PI/3)le.tokens.push(new oi(30,[this.pos[0]+1.5*o.cos(e),ti[t.field].y+1,this.pos[2]+1.5*o.sin(e)],"honey",n,!0,"Balloon"));g.addEffect("tideBlessing",(t.golden?45:30)/14400*2),t.pollen<=0&&t.die(e,!0)}}if(m.bindBuffer(m.ARRAY_BUFFER,de.wave.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.wave.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,this.size,.6),m.drawElements(m.TRIANGLES,de.wave.indexAmount,m.UNSIGNED_SHORT,0),this.collectTimer-=f,this.collectTimer<=0&&g.fieldIn){this.collectTimer=.35,Hi({x:o.round(this.pos[0]-ti[g.fieldIn].x),z:o.round(this.pos[2]-ti[g.fieldIn].z),pattern:[[0,0],[-1,0],[1,0],[0,1],[0,-1],[-1,-1],[1,1],[-1,1],[1,-1]],amount:{r:this.size*this.life*.5,w:2*this.size*this.life,b:3*this.size*this.life},yOffset:2.2,stackHeight:.5+.85*o.random()})}return this.life<=0}}class Ve{constructor(e){this.color=e,this.trail1=new ei.Trail({length:15,size:.55,triangle:!0,color:[1,1,1,1]}),this.trail2=new ei.Trail({length:15,size:.2,triangle:!0,color:"red"===e?[1,0,0,1]:[0,0,1,1]}),this.path=[];for(let t in le.bees)["moveToSleep","sleep"].indexOf(le.bees[t].state)<0&&vec3.sqrDist(le.bees[t].pos,[g.body.position.x,g.body.position.y,g.body.position.z])<900&&K[le.bees[t].type].color===e&&this.path.push(le.bees[t].pos);this.t=0,this.spliceTimer=3,this.lastPoint=0}die(e){this.trail1.splice=!0,this.trail2.splice=!0,le.mobs.splice(e,1)}update(){if(this.t+=5*f,this.spliceTimer<=0)return!0;if(o.ceil(this.t)>=this.path.length)return this.spliceTimer-=f,this.trail1.addPos([]),void this.trail2.addPos([]);let e=this.path[0|this.t],t=this.path[o.ceil(this.t)],i=this.t-(0|this.t),n=[MATH.lerp(e[0],t[0],i),MATH.lerp(e[1],t[1],i),MATH.lerp(e[2],t[2],i)];if(this.trail1.addPos(n),this.trail2.addPos(n),(0|this.t)!==this.lastPoint&&g.fieldIn){this.lastPoint=0|this.t;let e=.5*this.lastPoint+4;Hi({x:o.round(n[0]-ti[g.fieldIn].x),z:o.round(n[2]-ti[g.fieldIn].z),pattern:[[0,0],[1,1],[1,-1],[-1,1],[-1,-1],[1,0],[-1,0],[0,1],[0,-1],[2,0],[-2,0],[0,-2],[0,2],[2,1],[2,-1],[-2,1],[-2,-1],[1,-2],[1,2],[-1,2],[-1,-2],[-3,0],[3,0],[0,-3],[0,3]],amount:e,stackOffset:.4+o.random()*(.05*e-2+.3)})}}}class Xe{constructor(e,t){for(this.bee=e.bee,this.delay=t,this.life=.5,this.center=[e.x,e.z],this.field=e.field;;){let e=o.round(MATH.random(-7,7))+this.center[0],t=o.round(MATH.random(-7,7))+this.center[1];if(e>=0&&e<ti[this.field].width&&t>=0&&t<ti[this.field].length&&g.beamStormRayData.indexOf(e.toString()+","+t.toString())<15){g.beamStormRayData.push(e.toString()+","+t.toString()),this.x=e,this.z=t;break}}this.pos=[ti[this.field].x+this.x,ti[this.field].y,ti[this.field].z+this.z]}die(e){le.mobs.splice(e,1)}update(){if(!(this.delay>0))return this.life-=f,de.cylinder_explosions.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1,1,this.bee.gifted?1:0,1,.1,1e4),this.life<=0;this.delay-=f,this.delay<=0&&Hi({x:this.x,z:this.z,pattern:[[0,0]],amount:1e5,field:this.field,instantConversion:this.bee.gifted?1:0,depleteAll:!0})}}class Ze{constructor(){this.field=g.fieldIn,this.size=(g.gummyBallSize-1)/1.5,this.size=this.size*this.size*this.size,this.flowers=[];let e=2.5*this.size+2|0;for(let t=-e;t<=e;t++)for(let i=-e;i<=e;i++){let o=t,n=i;t*t+i*i<=e*e&&this.flowers.push([o,n])}this.vel=g.bodyDir.slice(),vec3.scale(this.vel,this.vel,17.5),this.life=15*this.size+.5,this.collectTimer=0,this.rad=.35*this.size+.5,this.pos=[g.body.position.x,ti[g.fieldIn].y+.5+this.rad,g.body.position.z,0],this.trail=new ei.Trail({length:0|MATH.lerp(20,50,this.size),size:this.rad,triangle:!0,color:[1,.2,1,1],fadeTo:[.1,1,.6,0]}),this.bounds={minX:ti[this.field].x+this.rad,maxX:ti[this.field].x+ti[this.field].width-this.rad,minZ:ti[this.field].z+this.rad,maxZ:ti[this.field].z+ti[this.field].length-this.rad},this.amount=0}die(e){this.trail.splice=!0,le.mobs.splice(e,1)}update(){this.life-=f,this.pos[0]<=this.bounds.minX&&(this.pos[0]=this.bounds.minX,this.vel[0]=-this.vel[0],g.addEffect("gummyBallCombo",!1,!1,void 0,2),this.amount+=2),this.pos[0]>=this.bounds.maxX&&(this.pos[0]=this.bounds.maxX,this.vel[0]=-this.vel[0],g.addEffect("gummyBallCombo",!1,!1,void 0,2),this.amount+=2),this.pos[2]<=this.bounds.minZ&&(this.pos[2]=this.bounds.minZ,this.vel[2]=-this.vel[2],g.addEffect("gummyBallCombo",!1,!1,void 0,2),this.amount+=2),this.pos[2]>=this.bounds.maxZ&&(this.pos[2]=this.bounds.maxZ,this.vel[2]=-this.vel[2],g.addEffect("gummyBallCombo",!1,!1,void 0,2),this.amount+=2),vec3.scaleAndAdd(this.pos,this.pos,this.vel,f);for(let e in le.tokens){let t=le.tokens[e];vec3.sqrDist(this.pos,t.pos)<=this.rad*this.rad*1.5&&!(le.tokens[e]instanceof ni)&&(t.collect(),g.addEffect("gummyBallCombo",!1,!1,void 0,"honey"===t.type?3:1),this.amount+="honey"===t.type?3:1)}for(let e in le.bubbles){let t=le.bubbles[e];vec3.sqrDist(this.pos,t.pos)<=5.5&&t.pop()}for(let e in le.marks){let t=le.marks[e];vec3.sqrDist(this.pos,t.pos)<=25&&T-t.gummyBallHitTimer>1&&(t.gummyBallHitTimer=T,g.addEffect("gummyBallCombo",!1,!1,void 0,"precise"===t.type?30:8),this.amount+="precise"===t.type?30:8)}if(this.trail.addPos([this.pos[0],this.pos[1],this.pos[2]]),m.bindBuffer(m.ARRAY_BUFFER,de.gummyBall.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.gummyBall.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,2*this.rad,.5*this.life),m.drawElements(m.TRIANGLES,de.gummyBall.indexAmount,m.UNSIGNED_SHORT,0),Kt.addSingle("x"+MATH.addCommas(this.amount+""),this.pos,ae.whiteArr,-3,!0,!1),this.collectTimer-=f,this.collectTimer<=0){this.collectTimer=.15,Hi({x:o.round(this.pos[0]-ti[this.field].x),z:o.round(this.pos[2]-ti[this.field].z),pattern:this.flowers,amount:{r:3,w:10,b:3},stackHeight:.75,field:this.field,gooTrail:!0,multiplier:this.size+1})}return this.life<=0}}class Je{constructor(e=g.flowerIn.x,t=g.flowerIn.z,i=0,o){this.isBigFatBully=o,this.delay=i,this.field=g.fieldIn,this.x=e,this.z=t,this.pos=[ti[this.field].x+this.x,ti[this.field].y+.51,ti[this.field].z+this.z],this.y=this.pos[1]+25,this.glow=0,this.vel=0,this.displaySize=o?6:4.5}die(e){if(this.isBigFatBully)vec3.sqrDist(this.pos,[g.body.position.x,g.body.position.y,g.body.position.z])<=this.displaySize&&g.damage(100);else{Hi({x:this.x,z:this.z,pattern:[[-2,-1],[-2,0],[-2,1],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[0,-2],[0,-1],[0,0],[0,1],[0,2],[1,-2],[1,-1],[1,0],[1,1],[1,2],[2,-1],[2,0],[2,1]],amount:50,yOffset:2.25,stackHeight:.75+.25*o.random(),field:this.field,multiplier:g.pollenFromCoconuts});let e=o.ceil(o.min(g.convertTotal,g.pollen)/5);if(vec3.sqrDist(this.pos,[g.body.position.x,g.body.position.y,g.body.position.z])<=this.displaySize&&(g.stats.fallingCoconuts++,e)){g.pollen-=o.ceil(o.min(g.convertTotal,g.pollen));for(let t=0;t<MATH.TWO_PI;t+=MATH.TWO_PI/5)le.tokens.push(new oi(30,[this.pos[0]+o.cos(t)*this.displaySize*.6,ti[this.field].y+1,this.pos[2]+o.sin(t)*this.displaySize*.6],"honey",o.ceil(e),!0,"Coconut"))}let t=this.displaySize+1;t*=t;for(let e in le.mobs)"attack"===le.mobs[e].state&&vec3.sqrDist(this.pos,le.mobs[e].pos)<t&&le.mobs[e].damage(2500)}le.mobs.splice(e,1)}update(){if(!(this.delay>0))return this.vel-=20*f,this.glow+=f,this.y+=this.vel*f,de.cylinder_explosions.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.isBigFatBully?1:0,this.isBigFatBully?0:1,0,.75*this.glow,this.displaySize,.001),de.explosions.instanceData.push(this.pos[0],this.y,this.pos[2],1,1,1,.15,-this.displaySize-1,1),de.explosions.instanceData.push(this.pos[0],this.y,this.pos[2],.3*g.isNight,.1*g.isNight,0,1,this.displaySize,1),this.y+this.displaySize<this.pos[1];this.delay-=f}}class je{constructor(){this.life=2.5,this.pos=[g.body.position.x,g.body.position.y,g.body.position.z,0],this.y=this.pos[1]+2,this.r=15}die(e){let t=o.ceil(o.min(g.convertTotal,g.pollen));g.honey+=o.ceil(2*t*g.honeyPerPollen),g.pollen-=t,g.addMessage("+"+MATH.addCommas(o.ceil(2*t*g.honeyPerPollen)+"")+" Honey (from Diamond Drain)"),le.mobs.splice(e,1)}update(){return this.life-=f,this.life<.1?this.pos[1]-=40*f:this.pos[1]+=(this.y-this.pos[1])*f*4,this.life>.7?(this.pos[3]+=(this.r-this.pos[3])*f*4,m.bindBuffer(m.ARRAY_BUFFER,de.drainingDiamond.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.drainingDiamond.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1.6,.75),m.drawElements(m.TRIANGLES,de.drainingDiamond.indexAmount,m.UNSIGNED_SHORT,0)):(m.bindBuffer(m.ARRAY_BUFFER,de.shiningDiamond.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.shiningDiamond.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1.6,1),m.drawElements(m.TRIANGLES,de.shiningDiamond.indexAmount,m.UNSIGNED_SHORT,0)),this.life<=0}}class Qe{constructor(e,t,i,o,n){this.windyBee=n,n&&(this.trails=[new ei.ConstantTrail({length:9,size:.4,color:[.5,.5,.5,.6]}),new ei.ConstantTrail({length:9,size:.4,color:[.5,.5,.5,.6],vertical:!0})]),this.life=o,this.field=e,this.x=t,this.z=i,this._x=t,this._z=i,this.moveTo=[ti[this.field].x+this.x,ti[this.field].z+this.z],this.moveDir=[0,0],this.y=ti[this.field].y+.55+4,this.pos=[ti[this.field].x+this.x,this.y-10,ti[this.field].z+this.z],this.flowers=[],this.timer=0;for(let e=-3;e<=3;e++)for(let t=-3;t<=3;t++)e*e+t*t<=4&&this.flowers.push([e,t])}die(e){this.windyBee&&(this.trails[0].splice=!0,this.trails[1].splice=!0),le.mobs.splice(e,1)}update(){if(this.pos[1]-.1<this.y&&(this.pos[1]+=(this.y-this.pos[1])*f*5),this.life-=f,this.pos[0]+=this.moveDir[0]*f,this.pos[2]+=this.moveDir[1]*f,this.x=o.round(this.pos[0]-ti[this.field].x),this.z=o.round(this.pos[2]-ti[this.field].z),this.timer-=f,this.timer<=0){if(this.timer=.15,$t.add({x:this.pos[0]+MATH.random(-1.5,1.5),y:this.pos[1]-.75,z:this.pos[2]+MATH.random(-1.5,1.5),vx:0,vy:-6,vz:0,grav:-7,size:MATH.random(30,60),col:[.6,.6,.7],life:.75,rotVel:MATH.random(-6,6),alpha:25}),g.fieldIn===this.field)for(let e in this.flowers){let t=this.flowers[e],i=this.x+t[0],o=this.z+t[1];i>=0&&i<ti[this.field].width&&o>=0&&o<ti[this.field].length&&Ci(this.field,i,o,(function(e){e.height+=.25}),!0,!1,!1)}vec3.sqrDist(this.pos,[g.body.position.x,g.body.position.y+4,g.body.position.z])<=6.25&&(g.addEffect("cloudBoost",.1),this.windyBee&&(le.mobs.push(new Pe(this.field,this.pos.slice())),this.trails[0].splice=!0,this.trails[1].splice=!0,this.windyBee=!1))}let e=.7*g.isNight;return de.explosions.instanceData.push(this.pos[0]-.45,this.pos[1],this.pos[2],e,e,e,.8,2.1,.9),de.explosions.instanceData.push(this.pos[0]+.45,this.pos[1],this.pos[2]+.7,e,e,e,.8,1.8,.9),de.explosions.instanceData.push(this.pos[0]-.5,this.pos[1],this.pos[2]-.8,e,e,e,.8,1.9,.9),de.explosions.instanceData.push(this.pos[0]+.75,this.pos[1],this.pos[2]-.3,e,e,e,.8,2.2,.9),o.abs(this.pos[0]-this.moveTo[0])+o.abs(this.pos[2]-this.moveTo[1])<1&&(this.flowerTo=this.moveTo.slice(),this.flowerTo[0]-=ti[this.field].x,this.flowerTo[1]-=ti[this.field].z,this.moveTo=[ti[this.field].x+(o.random()*ti[this.field].width|0),ti[this.field].z+(o.random()*ti[this.field].length|0)],this.moveDir=[this.moveTo[0]-this.pos[0],this.moveTo[1]-this.pos[2]],vec2.normalize(this.moveDir,this.moveDir),this.windyBee&&vec3.scale(this.moveDir,this.moveDir,1.25)),this.windyBee&&(de.bees.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1.5,this.moveDir[0],0,this.moveDir[1],v,K.windy.u,K.windy.v,K.windy.meshPartId),A%12||(this.trails[0].addPos(this.pos.slice()),this.trails[1].addPos(this.pos.slice()))),this.life<=0}}class Ke{constructor(e){this.life=g.hasteStacks+7.5+.5*e,this.field=g.fieldIn,this.speed=1+.25*g.hasteStacks+.05*e,this.x=g.flowerIn.x,this.z=g.flowerIn.z,this._x=g.flowerIn.x,this._z=g.flowerIn.z,this.moveTo=[ti[this.field].x+this.x,ti[this.field].z+this.z],this.moveDir=[0,0],this.pos=[ti[this.field].x+this.x,ti[this.field].y+.5,ti[this.field].z+this.z],this.flowers=[],this.timer=0;for(let e=-3;e<=3;e++)for(let t=-3;t<=3;t++)e*e+t*t<=4&&this.flowers.push([e,t])}die(e){le.mobs.splice(e,1)}update(){this.life-=f,this.pos[0]+=this.moveDir[0]*f,this.pos[2]+=this.moveDir[1]*f,this.x=o.round(this.pos[0]-ti[this.field].x),this.z=o.round(this.pos[2]-ti[this.field].z),this.timer-=f,this.timer<=0&&(this.timer=.25,Hi({x:this.x,z:this.z,pattern:[[-2,-1],[-2,0],[-2,1],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[0,-2],[0,-1],[0,0],[0,1],[0,2],[1,-2],[1,-1],[1,0],[1,1],[1,2],[2,-1],[2,0],[2,1]],amount:7.5,field:this.field})),o.abs(this.pos[0]-this.moveTo[0])+o.abs(this.pos[2]-this.moveTo[1])<1&&(this.moveTo=[ti[this.field].x+(o.random()*ti[this.field].width|0),ti[this.field].z+(o.random()*ti[this.field].length|0)],this.moveDir=[this.moveTo[0]-this.pos[0],this.moveTo[1]-this.pos[2]],vec2.normalize(this.moveDir,this.moveDir),vec2.scale(this.moveDir,this.moveDir,this.speed));for(let e in le.tokens){let t=le.tokens[e];vec3.sqrDist(this.pos,t.pos)<=16&&!(le.tokens[e]instanceof ni)&&t.collect()}for(let e in le.bubbles){let t=le.bubbles[e];vec3.sqrDist(this.pos,t.pos)<=16&&t.pop()}for(let e in le.fuzzBombs){let t=le.fuzzBombs[e];vec3.sqrDist(this.pos,t.pos)<=16&&t.pop()}return m.bindBuffer(m.ARRAY_BUFFER,de.tornado.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.tornado.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),this.pos[3]=T*(this.speed+5),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,.65,.7),m.drawElements(m.TRIANGLES,de.tornado.indexAmount,m.UNSIGNED_SHORT,0),this.life<=0}}class $e{constructor(e,t=g.fieldIn,i=g.flowerIn.x,o=g.flowerIn.z,n=0,s){this.growth=n,this.maxGrowth={paper:600,plastic:1020,candy:1500,redClay:1920,blueClay:1920,tacky:2340,pesticide:2700,petal:3060,plenty:3600}[e],this.invGrowth=1/this.maxGrowth,this.height={paper:1.5,plastic:1.175,candy:1.175,redClay:1.175,blueClay:1.175,tacky:1.175,pesticide:1.5,petal:1.175,plenty:2.4}[e],this.type=e,this.field=t,this.x=i,this.z=o,this.pos=[ti[this.field].x+this.x,ti[this.field].y+.5,ti[this.field].z+this.z,0],this.hasGrown=!1,this.glisterTimer=0,this.glistering=s,this.flowers=[];for(let e=-5;e<=5;e++)for(let t=-5;t<=5;t++)e*e+t*t<=30.25&&e+this.x>=0&&e+this.x<ti[this.field].width&&t+this.z>=0&&t+this.z<ti[this.field].length&&this.flowers.push([e,t]);let r=this;switch(j["harvest_"+this.type+"_planter"]={minX:this.pos[0]-2,maxX:this.pos[0]+2,minY:this.pos[1]-1,maxY:this.pos[1]+4,minZ:this.pos[2]-2,maxZ:this.pos[2]+2,isMachine:!0,message:"Harvest "+MATH.doGrammar(this.type+"Planter")+"<br>(not fully grown)",func:function(e){r.harvested=!0}},this.growthRate=s?1.25:1,this.type){case"candy":"StrawberryField"!==this.field&&"CoconutField"!==this.field&&"PineapplePatch"!==this.field||(this.growthRate*=1.25);break;case"redClay":ti[this.field].generalColorComp.r>.5&&(this.growthRate*=1.25);break;case"blueClay":ti[this.field].generalColorComp.b>.5&&(this.growthRate*=1.25);break;case"tacky":"CoconutField"!==this.field&&"DandelionField"!==this.field&&"MushroomField"!==this.field&&"SunflowerField"!==this.field&&"BlueFlowerField"!==this.field||(this.growthRate*=1.25);break;case"pesticide":"StrawberryField"!==this.field&&"SpiderField"!==this.field&&"BambooField"!==this.field||(this.growthRate*=1.35);break;case"petal":ti[this.field].generalColorComp.w>.5&&(this.growthRate*=1.5);break;case"plenty":"PepperPatch"!==this.field&&"StumpField"!==this.field&&"CoconutField"!==this.field&&"MountainTopField"!==this.field||(this.growthRate*=1.5)}ti[this.field].planter=this}beeSipped(e){this.growth+=.5*e.planterSipTime*("shy"===e.type?e.gifted?2.5:2:1),g.addEffect(ti[this.field].nectarType,e.planterSipTime*g.nectarMultiplier*("shy"===e.type?e.gifted?2.5:2:1)/21600)}die(e){ti[this.field].degration=o.min(ti[this.field].degration+.00027777777*(this.maxGrowth/this.growthRate+600)*2,1),ti[this.field].planter=void 0,j["harvest_"+this.type+"_planter"].minY=1e5,j["harvest_"+this.type+"_planter"].maxY=1e5,"paper"!==this.type&&(se[this.type+"Planter"].amount++,g.updateInventory());let t,i=this.growth/this.maxGrowth;switch(o.random()<i*i*i*i&&le.mobs.push(new rt(this.field,this.x,this.z,300,o.max({paper:1,plastic:2,candy:3,redClay:4,blueClay:4,tacky:5,pesticide:6,petal:7,plenty:8}[this.type]*i+o.round(MATH.random(-1,1))|0,1),"puffshroom")),this.type){case"paper":t={comforting:.75,invigorating:.75,satisfying:.75,motivating:.75,refreshing:.75};break;case"plastic":t={comforting:1,invigorating:1,satisfying:1,motivating:1,refreshing:1};break;case"candy":t={comforting:1,invigorating:1,satisfying:1,motivating:1.25,refreshing:1};break;case"redClay":t={comforting:1,invigorating:1.25,satisfying:1.25,motivating:1,refreshing:1};break;case"blueClay":t={comforting:1.25,invigorating:1,satisfying:1,motivating:1,refreshing:1.25};break;case"tacky":t={comforting:1.3,invigorating:1,satisfying:1.3,motivating:1,refreshing:1};break;case"pesticide":t={comforting:1,invigorating:1,satisfying:1.35,motivating:1.35,refreshing:1};break;case"petal":t={comforting:1.5,invigorating:1,satisfying:1.5,motivating:1,refreshing:1};break;case"plenty":t={comforting:1.5,invigorating:1.5,satisfying:1.5,motivating:1.5,refreshing:1.5}}let n=this.maxGrowth*i*i*3*t[ti[this.field].nectarType.replace("Nectar","")]*g.nectarMultiplier;g.addEffect(ti[this.field].nectarType,n/21600),g.stats.hoursOfNectar+=n/3600,g.stats.minutesOfNectar+=n/60,g.stats["hoursOf"+MATH.doGrammar(ti[this.field].nectarType).replace(" ","")]+=n/3600,g.stats["minutesOf"+MATH.doGrammar(ti[this.field].nectarType).replace(" ","")]+=n/60;let s=o.ceil({paper:9,plastic:13,candy:16,redClay:19,blueClay:19,tacky:22,pesticide:25,petal:27,plenty:30}[this.type]*i*i*(1-.666*ti[this.field].degration)),r=[],a={};for(let e in se)e.toLowerCase().indexOf("egg")>-1||e.toLowerCase().indexOf("pass")>-1||e.toLowerCase().indexOf("drive")>-1||e.toLowerCase().indexOf("vial")>-1||(r.push(e),a[e]=1/se[e].value);r.splice(r.indexOf("smoothDice"),1),r.splice(r.indexOf("loadedDice"),1),r.splice(r.indexOf("moonCharm"),1),r.splice(r.indexOf("turpentine"),1),"CoconutField"!==this.field&&(r.splice(r.indexOf("coconut"),1),r.splice(r.indexOf("tropicalDrink"),1)),"PineTreeForest"===this.field?a.whirligig*=45:a.whirligig*=.25,"BlueFlowerField"!==this.field&&"RoseField"!==this.field&&"SunflowerField"!==this.field||(a.honeysuckle*=10),"SpiderField"===this.field||"CactusField"===this.field?a.stinger*=2.5:r.splice(r.indexOf("stinger"),1),"StumpField"===this.field&&(r.splice(r.indexOf("strawberry"),1),r.splice(r.indexOf("redExtract"),1)),"pesticide"!==this.type?(r.splice(r.indexOf("bitterberry"),1),r.splice(r.indexOf("neonberry"),1)):(a.bitterberry*=28,a.neonberry*=25,a.royalJelly*=1.5,a.stinger*=2,a.causticWax*=4),"redClay"===this.type&&(a.blueberry*=.25,a.blueExtract=0,a.redExtract*=2.25,a.strawberry*=2,a.pineapple*=.5,a.sunflowerSeed*=.5,a.treat*=.5,a.softWax*=2.75,a.hardWax*=2.15,a.swirledWax*=1.75,a.causticWax*=1.75),"blueClay"===this.type&&(a.strawberry*=.25,a.redExtract=0,a.blueExtract*=2.25,a.blueberry*=2,a.pineapple*=.5,a.sunflowerSeed*=.5,a.treat*=.5,a.microConverter*=7,a.honeysuckle*=7,r.splice(r.indexOf("softWax"),1)),"candy"===this.type&&(a.gumdrops*=40,a.glue*=30,a.treat=0,r.splice(r.indexOf("purplePotion"),1),r.splice(r.indexOf("superSmoothie"),1)),"paper"===this.type?(r.splice(r.indexOf("glitter"),1),r.splice(r.indexOf("royalJelly"),1),r.splice(r.indexOf("starJelly"),1),r.splice(r.indexOf("purplePotion"),1),r.splice(r.indexOf("superSmoothie"),1),r.splice(r.indexOf("gumdrops"),1),r.splice(r.indexOf("glue"),1)):(a.blueExtract*=1.5,a.redExtract*=1.5,a.glitter*=1.5,a.royalJelly*=2,a.starJelly*=.75),"tacky"===this.type&&(a.sunflowerSeed*=2,a.oil*=1.5,a.fieldDice*=2,a.smoothDice*=1.5,a.loadedDice*=1.25,r.push("smoothDice"),r.push("loadedDice")),"petal"===this.type&&(a.glitter*=4.5,a.royalJelly*=4,a.starJelly*=4,a.gumdrops*=2.5,a.glue*=3,a.tropicalDrink*=2,a.coconut*=1.5,a.bitterberry*=3,a.fieldDice*=2,a.smoothDice*=1.75,a.loadedDice*=1.5,a.whirligig*=3,r.push("bitterberry"),r.splice(r.indexOf("strawberry"),1),r.splice(r.indexOf("blueberry"),1),r.splice(r.indexOf("redExtract"),1),r.splice(r.indexOf("blueExtract"),1),r.push("smoothDice"),r.push("loadedDice"),r.push("turpentine")),"plenty"===this.type&&(a.gumdrops*=3,a.glitter*=3,a.neonberry*=4,a.bitterberry*=4,a.enzymes*=4,a.oil*=4,a.redExtract*=4,a.blueExtract*=4,a.glue*=3.5,a.tropicalDrink*=3,a.royalJelly*=4,a.starJelly*=6,a.superSmoothie*=3,a.purplePotion*=3,a.coconut*=1.5,a.softWax*=1.75,a.hardWax*=1.8,a.swirledWax*=1.85,a.causticWax*=1.95,a.whirligig*=2,r.push("bitterberry"),r.push("neonberry"),r.push("turpentine"),r.splice(r.indexOf("treat"),1),r.splice(r.indexOf("strawberry"),1),r.splice(r.indexOf("blueberry"),1),r.splice(r.indexOf("sunflowerSeed"),1),r.splice(r.indexOf("pineapple"),1)),a.strawberry*=3.5*ti[this.field].generalColorComp.r,a.redExtract*=2*ti[this.field].generalColorComp.r,a.pineapple*=ti[this.field].generalColorComp.w+.2,a.enzymes*=.5*ti[this.field].generalColorComp.b+.5,a.sunflowerSeed*=ti[this.field].generalColorComp.w+.2,a.oil*=.5*ti[this.field].generalColorComp.r+.5,a.treat*=ti[this.field].generalColorComp.w<.5?.3:2.5,a.blueberry*=3.5*ti[this.field].generalColorComp.b,a.blueExtract*=2*ti[this.field].generalColorComp.b,"PineapplePatch"===this.field&&(a.pineapple*=10,a.enzymes*=17,a.treats*=.15),"PepperPatch"===this.field&&(a.sunflowerSeed*=10),"SunflowerField"===this.field&&(a.sunflowerSeed*=10,a.oil*=17,a.treats*=.15),"CoconutField"===this.field&&(a.coconut*=20,a.tropicalDrink*=20,a.treats*=2);let l=0;for(let e in r)l+=a[r[e]];for(let e in a)a[e]/=l;for(let e=0;e<s;e++){let t,n=0,s=o.random();for(let e in r){if(s<=a[r[e]]+n){t=r[e];break}n+=a[r[e]]}let l=this.flowers[o.random()*this.flowers.length|0],d=this;window.setTimeout((function(){le.tokens.push(new oi(45,[d.pos[0]+l[0],d.pos[1]+.5,d.pos[2]+l[1]],t,0|MATH.random(1,{paper:5,plastic:6,candy:7,redClay:8,blueClay:8,tacky:9,pesticide:9.5,petal:13,plenty:15}[d.type]*(.5*i+.5)/se[t].value+1),!0,"Planter",["tokensFromPlanters"]))}),225*e)}le.planters.splice(e,1)}update(){if(this.growth+=f*this.growthRate*(1-.9*ti[this.field].degration),this.growth>this.maxGrowth){if(!this.hasGrown){this.hasGrown=!0;let e=this;j["harvest_"+this.type+"_planter"]={minX:this.pos[0]-2,maxX:this.pos[0]+2,minY:this.pos[1]-1,maxY:this.pos[1]+4,minZ:this.pos[2]-2,maxZ:this.pos[2]+2,isMachine:!0,message:"Harvest "+MATH.doGrammar(this.type+"Planter"),func:function(t){e.harvested=!0}}}this.growth=this.maxGrowth}return Kt.addSingle(MATH.doGrammar(this.type+"Planter")+" ("+(this.growth*this.invGrowth*100).toFixed(1)+" %)",[this.pos[0],this.pos[1]+this.height+this.displaySize+.5,this.pos[2]],ae.whiteArr,-.6,!1),Kt.addDecalRaw(this.pos[0],this.pos[1]+this.height+this.displaySize+.5,this.pos[2],0,0,...Kt.decalUV.rect,0,.4,0,2.25,.35,0),Kt.addDecalRaw(this.pos[0],this.pos[1]+this.height+this.displaySize+.5,this.pos[2],(this.growth*this.invGrowth*.5-.5)/(this.growth*this.invGrowth),0,...Kt.decalUV.rect,.1,.85,.1,this.growth*this.invGrowth*2.25,.35,0),this.displaySize={paper:1,plastic:1.25,candy:1.3,redClay:1.35,blueClay:1.35,tacky:1.4,pesticide:1.5,petal:1.75,plenty:2}[this.type]*this.growth*this.invGrowth+.3,de.explosions.instanceData.push(this.pos[0],this.pos[1]+this.height+.5*this.displaySize,this.pos[2],.54*ti[this.field].degration*g.isNight,MATH.lerp(.8,.46,ti[this.field].degration)*g.isNight,0,1,this.displaySize,1.03),m.bindBuffer(m.ARRAY_BUFFER,de[this.type+"Planter"].vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de[this.type+"Planter"].indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1,1),m.drawElements(m.TRIANGLES,de[this.type+"Planter"].indexAmount,m.UNSIGNED_SHORT,0),this.glistering&&(this.glisterTimer-=f,this.glisterTimer<0&&(this.glisterTimer=.5,$t.add({x:this.pos[0]+MATH.random(-this.displaySize,this.displaySize),y:this.pos[1]+this.height+.5*this.displaySize+MATH.random(-this.displaySize,this.displaySize),z:this.pos[2]+MATH.random(-this.displaySize,this.displaySize),vx:0,vy:.2*o.random()+.1,vz:0,grav:0,size:MATH.random(30,70),col:[1,1,1],life:2,rotVel:0,rot:MATH.HALF_PI,alpha:.75}))),this.harvested}}class et{constructor(e,t,i,o){this.mesh=o?"goldenRakeScratch":"scratch",this.bee=e,this.life=1,this.field=g.fieldIn,this.x=t,this.z=i,this.pos=[ti[this.field].x+this.x,ti[this.field].y+1,ti[this.field].z+this.z,0],this.targetZ=this.pos[2]+("scratch"===this.mesh?-4:-7)}die(e){le.mobs.splice(e,1)}update(){return this.life-=f,this.life<.8&&(this.pos[2]+=(this.targetZ-this.pos[2])*f*12.5),this.life<=.35&&!this.collectedPollen&&("scratch"===this.mesh?Hi({x:this.x,z:this.z,field:this.field,pattern:[[-2,0],[-2,1],[-2,-1],[-2,-2],[0,0],[0,1],[0,-1],[0,-2],[2,0],[2,1],[2,-1],[2,-2]],amount:40+1.5*this.bee.level,multiplier:g.tabbyLoveStacks}):Hi({x:this.x,z:this.z,field:this.field,pattern:[[-3,-1],[-3,-2],[-3,-3],[-3,-4],[-3,-5],[-3,-6],[-3,-7],[3,-1],[3,-2],[3,-3],[3,-4],[3,-5],[3,-6],[3,-7],[-1,-1],[-1,-2],[-1,-3],[-1,-4],[-1,-5],[-1,-6],[-1,-7],[1,-1],[1,-2],[1,-3],[1,-4],[1,-5],[1,-6],[1,-7]],amount:7}),this.collectedPollen=!0),m.bindBuffer(m.ARRAY_BUFFER,de[this.mesh].vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de[this.mesh].indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,.65,1),m.drawElements(m.TRIANGLES,de[this.mesh].indexAmount,m.UNSIGNED_SHORT,0),this.life<=0}}class tt{constructor(){this.bodyPos=[g.body.position.x,g.body.position.y,g.body.position.z];let e=g.bodyDir.slice(),t=[-e[2],0,e[0]];this.startPos=[2*e[0]+4*t[0],.05,2*e[2]+4*t[2]],this.endPos=[2*e[0]-4*t[0],.05,2*e[2]-4*t[2]],this.control2=vec3.scale([],this.startPos,2),this.control1=vec3.scale([],this.endPos,5.25),this.lifespan=.3,this.life=this.lifespan,this.trail=new ei.Trail({length:15,size:.5,triangle:!0,color:[.8,0,.8,.6],fadeTo:[.5,0,0,.6]}),this.lastPos=[]}die(e){this.trail.splice=!0,le.mobs.splice(e,1)}update(){if(this.waitTimer>0)return this.waitTimer-=f,this.trail.addPos(vec3.add(this.lastPos,this.lastPos,this.lastVel)),this.waitTimer<=0;this.life-=f;let e=MATH.generateBezierCurve(this.endPos,this.control1,this.control2,this.startPos,MATH.constrain(this.life*(1/this.lifespan),0,1));vec3.add(e,e,this.bodyPos),this.trail.addPos(e),this.lastVel=vec3.sub([],this.lastPos,e),this.lastPos=e,this.life<=0&&(this.waitTimer=.5,vec3.scale(this.lastVel,this.lastVel,-.01))}}class it{constructor(e){this.bee=e,this.target=g.attacked.length>0&&g.attacked[o.random()*g.attacked.length|0],this.life=1,this.target&&(this.y=this.target.pos[1]+MATH.random(-4,-1),this.pos=[this.target.pos[0]+MATH.random(-1,1),this.y-5,this.target.pos[2]+MATH.random(-1,1),0])}die(e){le.mobs.splice(e,1)}update(){if(!this.target)return!0;if(this.life-=f,this.life>.5){if(this.pos[1]+=(this.y-this.pos[1])*f*22.5,!this.hitTarget&&this.life<.75){this.hitTarget=!0;let e=.05*this.target.health+(this.bee.attack+g[K[this.bee.type].color+"BeeAttack"])*g.beeAttack;e>1e3&&(e=10*o.sqrt(.1*(e-1e3))+1e3),(!this.target.lastTimeImpaled||T-this.target.lastTimeImpaled>5)&&(this.target.impaledSessionCount=0),e*=1-.0375*o.min(this.target.impaledSessionCount,20),e*=MATH.random(.740740741,1.35),this.target.damage(e),this.target.impaledSessionCount++,this.target.lastTimeImpaled=T}}else this.pos[1]+=(this.y-10-this.pos[1])*f*10;return m.bindBuffer(m.ARRAY_BUFFER,de.spike.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.spike.indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,1,1),m.drawElements(m.TRIANGLES,de.spike.indexAmount,m.UNSIGNED_SHORT,0),this.life<=0}}class ot{constructor(e,t){this.life=t,this.field=e,this.blocks=[];for(let e=0;e<4;e++)this.blocks.push({pos:[ti[this.field].x+(MATH.random(.1,.9)*ti[this.field].width|0),ti[this.field].y+MATH.random(1,4),ti[this.field].z+(MATH.random(.1,.9)*ti[this.field].length|0)],col:[o.round(o.random()),o.round(o.random()),o.round(o.random())],timer:0})}die(e){le.mobs.splice(e,1)}update(){this.life-=f;for(let e in this.blocks){let t=this.blocks[e];t.timer-=f,t.timer<=0&&(t.timer=MATH.random(0,1),t.timer*=t.timer,t._pos=[t.pos[0]+MATH.random(-2,2),t.pos[1]+MATH.random(-1,1),t.pos[2]+MATH.random(-2,2)],t.alpha=MATH.random(.2,.5),t.rad=MATH.random(.5,5),t.hei=MATH.random(.1,1.25)/t.rad),de.cylinder_explosions.instanceData.push(...t._pos,...t.col,t.alpha,t.rad,t.hei)}return this.life<=0}}class nt{constructor(e,t,i){switch(this.field=e,this.vel=t,this.type=i,this.y=ti[this.field].y,this.pos=[g.body.position.x,this.y+.5,g.body.position.z],this.type.replace("JellyBean","")){case"red":this.col=[.85,0,0];break;case"white":this.col=[.9,.9,.9];break;case"blue":this.col=[0,.5,.9];break;case"pink":this.col=[.9,.45,.9];break;case"brown":this.col=[.3,.2,.1];break;case"green":this.col=[0,.5,0];break;case"black":this.col=[.075,.075,.075];break;case"yellow":this.col=[.95,.9,.1]}vec3.scale(this.col,this.col,g.isNight)}die(e){this.pos[0]>ti[this.field].x&&this.pos[0]<ti[this.field].x+ti[this.field].width-1&&this.pos[2]>ti[this.field].z&&this.pos[2]<ti[this.field].z+ti[this.field].length-1&&le.tokens.push(new ii($[this.type].tokenLife,[this.pos[0],this.pos[1]+1.1,this.pos[2]],this.type)),le.mobs.splice(e,1)}update(){return this.vel[1]-=16*f,vec3.scaleAndAdd(this.pos,this.pos,this.vel,f),de.explosions.instanceData.push(...this.pos,...this.col,1,.35,1),this.pos[1]<=this.y}}class st{constructor(e,t){this.amount={basic:5e4,rare:15e4,epic:5e5,legendary:15e5,supreme:3e6,gummy:75e4,moon:1e5}[t],this.invAmount=1/this.amount,this.growth=1,this.pollenBefore=g.stats["pollenFrom"+e]+this.amount,this.type=t,this.field=e,this.pos=[ti[this.field].x+.5*ti[this.field].width,ti[this.field].y+.5,ti[this.field].z+.5*ti[this.field].length,0]}die(e){let t={basic:60,rare:75,epic:95,legendary:120,supreme:150,gummy:90,moon:70}[this.type],i=[],n={};for(let e in se)e.toLowerCase().indexOf("egg")>-1||e.toLowerCase().indexOf("pass")>-1||e.toLowerCase().indexOf("drive")>-1||e.toLowerCase().indexOf("dice")>-1||e.toLowerCase().indexOf("wax")>-1||e.toLowerCase().indexOf("vial")>-1||(i.push(e),n[e]=1/se[e].value);"CoconutField"!==this.field&&(i.splice(i.indexOf("coconut"),1),i.splice(i.indexOf("tropicalDrink"),1)),i.splice(i.indexOf("stinger"),1),"StumpField"===this.field&&(i.splice(i.indexOf("strawberry"),1),i.splice(i.indexOf("redExtract"),1)),i.splice(i.indexOf("bitterberry"),1),i.splice(i.indexOf("neonberry"),1),i.splice(i.indexOf("whirligig"),1),i.splice(i.indexOf("honeysuckle"),1),i.splice(i.indexOf("microConverter"),1),i.splice(i.indexOf("jellyBeans"),1),i.splice(i.indexOf("purplePotion"),1),i.splice(i.indexOf("superSmoothie"),1),n.strawberry*=3.5*ti[this.field].generalColorComp.r,n.redExtract*=2*ti[this.field].generalColorComp.r,n.pineapple*=ti[this.field].generalColorComp.w+.2,n.enzymes*=.5*ti[this.field].generalColorComp.b+.5,n.sunflowerSeed*=ti[this.field].generalColorComp.w+.2,n.oil*=.5*ti[this.field].generalColorComp.r+.5,n.treat*=ti[this.field].generalColorComp.w<.5?.3:1,n.blueberry*=3.5*ti[this.field].generalColorComp.b,n.blueExtract*=2*ti[this.field].generalColorComp.b,n.royalJelly*=4,n.ticket*=.75,"PineapplePatch"===this.field&&(n.pineapple*=6,n.enzymes*=8,n.treats*=.15),"PepperPatch"===this.field&&(n.sunflowerSeed*=6),"SunflowerField"===this.field&&(n.sunflowerSeed*=6,n.oil*=8,n.treats*=.15),"CoconutField"===this.field&&(n.coconut*=7,n.tropicalDrink*=7,n.treats*=1.5),"basic"===this.type&&(i.splice(i.indexOf("redExtract"),1),i.splice(i.indexOf("blueExtract"),1),i.splice(i.indexOf("oil"),1),i.splice(i.indexOf("enzymes"),1),i.splice(i.indexOf("glitter"),1),i.splice(i.indexOf("magicBean"),1),i.splice(i.indexOf("tropicalDrink"),1)),"rare"===this.type&&(n.royalJelly*=1.5,n.redExtract*=3,n.blueExtract*=3,n.oil*=2,n.enzymes*=2,n.magicBean*=1.5,n.treats*=.65,n.pineapple*=.85,n.blueberry*=.85,n.strawberry*=.85,n.sunflowerSeed*=.85),"epic"===this.type&&(n.royalJelly*=2,n.redExtract*=4.5,n.blueExtract*=4.5,n.oil*=3.5,n.enzymes*=3.5,n.magicBean*=2.5,n.tropicalDrink*=1.5,n.glitter*=1.5,n.treats*=.35,n.pineapple*=.65,n.blueberry*=.65,n.strawberry*=.65,n.sunflowerSeed*=.65),"legendary"===this.type&&(n.royalJelly*=2.5,n.redExtract*=6,n.blueExtract*=6,n.oil*=4,n.enzymes*=4,n.magicBean*=2.5,n.tropicalDrink*=2,n.glitter*=1.75,n.treats*=.25,n.pineapple*=.4,n.blueberry*=.4,n.strawberry*=.4,n.sunflowerSeed*=.4),"supreme"===this.type&&(n.royalJelly*=3,n.redExtract*=6,n.blueExtract*=6,n.oil*=5,n.enzymes*=5,n.magicBean*=3,n.tropicalDrink*=2.5,n.glitter*=2,n.treats*=.15,n.pineapple*=.25,n.blueberry*=.25,n.strawberry*=.25,n.sunflowerSeed*=.25),"gummy"===this.type?(i=["gumdrops","glue"],n.glue=8,n.gumdrops=1):(i.splice(i.indexOf("gumdrops"),1),i.splice(i.indexOf("glue"),1)),"moon"===this.type?(i=["treat","moonCharm"],n.moonCharm=4,n.treat=1):i.splice(i.indexOf("moonCharm"),1);let s=0;for(let e in i)s+=n[i[e]];for(let e in n)n[e]/=s;for(let e=0;e<t;e++){let t,s=0,r=o.random();for(let e in i){if(r<=n[i[e]]+s){t=i[e];break}s+=n[i[e]]}let a=this;window.setTimeout((function(){le.tokens.push(new oi(10,[ti[a.field].x+(ti[a.field].width*o.random()|0),ti[a.field].y+1,ti[a.field].z+(ti[a.field].length*o.random()|0),0],t,1,!1,"Sprout",["tokensFromSprouts"]))}),200*e)}le.explosions.push(new ce({col:[1,1,.6],pos:this.pos,life:1,size:10,speed:.1,aftershock:.05,maxAlpha:1,primitive:"cylinder_explosions",height:500})),le.mobs.splice(e,1)}update(){let e=o.max(this.pollenBefore-g.stats["pollenFrom"+this.field],0);return this.growth+=(e*this.invAmount-this.growth)*f*15,Kt.addSingle(MATH.addCommas(e+""),[this.pos[0],this.pos[1]+4,this.pos[2]],ae.whiteArr,-3.5,!1),de.cylinder_explosions.instanceData.push(this.pos[0],this.pos[1],this.pos[2],1,1,.6,.15,5,500),m.bindBuffer(m.ARRAY_BUFFER,de[this.type+"Sprout"].vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de[this.type+"Sprout"].indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,.6+1.6*(1-this.growth),1),m.drawElements(m.TRIANGLES,de[this.type+"Sprout"].indexAmount,m.UNSIGNED_SHORT,0),e<=0}}class rt{constructor(e,t,i,n,s,r,a){this.prevFields=a||[],this.prevFields.push(e),this.type=r,this.life=n,this.field=e,this.x=t,this.z=i,this.pos=[ti[this.field].x+this.x,ti[this.field].y,ti[this.field].z+this.z,o.random()*MATH.TWO_PI],this.level=s,this.pollen=0,this.cap=(55*(this.level*this.level*this.level*this.level-1)+1e3)*(.25*["puffshroom","rarePuffshroom","epicPuffshroom","legendaryPuffshroom",0,"mythicPuffshroom"].indexOf(r)+1)|0,this.invCap=1/this.cap,this.displayScale=.125*(this.level-1)+1,this.flowers=[[-4,-1],[-4,0],[-4,1],[-3,-3],[-3,-2],[-3,-1],[-3,0],[-3,1],[-3,2],[-3,3],[-2,-3],[-2,-2],[-2,-1],[-2,0],[-2,1],[-2,2],[-2,3],[-1,-4],[-1,-3],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[-1,3],[-1,4],[0,-4],[0,-3],[0,-2],[0,-1],[0,0],[0,1],[0,2],[0,3],[0,4],[1,-4],[1,-3],[1,-2],[1,-1],[1,0],[1,1],[1,2],[1,3],[1,4],[2,-3],[2,-2],[2,-1],[2,0],[2,1],[2,2],[2,3],[3,-3],[3,-2],[3,-1],[3,0],[3,1],[3,2],[3,3],[4,-1],[4,0],[4,1]];for(let e=this.flowers.length;e--;)this.flowers[e][0]+=this.x,this.flowers[e][1]+=this.z,this.flowers[e][0]>=0&&this.flowers[e][0]<ti[this.field].width&&this.flowers[e][1]>=0&&this.flowers[e][1]<ti[this.field].length?Si[this.field][this.flowers[e][1]][this.flowers[e][0]].puffshrooms.push(this):this.flowers.splice(e,1)}die(e){if(le.explosions.push(new ce({col:[.6,.5,.1],pos:[this.pos[0],this.pos[1]+.5*(1.75*this.displayScale+.25),this.pos[2]],life:1,size:2*this.displayScale,speed:.2,aftershock:.05})),this.life<=0)return void le.mobs.splice(e,1);let t={honey:7,treat:5,sunflowerSeed:.9*ti[this.field].generalColorComp.w,pineapple:.9*ti[this.field].generalColorComp.w,strawberry:2.2*ti[this.field].generalColorComp.r,blueberry:2.2*ti[this.field].generalColorComp.b},i=this,n={puffshroom:.3,rarePuffshroom:.65,epicPuffshroom:.75,legendaryPuffshroom:.85,mythicPuffshroom:1}[this.type];"SunflowerField"===this.field&&(t.sunflowerSeed+=1.25),"PineapplePatch"===this.field&&(t.pineapple+=1.25),"PepperPatch"===this.field&&(t.sunflowerSeed+=.7),"CoconutField"===this.field&&(t.coconut+=2),this.level>=3&&(t.softWax=(.05*this.level+.05)*n*.25,t.gumdrops=(.06*this.level+.1)*n,t.neonberry=(.02*this.level+.1)*n*.8,t.bitterberry=(.035*this.level+.1)*n*.9),this.level>=5&&(t.fieldDice=(.05*this.level+.08)*n*.175,t.royalJelly=(.04*this.level+.09)*n),this.level>=6&&(t.hardWax=(.05*this.level+.02)*n*.1),this.level>=7&&(t.smoothDice=(.05*this.level+.05)*n*.08),this.level>=11&&(t.glitter=(.07*this.level+.06)*n*.1,t.glue=(.07*this.level+.06)*n*.1),this.level>=13&&(t.loadedDice=.05*this.level*n*.03,t.swirledWax=(.075*this.level+.04)*n*.06),this.level>=14&&(t.causticWax=.075*this.level*n*.06,t.starJelly=.03*this.level*n*.1),"mythicPuffshroom"===this.type&&le.tokens.push(new oi(30,[i.pos[0],i.pos[1]+1,i.pos[2]],"turpentine",1,!0,"Puffshroom"));let s=0;for(let e in t)s+=t[e];for(let e in t)t[e]/=s;for(let e=0,n=MATH.random(2,6)+.5*this.level+2*["puffshroom","rarePuffshroom","epicPuffshroom","legendaryPuffshroom","mythicPuffshroom"].indexOf(this.type);e<n;e++)window.setTimeout((function(){let e=0,n="honey",s=o.random(),r=o.random()*(.15*i.level+4),a=o.random()*MATH.TWO_PI;for(let i in t){if(s<=t[i]+e){n=i;break}e+=t[i]}let l=1;switch(n){case"honey":l=.15*i.cap*MATH.random(.75,1.33333)|0;break;case"treat":l=0|MATH.random(1,.35*i.level+1);break;case"gumdrops":l=0|MATH.random(1,3)}le.tokens.push(new oi(30,[i.pos[0]+o.cos(a)*r,i.pos[1]+1,i.pos[2]+o.sin(a)*r],n,l,!0,"Puffshroom"))}),150*e);for(let e=this.flowers.length;e--;)for(let t in Si[this.field][this.flowers[e][1]][this.flowers[e][0]].puffshrooms)if(Si[this.field][this.flowers[e][1]][this.flowers[e][0]].puffshrooms[t]===this){Si[this.field][this.flowers[e][1]][this.flowers[e][0]].puffshrooms.splice(t,1);break}if(g.stats.puffshrooms++,"puffshroom"!==this.type&&g.stats[this.type+"s"]++,this.life>0)for(let e=0,t=o.random()*o.random()*4+(this.level<3?1:this.level<5?.5:0);e<t;e++){let e=[];for(let t in ti)if("AntField"!==t){let i=MATH.random(.25,.75)*ti[t].width|0,o=MATH.random(.25,.75)*ti[t].length|0;e.push([t,vec2.sqrDist([this.pos[0],this.pos[2]],[ti[t].x+i,ti[t].z+o]),i,o])}e=e[o.random()*e.length|0];let t=this.level,i=this.prevFields.slice(this.prevFields.length-6).indexOf(e[0]),n=10,s=("puffshroom,".repeat(6)+"rarePuffshroom,".repeat(8)+"epicPuffshroom,".repeat(7)+"legendaryPuffshroom,".repeat(6)+"mythicPuffshroom,".repeat(5)).split(",");s.pop(),i<0?(t+=0|MATH.random(.75,3),n-=MATH.random(2,6)):(t-=i*MATH.random(0,2)|0,n+=3),n-=.7*t,n=s[o.pow(o.random(),o.max(n,2))*s.length|0],("r"===n[0]&&t<5||"e"===n[0]&&t<9||"l"===n[0]&&t<11||"m"===n[0]&&t<14)&&(n="puffshroom"),le.mobs.push(new at(this.pos,e[0],e[2],e[3],t,this.life,this.prevFields,n))}le.mobs.splice(e,1)}update(){return this.life-=f,this.pollen=o.round(this.pollen),this.pos[1]+=1.75*this.displayScale+.25,Kt.addSingle(MATH.doGrammar(this.type)+" (Level "+this.level+")",this.pos,ae.whiteArr,-2,!1,!1,0,.7),Kt.addSingle("Time: "+MATH.doTime(this.life),this.pos,ae.whiteArr,-1.25,!1,!1,0,.6),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,1.25,...Kt.decalUV.rect,.305,.21,.135,3,.6,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(.0033333333*this.life*.5-.5)/(.0033333333*this.life),1.25,...Kt.decalUV.rect,.61,.42,.27,.0033333333*this.life*3,.6,0),Kt.addSingle(this.pollen+"/"+this.cap,this.pos,ae.whiteArr,-1.25,!0,!0,.175),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.rect,0,.4,0,3,.6,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],(this.pollen*this.invCap*.5-.5)/(this.pollen*this.invCap),0,...Kt.decalUV.rect,.1,.85,.1,3*o.min(this.pollen*this.invCap,1),.6,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],.6,-.1,...Kt.decalUV.flower,1,1,1,-1.25,-1.25,0),this.pos[1]-=1.75*this.displayScale+.25,m.bindBuffer(m.ARRAY_BUFFER,de[this.type].vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de[this.type].indexBuffer),m.vertexAttribPointer(St.mob_vertPos,3,m.FLOAT,m.FLASE,24,0),m.vertexAttribPointer(St.mob_vertColor,3,m.FLOAT,m.FLASE,24,12),m.uniform4fv(St.mob_instanceInfo1,this.pos),m.uniform2f(St.mob_instanceInfo2,this.displayScale,1),m.drawElements(m.TRIANGLES,de[this.type].indexAmount,m.UNSIGNED_SHORT,0),this.pollen>=this.cap||this.life<=0}}class at{constructor(e,t,i,n,s,r,a,l){this.type=l,this.plife=r,this.prevFields=a,this.field=t,this.x=i,this.z=n,this.pos=e.slice(),this.startPos=e.slice(),this.endPos=[ti[this.field].x+this.x,ti[this.field].y,ti[this.field].z+this.z],this.controlPos=[.5*(this.startPos[0]+this.endPos[0]),o.max(this.startPos[1],this.endPos[1])+15,.5*(this.startPos[2]+this.endPos[2])],this.level=s,this.displayScale=.1*(this.level-1)+1.15,this.t=0}die(e){le.mobs.push(new rt(this.field,this.x,this.z,this.plife,this.level,this.type)),le.explosions.push(new ce({col:[.6,.5,.1],pos:[this.endPos[0],this.endPos[1]+.5*(1.75*(.125*(this.level-1)+1)+.25),this.endPos[2]],life:1,size:2*this.displayScale,speed:.2,aftershock:.05})),le.mobs.splice(e,1)}update(){return this.t+=.333*f,vec3.lerp(this.pos,vec3.lerp([],this.startPos,this.controlPos,this.t),vec3.lerp([],this.controlPos,this.endPos,this.t),this.t),de.explosions.instanceData.push(this.pos[0],this.pos[1],this.pos[2],.6,.5,.1,.85,this.displayScale,1),this.t>=1}}class lt{constructor(e,t){this.bee=t,this.life=12.5,this.turn=0,this.timer=0,this.playerDelay=0,this.treat={hits:4,amount:1},this.body=new CANNON.Body({shape:new CANNON.Sphere(.5),mass:3,position:new CANNON.Vec3(...e),collisionFilterGroup:8,collisionFilterMask:6});let i=this;this.body.addEventListener("collide",(function(e){i.body.velocity.scale(5),2===e.body.collisionFilterGroup&&i.kick(-e.contact.ni.x,-e.contact.ni.z)})),X.addBody(this.body)}kick(e,t){this.life=5,this.body.velocity.set(6*e,0,6*t),this.turn=this.turn?0:1,this.playerDelay=.25,this.treat.hits-=.5,this.treat.hits<=0&&this.treat.amount<128&&(this.treat.hits=4,le.tokens.push(new oi(30,[this.body.position.x,this.body.position.y,this.body.position.z],"treat",this.treat.amount)),this.treat.amount=2*this.treat.amount)}die(e){this.bee.fetchBall=void 0,X.removeBody(this.body),le.mobs.splice(e,1)}update(){this.body.velocity.x/=.3*f+1,this.body.velocity.z/=.3*f+1,this.life-=f,this.playerDelay-=f,this.timer-=f,this.body.collisionFilterMask=this.turn||this.playerDelay>0?4:6,de.explosions.instanceData.push(this.body.position.x,this.body.position.y,this.body.position.z,.8,.9-.3*this.turn,.1,this.life,1,1);let e=[this.body.position.x,this.body.position.y,this.body.position.z];for(let t in le.bubbles){let i=le.bubbles[t];vec3.sqrDist(e,i.pos)<=4.5&&i.pop()}for(let t in le.fuzzBombs){let i=le.fuzzBombs[t];vec3.sqrDist(e,i.pos)<=3.5&&i.pop()}for(let t in le.tokens){let i=le.tokens[t];vec3.sqrDist(e,i.pos)<=3.5&&!(le.tokens[t]instanceof ni)&&i.collect()}if(this.timer<=0){this.timer=.2;for(let t in ti)Hi({x:o.round(e[0]-ti[t].x),z:o.round(e[2]-ti[t].z),pattern:[[0,0]],amount:5+.5*this.bee.level,yOffset:.2,field:t})}return this.life<=0}}let dt=[1,5,1.5],ht=1/(dt[0]*dt[0]+dt[1]*dt[1]+dt[2]*dt[2]);dt[0]*=ht,dt[1]*=ht,dt[2]*=ht;let mt=function(){let e=21e8*o.random()|0,t=2034071983,i=668265263;return seedHash=function(t){e=0|t},function(n,s){let r=0;return r=e+374761393|0,r+=8,r+=o.imul(n,t),r=o.imul(r<<17|r>>15,i),r+=o.imul(s,t),r=o.imul(r<<17|r>>15,i),r^=r>>15,r*=1883677709,r^=r>>13,r*=t,r^=r>>16,r/2147483647}}();function ct(e,t){let i=0|e||362436069,o=t||2147483647*mt(521288629,i)|0,n=function(){return i=36969*(65535&i)+(i>>>16)&4294967295,o=18e3*(65535&o)+(o>>>16)&4294967295,4294967295&((65535&i)<<16|65535&o)};this.nextDouble=function(){let e=n()/4294967296;return e<0?1+e:e},this.nextInt=n}let ut={generator:void 0,octaves:4,fallout:.5,seed:void 0};function pt(e){let t,i,n=void 0!==e?new ct(e):ct.createRandomized(),s=new Uint8Array(512);for(t=0;t<256;++t)s[t]=t;for(t=0;t<256;++t){let e=s[i=255&n.nextInt()];s[i]=s[t],s[t]=e}for(t=0;t<256;++t)s[t+256]=s[t];function r(e,t,i,o){let n=15&e,s=n<8?t:i,r=n<4?i:12===n||14===n?t:o;return(0==(1&n)?s:-s)+(0==(2&n)?r:-r)}function a(e,t,i){let o=0==(1&e)?t:i;return 0==(2&e)?-o:o}function l(e,t){return 0==(1&e)?-t:t}function d(e,t,i){return t+e*(i-t)}this.noise3d=function(e,t,i){let n=255&o.floor(e),a=255&o.floor(t),l=255&o.floor(i),h=(3-2*(e-=o.floor(e)))*e*e,m=(3-2*(t-=o.floor(t)))*t*t,c=(3-2*(i-=o.floor(i)))*i*i,u=s[n]+a,p=s[u]+l,f=s[u+1]+l,g=s[n+1]+a,b=s[g]+l,y=s[g+1]+l;return d(c,d(m,d(h,r(s[p],e,t,i),r(s[b],e-1,t,i)),d(h,r(s[f],e,t-1,i),r(s[y],e-1,t-1,i))),d(m,d(h,r(s[p+1],e,t,i-1),r(s[b+1],e-1,t,i-1)),d(h,r(s[f+1],e,t-1,i-1),r(s[y+1],e-1,t-1,i-1))))},this.noise2d=function(e,t){let i=255&o.floor(e),n=255&o.floor(t),r=(3-2*(e-=o.floor(e)))*e*e,l=(3-2*(t-=o.floor(t)))*t*t,h=s[i]+n,m=s[i+1]+n;return d(l,d(r,a(s[h],e,t),a(s[m],e-1,t)),d(r,a(s[h+1],e,t-1),a(s[m+1],e-1,t-1)))},this.noise1d=function(e){let t=255&o.floor(e);return d((3-2*(e-=o.floor(e)))*e*e,l(s[t],e),l(s[t+1],e-1))}}var ft;ft=0,ut.seed=ft,ut.generator=new pt(ut.seed);let gt=function(e,t,i){let o=ut.generator,n=1,s=1,r=0;for(let a=0;a<ut.octaves;++a){switch(n*=ut.fallout,arguments.length){case 1:r+=n*(1+o.noise1d(s*e))/2;break;case 2:r+=n*(1+o.noise2d(s*e,s*t))/2;break;case 3:r+=n*(1+o.noise3d(s*e,s*t,s*i))/2}s*=2}return r};function bt(e,t){let i=window["glsl_"+e].trim().replaceAll("INV_AVG_HALF_WIDTH_HEIGHT",2/(.5*(n+s))).replaceAll("INV_HALF_WIDTH",1/(.5*n)).replaceAll("INV_HALF_HEIGHT",1/(.5*s)).replaceAll("INV_WIDTH",1/n).replaceAll("INV_HEIGHT",1/s).replaceAll("HALF_WIDTH",.5*n+1e-7).replaceAll("HALF_HEIGHT",.5*s+1e-7).replaceAll("INV_ASPECT",1/l+1e-5).replaceAll("ASPECT",l+1e-6).replaceAll("SCREEN_CHANGE",.5*(n+s)/600*1.5+1e-5),o=window["glsl_"+t].trim().replaceAll("LIGHT_DIR","vec3("+dt[0]+","+dt[1]+","+dt[2]+")").replaceAll("INV_AVG_HALF_WIDTH_HEIGHT",2/(.5*(n+s))).replaceAll("INV_HALF_WIDTH",1/(.5*n)).replaceAll("INV_HALF_HEIGHT",1/(.5*s)).replaceAll("INV_WIDTH",1/n).replaceAll("INV_HEIGHT",1/s).replaceAll("HALF_WIDTH",.5*n+1e-7).replaceAll("HALF_HEIGHT",.5*s+1e-7).replaceAll("INV_ASPECT",1/l+1e-5).replaceAll("ASPECT",l+1e-5).replaceAll("SCREEN_CHANGE",.5*(n+s)/600*1.5+1e-5);e=m.createShader(m.VERTEX_SHADER),t=m.createShader(m.FRAGMENT_SHADER),m.shaderSource(e,i),m.shaderSource(t,o),m.compileShader(e),m.compileShader(t);let r=m.createProgram();return m.attachShader(r,e),m.attachShader(r,t),m.linkProgram(r),r}let yt=bt("static_geometry_vsh","static_geometry_fsh"),vt=bt("dynamic_geometry_vsh","dynamic_geometry_fsh"),xt=bt("token_geometry_vsh","token_geometry_fsh"),At=bt("flower_geometry_vsh","flower_geometry_fsh"),Tt=bt("bee_geometry_vsh","bee_geometry_fsh"),wt=bt("particle_renderer_vsh","particle_renderer_fsh"),Bt=bt("explosion_renderer_vsh","explosion_renderer_fsh"),It=bt("text_renderer_vsh","text_renderer_fsh"),Et=bt("mob_renderer_vsh","mob_renderer_fsh"),kt=bt("trail_renderer_vsh","trail_renderer_fsh"),Pt=function(e){return e.static_viewMatrix=m.getUniformLocation(yt,"viewMatrix"),e.static_isNight=m.getUniformLocation(yt,"isNight"),e.static_vertPos=m.getAttribLocation(yt,"vertPos"),m.enableVertexAttribArray(e.static_vertPos),e.static_vertColor=m.getAttribLocation(yt,"vertColor"),m.enableVertexAttribArray(e.static_vertColor),e.static_vertUV=m.getAttribLocation(yt,"vertUV"),m.enableVertexAttribArray(e.static_vertUV),e.dynamic_viewMatrix=m.getUniformLocation(vt,"viewMatrix"),e.dynamic_modelMatrix=m.getUniformLocation(vt,"modelMatrix"),e.dynamic_isNight=m.getUniformLocation(vt,"isNight"),e.dynamic_vertPos=m.getAttribLocation(vt,"vertPos"),m.enableVertexAttribArray(e.dynamic_vertPos),e.dynamic_vertColor=m.getAttribLocation(vt,"vertColor"),m.enableVertexAttribArray(e.dynamic_vertColor),e.dynamic_vertNormal=m.getAttribLocation(vt,"vertNormal"),m.enableVertexAttribArray(e.dynamic_vertNormal),e.token_viewMatrix=m.getUniformLocation(xt,"viewMatrix"),e.token_isNight=m.getUniformLocation(xt,"isNight"),e.token_vertPos=m.getAttribLocation(xt,"vertPos"),m.enableVertexAttribArray(e.token_vertPos),e.token_vertUV=m.getAttribLocation(xt,"vertUV"),m.enableVertexAttribArray(e.token_vertUV),e.token_instancePos=m.getAttribLocation(xt,"instance_pos"),m.enableVertexAttribArray(e.token_instancePos),e.token_instanceUV=m.getAttribLocation(xt,"instance_uv"),m.enableVertexAttribArray(e.token_instanceUV),e.flower_viewMatrix=m.getUniformLocation(At,"viewMatrix"),e.flower_isNight=m.getUniformLocation(At,"isNight"),e.flower_vertPos=m.getAttribLocation(At,"vertPos"),m.enableVertexAttribArray(e.flower_vertPos),e.flower_vertUV=m.getAttribLocation(At,"vertUV"),m.enableVertexAttribArray(e.flower_vertUV),e.flower_vertGoo=m.getAttribLocation(At,"vertGoo"),m.enableVertexAttribArray(e.flower_vertGoo),e.bee_viewMatrix=m.getUniformLocation(Tt,"viewMatrix"),e.bee_isNight=m.getUniformLocation(Tt,"isNight"),e.bee_vertPos=m.getAttribLocation(Tt,"vertPos"),m.enableVertexAttribArray(e.bee_vertPos),e.bee_vertUV=m.getAttribLocation(Tt,"vertUV"),m.enableVertexAttribArray(e.bee_vertUV),e.bee_instancePos=m.getAttribLocation(Tt,"instance_pos"),m.enableVertexAttribArray(e.bee_instancePos),e.bee_instanceRotation=m.getAttribLocation(Tt,"instance_rotation"),m.enableVertexAttribArray(e.bee_instanceRotation),e.bee_instanceUV=m.getAttribLocation(Tt,"instance_uv"),m.enableVertexAttribArray(e.bee_instanceUV),e.particle_vertPos=m.getAttribLocation(wt,"vertPos"),m.enableVertexAttribArray(e.particle_vertPos),e.particle_vertColor=m.getAttribLocation(wt,"vertColor"),m.enableVertexAttribArray(e.particle_vertColor),e.particle_vertSize=m.getAttribLocation(wt,"vertSize"),m.enableVertexAttribArray(e.particle_vertSize),e.particle_vertRot=m.getAttribLocation(wt,"vertRot"),m.enableVertexAttribArray(e.particle_vertRot),e.particle_viewMatrix=m.getUniformLocation(wt,"viewMatrix"),e.explosion_vertPos=m.getAttribLocation(Bt,"vertPos"),m.enableVertexAttribArray(e.explosion_vertPos),e.explosion_instancePos=m.getAttribLocation(Bt,"instance_pos"),m.enableVertexAttribArray(e.explosion_instancePos),e.explosion_instanceColor=m.getAttribLocation(Bt,"instance_color"),m.enableVertexAttribArray(e.explosion_instanceColor),e.explosion_instanceScale=m.getAttribLocation(Bt,"instance_scale"),m.enableVertexAttribArray(e.explosion_instanceScale),e.explosion_viewMatrix=m.getUniformLocation(Bt,"viewMatrix"),e.text_vertPos=m.getAttribLocation(It,"vertPos"),m.enableVertexAttribArray(e.text_vertPos),e.text_vertUV=m.getAttribLocation(It,"vertUV"),m.enableVertexAttribArray(e.text_vertUV),e.text_instanceOrigin=m.getAttribLocation(It,"instance_origin"),m.enableVertexAttribArray(e.text_instanceOrigin),e.text_instanceOffset=m.getAttribLocation(It,"instance_offset"),m.enableVertexAttribArray(e.text_instanceOffset),e.text_instanceUV=m.getAttribLocation(It,"instance_uv"),m.enableVertexAttribArray(e.text_instanceUV),e.text_instanceColor=m.getAttribLocation(It,"instance_color"),m.enableVertexAttribArray(e.text_instanceColor),e.text_instanceInfo=m.getAttribLocation(It,"instance_info"),m.enableVertexAttribArray(e.text_instanceInfo),e.text_viewMatrix=m.getUniformLocation(It,"viewMatrix"),e.mob_viewMatrix=m.getUniformLocation(Et,"viewMatrix"),e.mob_isNight=m.getUniformLocation(Et,"isNight"),e.mob_vertPos=m.getAttribLocation(Et,"vertPos"),m.enableVertexAttribArray(e.mob_vertPos),e.mob_vertColor=m.getAttribLocation(Et,"vertColor"),m.enableVertexAttribArray(e.mob_vertColor),e.mob_instanceInfo1=m.getUniformLocation(Et,"instance_info1"),e.mob_instanceInfo2=m.getUniformLocation(Et,"instance_info2"),e.trail_viewMatrix=m.getUniformLocation(kt,"viewMatrix"),e.trail_vertPos=m.getAttribLocation(kt,"vertPos"),m.enableVertexAttribArray(e.trail_vertPos),e.trail_vertColor=m.getAttribLocation(kt,"vertCol"),m.enableVertexAttribArray(e.trail_vertColor),e.trail_isNight=m.getUniformLocation(kt,"isNight"),e},St=Pt({}),Mt=0;class _t{constructor(e=!0,t,i){this.isStatic=e,this.setMesh(t||[],i||[]),this.meshGlobalID=Mt++,this.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.ogMatrix=this.matrix.slice()}setMesh(e,t){this.mesh={data:{verts:new Float32Array(e),index:new Uint16Array(t)},buffers:{verts:m.createBuffer(),index:m.createBuffer()},indexAmount:t.length}}setMeshFromFunction(e){let t,i,n,s,r,a,l,d,h,m=[],c=[],u=this;if(this.isStatic){for(let e=X.bodies.length;e--;)4===X.bodies[e].collisionFilterGroup&&X.bodies[e].parentMeshGlobalID===this.meshGlobalID&&X.removeBody(X.bodies[e]);t=function(e,t,i,o,n,s,r,a,l=!0,d=!0,h=!0){let p=(!0===a?[0,.8,0,.6]:"string"==typeof a?[1,0,0,.6]:a).slice();r=r||[0,0,0];let f=quat.fromEuler([],r[0],r[1],r[2]),g=mat4.fromRotationTranslation([],f,[e,t,i,1]),b=p[3]||1;if(p[0]*=1.2,p[1]*=1.2,p[2]*=1.2,l){let r=new CANNON.Body({shape:new CANNON.Box(new CANNON.Vec3(.5*o,.5*n,.5*s)),mass:0,position:new CANNON.Vec3(e,t,i),quaternion:new CANNON.Quaternion(...f),collisionFilterGroup:4,collisionFilterMask:10});"string"==typeof a&&(r.isBannedGate=a),r.parentMeshGlobalID=u.meshGlobalID,X.addBody(r)}let y=[[-.5*o,.5*n,-.5*s],[-.5*o,.5*n,.5*s],[.5*o,.5*n,.5*s],[.5*o,.5*n,-.5*s],[-.5*o,-.5*n,-.5*s],[-.5*o,-.5*n,.5*s],[.5*o,-.5*n,.5*s],[.5*o,-.5*n,-.5*s]],v=[],x=[[0,1,0],[0,0,1],[0,0,-1],[1,0,0],[-1,0,0],[0,-1,0]];for(let e=0,t=y.length;e<t;e++)if(vec3.transformMat4(y[e],y[e],g),e<6){vec3.transformQuat(x[e],x[e],f);let t=x[e],i=t[0]*dt[0]+t[1]*dt[1]+t[2]*dt[2];v[e]=.8*i+.65}let A=m.length/10;d||(o=0,n=0,s=0),h&&(m.push(y[0][0],y[0][1],y[0][2],p[0]*v[0],p[1]*v[0],p[2]*v[0],b,o,s,0,y[1][0],y[1][1],y[1][2],p[0]*v[0],p[1]*v[0],p[2]*v[0],b,o,0,0,y[2][0],y[2][1],y[2][2],p[0]*v[0],p[1]*v[0],p[2]*v[0],b,0,0,0,y[3][0],y[3][1],y[3][2],p[0]*v[0],p[1]*v[0],p[2]*v[0],b,0,s,0,y[1][0],y[1][1],y[1][2],p[0]*v[1],p[1]*v[1],p[2]*v[1],b,0,0,0,y[2][0],y[2][1],y[2][2],p[0]*v[1],p[1]*v[1],p[2]*v[1],b,o,0,0,y[5][0],y[5][1],y[5][2],p[0]*v[1],p[1]*v[1],p[2]*v[1],b,0,n,0,y[6][0],y[6][1],y[6][2],p[0]*v[1],p[1]*v[1],p[2]*v[1],b,o,n,0,y[0][0],y[0][1],y[0][2],p[0]*v[2],p[1]*v[2],p[2]*v[2],b,o,n,0,y[3][0],y[3][1],y[3][2],p[0]*v[2],p[1]*v[2],p[2]*v[2],b,0,n,0,y[4][0],y[4][1],y[4][2],p[0]*v[2],p[1]*v[2],p[2]*v[2],b,o,0,0,y[7][0],y[7][1],y[7][2],p[0]*v[2],p[1]*v[2],p[2]*v[2],b,0,0,0,y[2][0],y[2][1],y[2][2],p[0]*v[3],p[1]*v[3],p[2]*v[3],b,0,0,0,y[3][0],y[3][1],y[3][2],p[0]*v[3],p[1]*v[3],p[2]*v[3],b,s,0,0,y[6][0],y[6][1],y[6][2],p[0]*v[3],p[1]*v[3],p[2]*v[3],b,0,n,0,y[7][0],y[7][1],y[7][2],p[0]*v[3],p[1]*v[3],p[2]*v[3],b,s,n,0,y[0][0],y[0][1],y[0][2],p[0]*v[4],p[1]*v[4],p[2]*v[4],b,0,0,0,y[1][0],y[1][1],y[1][2],p[0]*v[4],p[1]*v[4],p[2]*v[4],b,s,0,0,y[4][0],y[4][1],y[4][2],p[0]*v[4],p[1]*v[4],p[2]*v[4],b,0,n,0,y[5][0],y[5][1],y[5][2],p[0]*v[4],p[1]*v[4],p[2]*v[4],b,s,n,0,y[4][0],y[4][1],y[4][2],p[0]*v[5],p[1]*v[5],p[2]*v[5],b,0,s,0,y[5][0],y[5][1],y[5][2],p[0]*v[5],p[1]*v[5],p[2]*v[5],b,0,0,0,y[6][0],y[6][1],y[6][2],p[0]*v[5],p[1]*v[5],p[2]*v[5],b,o,0,0,y[7][0],y[7][1],y[7][2],p[0]*v[5],p[1]*v[5],p[2]*v[5],b,o,s,0),c.push(0+A,1+A,2+A,0+A,2+A,3+A,5+A,6+A,7+A,6+A,5+A,4+A,8+A,9+A,10+A,11+A,10+A,9+A,14+A,13+A,12+A,13+A,14+A,15+A,18+A,17+A,16+A,17+A,18+A,19+A,22+A,21+A,20+A,23+A,22+A,20+A))},i=function(e,t,i,o,n,s,r){let a=.0625,l=K[s||"basic"].u,d=K[s||"basic"].v+(r?.375:0),h=null===s?1:0,[u,p,f]=ae.honey_normalized;u*=.5,p*=.5,f*=.5;let g=m.length/10;m.push(e-o,t-n,i,u,p,f,1,l,a+d,h,e+o,t-n,i,u,p,f,1,a+l,a+d,h,e+o,t+n,i,u,p,f,1,a+l,d,h,e-o,t+n,i,u,p,f,1,l,d,h),c.push(g,g+1,g+2,g+2,g+3,g)},a=function(e,i,o,n,s){t(e,i,o,2*n,2*s,.25,!1,[100,100,0],!1,!1)},l=function(e,t,i,n,s,r,a,l,d,h,u=.75,p=.25,f=0,g=0,b=0){let y=quat.fromEuler([],f,g,b);n*=.8;let v=[],x=[],A=[],T=[],w=0,B=m.length/10;for(let e=0;e<MATH.TWO_PI;e+=MATH.TWO_PI/10){let t=w++%2==0?s:n;x.push([o.sin(e)*t,o.cos(e)*t,-r])}w=0;for(let e=0;e<MATH.TWO_PI;e+=MATH.TWO_PI/10){let t=w++%2==0?s:n;x.push([o.sin(e)*t,o.cos(e)*t,r])}x.push([0,0,-a],[0,0,a]),A.push(0,1,20,1,2,20,2,3,20,3,4,20,4,5,20,5,6,20,6,7,20,7,8,20,8,9,20,9,0,20,11,10,21,12,11,21,13,12,21,14,13,21,15,14,21,16,15,21,17,16,21,18,17,21,19,18,21,10,19,21,9,10,0),T.push(2,1,0,5,4,3,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62);for(let e=0;e<10;e++)A.push(0+e,10+e,1+e,11+e,1+e,10+e),T.push(6*e,6*e+1,6*e+2,6*e+3,6*e+4,6*e+5);for(let e=63;e<T.length;e++)T[e]+=63;for(let o=0;o<x.length;o++)vec3.transformQuat(x[o],x[o],y),vec3.add(x[o],x[o],[e,t,i]);for(let e in A)A[e]=x[A[e]];v=T;let I=(e,t,i)=>{e=A[e],t=A[t],i=A[i];let o=vec3.cross([],[e[0]-t[0],e[1]-t[1],e[2]-t[2]],[e[0]-i[0],e[1]-i[1],e[2]-i[2]]);return vec3.normalize(o,o)};for(let e=0;e<v.length;e+=3){let t=v[e],i=v[e+1],o=v[e+2],n=vec3.dot([.035,.175,.053],I(t,i,o))*u+p;m.push(...A[t],l*n,d*n,h*n,1,0,0,0,...A[i],l*n,d*n,h*n,1,0,0,0,...A[o],l*n,d*n,h*n,1,0,0,0)}for(let e in v)v[e]+=B;c.push(...v)},n=function(e,t,i,n,s,r,a,l,d,h,u,p,f,g,b=!0){let y=g??n,v=m.length/10,x=[],A=[];for(let e=0,t=MATH.TWO_PI/r;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,r=e+.5*t,m=b?.1*o.sin(i)+.9:1;x.push(o.cos(i)*n,o.sin(i)*n,.5*s,a*m,l*m,d*m,h,0,0,0,o.cos(i)*y,o.sin(i)*y,.5*-s,a*m,l*m,d*m,h,0,0,0,o.cos(r)*n,o.sin(r)*n,.5*s,a*m,l*m,d*m,h,0,0,0,o.cos(r)*y,o.sin(r)*y,.5*-s,a*m,l*m,d*m,h,0,0,0);let c=x.length/10;A.push(c,c+1,c+2,c+3,c+2,c+1)}let T=x.length/10;for(let e=0,t=MATH.TWO_PI/r;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,r=e+.5*t;x.push(o.cos(i)*n,o.sin(i)*n,.5*s,.9*a,.9*l,.9*d,h,0,0,0,o.cos(r)*n,o.sin(r)*n,.5*s,.9*a,.9*l,.9*d,h,0,0,0)}for(let e=x.length/10,t=T;t<e;t++)A.push(T,t,t+2);T=x.length/10;for(let e=0,t=MATH.TWO_PI/r;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,n=e+.5*t;x.push(o.cos(i)*y,o.sin(i)*y,.5*-s,.7*a,.7*l,.7*d,h,0,0,0,o.cos(n)*y,o.sin(n)*y,.5*-s,.7*a,.7*l,.7*d,h,0,0,0)}for(let e=x.length/10,t=T;t<e;t++)A.push(t,t-1,T);for(let e in A)A[e]+=v;c.push(...A);let w=quat.fromEuler([],u,p,f);for(let o=0;o<x.length;o+=10)if(u){let n=vec3.transformQuat([],[x[o],x[o+1],x[o+2]],w);x[o]=n[0]+e,x[o+1]=n[1]+t,x[o+2]=n[2]+i,n=vec3.transformQuat(n,[x[o+7],x[o+8],x[o+9]],w),x[o+7]=n[0],x[o+8]=n[1],x[o+9]=n[2]}else x[o]+=e,x[o+1]+=t,x[o+2]+=i;m.push(...x)},s=function(e,t,i,o,n,s,r,a,l,d=1){let h=MATH.icosphere(n),u=[],p=[];for(let n=0,m=h.verts.length;n<m;n+=3)u.push(h.verts[n]*o+e,h.verts[n+1]*o*d+t,h.verts[n+2]*o+i,s,r,a,l,0,0,0);for(let e in h.index)p.push(h.index[e]+m.length/10);m.push(...u),c.push(...p)},d=function(e,t,i,o,n,s,r,a,l,d,h=!1){a=a||[0,0,0];let u=quat.fromEuler([],a[0],a[1],a[2]),p=mat4.fromRotationTranslation([],u,[t,i,o,1]),f=[[-.5*n,.5*s,-.5*r],[-.5*n,.5*s,.5*r],[.5*n,.5*s,.5*r],[.5*n,.5*s,-.5*r],[-.5*n,-.5*s,-.5*r],[-.5*n,-.5*s,.5*r],[.5*n,-.5*s,.5*r],[.5*n,-.5*s,-.5*r]],g=[],b=[[0,1,0],[0,0,1],[0,0,-1],[1,0,0],[-1,0,0],[0,-1,0]];for(let t=0,i=f.length;t<i;t++){if(vec3.transformMat4(f[t],f[t],p),t<6){vec3.transformQuat(b[t],b[t],u);let e=b[t],i=e[0]*dt[0]+e[1]*dt[1]+e[2]*dt[2];g[t]=.8*i+.65}switch(e){case 1:let e=f[t][0];f[t][0]=-f[t][2],f[t][2]=e;break;case 2:f[t][0]=-f[t][0],f[t][2]=-f[t][2];break;case 3:let i=f[t][0];f[t][0]=f[t][2],f[t][2]=-i}}let y=m.length/10,v=126/1024,x=[1,1,1];h||(v=0),l+=1/1024,d+=1/1024,m.push(f[0][0],f[0][1],f[0][2],x[0]*g[0],x[1]*g[0],x[2]*g[0],1,l,d,0,f[1][0],f[1][1],f[1][2],x[0]*g[0],x[1]*g[0],x[2]*g[0],1,l,d,0,f[2][0],f[2][1],f[2][2],x[0]*g[0],x[1]*g[0],x[2]*g[0],1,l,d,0,f[3][0],f[3][1],f[3][2],x[0]*g[0],x[1]*g[0],x[2]*g[0],1,l,d,0,f[1][0],f[1][1],f[1][2],x[0]*g[1],x[1]*g[1],x[2]*g[1],1,l,d,0,f[2][0],f[2][1],f[2][2],x[0]*g[1],x[1]*g[1],x[2]*g[1],1,l+v,d,0,f[5][0],f[5][1],f[5][2],x[0]*g[1],x[1]*g[1],x[2]*g[1],1,l,d+v,0,f[6][0],f[6][1],f[6][2],x[0]*g[1],x[1]*g[1],x[2]*g[1],1,l+v,d+v,0,f[0][0],f[0][1],f[0][2],x[0]*g[2],x[1]*g[2],x[2]*g[2],1,l,d,0,f[3][0],f[3][1],f[3][2],x[0]*g[2],x[1]*g[2],x[2]*g[2],1,l,d,0,f[4][0],f[4][1],f[4][2],x[0]*g[2],x[1]*g[2],x[2]*g[2],1,l,d,0,f[7][0],f[7][1],f[7][2],x[0]*g[2],x[1]*g[2],x[2]*g[2],1,l,d,0,f[2][0],f[2][1],f[2][2],x[0]*g[3],x[1]*g[3],x[2]*g[3],1,l,d,0,f[3][0],f[3][1],f[3][2],x[0]*g[3],x[1]*g[3],x[2]*g[3],1,l,d,0,f[6][0],f[6][1],f[6][2],x[0]*g[3],x[1]*g[3],x[2]*g[3],1,l,d,0,f[7][0],f[7][1],f[7][2],x[0]*g[3],x[1]*g[3],x[2]*g[3],1,l,d,0,f[0][0],f[0][1],f[0][2],x[0]*g[4],x[1]*g[4],x[2]*g[4],1,l,d,0,f[1][0],f[1][1],f[1][2],x[0]*g[4],x[1]*g[4],x[2]*g[4],1,l,d,0,f[4][0],f[4][1],f[4][2],x[0]*g[4],x[1]*g[4],x[2]*g[4],1,l,d,0,f[5][0],f[5][1],f[5][2],x[0]*g[4],x[1]*g[4],x[2]*g[4],1,l,d,0,f[4][0],f[4][1],f[4][2],x[0]*g[5],x[1]*g[5],x[2]*g[5],1,l,d,0,f[5][0],f[5][1],f[5][2],x[0]*g[5],x[1]*g[5],x[2]*g[5],1,l,d,0,f[6][0],f[6][1],f[6][2],x[0]*g[5],x[1]*g[5],x[2]*g[5],1,l,d,0,f[7][0],f[7][1],f[7][2],x[0]*g[5],x[1]*g[5],x[2]*g[5],1,l,d,0),c.push(0+y,1+y,2+y,0+y,2+y,3+y,5+y,6+y,7+y,6+y,5+y,4+y,8+y,9+y,10+y,11+y,10+y,9+y,14+y,13+y,12+y,13+y,14+y,15+y,18+y,17+y,16+y,17+y,18+y,19+y,22+y,21+y,20+y,23+y,22+y,20+y)},h=function(e,t,i,n,s,r,a,l,d,h,u,p,f,g,b,y){b+=1/1024,y+=1/1024;let v=s,x=m.length/10,A=[],T=[];for(let e=0,t=MATH.TWO_PI/a;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,n=e+.5*t,a=.1*o.sin(i)+.9;A.push(o.cos(i)*s,o.sin(i)*s,.5*r,l*a,d*a,h*a,u,b,y,0,o.cos(i)*v,o.sin(i)*v,.5*-r,l*a,d*a,h*a,u,b,y,0,o.cos(n)*s,o.sin(n)*s,.5*r,l*a,d*a,h*a,u,b,y,0,o.cos(n)*v,o.sin(n)*v,.5*-r,l*a,d*a,h*a,u,b,y,0);let m=A.length/10;T.push(m,m+1,m+2,m+3,m+2,m+1)}let w=A.length/10;for(let e=0,t=MATH.TWO_PI/a;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,n=e+.5*t;A.push(o.cos(i)*s,o.sin(i)*s,.5*r,.9*l,.9*d,.9*h,u,b,y,0,o.cos(n)*s,o.sin(n)*s,.5*r,.9*l,.9*d,.9*h,u,b,y,0)}for(let e=A.length/10,t=w;t<e;t++)T.push(w,t,t+2);w=A.length/10;for(let e=0,t=MATH.TWO_PI/a;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,n=e+.5*t;A.push(o.cos(i)*v,o.sin(i)*v,.5*-r,.7*l,.7*d,.7*h,u,b,y,0,o.cos(n)*v,o.sin(n)*v,.5*-r,.7*l,.7*d,.7*h,u,b,y,0)}for(let e=A.length/10,t=w;t<e;t++)T.push(t,t-1,w);for(let e in T)T[e]+=x;c.push(...T);let B=quat.fromEuler([],p,f,g);for(let o=0;o<A.length;o+=10){if(p){let e=vec3.transformQuat([],[A[o],A[o+1],A[o+2]],B);A[o]=e[0]+t,A[o+1]=e[1]+i,A[o+2]=e[2]+n,e=vec3.transformQuat(e,[A[o+7],A[o+8],A[o+9]],B),A[o+7]=e[0],A[o+8]=e[1],A[o+9]=e[2]}else A[o]+=t,A[o+1]+=i,A[o+2]+=n;switch(e){case 1:let e=A[o];A[o]=-A[o+2],A[o+2]=e;break;case 2:A[o]=-A[o],A[o+2]=-A[o+2];break;case 3:let t=A[o];A[o]=A[o+2],A[o+2]=-t}}m.push(...A)}}else t=function(e,t,i,o,n,s,r,a,l=[0,0,0]){r=r||[0,0,0];let d=quat.fromEuler([],r[0],r[1],r[2]),h=quat.fromEuler([],l[0],l[1],l[2]),p=mat4.fromRotationTranslation([],d,[e,t,i,1]),f=[[-.5*o,.5*n,-.5*s],[-.5*o,.5*n,.5*s],[.5*o,.5*n,.5*s],[.5*o,.5*n,-.5*s],[-.5*o,-.5*n,-.5*s],[-.5*o,-.5*n,.5*s],[.5*o,-.5*n,.5*s],[.5*o,-.5*n,-.5*s]],g=[[0,1,0],[0,0,1],[0,0,-1],[1,0,0],[-1,0,0],[0,-1,0]];for(let e=0,t=f.length;e<t;e++)vec3.transformMat4(f[e],f[e],p),vec3.transformQuat(f[e],f[e],h),e<6&&vec3.transformQuat(g[e],g[e],d),vec3.transformMat4(f[e],f[e],u.matrix);let b=m.length/9,y=g;m.push(f[0][0],f[0][1],f[0][2],a[0],a[1],a[2],y[0][0],y[0][1],y[0][2],f[1][0],f[1][1],f[1][2],a[0],a[1],a[2],y[0][0],y[0][1],y[0][2],f[2][0],f[2][1],f[2][2],a[0],a[1],a[2],y[0][0],y[0][1],y[0][2],f[3][0],f[3][1],f[3][2],a[0],a[1],a[2],y[0][0],y[0][1],y[0][2],f[1][0],f[1][1],f[1][2],a[0],a[1],a[2],y[1][0],y[1][1],y[1][2],f[2][0],f[2][1],f[2][2],a[0],a[1],a[2],y[1][0],y[1][1],y[1][2],f[5][0],f[5][1],f[5][2],a[0],a[1],a[2],y[1][0],y[1][1],y[1][2],f[6][0],f[6][1],f[6][2],a[0],a[1],a[2],y[1][0],y[1][1],y[1][2],f[0][0],f[0][1],f[0][2],a[0],a[1],a[2],y[2][0],y[2][1],y[2][2],f[3][0],f[3][1],f[3][2],a[0],a[1],a[2],y[2][0],y[2][1],y[2][2],f[4][0],f[4][1],f[4][2],a[0],a[1],a[2],y[2][0],y[2][1],y[2][2],f[7][0],f[7][1],f[7][2],a[0],a[1],a[2],y[2][0],y[2][1],y[2][2],f[2][0],f[2][1],f[2][2],a[0],a[1],a[2],y[3][0],y[3][1],y[3][2],f[3][0],f[3][1],f[3][2],a[0],a[1],a[2],y[3][0],y[3][1],y[3][2],f[6][0],f[6][1],f[6][2],a[0],a[1],a[2],y[3][0],y[3][1],y[3][2],f[7][0],f[7][1],f[7][2],a[0],a[1],a[2],y[3][0],y[3][1],y[3][2],f[0][0],f[0][1],f[0][2],a[0],a[1],a[2],y[4][0],y[4][1],y[4][2],f[1][0],f[1][1],f[1][2],a[0],a[1],a[2],y[4][0],y[4][1],y[4][2],f[4][0],f[4][1],f[4][2],a[0],a[1],a[2],y[4][0],y[4][1],y[4][2],f[5][0],f[5][1],f[5][2],a[0],a[1],a[2],y[4][0],y[4][1],y[4][2],f[4][0],f[4][1],f[4][2],a[0],a[1],a[2],y[5][0],y[5][1],y[5][2],f[5][0],f[5][1],f[5][2],a[0],a[1],a[2],y[5][0],y[5][1],y[5][2],f[6][0],f[6][1],f[6][2],a[0],a[1],a[2],y[5][0],y[5][1],y[5][2],f[7][0],f[7][1],f[7][2],a[0],a[1],a[2],y[5][0],y[5][1],y[5][2]),c.push(0+b,1+b,2+b,0+b,2+b,3+b,5+b,6+b,7+b,6+b,5+b,4+b,8+b,9+b,10+b,11+b,10+b,9+b,14+b,13+b,12+b,13+b,14+b,15+b,18+b,17+b,16+b,17+b,18+b,19+b,22+b,21+b,20+b,23+b,22+b,20+b)},n=function(e,t,i,n,s,r,a,l,d,h,p,f,g){let b=g??n,y=m.length/9,v=[],x=[];for(let e=0,t=MATH.TWO_PI/r;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,r=e+.5*t;v.push(o.cos(i)*n,o.sin(i)*n,.5*s,a,l,d,o.cos(i),o.sin(i),0,o.cos(i)*b,o.sin(i)*b,.5*-s,a,l,d,o.cos(i),o.sin(i),0,o.cos(r)*n,o.sin(r)*n,.5*s,a,l,d,o.cos(r),o.sin(r),0,o.cos(r)*b,o.sin(r)*b,.5*-s,a,l,d,o.cos(r),o.sin(r),0);let h=v.length/9;x.push(h,h+1,h+2,h+3,h+2,h+1)}let A=v.length/9;for(let e=0,t=MATH.TWO_PI/r;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,r=e+.5*t;v.push(o.cos(i)*n,o.sin(i)*n,.5*s,a,l,d,0,0,1,o.cos(r)*n,o.sin(r)*n,.5*s,a,l,d,0,0,1)}for(let e=v.length/9,t=A;t<e-1;t++)x.push(A,t,t+2);A=v.length/9;for(let e=0,t=MATH.TWO_PI/r;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,n=e+.5*t;v.push(o.cos(i)*b,o.sin(i)*b,.5*-s,a,l,d,0,0,-1,o.cos(n)*b,o.sin(n)*b,.5*-s,a,l,d,0,0,-1)}for(let e=v.length/9,t=A;t<e;t++)x.push(t,t-1,A);for(let e in x)x[e]+=y;c.push(...x);let T=quat.fromEuler([],h,p,f);for(let o=0;o<v.length;o+=9){if(h){let n=vec3.transformQuat([],[v[o],v[o+1],v[o+2]],T);v[o]=n[0]+e,v[o+1]=n[1]+t,v[o+2]=n[2]+i,n=vec3.transformQuat(n,[v[o+6],v[o+7],v[o+8]],T),v[o+6]=n[0],v[o+7]=n[1],v[o+8]=n[2]}else v[o]+=e,v[o+1]+=t,v[o+2]+=i;[v[o],v[o+1],v[o+2]]=vec3.transformMat4([],[v[o],v[o+1],v[o+2]],u.matrix)}m.push(...v)},s=function(e,t,i,o,n,s,r,a,l){let d=MATH.icosphere(n),h=[],p=[];for(let n=0,l=d.verts.length;n<l;n+=3)h.push(d.verts[n]*o+e,d.verts[n+1]*o+t,d.verts[n+2]*o+i,s,r,a,d.verts[n],d.verts[n+1],d.verts[n+2]);for(let e in d.index)p.push(d.index[e]+m.length/9);for(let e=0;e<h.length;e+=9)[h[e],h[e+1],h[e+2]]=vec3.transformMat4([],[h[e],h[e+1],h[e+2]],u.matrix);m.push(...h),c.push(...p)},l=function(e,t,i,n,s,r,a,l,d,h,p=.75,f=.25,g=0,b=0,y=0){let v=quat.fromEuler([],g,b,y);n*=.8;let x=[],A=[],T=[],w=[],B=0,I=m.length/9;for(let e=0;e<MATH.TWO_PI;e+=MATH.TWO_PI/10){let t=B++%2==0?s:n;A.push([o.sin(e)*t,o.cos(e)*t,-r])}B=0;for(let e=0;e<MATH.TWO_PI;e+=MATH.TWO_PI/10){let t=B++%2==0?s:n;A.push([o.sin(e)*t,o.cos(e)*t,r])}A.push([0,0,-a],[0,0,a]),T.push(0,1,20,1,2,20,2,3,20,3,4,20,4,5,20,5,6,20,6,7,20,7,8,20,8,9,20,9,0,20,11,10,21,12,11,21,13,12,21,14,13,21,15,14,21,16,15,21,17,16,21,18,17,21,19,18,21,10,19,21,9,10,0),w.push(2,1,0,5,4,3,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62);for(let e=0;e<10;e++)T.push(0+e,10+e,1+e,11+e,1+e,10+e),w.push(6*e,6*e+1,6*e+2,6*e+3,6*e+4,6*e+5);for(let e=63;e<w.length;e++)w[e]+=63;for(let o=0;o<A.length;o++)vec3.transformQuat(A[o],A[o],v),vec3.add(A[o],A[o],[e,t,i]),vec3.transformMat4(A[o],A[o],u.matrix);for(let e in T)T[e]=A[T[e]];x=w;let E=(e,t,i)=>{e=T[e],t=T[t],i=T[i];let o=vec3.cross([],[e[0]-t[0],e[1]-t[1],e[2]-t[2]],[e[0]-i[0],e[1]-i[1],e[2]-i[2]]);return vec3.normalize(o,o)};for(let e=0;e<x.length;e+=3){let t=x[e],i=x[e+1],o=x[e+2],n=vec3.dot([.035,.175,.053],E(t,i,o))*p+f;m.push(...T[t],l*n,d*n,h*n,0,1,0,...T[i],l*n,d*n,h*n,0,1,0,...T[o],l*n,d*n,h*n,0,1,0)}for(let e in x)x[e]+=I;c.push(...x)},r=function(e,t,i){if(!mat4.exactEquals(u.matrix,u.ogMatrix))return;let o=quat.fromEuler([],e,t,i);for(let e=0;e<m.length;e+=9){let t=vec3.transformQuat([],[m[e],m[e+1],m[e+2]],o);m[e]=t[0],m[e+1]=t[1],m[e+2]=t[2]}};e(t,i,n,s,r,a,l,d,h),this.setMesh(m,c)}setBuffers(){this.isStatic,m.bindBuffer(m.ARRAY_BUFFER,this.mesh.buffers.verts),m.bufferData(m.ARRAY_BUFFER,this.mesh.data.verts,m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,this.mesh.buffers.index),m.bufferData(m.ELEMENT_ARRAY_BUFFER,this.mesh.data.index,m.STATIC_DRAW)}render(){this.isStatic?(m.bindBuffer(m.ARRAY_BUFFER,this.mesh.buffers.verts),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,this.mesh.buffers.index),m.vertexAttribPointer(St.static_vertPos,3,m.FLOAT,m.FALSE,40,0),m.vertexAttribPointer(St.static_vertColor,4,m.FLOAT,m.FALSE,40,12),m.vertexAttribPointer(St.static_vertUV,3,m.FLOAT,m.FALSE,40,28)):(m.bindBuffer(m.ARRAY_BUFFER,this.mesh.buffers.verts),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,this.mesh.buffers.index),m.vertexAttribPointer(St.dynamic_vertPos,3,m.FLOAT,m.FALSE,36,0),m.vertexAttribPointer(St.dynamic_vertColor,3,m.FLOAT,m.FALSE,36,12),m.vertexAttribPointer(St.dynamic_vertNormal,3,m.FLOAT,m.FALSE,36,24)),m.drawElements(m.TRIANGLES,this.mesh.indexAmount,m.UNSIGNED_SHORT,0)}}let Rt=function(e){p.clearRect(0,0,2048,2048);for(let e=0;e<10;e++)p.fillStyle="rgba(0,0,0,"+.2*o.random()+")",p.fillRect(MATH.random(12,500),MATH.random(12,500),MATH.random(25,45),MATH.random(25,45)),p.fillStyle="rgba(0,0,0,0.015)",p.translate(MATH.random(12,500),MATH.random(12,500)),p.scale(3*(o.random()+.5),3*(o.random()+.5)),p.rotate(6.28*o.random()),p.fillText("คาร์ลสันไม่เคยตาย",0,0),p.setTransform(1,0,0,1,0,0),p.translate(MATH.random(12,500),MATH.random(12,500)),p.scale(3*(o.random()+.5),3*(o.random()+.5)),p.rotate(6.28*o.random()),p.fillText("ดาท เป็นเจ๋งคนมาก",0,0),p.setTransform(1,0,0,1,0,0);function t(e,t,i){p.strokeText(e,t,i),p.fillText(e,t,i)}e.default=m.createTexture(),m.bindTexture(m.TEXTURE_2D,e.default),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,512,512,0,m.RGBA,m.UNSIGNED_BYTE,p.getImageData(0,0,512,512)),m.generateMipmap(m.TEXTURE_2D),window.textures_effects(p),e.effects=m.createTexture(),m.bindTexture(m.TEXTURE_2D,e.effects),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,2048,2048,0,m.RGBA,m.UNSIGNED_BYTE,p.getImageData(0,0,2048,2048)),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.generateMipmap(m.TEXTURE_2D),window.textures_flowers(p),e.flowers=m.createTexture(),m.bindTexture(m.TEXTURE_2D,e.flowers),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,1024,1024,0,m.RGBA,m.UNSIGNED_BYTE,p.getImageData(0,0,1024,1024)),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.generateMipmap(m.TEXTURE_2D),p.clearRect(0,0,512,600),p.font="bold 60px arial",p.fillStyle="rgb(255,255,255)",p.strokeStyle="rgb(0,0,0)",p.lineWidth=9,p.textAlign="center",p.textBaseline="middle";for(let e=0;e<10;e++)t(e,50*e+30,40);let n="+⇆,/-:()%.";for(let e=0;e<n.length;e++)t(n[e],50*e+30,115);n="abcdefghij";for(let e=0;e<n.length;e++)t(n[e],50*e+30,190);n="klmnopqrst";for(let e=0;e<n.length;e++)t(n[e],50*e+30,265);n="uvwxyz";for(let e=0;e<n.length;e++)t(n[e],50*e+30,340);n="abcdefghij".toUpperCase();for(let e=0;e<n.length;e++)t(n[e],50*e+30,415);n="klmnopqrst".toUpperCase();for(let e=0;e<n.length;e++)t(n[e],50*e+30,490);n="uvwxyz".toUpperCase();for(let e=0;e<n.length;e++)t(n[e],50*e+30,565);p.clearRect(110,438.5,43,21),e.text=m.createTexture(),m.bindTexture(m.TEXTURE_2D,e.text),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,512,600,0,m.RGBA,m.UNSIGNED_BYTE,p.getImageData(0,0,512,600)),m.generateMipmap(m.TEXTURE_2D),window.textures_bees(p);let s=p.getImageData(0,0,2048,2048);return e.bees=m.createTexture(),m.bindTexture(m.TEXTURE_2D,e.bees),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,2048,2048,0,m.RGBA,m.UNSIGNED_BYTE,s),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.generateMipmap(m.TEXTURE_2D),i=document.createElement("canvas"),i.width=2048,i.height=2048,i.getContext("2d").putImageData(s,0,0),window.textures_decals(p),e.decals=m.createTexture(),m.bindTexture(m.TEXTURE_2D,e.decals),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,1024,1024,0,m.RGBA,m.UNSIGNED_BYTE,p.getImageData(0,0,1024,1024)),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.generateMipmap(m.TEXTURE_2D),e.bear=m.createTexture(),window.textures_bear(p),m.bindTexture(m.TEXTURE_2D,e.bear),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,1024,1024,0,m.RGBA,m.UNSIGNED_BYTE,p.getImageData(0,0,1024,1024)),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.generateMipmap(m.TEXTURE_2D),e}({}),Ft=document.getElementById("dialogueBox"),Ct=document.getElementById("NPCName"),Ht=document.getElementById("NPCDialogue"),Dt=document.getElementById("actionWarning"),Lt=document.getElementById("actionName"),zt=document.getElementById("actionNameBox"),Ut=document.getElementById("shopUI"),Nt=document.getElementById("leftShopButton"),Ot=document.getElementById("rightShopButton"),Yt=document.getElementById("itemName"),Gt=document.getElementById("itemDesc"),qt=document.getElementById("itemCostSVG"),Wt=new _t(!1),Vt=new _t(!1),Xt=window.playerGear;function Zt(e,t,i,n,s){let r=new Float32Array(16),a=o.cos(n),l=o.sin(n),d=o.cos(s),h=o.sin(s);return MATH.xRotate(MATH.yRotate(r,a,l),d,h),MATH.translate(r,-e,-t,-i),MATH.mult(r,g.projectionMatrix,r),r}Xt.tool={shovel:{collectPattern:[[0,0],[0,-1]],collectAmount:2,cooldown:.8,mesh:function(e,t,i,o){e(-.3,0,.6,.1,.1,.8,!1,[.5,.2,0]),e(-.3,0,1.2,.3,.1,.4,!1,[.2,.2,.2])},desc:"A trusty shovel.<br><br>Collects 5 pollen from 2 flowers every 1s.",cost:["0 honey"]},rake:{collectPattern:[[0,0],[0,-1],[0,-2]],collectAmount:2,cooldown:.7,mesh:function(e,t,i,o){e(-.3,0,.6,.1,.105,.8,!1,[.9,.9,.9]),e(.1-.3,0,1.2,.1,.1,.5,[0,20,0],[.4,.4,.4]),e(.2-.3,0,1.1,.1,.1,.5,[0,40,0],[.4,.4,.4]),e(-.4,0,1.2,.1,.1,.5,[0,-20,0],[.4,.4,.4]),e(-.5,0,1.1,.1,.1,.5,[0,-40,0],[.4,.4,.4]),e(-.3,0,1.25,.1,.1,.4,!1,[.4,.4,.4])},desc:"A small gardening rake.<br><br>Collects 2 pollen from 3 flowers every 0.7s.",cost:["800 honey"]},clippers:{collectPattern:[[0,0]],collectAmount:9,cooldown:.6,mesh:function(e,t,i,n){e(-.35,-.15,.4,.25,.25,.1,[0,0,-30],[1.3,1.3,0]),e(.15-.2,-.15,.4,.25,.25,.1,[0,0,30],[1.3,1.3,0]),e(.15-.2-.41*o.sin(30*MATH.TO_RAD),.41*o.cos(30*MATH.TO_RAD)-.15,.4,.1,.6,.1,[0,0,30],[1.3,1.3,1.3]),e(.41*o.sin(30*MATH.TO_RAD)-.35,.41*o.cos(30*MATH.TO_RAD)-.15,.4,.1,.6,.1,[0,0,-30],[1.3,1.3,1.3])},desc:"A little pair of yellow clippers.<br><br>Collects 9 pollen from 1 flowers every 0.6s.",cost:["2200 honey"]},magnet:{collectPattern:[[0,0],[0,-1],[0,1],[-1,0],[1,0],[1,1],[1,-1],[-1,1],[-1,-1]],collectAmount:2,cooldown:.8,mesh:function(e,t,i,o){e(-.3,-.25,.5,.2,.6,.2,!1,[.8,.8,.8]),e(-.3,.15,.5,.6,.2,.2,!1,[1,0,0]),e(-.6,.3,.5,.2,.5,.2,!1,[1,0,0]),e(0,.3,.5,.2,.5,.2,!1,[1,0,0]),e(-.6,.5,.5,.19,.5,.19,!1,[1,1,1]),e(0,.5,.5,.19,.5,.19,!1,[1,1,1])},desc:"A big magnet that somehow picks up pollen particles.<br><br>Collects 2 pollen from 9 flowers every 0.8s.",cost:["5500 honey"]},vacuum:{collectPattern:[[0,0],[0,-1],[0,1],[-1,0],[1,0],[1,1],[1,-1],[-1,1],[-1,-1],[0,-2],[2,0],[0,2],[-2,0]],collectAmount:2,cooldown:.8,mesh:function(e,t,i,o){e(-.3,0,.65,.1,.8,.1,[-20,0,0],[.8,.8,.8]),e(-.3,-.1,.5,.3,.6,.25,[-20,0,0],[1,.7,.4]),e(-.3,-.3,.7,.4,.3,.3,!1,[.2,.2,.2]),e(-.4,-.3,.7,.075,.075,.31,!1,[1.4,1.4,0]),e(.1-.3,-.3,.7,.075,.075,.31,!1,[1.4,1.4,0])},desc:"A handy house-hold vacuum cleaner.<br><br>Collects 2 pollen from 13 flowers every 0.8s.",cost:["14000 honey"]},superScooper:{collectPattern:[[0,0],[0,-1],[0,-2],[0,-3],[0,-4]],collectAmount:4,cooldown:.5,mesh:function(e,t,i,o){e(-.3,0,.4,.175,.175,.2,!1,[1.5,1.5,0]),e(-.3,0,.6,.175,.175,.2,!1,[0,0,1.5]),e(-.3,0,.8,.175,.175,.2,!1,[1.5,1.5,0]),e(-.3,0,1,.175,.175,.2,!1,[0,0,1.5]),e(-.3,0,1.2,.15,.15,.2,!1,[.6,.4,.1]),e(-.15,0,1.55,.3,.175,.65,!1,[1.5,1.5,0]),e(-.3-.15,0,1.55,.3,.175,.65,!1,[0,0,1.5])},desc:"A massive toy scooper useful for pollen collection.<br><br>Collects 4 pollen from 5 flowers every 0.5s.",cost:["40000 honey"]},pulsar:{collectPattern:[[0,0],[0,-1],[0,1],[-1,0],[1,0],[1,1],[1,-1],[-1,1],[-1,-1],[0,-2],[2,0],[0,2],[-2,0],[-2,-1],[-2,1],[2,-1],[2,1],[-1,-2],[-1,2],[1,-2],[1,2],[0,-3],[0,3],[-3,0],[3,0],[-2,2],[2,2],[-2,-2],[2,-2]],collectAmount:2,cooldown:1,mesh:function(e,t,i,o){e(-.3,.2,.4,.125,1.1,.125,!1,[1.5,1.5,0]),e(-.3,-.2,.4,.175,.3,.175,!1,[0,1.5,0]),t(-.3,1,.4,.25,5e-4,10,0,0,0,0,0,0,.25),t(-.3,1,.4,.25,5e-4,10,0,0,0,.001,90,0,.25),t(-.3,1,.4,.25,5e-4,10,0,0,0,90,0,0,.25)},particles:function(){if(te-=f,te>0)return;te=.3;let e=-g.bodyDir[2],t=g.bodyDir[0];e+=g.bodyDir[0],t+=g.bodyDir[2],e*=.3,t*=.4,$t.add({x:g.body.position.x+e,y:g.body.position.y+.2+.55+.25,z:g.body.position.z+t,vx:MATH.random(-.3,.3),vy:.5*(o.random()-.5),vz:MATH.random(-.3,.3),grav:1.5,size:MATH.random(30,70),col:[0,1,0],life:1,rotVel:MATH.random(-3,3),alpha:2})},desc:"A strange magical tool that sucks up more pollen.<br><br>Collects 2 pollen from 29 flowers every 1s.",cost:["125000 honey"]},electroMagnet:{collectPattern:[[0,0],[0,-1],[0,1],[-1,0],[1,0],[1,1],[1,-1],[-1,1],[-1,-1]],collectAmount:6,cooldown:.5,mesh:function(e,t,i,o){e(-.3,-.15,.5,.2,.8,.2,!1,[.8,.8,.8]),e(-.3,.35,.5,.6,.2,.2,!1,[1.4,1.4,0]),e(-.6,.5,.5,.2,.5,.2,!1,[1.4,1.4,0]),e(0,.5,.5,.2,.5,.2,!1,[1.4,1.4,0]),e(-.6,.7,.5,.19,.5,.19,!1,[1,1,1]),e(0,.7,.5,.19,.5,.19,!1,[1,1,1]),e(-.3,.35,.5,.2,.2,.6,!1,[1.4,1.4,0]),e(-.3,.5,.2,.2,.5,.2,!1,[1.4,1.4,0]),e(-.3,.5,.8,.2,.5,.2,!1,[1.4,1.4,0]),e(-.3,.7,.2,.19,.5,.19,!1,[1,1,1]),e(-.3,.7,.8,.19,.5,.19,!1,[1,1,1])},desc:"A upgraded magnet charged with electricity.<br><br>Collects 6 pollen from 9 flowers every 0.5s.",cost:["300000 honey"]},scissors:{collectPattern:[[0,0]],collectAmount:50,cooldown:.5,mesh:function(e,t,i,n){e(-.35,-.15,.4,.25,.25,.1,[0,0,-30],[.9,0,0]),e(.15-.2,-.15,.4,.25,.25,.1,[0,0,30],[0,0,.9]),e(.15-.2-.41*o.sin(30*MATH.TO_RAD),.41*o.cos(30*MATH.TO_RAD)-.15,.4,.1,.6,.1,[0,0,30],[1.3,1.3,1.3]),e(.41*o.sin(30*MATH.TO_RAD)-.35,.41*o.cos(30*MATH.TO_RAD)-.15,.4,.1,.6,.1,[0,0,-30],[1.3,1.3,1.3])},desc:"A pair of school scissors.<br><br>Collects 50 pollen from 1 flowers every 0.5s.",cost:["850000 honey"]},honeyDipper:{collectPattern:[[-4,0],[-3,-2],[-3,-1],[-3,0],[-3,1],[-3,2],[-2,-3],[-2,-2],[-2,-1],[-2,0],[-2,1],[-2,2],[-2,3],[-1,-3],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[-1,3],[0,-4],[0,-3],[0,-2],[0,-1],[0,0],[0,1],[0,2],[0,3],[0,4],[1,-3],[1,-2],[1,-1],[1,0],[1,1],[1,2],[1,3],[2,-3],[2,-2],[2,-1],[2,0],[2,1],[2,2],[2,3],[3,-2],[3,-1],[3,0],[3,1],[3,2],[4,0]],collectAmount:2,cooldown:.8,mesh:function(e,t,i,o){e(-.3,.3,.4,.125,1.3,.125,!1,[1,.7,.4]),e(-.3,-.1,.4,.175,.5,.175,!1,[.7,.5,.2]),t(-.3,1.35,.4,.2,.075,10,1.4,.7*1.4,.4*1.4,90,0,0),t(-.3,1.55,.4,.125,.075,10,1.4,.7*1.4,.4*1.4,90,0,0),t(-.3,1.35-.2,.4,.125,.075,10,1.4,.7*1.4,.4*1.4,90,0,0),t(-.3,1.351,.4,.3,-.8,10,.9,.5,.2,90,0,0)},desc:"A giant honey dipper.<br><br>Collects 2 pollen from 49 flowers every 0.8s.",cost:["1500000 honey"]},bubbleWand:{collectPattern:[[0,3],[1,3],[-1,3],[0,-3],[1,-3],[-1,-3],[3,0],[3,1],[3,-1],[-3,0],[-3,1],[-3,-1],[2,2],[2,-2],[-2,-2],[-2,2]],collectAmount:{w:6,r:6,b:12},cooldown:.8,mesh:function(e,t,i,o){e(-.3,.4,.4,.125,1.5,.125,!1,[0,.4,1.4]),e(-.3,-.1,.4,.175,.5,.175,!1,[1.2,1.2,0]),t(-.3,1.55,.4,.5,.075,15,0,.4,1.5,0,0,0),t(-.3,1.55,.4,.4,.0755,15,0,.9,1.2,0,0,0)},particles:function(){if(te-=f,te>0)return;te=.4;let e=-g.bodyDir[2],t=g.bodyDir[0];e+=g.bodyDir[0],t+=g.bodyDir[2],e*=.3,t*=.4,$t.add({x:g.body.position.x+e+MATH.random(-.4,.4),y:g.body.position.y+.45+.6+.5+MATH.random(-.4,.4),z:g.body.position.z+t+MATH.random(-.4,.4),vx:MATH.random(-.6,.6),vy:.5*(o.random()-.5),vz:MATH.random(-.6,.6),grav:1.5,size:MATH.random(100,150),col:[0,.6,.9],life:1,rotVel:MATH.random(-3,3),alpha:.8})},ability:function(){g.toolUses%10==0&&g.fieldIn&&le.bubbles.push(new fe(g.fieldIn,o.random()*ti[g.fieldIn].width|0,o.random()*ti[g.fieldIn].length|0))},desc:"A bubble wand dipped in liquidy soap.<br><br>Collects 6 pollen from 16 flowers every 0.8s. Collects x2 more blue pollen.<br><br>Every 10th swing creates a bubble on the field.",cost:["2500000 honey"]},scythe:{collectPattern:[[0,0],[0,-1],[0,-2],[0,-3],[0,-4],[0,-5],[0,-6]],collectAmount:{w:8,r:16,b:8},cooldown:.47,mesh:function(e,t,i,o){e(-.3,.4,.4,.125,1.5,.125,!1,[1.4,1.4,0]),e(-.3,-.1,.4,.175,.5,.175,!1,[1.4,0,0]),e(-.3,1,.8,.15,.35,.7,!1,[1.3,1.3,1.3]),e(-.3,.95,1.3,.15,.3,.5,[20,0,0],[1.3,1.3,1.3]),e(-.3,.8,1.55,.15,.2,.3,[45,0,0],[1.3,1.3,1.3]),e(-.3,1.2,.8,.2,.35,.7,!1,[1.3,0,0]),e(-.3,1.15,1.3,.2,.3,.5,[20,0,0],[1.3,0,0]),e(-.3,.925,1.65,.2,.3,.5,[45,0,0],[1.3,0,0])},particles:function(){if(te-=f,te>0)return;te=.4;let e=g.bodyDir[0],t=1.5,i=0*g.bodyDir[2];e+=1.2*-g.bodyDir[2],i+=1.2*g.bodyDir[0];let n=1.5*o.random();e+=g.bodyDir[0]*n,t-=.25*n,i+=g.bodyDir[2]*n,$t.add({x:g.body.position.x+e,y:g.body.position.y+t,z:g.body.position.z+i,vx:MATH.random(-.8,.8),vy:.75,vz:MATH.random(-.8,.8),grav:1.5,size:MATH.random(70,120),col:[1,MATH.random(.3,.6),0],life:1,rotVel:MATH.random(-3,3),alpha:4.5})},ability:function(){g.toolUses%10==0&&(g.fieldIn?le.flames.push(new pe(g.fieldIn,g.flowerIn.x,g.flowerIn.z)):le.flames.push(new pe(g.body.position.x,g.body.position.y,g.body.position.z,!0)))},desc:"A red scythe forged and heated in fire.<br><br>Collects 8 pollen from 6 flowers every 0.47s. Collects x2 more red pollen.<br><br>Every 10th swing summons a flame nearby.",cost:["2500000 honey"]},goldenRake:{collectPattern:[[-3,0],[-3,-1],[-3,-2],[-3,-3],[3,0],[3,-1],[3,-2],[3,-3],[-1,0],[-1,-1],[-1,-2],[-1,-3],[1,0],[1,-1],[1,-2],[1,-3]],collectAmount:7,cooldown:.75,mesh:function(e,t,i,o){e(-.3,0,.6,.1,.1,.8,!1,[1.3,1.3,.4]),e(.1-.3,0,1.2,.1,.1,.5,[0,20,0],[1.3,1.3,.4]),e(.2-.3,0,1.1,.1,.1,.5,[0,40,0],[1.3,1.3,.4]),e(-.4,0,1.2,.1,.1,.5,[0,-20,0],[1.3,1.3,.4]),e(-.5,0,1.1,.1,.1,.5,[0,-40,0],[1.3,1.3,.4]),e(-.3,0,1.25,.1,.1,.4,!1,[1.3,1.3,.4])},ability:function(){g.toolUses%5==0&&g.fieldIn&&le.mobs.push(new et(null,g.flowerIn.x,g.flowerIn.z,!0))},desc:"A shiny golden rake with improved pollen collection.<br><br>Collects 7 pollen from 16 flowers every 0.75s.<br><br>Every 5th swing is supercharged and collects more flowers from longer lines.",cost:["12500000 honey"]},sparkStaff:{collectPattern:[[2,1],[-2,1],[0,-2]],collectAmount:35,cooldown:.5,mesh:function(e,t,i,o){e(-.3,.3,.4,.1,1.25,.1,!1,[1,0,1]),e(-.42,.875,.32,.1,.1,.1,!1,[1.2,1.2,0]),e(-.18,.875,.32,.1,.1,.1,!1,[1.2,1.2,0]),e(-.3,.875,.52,.1,.1,.1,!1,[1.2,1.2,0]),e(-.3,1.025,.4,.1,.1,.1,!1,[1.2,1.2,0])},ability:function(){if(!g.fieldIn)return void(Xt.tool.sparkStaff.collectPattern=[[2,1],[-2,1],[0,-2]]);Xt.tool.sparkStaff.collectPattern=[];let e=[[-5,0],[-4,-3],[-4,-2],[-4,-1],[-4,0],[-4,1],[-4,2],[-4,3],[-3,-4],[-3,-3],[-3,-2],[-3,-1],[-3,0],[-3,1],[-3,2],[-3,3],[-3,4],[-2,-4],[-2,-3],[-2,-2],[-2,-1],[-2,0],[-2,1],[-2,2],[-2,3],[-2,4],[-1,-4],[-1,-3],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[-1,3],[-1,4],[0,-5],[0,-4],[0,-3],[0,-2],[0,-1],[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[1,-4],[1,-3],[1,-2],[1,-1],[1,0],[1,1],[1,2],[1,3],[1,4],[2,-4],[2,-3],[2,-2],[2,-1],[2,0],[2,1],[2,2],[2,3],[2,4],[3,-4],[3,-3],[3,-2],[3,-1],[3,0],[3,1],[3,2],[3,3],[3,4],[4,-3],[4,-2],[4,-1],[4,0],[4,1],[4,2],[4,3],[5,0]];ti[g.fieldIn];for(let t=0;t<3;t++){let t=o.random()*e.length|0,i=e[t];Xt.tool.sparkStaff.collectPattern.push(i),e.splice(t,1)}},desc:"A wand powered by static electricity.<br><br>Collects 35 pollen from 3 random flowers every 0.5s.<br><br>Unlike in the real game, this tool is good :D",cost:["40000000 honey"]},porcelainDipper:{collectPattern:[[-4,0],[-3,-2],[-3,-1],[-3,0],[-3,1],[-3,2],[-2,-3],[-2,-2],[-2,-1],[-2,0],[-2,1],[-2,2],[-2,3],[-1,-3],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[-1,3],[0,-4],[0,-3],[0,-2],[0,-1],[0,0],[0,1],[0,2],[0,3],[0,4],[1,-3],[1,-2],[1,-1],[1,0],[1,1],[1,2],[1,3],[2,-3],[2,-2],[2,-1],[2,0],[2,1],[2,2],[2,3],[3,-2],[3,-1],[3,0],[3,1],[3,2],[4,0]],collectAmount:{w:4.5,r:3,b:3},cooldown:.7,mesh:function(e,t,i,o){e(-.3,.4,.4,.125,1.5,.125,!1,[1.4,1.4,1.4]),e(-.3,-.1,.4,.175,.5,.175,!1,[1.2,1.2,0]),t(-.3,1.55,.4,.2,.075,10,1.5,1.5,1.5,90,0,0),t(-.3,1.75,.4,.125,.075,10,1.5,1.5,1.5,90,0,0),t(-.3,1.35,.4,.125,.075,10,1.5,1.5,1.5,90,0,0),t(-.3,1.05+.501,.4,.3,-.8,10,1.4,1.4,1.4,90,0,0),e(-.5,1,.4,.175,.5,.12,[0,0,70],[0,0,1.4]),e(-.5,.825,.4,.175,.4,.12,[0,0,-70],[0,0,1.4]),e(.4-.5,1,.4,.175,.5,.12,[0,0,-70],[1.4,0,0]),e(.4-.5,.825,.4,.175,.4,.12,[0,0,70],[1.4,0,0])},particles:function(){if(te-=f,te>0)return;te=.5;let e=-g.bodyDir[2],t=g.bodyDir[0];e+=g.bodyDir[0],t+=g.bodyDir[2],e*=.325,t*=.325,$t.add({x:g.body.position.x+e+MATH.random(-.4,.4),y:g.body.position.y+1.75+MATH.random(-.4,.4),z:g.body.position.z+t+MATH.random(-.4,.4),vx:MATH.random(-.8,.8),vy:.5*o.random()+.4,vz:MATH.random(-.8,.8),grav:-1.25*o.random()-.25,size:MATH.random(20,60),col:[.95,.95,.95],life:1,rotVel:MATH.random(-3,3),alpha:.5})},ability:function(){g.toolUses%10==0&&(le.explosions.push(new ue({col:[1,1,1],pos:[g.body.position.x,g.body.position.y,g.body.position.z],life:.4,size:5,alpha:2,height:500})),g.fieldIn&&Hi({x:g.flowerIn.x,z:g.flowerIn.z,pattern:[[-4,0],[-3,-2],[-3,-1],[-3,0],[-3,1],[-3,2],[-2,-3],[-2,-2],[-2,-1],[-2,0],[-2,1],[-2,2],[-2,3],[-1,-3],[-1,-2],[-1,-1],[-1,0],[-1,1],[-1,2],[-1,3],[0,-4],[0,-3],[0,-2],[0,-1],[0,0],[0,1],[0,2],[0,3],[0,4],[1,-3],[1,-2],[1,-1],[1,0],[1,1],[1,2],[1,3],[2,-3],[2,-2],[2,-1],[2,0],[2,1],[2,2],[2,3],[3,-2],[3,-1],[3,0],[3,1],[3,2],[4,0]],amount:50,stackHeight:.6+.5*o.random()}))},desc:"A dipper drizzled with brittle liquid porcelain.<br><br>Collects 3 pollen from 49 flowers every 0.7s. Collects x1.5 more white pollen.<br><br>Every 10th swing summons a pillar of light that collects massive pollen.",cost:["100000000 honey"]},petalWand:{collectPattern:[[0,0],[0,-1],[0,-2],[0,-3],[0,-4],[0,-5],[0,-6],[-1,-3],[-1,-4],[-1,-5],[1,-3],[1,-4],[1,-5],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[-1,3],[-1,4],[-1,5],[1,3],[1,4],[1,5],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[3,1],[4,1],[5,1],[3,-1],[4,-1],[5,-1],[-1,0],[-2,0],[-3,0],[-4,0],[-5,0],[-6,0],[-3,1],[-4,1],[-5,1],[-3,-1],[-4,-1],[-5,-1]],collectAmount:10,cooldown:.7,mesh:function(e,t,i,n){e(-.4,.6,.4,.15,1.5,.15,!1,[0,.7,0]),e(-.4,1.45,.4,.3,.3,.3,[45,0,45],[1.5,1.2,0]);for(let t=0;t<MATH.TWO_PI;t+=MATH.TWO_PI/3)e(.5*o.sin(t)-.3-.1,1.35,.4+.5*o.cos(t),.7,.1,.7,[-30*o.sin(t),0,-30*o.cos(t)],[1.2,1.2,1.2]);for(let t=MATH.QUATER_PI;t<MATH.TWO_PI+MATH.QUATER_PI;t+=MATH.TWO_PI/3)e(.5*o.sin(t)-.3-.1,1.35,.4+.5*o.cos(t),.7,.1,.7,[30*o.sin(t),0,30*o.cos(t)],[1.2,1.2,1.2]);for(let t=0;t<MATH.TWO_PI;t+=MATH.TWO_PI/3)e(.5*o.sin(t)-.4,1.2,.4+.5*o.cos(t),.7,.1,.7,[60,t*MATH.TO_DEG,0],[1.2,1.2,1.2]),e(.25*o.sin(t)-.4,1.2,.4+.25*o.cos(t),.7,.1,.7,[-60,t*MATH.TO_DEG,0],[1.2,1.2,1.2])},ability:function(){g.toolUses%3==0&&le.mobs.push(new Be([g.body.position.x,g.body.position.y+.25,g.body.position.z],g.bodyDir.slice()))},particles:function(){if(te-=f,te>0)return;te=.3;let e=-g.bodyDir[2],t=g.bodyDir[0];e+=g.bodyDir[0],t+=g.bodyDir[2],e*=.325,t*=.325,$t.add({x:g.body.position.x+e,y:g.body.position.y+1.65,z:g.body.position.z+t,vx:MATH.random(-.9,.9),vy:.5*o.random()+.2,vz:MATH.random(-.9,.9),grav:-1.5,size:MATH.random(20,50),col:[.9,.7,.3],life:.7,rotVel:MATH.random(-3,3),alpha:.35})},desc:"A luxurious flower with enchanted petals.<br><br>Collects 10 pollen from 49 flowers every 0.7s.<br><br>Every 3rd swing summons a flying petal shuriken that collects tokens and causes bees to convert pollen.",cost:["1000000000 honey","5 starJelly","25 enzymes","25 glitter"]},darkScythe:{collectPattern:[[0,-3],[0,-4],[1,-5],[1,-4],[1,-3],[2,-5],[2,-4],[2,-3],[3,-3],[3,-5],[4,-1],[-1,-3],[-1,-4],[-2,-3],[-3,-3],[0,-5],[-1,-5],[-2,-4],[-4,-2],[3,-4],[4,-4],[2,-2],[3,-2],[-2,-2],[-3,-2],[-4,-1]],collectAmount:13,cooldown:.575,mesh:function(e,t,i,o){e(-.55,.75,.55,.15,2.2,.15,[0,0,0],[.1,0,0],[0,0,30]),e(-.55,1.6,1.1,.15,.6,1.2,[0,0,0],[.1,0,0],[0,0,30]),e(-.55,1.5,2,.15,.5,1,[20,0,0],[.1,0,0],[0,0,30]),e(-.55,1.2,2.6,.15,.35,1,[40,0,0],[.1,0,0],[0,0,30]),e(-.55,1.3,1.1,.175,.18,1.2,[0,0,0],[1.2,0,.4],[0,0,30]),e(-.55,1.2,2,.175,.15,1,[20,0,0],[1.2,0,.4],[0,0,30]),e(-.55,.9,2.6,.175,.15,.5,[40,0,0],[1.2,0,.4],[0,0,30]),e(-.55,1.95,.1,.15,.15,1.3,[20,0,0],[.1,0,0],[0,0,30]),e(-.55,1.25,.1,.15,.15,.9,[-20,0,0],[.1,0,0],[0,0,30])},ability:function(e){if(le.mobs.push(new tt),g.fieldIn&&!g.attacked.length){let t=o.round(g.body.position.x-ti[g.fieldIn].x),i=o.round(g.body.position.z-ti[g.fieldIn].z),n=[];for(let o in e){let s=e[o][0]+t,r=e[o][1]+i;s>=0&&s<ti[g.fieldIn].width&&s>=0&&r<ti[g.fieldIn].length&&n.push([s,r])}for(let e in le.flames){let t=le.flames[e];MATH.indexOfArrays(n,[t.x,t.z])>-1&&t.turnDark()}}else for(let e in le.flames){let t=le.flames[e];t.isStatic&&vec3.sqrDist(t.pos,[g.body.position.x+2*g.bodyDir[0],g.body.position.y,g.body.position.z+2*g.bodyDir[2]])<7&&t.turnDark()}},particles:function(){if(te-=f,te>0)return;te=.05;let e=g.bodyDir[0],t=1.5,i=0*g.bodyDir[2];e+=1.2*-g.bodyDir[2],i+=1.2*g.bodyDir[0];let n=2.5*o.random();e+=g.bodyDir[0]*n,t-=.25*n,i+=g.bodyDir[2]*n,$t.add({x:g.body.position.x+e,y:g.body.position.y+t,z:g.body.position.z+i,vx:2*-g.bodyDir[2],vy:1.75,vz:2*g.bodyDir[0],grav:0,size:MATH.random(70,120),col:[1,0,o.random()],life:1,rotVel:MATH.random(-3,3),alpha:4.5})},desc:"Swipe through flames to unlock their dark potential. Ensue dark chaos in fields and refuel burning flames, collecting more pollen and dealing more damage. Tend a destructive field of violet fire to enhance your Super-Crit power and Instant Red Conversion.",cost:["2500000000000 honey","1000 redExtract","200 stinger","50 hardWax","15 superSmoothie"]},tidePopper:{collectPattern:[[0,0],[-1,0],[1,0],[-2,0],[2,0],[-1,-1],[0,-1],[1,-1],[-1,-2],[0,-2],[1,-2],[-1,-3],[0,-3],[1,-3],[-1,-4],[0,-4],[1,-4],[-1,-5],[0,-5],[1,-5],[0,-6],[0,-7],[0,-8]],collectAmount:13,cooldown:1,mesh:function(e,t,i,o,n){t(-.4,2.2,.4,.25,.05,15,1,3,7,90,0,0,.25),t(-.4,1.6,.4,.3,.05,15,1,3,7,90,0,0,.3),t(-.4,1.1,.4,.4,.05,15,1,3,7,90,0,0,.4),t(-.4,1.7,.4,.3,2.25,10,.3,1,2,90,0,0,0),e(-.4,.5,.4,.15,1.4,.15,!1,[.1,.8,1.8]),i(-.4-.8,.85,.4,.25,1,100,100,100),i(.4,.85,.4,.25,1,100,100,100),i(-.4,.85,-.4,.25,1,100,100,100),i(-.4,.85,.4+.8,.25,1,100,100,100),n(20,-20,0)},ability:function(){g.toolUses%3==0&&le.mobs.push(new We([g.body.position.x,g.body.position.y+.25,g.body.position.z],g.bodyDir.slice()))},particles:function(){if(te-=f,te>0)return;te=.1;let e=-g.bodyDir[2],t=g.bodyDir[0],i=MATH.random(.2,.9);e+=g.bodyDir[0],t+=g.bodyDir[2],e*=i,t*=i,$t.add({x:g.body.position.x+e,y:g.body.position.y+MATH.random(.1,2.5),z:g.body.position.z+t,vx:e,vy:1.6,vz:t,grav:0,size:MATH.random(20,50),col:[.1,.7,1],life:.7,rotVel:MATH.random(-3,3),alpha:.5})},desc:"Pierce through flowers and bubbles with torriental waves, washing away tokens and converting pollen from bees. Swings faster and ramps up the more you pop, then unleashes tidal waves in a violent surge at 500 bubbles. Splash Balloons with tall waves to earn Tide Blessing and re-energize tidal waves with the destruction of bubbles.",cost:["2500000000000 honey","1000 blueExtract","200 stinger","25 swirledWax","15 superSmoothie"]},gummyBaller:{collectPattern:[[-3,-3],[-2,-5],[-2,-4],[-2,-3],[-2,-2],[-2,-1],[-1,-5],[-1,-4],[-1,-3],[-1,-2],[-1,-1],[0,-6],[0,-5],[0,-4],[0,-3],[0,-2],[0,-1],[0,0],[1,-5],[1,-4],[1,-3],[1,-2],[1,-1],[2,-5],[2,-4],[2,-3],[2,-2],[2,-1],[3,-3]],collectAmount:16,cooldown:1,mesh:function(e,t,i,o){t(-.4,-.1,.4,.15,.35,15,.26,2.7,1.1,90,0,0,.15),t(-.4,.8,.4,.1,1.75,15,1.5,.15,1.5,90,0,0,.1),i(-.4,1.6,.4,.5,1,.26,2.7,1.1),t(-.4,1.75,.4,.45,.25,15,1.5,.15,1.5,90,0,0,.6),i(-.7,1.85,.4,.25,1,.26,2.7,1.1),i(.3-.4,1.85,.4,.25,1,.26,2.7,1.1),i(-.4,1.85,.4-.3,.25,1,2.625,1.1375,2.625),i(-.4,1.85,.7,.25,1,2.625,1.1375,2.625)},particles:function(){let e=.4*(-g.bodyDir[2]+g.bodyDir[0]),t=.4*(g.bodyDir[0]+g.bodyDir[2]);g.lagPos[0]+=(g.body.position.x-g.lagPos[0])*f*12.5,g.lagPos[1]+=(g.body.position.y-g.lagPos[1])*f*12.5,g.lagPos[2]+=(g.body.position.z-g.lagPos[2])*f*12.5,de.explosions.instanceData.push(g.lagPos[0]+e,g.lagPos[1]+2+.3*g.gummyBallSize,g.lagPos[2]+t,.9*g.isNight,.18*g.isNight,.9*g.isNight,1,.5*g.gummyBallSize,1),te-=f,te>0||(te=.4/g.gummyBallSize,$t.add({x:g.lagPos[0]+e,y:g.lagPos[1]+2+.3*g.gummyBallSize,z:g.lagPos[2]+t,vx:MATH.random(-g.gummyBallSize,g.gummyBallSize),vy:MATH.random(-g.gummyBallSize,g.gummyBallSize),vz:MATH.random(-g.gummyBallSize,g.gummyBallSize),grav:0,size:MATH.random(20,50)*g.gummyBallSize,col:[.1,.8,1],life:.75,rotVel:MATH.random(-3,3),alpha:g.gummyBallSize-.5}))},desc:"Absorb goo to conjure up a delectable arsenal of gummy wrecking balls. Cover the field in goo and collect pollen with a giant gummyball. Ricochet off Marks and Honey Tokens to build up your gummyball combo for massive gooey gains.",cost:["10000000000000 honey","1000 glue","2500 gumdrops","50 causticWax","3 turpentine"]}},g=function(e){e.autoRJSettings={until:"rare",gifted:!1},e.restrictionInfo={},e.computeRestrictionInfo=function(){e.restrictionInfo.wall=[.3*(e.targetLight<.9?0:1),.7*(e.targetLight<.9?0:1),1.2*(e.targetLight<.9?0:1)];let t=0,i=0,o=0,n=0,s=0;for(let i in e.hive)for(let o in e.hive[i]){null!==e.hive[i][o].type&&t++}for(let t in e.discoveredBees)"red"===K[e.discoveredBees[t]].color&&i++,"blue"===K[e.discoveredBees[t]].color&&o++,"epic"===K[e.discoveredBees[t]].rarity&&n++,"legendary"===K[e.discoveredBees[t]].rarity&&s++;e.restrictionInfo.allowed_5=t>=5||"You need 5 bees to enter the 5 Bee Zone!",e.restrictionInfo.allowed_10=t>=10||"You need 10 bees to enter the 10 Bee Zone!",e.restrictionInfo.allowed_15=t>=15||"You need 15 bees to enter the 15 Bee Zone!",e.restrictionInfo.allowed_20=t>=20||"You need 20 bees to enter the 20 Bee Zone!",e.restrictionInfo.allowed_25=t>=25||"You need 25 bees to enter the 25 Bee Zone!",e.restrictionInfo.allowed_30=t>=30||"You need 30 bees to enter the 30 Bee Zone!",e.restrictionInfo.allowed_35=t>=35||"You need 35 bees to enter the 35 Bee Zone!",e.restrictionInfo.allowed_redHQ=i>=4||"Discover 4 red bee types to enter the Red HQ!",e.restrictionInfo.allowed_blueHQ=o>=4||"Discover 4 blue bee types to enter the Blue HQ!",e.restrictionInfo.allowed_sprinkler=s>=1||"Discover 1 legendary bee type to enter the Sprinkler Shop!",e.restrictionInfo.allowed_ace=n>=5||"Discover 5 epic bee types to enter the Ace Shop!",e.restrictionInfo.allowed_dapper="helmet"!==e.currentGear.mask&&"none"!==e.currentGear.mask&&"basicBoots"!==e.currentGear.boots&&"none"!==e.currentGear.boots||"You must wear a nice hat and cool boots to enter the Dapper Shop!",e.restrictionInfo.allowed_cocoCave=!e.extraInfo.mob_coco||e.extraInfo.mob_coco<=0},e.extraInfo={beequipIds:0,enablePollenText:!0,drives:{red:0,blue:0,white:0,glitched:0},freeRoboPass:0},e.endRoboChallenge=function(){e.addMessage("The Robo Challenge is over! Your score is "+e.roboChallenge.round+"!",[0,150,0]);let t=[["honey",e.roboChallenge.round*e.roboChallenge.round*e.roboChallenge.round*e.roboChallenge.round*e.roboChallenge.round*25+1e4],[["redDrive","blueDrive","whiteDrive","glitchedDrive"][o.random()*(e.roboChallenge.round>=10?4:3)|0],1]];t.push(...MATH.selectFromArray([["starJelly",1],["softWax",0|MATH.random(1,4)],["hardWax",1],["fieldDice",0|MATH.random(1,4)],["smoothDice",0|MATH.random(1,2)],["loadedDice",1],["oil",0|MATH.random(1,4)],["glue",0|MATH.random(1,4)],["neonberry",0|MATH.random(1,4)],["whirligig",0|MATH.random(1,7)],["honeysuckle",0|MATH.random(1,15)],["microConverter",0|MATH.random(1,4)],["jellyBeans",0|MATH.random(1,6)]],0|o.min(e.roboChallenge.round/6,3))),e.roboChallenge.round>11&&o.random()<.25&&t.push(["purplePotion",1]),e.roboChallenge.round>14&&t.push(["atomicTreat",1]),e.roboChallenge.round>17&&o.random()<.2&&t.push(["superSmoothie",1]);for(let i in t)"honey"===t[i][0]?g.honey+=t[i][1]:se[t[i][0]].amount+=t[i][1],e.addMessage("+"+MATH.addCommas(t[i][1]+"")+" "+MATH.doGrammar(t[i][0])+" (from Robo Challenge)",[35,75,255]);document.getElementById("roboMenu").style.display="none",document.getElementById("roboQuestMenu").style.display="none";let i,n=[];if(e.roboChallenge.round>=5&&(i="bronze"),e.roboChallenge.round>=10&&(i="silver"),e.roboChallenge.round>=15&&(i="gold"),e.roboChallenge.round>=20&&(i="diamond"),e.roboChallenge.round>=25&&(i="supreme"),i){switch(i){case"bronze":n.push("*"+MATH.random(1.1,1.2).toFixed(2)+" capacityMultiplier"),n.push("*"+MATH.random(1.03,1.05).toFixed(2)+" beeAttack"),o.random()<.25?n.push("*"+MATH.random(1.01,1.05).toFixed(2)+" POLLEN"):n.push("*"+MATH.random(1.05,1.1).toFixed(2)+" "+["red","blue","white"][3*o.random()|0]+"Pollen"),o.random()<.333?n.push("+"+MATH.random(.01,.03).toFixed(2)+" instantRedConversion"):o.random()<.5?n.push("+"+MATH.random(.01,.03).toFixed(2)+" instantWhiteConversion"):n.push("+"+MATH.random(.01,.03).toFixed(2)+" instantBlueConversion");break;case"silver":n.push("*"+MATH.random(1.2,1.3).toFixed(2)+" capacityMultiplier"),n.push("*"+MATH.random(1.05,1.08).toFixed(2)+" beeAttack"),o.random()<.25?n.push("*"+MATH.random(1.02,1.06).toFixed(2)+" POLLEN"):n.push("*"+MATH.random(1.07,1.15).toFixed(2)+" "+["red","blue","white"][3*o.random()|0]+"Pollen"),o.random()<.333?n.push("+"+MATH.random(.02,.03).toFixed(2)+" instantRedConversion"):o.random()<.5?n.push("+"+MATH.random(.02,.03).toFixed(2)+" instantWhiteConversion"):n.push("+"+MATH.random(.02,.03).toFixed(2)+" instantBlueConversion"),o.random()<.333?n.push("*"+MATH.random(1.02,1.06).toFixed(2)+" flamePollen"):o.random()<.5?n.push("*"+MATH.random(1.02,1.06).toFixed(2)+" bubblePollen"):n.push("*"+MATH.random(1.02,1.06).toFixed(2)+" markDuration");break;case"gold":n.push("*"+MATH.random(1.3,1.4).toFixed(2)+" capacityMultiplier"),n.push("*"+MATH.random(1.06,1.1).toFixed(2)+" beeAttack"),o.random()<.25?n.push("*"+MATH.random(1.03,1.07).toFixed(2)+" POLLEN"):n.push("*"+MATH.random(1.15,1.2).toFixed(2)+" "+["red","blue","white"][3*o.random()|0]+"Pollen"),o.random()<.333?n.push("+"+MATH.random(.02,.05).toFixed(2)+" instantRedConversion"):o.random()<.5?n.push("+"+MATH.random(.02,.05).toFixed(2)+" instantWhiteConversion"):n.push("+"+MATH.random(.02,.05).toFixed(2)+" instantBlueConversion"),o.random()<.333?n.push("*"+MATH.random(1.04,1.08).toFixed(2)+" flamePollen"):o.random()<.5?n.push("*"+MATH.random(1.04,1.08).toFixed(2)+" bubblePollen"):n.push("*"+MATH.random(1.04,1.08).toFixed(2)+" markDuration");break;case"diamond":n.push("*"+MATH.random(1.4,1.5).toFixed(2)+" capacityMultiplier"),n.push("*"+MATH.random(1.07,1.12).toFixed(2)+" beeAttack"),o.random()<.25?n.push("*"+MATH.random(1.04,1.08).toFixed(2)+" POLLEN"):n.push("*"+MATH.random(1.2,1.25).toFixed(2)+" "+["red","blue","white"][3*o.random()|0]+"Pollen"),o.random()<.333?n.push("+"+MATH.random(.04,.09).toFixed(2)+" instantRedConversion"):o.random()<.5?n.push("+"+MATH.random(.04,.09).toFixed(2)+" instantWhiteConversion"):n.push("+"+MATH.random(.04,.09).toFixed(2)+" instantBlueConversion"),o.random()<.333?n.push("*"+MATH.random(1.05,1.12).toFixed(2)+" flamePollen"):o.random()<.5?n.push("*"+MATH.random(1.05,1.12).toFixed(2)+" bubblePollen"):n.push("*"+MATH.random(1.04,1.08).toFixed(2)+" markDuration"),o.random()<.5?o.random()<.5?n.push("*1.05 nectarMultiplier"):n.push("*"+MATH.random(1.15,1.35).toFixed(2)+" honeyFromTokens"):o.random()<.5?n.push("*"+MATH.random(1.05,1.11).toFixed(2)+" superCritPower"):n.push("*"+MATH.random(1.1,1.2).toFixed(2)+" tokenLifespan");break;case"supreme":n.push("*"+MATH.random(1.5,1.6).toFixed(2)+" capacityMultiplier"),n.push("*"+MATH.random(1.1,1.15).toFixed(2)+" beeAttack"),o.random()<.25?n.push("*"+MATH.random(1.05,1.1).toFixed(2)+" POLLEN"):n.push("*"+MATH.random(1.2,1.3).toFixed(2)+" "+["red","blue","white"][3*o.random()|0]+"Pollen"),o.random()<.333?n.push("+"+MATH.random(.07,.13).toFixed(2)+" instantRedConversion"):o.random()<.5?n.push("+"+MATH.random(.07,.13).toFixed(2)+" instantWhiteConversion"):n.push("+"+MATH.random(.07,.13).toFixed(2)+" instantBlueConversion"),o.random()<.333?n.push("*"+MATH.random(1.07,1.15).toFixed(2)+" flamePollen"):o.random()<.5?n.push("*"+MATH.random(1.07,1.15).toFixed(2)+" bubblePollen"):n.push("*"+MATH.random(1.04,1.08).toFixed(2)+" markDuration"),o.random()<.5?o.random()<.5?n.push("*1.05 nectarMultiplier"):n.push("*"+MATH.random(1.35,1.6).toFixed(2)+" honeyFromTokens"):o.random()<.5?n.push("*"+MATH.random(1.08,1.15).toFixed(2)+" superCritPower"):n.push("*"+MATH.random(1.2,1.3).toFixed(2)+" tokenLifespan")}e.showGeneratedAmulet(i+"CogAmulet",n)}for(let t in e.effects)if("roboChallengeBuff"===e.effects[t]){e.effects.splice(t,1);break}void 0!==e.roboChallenge.mobSpawnIntervalID&&window.clearInterval(e.roboChallenge.mobSpawnIntervalID);for(let e=le.mobs.length;e--;)(le.mobs[e]instanceof Re||le.mobs[e]instanceof Fe||le.mobs[e]instanceof Ce)&&le.mobs[e].die(e);e.roboChallenge=void 0,se.cog.amount=0,e.updateInventory()},window.endRoboChallenge=e.endRoboChallenge,e.updateRoboChallenge=function(){e.roboChallenge&&(e.roboChallenge.questCompleted||(e.roboChallenge.timer-=f),e.roboChallenge.timer<=0&&e.roboChallenge.isPlaying&&e.endRoboChallenge())};let t={Botnet:{stats:"*1.25 pollenFromBees",rarity:"common",maxStacks:1},Iterate:{stats:"*1.05 redPollen,*1.05 bluePollen,*1.05 whitePollen",rarity:"common",maxStacks:15},Sharpen:{stats:"*1.25 beeAttack,*0.9 capacity",rarity:"common",maxStacks:5},Defragment:{stats:"*1.5 capacity,-20% criticalPower",rarity:"common",maxStacks:5},XSS:{stats:"*1.1 bluePollen,*0.91 whitePollen",rarity:"common",maxStacks:1},"Overfit: Red":{stats:"*1.1 redPollen,*0.95 capacity",rarity:"common",maxStacks:10},"Overfit: Blue":{stats:"*1.1 bluePollen,*0.95 beeSpeed,*0.95 walkSpeed",rarity:"common",maxStacks:10},"Overfit: White":{stats:"*1.1 whitePollen,*0.9 convertRate",rarity:"common",maxStacks:10},Apply:{stats:"*1.2 pollenFromCoconuts",rarity:"common",maxStacks:3},Clockwork:{stats:"+3 cogsPerRound,*0.9 markDuration",rarity:"common",maxStacks:3},Outsource:{stats:"*1.1 pollenFromTools,*0.95 pollenFromBees",rarity:"common",maxStacks:5},Equalize:{stats:"+1 beeAttack,*0.975 beeAttack",rarity:"common",maxStacks:3},"Flash Drive":{stats:"*1.01 beeSpeed,*1.01 walkSpeed,-1% criticalChance",rarity:"common",maxStacks:10},Memory:{stats:"*1.03 redBeeAbilityRate,*1.03 blueBeeAbilityRate,*1.03 whiteBeeAbilityRate",rarity:"common",maxStacks:3},Binary:{stats:"*0.5 honeyAtHive,*2 convertRateAtHive",rarity:"common",maxStacks:3},Codec:{stats:"+5% instantRedConversion,+5% instantBlueConversion,+5% instantWhiteConversion,*0.96 beeAttack",rarity:"common",maxStacks:3},Overclock:{stats:"*1.04 beeSpeed,*1.04 walkSpeed,*0.9 capacity",rarity:"common",maxStacks:3},Inverse:{stats:"*1.5 beeAttack,*0.5 capacity",rarity:"common",maxStacks:1},Transpose:{stats:"*1.1 convertRate,*0.9 convertRateAtHive",rarity:"common",maxStacks:3},"Cross Product":{stats:"+2 movementCollection,*1.04 walkSpeed",rarity:"common",maxStacks:3},"Dot Product":{stats:"+2% criticalChance,*1.04 walkSpeed",rarity:"common",maxStacks:5},Projection:{stats:"*1.03 redPollen,*1.03 bluePollen",rarity:"common",maxStacks:5},Offset:{stats:"*1.15 tokenLifespan,*0.96 walkSpeed",rarity:"common",maxStacks:3},Sine:{stats:"*1.05 bluePollen",rarity:"common",maxStacks:4},Cosine:{stats:"*1.05 redPollen",rarity:"common",maxStacks:4},Tangent:{stats:"*1.05 whitePollen",rarity:"common",maxStacks:4},Reduce:{stats:"*1.03 beeAttack,*0.98 redPollen,*0.98 bluePollen,*0.98 whitePollen",rarity:"common",maxStacks:10},Refractor:{stats:"*1.06 convertRate",rarity:"common",maxStacks:10},NRG:{stats:"*1.07 beeEnergy,*1.02 walkSpeed,-1 cogsPerRound",rarity:"common",maxStacks:10},VPN:{stats:"+2% defense,*0.98 walkSpeed",rarity:"rare",maxStacks:10},Hyperbolic:{stats:"*1.06 beeAttack,*0.98 goo",rarity:"rare",maxStacks:5},Inject:{stats:"+1 redBeeAttack,+1 whiteBeeAttack,+1 blueBeeAttack,-1 cogsPerRound",rarity:"rare",maxStacks:3},Fragment:{stats:"+4% instantBombConversion",rarity:"rare",maxStacks:4},Translation:{stats:"*1.03 beeSpeed",rarity:"rare",maxStacks:3},"Blue Screen":{stats:"*1.08 blueBeeAbilityRate,+2 blueBeeAttack,-1 cogsPerRound",rarity:"rare",maxStacks:3},Commit:{stats:"+5% superCritChance,-3% criticalChance",rarity:"rare",maxStacks:2},GPU:{stats:"*1.05 walkSpeed",rarity:"rare",maxStacks:2},CPU:{stats:"+20% criticalPower,*0.9 walkSpeed",rarity:"rare",maxStacks:1},Saturate:{stats:"+2 redBeeAttack,+2 blueBeeAttack,-2 whiteBeeAttack",rarity:"rare",maxStacks:3},RAM:{stats:"+50000 capacity,+1 cogsPerRound,-2% defense",rarity:"rare",maxStacks:10},"SSD: Blue":{stats:"*1.5 blueFieldCapacity,*1.25 blueConvertRate,-3% criticalChance",rarity:"rare",maxStacks:3},"SSD: Red":{stats:"*1.5 redFieldCapacity,*1.25 redConvertRate,*0.7 whiteBombPollen",rarity:"rare",maxStacks:3},"SSD: White":{stats:"*1.5 whiteFieldCapacity,*1.25 whiteConvertRate,*0.9 beeAttack",rarity:"rare",maxStacks:3},Bluetooth:{stats:"*1.1 bluePollen,+1 blueBeeAttack",rarity:"rare",maxStacks:3},Bruteforce:{stats:"*1.1 redPollen,+3% superCritChance",rarity:"rare",maxStacks:3},"Fluid Simulation":{stats:"*1.1 whitePollen,*1.08 goo",rarity:"rare",maxStacks:3},Method:{stats:"*1.2 beeEnergy,*0.9 honeyFromTokens",rarity:"rare",maxStacks:3},Bandwidth:{stats:"x1.25 convertRateAtHive,*1.05 markDuration",rarity:"epic",maxStacks:3},beeBay:{stats:"+1 beesPerRound",rarity:"epic",maxStacks:1},Instancing:{stats:"+3% instantRedConversion,+3% instantBlueConversion,+3% instantWhiteConversion",rarity:"epic",maxStacks:5},"Pop-up":{stats:"*1.25 bubblePollen,-1 blueBeeAttack",rarity:"epic",maxStacks:3},Overheat:{stats:"*1.25 flamePollen,*0.95 redPollen",rarity:"epic",maxStacks:3},"White Noise":{stats:"*1.1 whitePollen,*1.25 whiteBombPollen,-1 cogsPerRound",rarity:"epic",maxStacks:1},Battery:{stats:"*1.1 markDuration,*1.1 flameLife,*0.95 walkSpeed",rarity:"epic",maxStacks:1},Asynchronize:{stats:"+4 movementCollection,*0.96 tokenLifespan",rarity:"epic",maxStacks:3},"Bit Shift":{stats:"*1.05 convertRate,+3% instantBombConversion",rarity:"epic",maxStacks:10},Base64:{stats:"*1.64 convertRate,*0.64 pollenFromCoconuts",rarity:"epic",maxStacks:1},Trojan:{stats:"*1.25 beeAttack,*0.9 beeSpeed",rarity:"epic",maxStacks:1},Uniform:{stats:"*1.15 redPollen,*1.15 bluePollen,*1.15 whitePollen,*0.92 beeAttack",rarity:"epic",maxStacks:2},Duplicate:{stats:"+2% abilityDuplicationChance,*0.94 redBeeAbilityRate,*0.94 blueBeeAbilityRate,*0.94 whiteBeeAbilityRate",rarity:"epic",maxStacks:4},Furnace:{stats:"*1.07 flamePollen,+5% instantFlameConversion,*1.07 flameLife,-2 cogsPerRound",rarity:"epic",maxStacks:3},"Cloud 9":{stats:"*1.35 capacity,-1 cogsPerRound",rarity:"legendary",maxStacks:5},"180°":{stats:"*1.8 beeAttack,-18% criticalChance",rarity:"legendary",maxStacks:1},"Vice Versa":{stats:"*1.5 redBombPollen,*1.5 blueBombPollen,*0.9 whiteBombPollen",rarity:"legendary",maxStacks:1},"Schematic Error":{stats:"*1.25 redBombPollen,+3% abilityDuplicationChance",rarity:"legendary",maxStacks:1},"d^=b[,7'":{stats:"*2 goo,*0.85 whitePollen",rarity:"legendary",maxStacks:1},Unlisted:{stats:"+3% criticalChance,*1.2 superCritPower",rarity:"legendary",maxStacks:1},23.5:{stats:"+2% instantBlueConversion,+3% instantWhiteConversion,+5% instantRedConversion",rarity:"legendary",maxStacks:5},Knock:{stats:"*1.25 beeAttack,-10% defense",rarity:"legendary",maxStacks:1},"12%":{stats:"*0.12 goo,*1.55 whitePollen",rarity:"legendary",maxStacks:1},"Plus Minus":{stats:"+6% criticalChance,-2% superCritChance",rarity:"legendary",maxStacks:2},8.2:{stats:"*1.8 pollenFromCoconuts,*1.2 capacity",rarity:"legendary",maxStacks:1},"Friend Credits":{stats:"+4 cogsPerRound,*1.1 honeyFromTokens",rarity:"legendary",maxStacks:3},Technoblade:{stats:"+25% defense",rarity:"legendary",maxStacks:1},"A-List":{stats:"*1.25 beeSpeed,+4 movementCollection,-2 cogsPerRound",rarity:"legendary",maxStacks:2},'<u style="user-select:text">ยังน่ารัก</u>':{stats:"*1.5 buoyantBeeAttack,-1 cogsPerRound",rarity:"legendary",maxStacks:1}},d={common:"rgb(180,130,30)",rare:"rgb(210,210,210)",epic:"rgb(250,230,10)",legendary:"rgb(20,240,255)"};e.startRoboChallenge=function(){e.roboChallenge.cogsPerRound=12,e.roboChallenge.beesPerRound=2,e.roboChallenge.isPlaying=!0,e.roboChallenge.timer=90,document.getElementById("roboMenu").style.display="none";let i=o.max(.1,.6-.1*e.roboChallenge.round),n="player.capacity*="+i+";player.pollenFromTools*="+i+";player.pollenFromCoconuts*="+i+";player.movementCollection*="+i+";player.walkSpeed*=1.65",s={};for(let i in e.roboChallenge.activeUpgrades){s[e.roboChallenge.activeUpgrades[i]]||(s[e.roboChallenge.activeUpgrades[i]]=0),s[e.roboChallenge.activeUpgrades[i]]++;let o=t[e.roboChallenge.activeUpgrades[i]].stats.split(",");for(let t in o){let i=o[t],s=Number(i.substring(1,i.indexOf("%")>-1?i.indexOf("%"):i.indexOf(" ")));i.substring(i.indexOf(" ")+1,i.length).indexOf("Conversion")>-1?n+=";player."+i.substring(i.indexOf(" ")+1,i.length)+"=MATH.applyPercentage(player."+i.substring(i.indexOf(" ")+1,i.length)+","+.01*s+")":n+=";player."+i.substring(i.indexOf(" ")+1,i.length)+i[0]+"="+(i.indexOf("%")>-1?.01*s:s),i.substring(i.indexOf(" ")+1,i.length).indexOf("PerRound")>-1&&(e.roboChallenge[i.substring(i.indexOf(" ")+1,i.length)]+=s)}}$.roboChallengeBuff.update=Object.constructor("amount","player",n),$.roboChallengeBuff.getMessage=function(){let e="Robo Challenge\nx"+i+" capacity\nx"+i+" pollen from tools\nx"+i+" pollen from coconuts\nx"+i+" movement collection\nx1.65 walkspeed\n\n------Upgrades------\n\n"+JSON.stringify(s).replaceAll('":','"#').replaceAll('"',"").replaceAll(",",")\n").replaceAll("#"," (x").replace("{","").replace("}",")")+"\n";return 2===e.split(")").length?e.substring(0,e.indexOf("\n\n---")):e},g.addEffect("roboChallengeBuff");let r="#"+e.roboChallenge.activeBees.join("#")+"#";for(let t in e.hive)for(let i in e.hive[t]){let o=e.hive[t][i];o.roboDisabled=!1,r.indexOf("#"+i+","+t+"#")<0&&(o.roboDisabled=!0)}e.updateHive();for(let t in le.bees){let i=le.bees[t];e.hive[i.hiveY][i.hiveX].roboDisabled||(i.pos[0]=g.body.position.x,i.pos[1]=g.body.position.y,i.pos[2]=g.body.position.z)}document.getElementById("roboQuestMenu").style.display="block";for(let e=le.mobs.length;e--;)(le.mobs[e]instanceof Re||le.mobs[e]instanceof Fe||le.mobs[e]instanceof Ce)&&le.mobs[e].die(e);for(let t in e.roboChallenge.quest){let i=e.roboChallenge.quest[t];if(i[0].indexOf("From")>-1)for(let t=0,n=MATH.random(0,3);t<n;t++){let t=[Re,Re,Re,Re,Re,Fe,Fe,Fe,Fe,Ce,Ce,Ce];t=t[o.random()*t.length|0],le.mobs.push(new t(i[0].replace("pollenFrom",""),e.roboChallenge.round*MATH.random(.5,.6)+1|0,t===Ce?0|MATH.random(0,4):e.roboChallenge.round>5?o.random()<.8:0))}else for(let t=0;t<MATH.random(1,4);t++){let t=[Re,Re,Re,Re,Re,Fe,Fe,Fe,Fe,Ce,Ce,Ce];t=t[o.random()*t.length|0];let i=[];for(let e in ti)"StumpField"!==e&&"AntField"!==e&&"CoconutField"!==e&&i.push(e);le.mobs.push(new t(i[o.random()*i.length|0],e.roboChallenge.round*MATH.random(.5,.6)+1|0,t===Ce?0|MATH.random(0,4):o.random()<.8))}}e.roboChallenge.mobSpawnIntervalID=window.setInterval((function(){if(o.random()<.5)return;let t=[];if(e.fieldIn)t=e.fieldIn;else{if(o.random()<.8)return;for(let e in ti)"StumpField"!==e&&"AntField"!==e&&"CoconutField"!==e&&t.push(e);t=t[o.random()*t.length|0]}let i=[Re,Re,Re,Re,Re,Fe,Fe,Fe,Fe,Ce,Ce,Ce];i=i[o.random()*i.length|0],le.mobs.push(new i(t,e.roboChallenge.round*MATH.random(.5,.6)+1|0,i===Ce?0|MATH.random(0,4):o.random()<.8))}),2e4)},e.updateRoboUI=function(){switch(void 0!==e.roboChallenge.mobSpawnIntervalID&&window.clearInterval(e.roboChallenge.mobSpawnIntervalID),e.roboChallenge.isPlaying=!1,document.getElementById("roboMenu").style.display="block",document.getElementById("roboCogsAmount").innerHTML="<u>Cogs: "+MATH.addCommas(se.cog.amount+"")+"</u>",document.getElementById("roboStartRound").style.display="none",document.getElementById("roboSkipBeePage").style.display="none",e.roboChallenge.scene){case"upgrade":document.getElementById("roboStartRound").style.display="block",document.getElementById("roboTitle").innerHTML="Buy Upgrades<p style='font-size:14.5px;margin-top:0px'><u style='cursor:"+(se.cog.amount>=e.roboChallenge.rerollCost?"pointer":"not-allowed")+"' onclick='window.rerollInRoboBearChallenge()'>Reroll Upgrades</u> ("+e.roboChallenge.rerollCost+" cogs)</p>",document.getElementById("roboBeeChoices").style.display="none",document.getElementById("roboQuestChoices").style.display="none",document.getElementById("roboUpgradeChoices").style.display="block",document.getElementById("roboActiveBees").style.display="none",document.getElementById("roboActiveBeesAmount").style.display="none",document.getElementById("roboActiveUpgrades").style.display="block",document.getElementById("roboActiveUpgradesAmount").style.display="block",document.getElementById("roboActiveUpgradesAmount").innerHTML="Active Upgrades ("+e.roboChallenge.activeUpgrades.length+")";let n=[],s=[],r=[],a={};for(let t in e.roboChallenge.activeUpgrades)a[e.roboChallenge.activeUpgrades[t]]||(a[e.roboChallenge.activeUpgrades[t]]=0),a[e.roboChallenge.activeUpgrades[t]]++;for(let e in t)(a[e]||0)<t[e].maxStacks&&n.push(e);for(let e=0,i=o.min(3,n.length);e<i;e++){let e=o.random()*n.length|0;s.push(n[e]);let i=t[n[e]];r.push((MATH.random(3,7)+{common:0,rare:2,epic:5,legendary:9}[i.rarity])/(.1*(i.maxStacks-1)+1.25)|0),n.splice(e,1)}for(let i=1;i<4;i++){if(!t[s[i-1]]){document.getElementById("roboUpgradeChoice"+i).style.display="none";continue}document.getElementById("roboUpgradeChoice"+i).style.display="block";let o="",n=t[s[i-1]].stats.split(",");for(let e in n){let t=n[e];t=t.substring(0,t.indexOf(" ")+1)+MATH.doGrammar(t.substring(t.indexOf(" ")+1,t.length)),o+='<div style="color:'+(Number(t.substring(1,t.indexOf(" ")))<1||"-"===t[0]?"rgb(255,50,50)":"rgb(60,255,60)")+'">',t=t.replace("*","x"),t.indexOf(".")<0&&(t=t[0]+MATH.addCommas(t.substring(1,t.indexOf("%")>-1?t.indexOf("%"):t.indexOf(" ")))+t.substring(t.indexOf("%")>-1?t.indexOf("%"):t.indexOf(" "),t.length)),o+=t+"<br></div>"}document.getElementById("roboUpgradeChoice"+i).style.backgroundColor=d[t[s[i-1]].rarity],document.getElementById("roboUpgradeChoice"+i).innerHTML="&nbsp;"+s[i-1]+"&nbsp;&nbsp;&nbsp;<i style='font-size:13px;color:"+(se.cog.amount>=r[i-1]?"black":"rgb(200,0,0)")+"'>"+r[i-1]+" Cogs</i>&nbsp;&nbsp;&nbsp;&nbsp;<i style='font-size:13px;color:black'>Max Lvl:"+t[s[i-1]].maxStacks+"</i><div style='border-radius:5px;position:fixed;left:10px;top:35px;right:5px;bottom:5px;background-color:rgb(0,0,0,0.75);font-family:trebuchet ms;font-size:14px;padding-left:10px;padding-top:8px'>"+o+"</div>",document.getElementById("roboUpgradeChoice"+i).style.cursor=se.cog.amount>=r[i-1]?"pointer":"not-allowed",document.getElementById("roboUpgradeChoice"+i).onclick=function(){se.cog.amount>=r[i-1]?(e.roboChallenge.activeUpgrades.push(s[i-1]),se.cog.amount-=r[i-1],e.updateInventory(),e.updateRoboUI()):e.addMessage("Not enough Cogs!",ae.redArr)}}document.getElementById("roboActiveUpgrades").innerHTML="";let l=[];for(let t in e.roboChallenge.activeUpgrades)l.indexOf(e.roboChallenge.activeUpgrades[t])<0&&l.push(e.roboChallenge.activeUpgrades[t]);for(let e in l){let i="",o=t[l[e]].stats.split(",");for(let e in o){let t=o[e];t=t.substring(0,t.indexOf(" ")+1)+MATH.doGrammar(t.substring(t.indexOf(" ")+1,t.length)),i+='<div style="color:'+(Number(t.substring(1,t.indexOf(" ")))<1||"-"===t[0]?"rgb(255,50,50)":"rgb(60,255,60)")+'">',t=t.replace("*","x"),t.indexOf(".")<0&&(t=t[0]+MATH.addCommas(t.substring(1,t.indexOf("%")>-1?t.indexOf("%"):t.indexOf(" ")))+t.substring(t.indexOf("%")>-1?t.indexOf("%"):t.indexOf(" "),t.length)),i+=t+"<br></div>"}document.createElement("div");document.getElementById("roboActiveUpgrades").innerHTML+="<div style='background-color:"+d[t[l[e]].rarity]+";border-radius:5px;width:285px;height:125px;transform:scale(0.66,0.66);margin-top:-16px;margin-left:-44px;margin-bottom:-38px;color:black;'>&nbsp;"+l[e]+"&nbsp;&nbsp;&nbsp;&nbsp;<i style='font-size:13px;color:black'>Lvl:"+a[l[e]]+"</i><div style='border-radius:5px;position:fixed;left:10px;top:35px;right:5px;bottom:5px;background-color:rgb(0,0,0,0.75);font-family:trebuchet ms;font-size:14px;padding-left:10px;padding-top:8px'>"+i+"</div></div>"}break;case"quest":document.getElementById("roboTitle").innerHTML="Select Quest<p style='font-size:14.5px;margin-top:0px'><u style='cursor:"+(se.cog.amount>=e.roboChallenge.rerollCost?"pointer":"not-allowed")+"' onclick='window.rerollInRoboBearChallenge()'>Reroll Quests</u> ("+e.roboChallenge.rerollCost+" cogs)</p>",document.getElementById("roboBeeChoices").style.display="none",document.getElementById("roboQuestChoices").style.display="block",document.getElementById("roboActiveBees").style.display="none",document.getElementById("roboActiveBeesAmount").style.display="none",document.getElementById("roboActiveUpgrades").style.display="none",document.getElementById("roboActiveUpgradesAmount").style.display="none",document.getElementById("roboUpgradeChoices").style.display="none";let h=["pollen","pollen","pollen","pollen","pollen","pollen","pollen","redPollen","whitePollen","bluePollen","redPollen","whitePollen","bluePollen","pollenFromSunflowerField","pollenFromDandelionField","pollenFromMushroomField","pollenFromBlueFlowerField","pollenFromCloverField","pollenFromSpiderField","pollenFromStrawberryField","pollenFromBambooField","pollenFromPineapplePatch","pollenFromCactusField","pollenFromPumpkinPatch","pollenFromPineTreeForest","pollenFromRoseField"];e.roboChallenge.round>5&&h.push("pollenFromMountainTopField"),e.roboChallenge.round>10&&h.push("pollenFromPepperPatch");for(let t=1;t<3;t++){let i=[],n=h.slice(),s=[];for(let e=0,t=0|MATH.random(1,4);e<t;e++){let e=n[o.random()*n.length|0];s.push(e);for(let t=n.length;t--;)n[t]===e&&n.splice(t,1)}document.getElementById("roboQuestChoice"+t).innerHTML='<div style="text-align:center;font-size:25px"><u>Quest '+(1===t?"A":"B")+"</u></div><br>";for(let t in s){let o=.0125*e.roboChallenge.round;o*=3e10*o*o*o*o,o*=MATH.random(1/1.1,1.1)-.2*(s.length-1),s[t].indexOf("From")>-1&&(o*=MATH.random(.15,.4)),"pollen"===s[t]&&(o*=1.25),e.roboChallenge.round>5&&(o*=1.25),e.roboChallenge.round>10&&(o*=1.3),e.roboChallenge.round>15&&(o*=1.5),e.roboChallenge.round>20&&(o*=1.65),e.roboChallenge.round>25&&(o*=1.75),o=500*(1+(1e-4*o|0)),i.push([s[t],o])}i.sort(((e,t)=>t[1]-e[1]));for(let e in i)document.getElementById("roboQuestChoice"+t).innerHTML+="- "+MATH.doStatGrammar(i[e][0])+" "+MATH.addCommas(i[e][1]+"")+" "+MATH.doGrammar(i[e][0])+"<br><br>";document.getElementById("roboQuestChoice"+t).onclick=function(){e.roboChallenge.scene="upgrade";for(let t in i)i[t][2]=e.stats[i[t][0]];e.roboChallenge.quest=i,e.updateRoboUI()}}break;case"bee":if(e.roboChallenge.beesPicked>=e.roboChallenge.beesPerRound)return e.roboChallenge.scene="quest",void e.updateRoboUI();document.getElementById("roboTitle").innerHTML="<p style='margin-top:-15px'></p>Select Bees<p style='font-size:13px;margin-top:0px'>("+(e.roboChallenge.beesPicked+1)+" of "+e.roboChallenge.beesPerRound+")<br><u style='cursor:"+(se.cog.amount>=e.roboChallenge.rerollCost?"pointer":"not-allowed")+"' onclick='window.rerollInRoboBearChallenge()'>Reroll Bees</u> ("+e.roboChallenge.rerollCost+" cogs)</p>",document.getElementById("roboActiveBeesAmount").innerHTML="Active Bees ("+e.roboChallenge.activeBees.length+")",document.getElementById("roboBeeChoices").style.display="block",document.getElementById("roboQuestChoices").style.display="none",document.getElementById("roboActiveBeesAmount").style.display="block",document.getElementById("roboActiveUpgrades").style.display="none",document.getElementById("roboActiveUpgradesAmount").style.display="none",document.getElementById("roboUpgradeChoices").style.display="none";let m=[],c="#"+e.roboChallenge.activeBees.join("#")+"#";for(let t in e.hive)for(let i in e.hive[t]){null!==e.hive[t][i].type&&c.indexOf("#"+i+","+t+"#")<0&&m.push([i,t])}document.getElementById("roboActiveBees").innerHTML="",document.getElementById("roboActiveBees").style.display="block";for(let t in e.roboChallenge.activeBees){let o=e.roboChallenge.activeBees[t];o=e.hive[o[1]][o[0]].bee;let n=document.createElement("canvas");n.width=35,n.height=35,n.style.width=35,n.style.height=35,n.style.borderRadius="2px",n.style.position="fixed",n.style.left=20*(t%5+.5-2.5)+50+"%",n.style.top=10*(t/5|0)+5+"%",n.style.transform="translate(-17px,-17px)",n.getContext("2d").drawImage(i,2048*K[o.type].u,2048*K[o.type].v+(o.gifted?768:0),128,128,0,0,35,35),document.getElementById("roboActiveBees").appendChild(n)}for(let t=0;t<3;t++){if(m.length<=0)return document.getElementById("roboBeeChoice"+(t+1)).style.display="none",void(document.getElementById("roboSkipBeePage").style.display="block");let n=o.random()*m.length|0,s=m[n],r=s.slice();s=e.hive[s[1]][s[0]].bee,m.splice(n,1),document.getElementById("roboBeeChoice"+(t+1)).style.display="block",document.getElementById("roboBeeChoice"+(t+1)).style.backgroundColor="red"===K[s.type].color?"rgb(255,50,50,0.6)":"blue"===K[s.type].color?"rgb(50,50,255,0.6)":"rgb(255,255,255,0.6)";let a=document.createElement("canvas");a.width=80,a.height=80,a.style.borderRadius="4px",a.style.position="fixed",a.style.left="3%",a.style.top="10%",a.getContext("2d").drawImage(i,2048*K[s.type].u,2048*K[s.type].v+(s.gifted?768:0),128,128,0,0,80,80);let l="Level: "+s.level+"<br>"+(s.gifted?"⭐ Gifted ⭐":"")+(s.mutation?"<br>☢️ "+s.mutation.oper.replace("*","x")+s.mutation.num+" "+MATH.doGrammar(s.mutation.stat)+" ☢️":"")+(e.hive[r[1]][r[0]].beequip?"<br>Beequip: "+MATH.doGrammar(e.hive[r[1]][r[0]].beequip.type):"");document.getElementById("roboBeeChoice"+(t+1)).innerHTML="<p style='position:fixed;width:200px;height:30px;left:67%;top:-3%;transform:translate(-50%,-50%)'>"+MATH.doGrammar(s.type)+" Bee</p><p style='position:fixed;width:200px;left:67%;top:50%;transform:translate(-50%,-50%);font-size:11px'>"+l+"</p>",document.getElementById("roboBeeChoice"+(t+1)).appendChild(a),document.getElementById("roboBeeChoice"+(t+1)).onclick=function(){e.roboChallenge.activeBees.push([Number(r[0]),Number(r[1])]),e.roboChallenge.beesPicked++,e.updateRoboUI()}}}},window.rerollInRoboBearChallenge=function(){se.cog.amount>=e.roboChallenge.rerollCost?(se.cog.amount-=e.roboChallenge.rerollCost,e.roboChallenge.rerollCost+=1,e.updateInventory(),e.updateRoboUI()):e.addMessage("Not enough Cogs!",ae.redArr)},window.roboStartRound=e.startRoboChallenge,window.roboSkipBeePage=function(){e.roboChallenge.beesPicked=e.roboChallenge.beesPerRound,e.updateRoboUI()},e.endAntChallenge=function(){if(!e.antChallenge)return;e.addMessage("The Ant Challenge is over! Your score is "+e.antChallenge.score+"!",[35,75,255]);let t=[["honey",e.antChallenge.score*e.antChallenge.score*e.antChallenge.score*10+1e4],["royalJelly",0|MATH.random(1,.2*e.antChallenge.score+2)]];t.push(...MATH.selectFromArray([["roboPass",1],["treat",e.antChallenge.score+15],["atomicTreat",1],["strawberry",.15*e.antChallenge.score+1],["blueberry",.15*e.antChallenge.score+1],["sunflowerSeed",.15*e.antChallenge.score+3],["pineapple",.15*e.antChallenge.score+5],["jellyBeans",.2*o.sqrt(1.25*e.antChallenge.score)+1|0]],1));for(let i in t)"honey"===t[i][0]?g.honey+=t[i][1]:se[t[i][0]].amount+=t[i][1],e.addMessage("+"+MATH.addCommas(t[i][1]+"")+" "+MATH.doGrammar(t[i][0])+" (from Robo Challenge)",[35,75,255]);let i=[],n="bronze";e.antChallenge.score>=25&&(n="silver"),e.antChallenge.score>=50&&(n="gold"),e.antChallenge.score>=100&&(n="diamond"),e.antChallenge.score>=150&&(n="supreme");let s=["bronze","silver","gold","diamond","supreme"].indexOf(n);i.push("*1."+(s+1)+" capacityMultiplier","*"+MATH.random(1.05+.15*s,1.15+.15*s).toFixed(2)+" convertRate"),i.push(...MATH.selectFromArray(["*"+MATH.random(1.03+.05*s,1.1+.05*s).toFixed(2)+" redPollen","*"+MATH.random(1.03+.05*s,1.1+.05*s).toFixed(2)+" whitePollen","*"+MATH.random(1.03+.05*s,1.1+.05*s).toFixed(2)+" bluePollen","*"+MATH.random(1.01+.01*s,1.03+.01*s).toFixed(2)+" POLLEN","*"+MATH.random(1.01,1.06).toFixed(2)+" walkSpeed","+"+MATH.random(.01+.0075*s,.03+.0075*s).toFixed(2)+" criticalChance","*"+MATH.random(1.03+.05*s,1.1+.05*s).toFixed(2)+" pollenFromTools","*"+MATH.random(1.03+.05*s,1.1+.05*s).toFixed(2)+" pollenFromBees"],s+1)),g.showGeneratedAmulet(n+"AntAmulet",i),e.antChallenge=!1;for(let t in e.effects)if("antChallenge"===e.effects[t]){e.effects.splice(t,1);break}},e.updateAntChallenge=function(){if(e.antChallenge){if(e.antChallenge.timer-=f,e.antChallenge.spawnDelay-=f,e.antChallenge.lawnMowerTimer-=f,e.antChallenge.timer<=0)return g.body.position.x=-21,g.body.position.y=6,g.body.position.z=-44.5,g.yaw=0,void e.endAntChallenge();if(e.antChallenge.lawnMowerTimer<=0&&(le.mobs.push(new Le(e.antChallenge.round)),e.antChallenge.lawnMowerTimer=o.max(-.33333*e.antChallenge.round+15,2)),e.stats.pollenFromAntField-e.antChallenge.pollenBeforeReq>=e.antChallenge.pollenReq&&e.antChallenge.spawnDelay<=0){e.antChallenge.round++,e.antChallenge.spawnDelay=2,e.antChallenge.pollenReq+=200*e.antChallenge.round+100;let t=[[[.2,.25],[.8,.25],[.2,.75],[.8,.75]],[[.25,.5],[.5,.5],[.75,.5]],[[.2,.2],[.2,.8],[.8,.2],[.8,.8],[.5,.5]],[[.5,.25],[.25,.5],[.5,.75],[.75,.5]],[[.5,.333],[.333,.666],[.666,.666]],[[.5,.666],[.333,.333],[.666,.333]],[[.1,.1],[.9,.9]],[[.9,.1],[.1,.9]]],i=t[o.random()*t.length|0],n=["ant","ant","ant","ant","ant","armyAnt","armyAnt","armyAnt","fireAnt","fireAnt","flyingAnt","flyingAnt","flyingAnt","giantAnt"];for(let t in i)le.mobs.push(new He(e.antChallenge.round,...i[t],n[o.random()*n.length|0]));o.random()<.25&&window.setTimeout((function(){i=t[o.random()*t.length|0];for(let t in i)le.mobs.push(new He(e.antChallenge.round,...i[t],n[o.random()*n.length|0]))}),750)}e.antChallenge.spawnDelay<=0?Kt.addSingle(MATH.addCommas(e.antChallenge.pollenReq-(e.stats.pollenFromAntField-e.antChallenge.pollenBeforeReq)+""),[-21,8,-61],ae.whiteArr,-3,!1,!1):(e.antChallenge.pollenBeforeReq=e.stats.pollenFromAntField,Kt.addSingle(e.antChallenge.spawnDelay.toFixed(1)+"s",[-21,8,-61],ae.whiteArr,-3,!1,!1)),Kt.addSingle("Time: "+MATH.doTime(e.antChallenge.timer),[-15,9,-61],ae.whiteArr,-3,!1,!1,0,.5),Kt.addSingle("Round: "+e.antChallenge.round,[-15,9,-61],ae.whiteArr,-3,!1,!1,0,0),Kt.addSingle("Score: "+e.antChallenge.score,[-15,9,-61],ae.whiteArr,-3,!1,!1,0,-.5)}},e.showGeneratedAmulet=function(t,i){document.exitPointerLock();let o=t.indexOf("Star")>-1?"Star":0;if(o=o||(t.indexOf("Ant")>-1?"Ant":0),o=o||(t.indexOf("Stickbug")>-1?"Stickbug":0),o=o||(t.indexOf("Shell")>-1?"Shell":0),o=o||(t.indexOf("Cog")>-1?"Cog":0),o)for(let t in e.currentGear)t.indexOf("Amulet")>-1&&t.indexOf(o)>-1&&(o=t);else o=t;let n=[];for(let e in i)i[e].indexOf("POLLEN")>-1?n.push(i[e].replace("POLLEN","redPollen"),i[e].replace("POLLEN","bluePollen"),i[e].replace("POLLEN","whitePollen")):i[e].indexOf("INSTANT_CONVERSION")>-1?n.push(i[e].replace("INSTANT_CONVERSION","instantRedConversion"),i[e].replace("INSTANT_CONVERSION","instantBlueConversion"),i[e].replace("INSTANT_CONVERSION","instantWhiteConversion")):n.push(i[e]);n=n.join(","),document.getElementById("amuletUI").style.display="block",document.getElementById("amuletType").innerHTML=MATH.doGrammar(t);let s=g.currentGear[o]?g.currentGear[o].split(","):[],r=[];for(let e in s){if(!s[e])continue;let t=s[e],i=t.substring(0,t.indexOf(" ")),o=t.substring(t.indexOf(" ")+1,t.length),n=o.toLowerCase().indexOf("red")>-1?"red":0;n=n||(o.toLowerCase().indexOf("white")>-1?"white":0),n=n||(o.toLowerCase().indexOf("blue")>-1?"blue":0);let a,l=[n];for(let e in s){let r=s[e],d=r.substring(0,r.indexOf(" ")),h=r.substring(r.indexOf(" ")+1,r.length);if(t!==r&&i===d){let e=h.toLowerCase().indexOf("red")>-1?"red":0;e=e||(h.toLowerCase().indexOf("white")>-1?"white":0),e=e||(h.toLowerCase().indexOf("blue")>-1?"blue":0),n!==e&&o.replaceAll("White","").replaceAll("Red","").replaceAll("Blue","").replaceAll("red","").replaceAll("blue","").replaceAll("white","")===h.replaceAll("White","").replaceAll("Red","").replaceAll("Blue","").replaceAll("red","").replaceAll("blue","").replaceAll("white","")&&(l.push(e),a=!0)}}a&&3===l.length&&l.indexOf("red")>-1&&l.indexOf("blue")>-1&&l.indexOf("white")>-1?r.push(t.replaceAll("White","").replaceAll("Red","").replaceAll("Blue","").replaceAll("red","").replaceAll("blue","").replaceAll("white","")):r.push(t)}s=r.slice(),r=[];for(let e in s)r.indexOf(s[e])<0&&r.push(s[e]);document.getElementById("oldAmuletStats").innerHTML=g.currentGear[o]?r.map((e=>e.split(" ")[0]+" "+MATH.doGrammar(e.split(" ")[1]))).map((e=>"+"===e[0]?"+"+(100*Number(e.substr(1,e.indexOf(" ")))|0)+"%"+e.substr(e.indexOf(" "),e.length):e)).join("<br>").replaceAll("*","x").replace(" Multiplier","").replaceAll(" Passive","").replaceAll("P ","Passive: "):'<p style="font-size:25px;padding-left:10px;margin-top:2px">None</p>',document.getElementById("newAmuletStats").innerHTML=i.map((e=>e.split(" ")[0]+" "+MATH.doGrammar(e.split(" ")[1].replace("INSTANT_CONVERSION","instantConversion").replace("POLLEN","pollen")))).map((e=>"+"===e[0]?"+"+(100*Number(e.substr(1,e.indexOf(" ")))|0)+"%"+e.substr(e.indexOf(" "),e.length):e)).join("<br>").replaceAll("*","x").replace(" Multiplier","").replaceAll(" Passive","").replaceAll("P ","Passive: "),document.getElementById("keepAmulet").onclick=function(){document.getElementById("amuletUI").style.display="none"},document.getElementById("replaceAmulet").onclick=function(){document.getElementById("amuletUI").style.display="none";let i=t.indexOf("Star")>-1?"Star":0;if(i=i||(t.indexOf("Ant")>-1?"Ant":0),i=i||(t.indexOf("Stickbug")>-1?"Stickbug":0),i=i||(t.indexOf("Shell")>-1?"Shell":0),i=i||(t.indexOf("Cog")>-1?"Cog":0),i)for(let t in e.currentGear)t.indexOf("Amulet")>-1&&t.indexOf(i)>-1&&delete e.currentGear[t];e.currentGear[t]=n,e.updateGear()}},e.sunSwitchTimer=300,e.skyColor=[.4,.6,1],e.isNight=.999,e.targetLight=1,e.radioactiveParticleTimer=0,e.damage=t=>{e.health-=t-t*e.defense,e.stats.coconutShield++,Kt.add((t-t*e.defense|0)+"",[e.body.position.x,e.body.position.y+1.5*o.random()+2.5,e.body.position.z],[255,0,0],0,"",2)},e.lagPos=[0,0,0],e.discoveredBees=[],e.discoveredGifteds=[],e.stats={moonAmulets:0,puffshrooms:0,rarePuffshrooms:0,epicPuffshrooms:0,legendaryPuffshrooms:0,mythicPuffshrooms:0,beeTypes:0,minutesOfNectar:0,hoursOfNectar:0,hoursOfInvigoratingNectar:0,hoursOfMotivatingNectar:0,hoursOfSatisfyingNectar:0,hoursOfComfortingNectar:0,hoursOfRefreshingNectar:0,minutesOfInvigoratingNectar:0,minutesOfMotivatingNectar:0,minutesOfSatisfyingNectar:0,minutesOfComfortingNectar:0,minutesOfRefreshingNectar:0,tokensFromPlanters:0,tokensFromSprouts:0,tokensFromWildWindyBee:0,timesUsingTheRedCannon:0,timesUsingTheBlueCannon:0,timesUsingTheYellowCannon:0,timesUsingTheSlingshot:0,itemsUsingTheBlender:0,fallingCoconuts:0,flames:0,bubbles:0,redPollen:0,bluePollen:0,whitePollen:0,pollen:0,abilityTokens:0,honeyTokens:0,rhinoBeetle:0,ladybug:0,spider:0,werewolf:0,mantis:0,scorpion:0,kingBeetle:0,tunnelBear:0,stumpSnail:0,ant:0,fireAnt:0,armyAnt:0,flyingAnt:0,giantAnt:0,mondoChick:0,rogueViciousBee:0,goo:0,popStar:0,scorchingStar:0,coconutShield:0,stingerUsed:0,gummyMorph:0,gummyStar:0};for(let t=0;t<20;t++)e.stats["beesToLevel"+t]=0;for(let t in se)e.stats[t+"Tokens"]=0,e.stats[t]=0,e.stats[t+"ToTheWindShrine"]=0;for(let t in ee)e.stats[ee[t]]=0;return e.precomputedStats={monsterRespawnTime:1,bondFromTreats:1,nectarMultiplier:1,tabbyLoveStacks:1,redFieldCapacity:1,blueFieldCapacity:1,whiteFieldCapacity:1,hasteStacks:0,gliderSpeed:0,gliderFall:0,walkSpeed:150,jumpPower:10,criticalChance:0,criticalPower:2,instantRedConversion:0,instantWhiteConversion:0,instantBlueConversion:0,redBombPollen:1,whiteBombPollen:1,blueBombPollen:1,instantBombConversion:0,honeyPerPollen:1,convertRate:1,redConvertRate:1,blueConvertRate:1,whiteConvertRate:1,convertRateAtHive:1,whitePollen:1,redPollen:1,bluePollen:1,capacity:0,flameFuel:!1,beeSpeed:1,honeyAtHive:1,tokenLifespan:1,redBeeAbilityRate:1,blueBeeAbilityRate:1,whiteBeeAbilityRate:1,beeAttack:1,beeEnergy:1,flameHeatStack:1,flameHeatStackApplied:1,buoyantBeeAttack:1,superCritChance:0,superCritPower:2,lootLuck:1,bubblePollen:1,flamePollen:1,goo:1,tidePower:1,tidalSurge:!1,collectorSpeed:1,honeyFromTokens:1,gummyBallSize:1,defense:0,whiteBeeAttack:0,redBeeAttack:0,blueBeeAttack:0,movementCollection:0,pollenFromBees:1,pollenFromTools:1,pollenFromCoconuts:1,instantFlameConversion:0,markDuration:1,redBombSync:!1,blueBombSync:!1,flameLife:1,abilityDuplicationChance:0},e.defaultStats={},e.quests=[],e.addQuest=function(t,i,o){for(let t in i)i[t].push("beeTypes"===i[t][0]||i[t][0].indexOf("beesToLevel")>-1?0:e.stats[i[t][0]]);e.quests=[{name:t,req:i,NPC:o},...e.quests],b[o].activeQuest=!0,(Y||0===Y)&&(O[Y].style.display="none"),Y=1,O[Y].style.display="block",e.itemDragging=!1,e.beequipDragging=!1},Ft.onclick=function(){if("object"!=typeof b[e.currentNPC].dialogue[b[e.currentNPC].dialogueIndex])if(b[e.currentNPC].dialogueIndex++,"string"==typeof b[e.currentNPC].dialogue[b[e.currentNPC].dialogueIndex])Ht.innerHTML=b[e.currentNPC].dialogue[b[e.currentNPC].dialogueIndex];else if("function"==typeof b[e.currentNPC].dialogue[b[e.currentNPC].dialogueIndex])b[e.currentNPC].dialogue[b[e.currentNPC].dialogueIndex](),b[e.currentNPC].dialogueIndex++,e.currentNPC=null,Ft.style.display="none",e.viewMatrixToChange=void 0;else if("object"==typeof b[e.currentNPC].dialogue[b[e.currentNPC].dialogueIndex]){let t="";for(let i in b[e.currentNPC].dialogue[b[e.currentNPC].dialogueIndex])t+='<button style="border-radius:5px;background-color:rgb(30,70,255);width:420px;height:30px;font-size:17px;font-family:cursive;text-align:start;border:none;color:rgb(255,255,255);margin-top:10px;padding-bottom:10px;" onclick="window.NPCDialogueChoice'+i+'()">• '+b[e.currentNPC].dialogue[b[e.currentNPC].dialogueIndex][i][0]+"</button>",window["NPCDialogueChoice"+i]=b[e.currentNPC].dialogue[b[e.currentNPC].dialogueIndex][i][1];Ht.innerHTML=t}else e.currentNPC=null,Ft.style.display="none",e.viewMatrixToChange=void 0},e.onStartChat=function(t){if(void 0===b[t].dialogue[b[t].dialogueIndex])if(b[t].repeatable)b[t].dialogueIndex=b[t].dialogueIndex%b[t].portionLength,b[t].dialogue=[...window["dialogue_"+t](e,se,b)(b[t].portionsDone)];else{if("roboBear"!==t)return void g.addMessage(MATH.doGrammar(t)+" has nothing to say anymore!",ae.redArr);b[t].dialogue=e.roboChallenge?["Nice! You're moving on to the next round!",function(){g.roboChallenge.page="bee",g.roboChallenge.beesPicked=0,g.roboChallenge.scene="bee",g.roboChallenge.round++,se.cog.amount+=g.roboChallenge.cogsPerRound,g.addMessage("+"+g.roboChallenge.cogsPerRound+" Cogs"),g.updateInventory(),g.updateRoboUI()}]:Jt.slice(),b[t].dialogueIndex=0}g.itemDragging=!1,g.beequipDragging=!1,e.currentNPC=t,Dt.style.display="none",Ft.style.display="block",document.exitPointerLock(),Ct.innerHTML=MATH.doGrammar(e.currentNPC),Ht.innerHTML=b[e.currentNPC].dialogue[b[e.currentNPC].dialogueIndex],e.viewMatrixToChange=b[g.currentNPC].viewMatrix,e.viewMatrixCopy=e.viewMatrix.slice(),e.easeAmount=0},e.onStartShop=function(){let t;jt[e.currentShop].increments&&(jt[e.currentShop].currentIncrement=0),g.itemDragging=!1,g.beequipDragging=!1,document.exitPointerLock(),Ut.style.display="block",jt[e.currentShop].currentIndex=0,e.viewMatrixToChange=jt[e.currentShop].items[jt[e.currentShop].currentIndex].viewMatrix,e.viewMatrixCopy=e.viewMatrix.slice(),e.easeAmount=0,Yt.innerHTML=MATH.doGrammar(jt[e.currentShop].items[jt[e.currentShop].currentIndex].name),qt.innerHTML="","item"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot||"beequip"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot?(t=jt[e.currentShop].items[jt[e.currentShop].currentIndex].cost.slice(),Gt.innerHTML=jt[e.currentShop].items[jt[e.currentShop].currentIndex].desc):(t=Xt[jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot][jt[e.currentShop].items[jt[e.currentShop].currentIndex].name].cost,Gt.innerHTML=Xt[jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot][jt[e.currentShop].items[jt[e.currentShop].currentIndex].name].desc);for(let i in t){"function"==typeof t[i]&&(t[i]=t[i](jt[e.currentShop].items[jt[e.currentShop].currentIndex].amountPurchased));let o=t[i].split(" "),n="honey"===o[1]&&g.honey<Number(o[0])||"honey"!==o[1]&&se[o[1]].amount<Number(o[0])?"rgb(255,0,0)":"rgb(255,255,255)",s="x"+(o[0].length<4?MATH.addCommas(o[0]):MATH.abvNumber(o[0]));qt.innerHTML+="<div style='position:absolute;top:"+70*i*.7+"px'>"+V[o[1]].replace("SCALE","scale(0.7,0.7);margin-top:-10px;margin-bottom:0px;margin-left:-10px")+"<div style='position:absolute;top:15px;left:50px;font-size:16px;'><svg style='position:absolute;'><text x='3' y='20' stroke='black' stroke-width='3' style='font-size:15px'>"+s+"</text><text x='3' y='20' fill='"+n+"' style='font-size:15px'>"+s+"</text></svg></div></div>"}Nt.onclick=function(){let t,i=1;jt[e.currentShop].increments&&(jt[e.currentShop].currentIncrement=(jt[e.currentShop].currentIncrement+jt[e.currentShop].increments.length-1)%jt[e.currentShop].increments.length,i=jt[e.currentShop].increments[jt[e.currentShop].currentIncrement]),jt[e.currentShop].currentIndex=(jt[e.currentShop].currentIndex+jt[e.currentShop].items.length-1)%jt[e.currentShop].items.length,e.viewMatrixToChange=jt[e.currentShop].items[jt[e.currentShop].currentIndex].viewMatrix,e.easeAmount=0,Yt.innerHTML=MATH.doGrammar(jt[e.currentShop].items[jt[e.currentShop].currentIndex].name)+(i>1?" x"+MATH.abvNumber(i+""):""),qt.innerHTML="","item"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot||"beequip"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot?(t=jt[e.currentShop].items[jt[e.currentShop].currentIndex].cost.slice(),Gt.innerHTML=jt[e.currentShop].items[jt[e.currentShop].currentIndex].desc):(t=Xt[jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot][jt[e.currentShop].items[jt[e.currentShop].currentIndex].name].cost,Gt.innerHTML=Xt[jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot][jt[e.currentShop].items[jt[e.currentShop].currentIndex].name].desc);for(let o in t){"function"==typeof t[o]&&(t[o]=t[o](jt[e.currentShop].items[jt[e.currentShop].currentIndex].amountPurchased,i));let n=t[o].split(" "),s="honey"===n[1]&&g.honey<Number(n[0])||"honey"!==n[1]&&se[n[1]].amount<Number(n[0])?"rgb(255,0,0)":"rgb(255,255,255)",r="x"+(n[0].length<4?MATH.addCommas(n[0]):MATH.abvNumber(n[0]));qt.innerHTML+="<div style='position:absolute;top:"+70*o*.7+"px'>"+V[n[1]].replace("SCALE","scale(0.7,0.7);margin-top:-10px;margin-bottom:0px;margin-left:-10px")+"<div style='position:absolute;top:15px;left:50px;font-size:16px;'><svg style='position:absolute;'><text x='3' y='20' stroke='black' stroke-width='3' style='font-size:15px'>"+r+"</text><text x='3' y='20' fill='"+s+"' style='font-size:15px'>"+r+"</text></svg></div></div>"}},Ot.onclick=function(){let t,i=1;jt[e.currentShop].increments&&(jt[e.currentShop].currentIncrement=(jt[e.currentShop].currentIncrement+1)%jt[e.currentShop].increments.length,i=jt[e.currentShop].increments[jt[e.currentShop].currentIncrement]),jt[e.currentShop].currentIndex=(jt[e.currentShop].currentIndex+1)%jt[e.currentShop].items.length,e.viewMatrixToChange=jt[e.currentShop].items[jt[e.currentShop].currentIndex].viewMatrix,e.easeAmount=0,Yt.innerHTML=MATH.doGrammar(jt[e.currentShop].items[jt[e.currentShop].currentIndex].name)+(i>1?" x"+MATH.abvNumber(i+""):""),qt.innerHTML="","item"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot||"beequip"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot?(t=jt[e.currentShop].items[jt[e.currentShop].currentIndex].cost.slice(),Gt.innerHTML=jt[e.currentShop].items[jt[e.currentShop].currentIndex].desc):(t=Xt[jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot][jt[e.currentShop].items[jt[e.currentShop].currentIndex].name].cost,Gt.innerHTML=Xt[jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot][jt[e.currentShop].items[jt[e.currentShop].currentIndex].name].desc);for(let o in t){"function"==typeof t[o]&&(t[o]=t[o](jt[e.currentShop].items[jt[e.currentShop].currentIndex].amountPurchased,i));let n=t[o].split(" "),s="honey"===n[1]&&g.honey<Number(n[0])||"honey"!==n[1]&&se[n[1]].amount<Number(n[0])?"rgb(255,0,0)":"rgb(255,255,255)",r="x"+(n[0].length<4?MATH.addCommas(n[0]):MATH.abvNumber(n[0]));qt.innerHTML+="<div style='position:absolute;top:"+70*o*.7+"px'>"+V[n[1]].replace("SCALE","scale(0.7,0.7);margin-top:-10px;margin-bottom:0px;margin-left:-10px")+"<div style='position:absolute;top:15px;left:50px;font-size:16px;'><svg style='position:absolute;'><text x='3' y='20' stroke='black' stroke-width='3' style='font-size:15px'>"+r+"</text><text x='3' y='20' fill='"+s+"' style='font-size:15px'>"+r+"</text></svg></div></div>"}},Dt.onclick=function(){e.currentShop=void 0,e.viewMatrixToChange=void 0,Ut.style.display="none"},purchaseButton.onclick=function(){let t,i=1;if(jt[e.currentShop].increments&&(i=jt[e.currentShop].increments[jt[e.currentShop].currentIncrement]),jt[e.currentShop].items[jt[e.currentShop].currentIndex].owned)"item"!==jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot&&"beequip"!==jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot&&(e.currentGear[jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot]=jt[e.currentShop].items[jt[e.currentShop].currentIndex].name,e.updateGear());else{t="item"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot||"beequip"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot?jt[e.currentShop].items[jt[e.currentShop].currentIndex].cost.slice():Xt[jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot][jt[e.currentShop].items[jt[e.currentShop].currentIndex].name].cost;for(let o in t){"function"==typeof t[o]&&(t[o]=t[o](jt[e.currentShop].items[jt[e.currentShop].currentIndex].amountPurchased,i));let n=t[o].split(" ");if("honey"===n[1]&&g.honey<Number(n[0])||"honey"!==n[1]&&se[n[1]].amount<Number(n[0]))return}qt.innerHTML="";for(let o in t){let n=t[o].split(" ");"honey"===n[1]?g.honey-=Number(n[0]):se[n[1]].amount-=Number(n[0]),"item"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot&&"function"==typeof jt[e.currentShop].items[jt[e.currentShop].currentIndex].cost[o]&&(n=jt[e.currentShop].items[jt[e.currentShop].currentIndex].cost[o](jt[e.currentShop].items[jt[e.currentShop].currentIndex].amountPurchased+i,i).split(" "));let s="honey"===n[1]&&g.honey<Number(n[0])||"honey"!==n[1]&&se[n[1]].amount<Number(n[0])?"rgb(255,0,0)":"rgb(255,255,255)",r="x"+(n[0].length<4?MATH.addCommas(n[0]):MATH.abvNumber(n[0]));qt.innerHTML+="<div style='position:absolute;top:"+70*o*.7+"px'>"+V[n[1]].replace("SCALE","scale(0.7,0.7);margin-top:-10px;margin-bottom:0px;margin-left:-10px")+"<div style='position:absolute;top:15px;left:50px;font-size:16px;'><svg style='position:absolute;'><text x='3' y='20' stroke='black' stroke-width='3' style='font-size:15px'>"+r+"</text><text x='3' y='20' fill='"+s+"' style='font-size:15px'>"+r+"</text></svg></div></div>"}if("item"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot)jt[e.currentShop].items[jt[e.currentShop].currentIndex].amountPurchased+=i,"hiveSlot"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].name?(e.addSlot(null),e.updateHive()):se[jt[e.currentShop].items[jt[e.currentShop].currentIndex].name].amount+=i,g.addMessage("+"+MATH.addCommas(i+"")+" "+MATH.doGrammar(i>1?MATH.doPlural(jt[e.currentShop].items[jt[e.currentShop].currentIndex].name):jt[e.currentShop].items[jt[e.currentShop].currentIndex].name)),jt[e.currentShop].items[jt[e.currentShop].currentIndex].amountPurchased>=jt[e.currentShop].items[jt[e.currentShop].currentIndex].maxPurchasedAmount&&(jt[e.currentShop].items[jt[e.currentShop].currentIndex].owned=!0);else if("beequip"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot)if(e.currentGear.beequips.length>=6){g.addMessage("You can't hold more than 6 beequips!",ae.redArr);for(let e in t){let i=t[e].split(" ");"honey"===i[1]?g.honey+=Number(i[0]):se[i[1]].amount+=Number(i[0])}}else e.generateBeequip(jt[e.currentShop].items[jt[e.currentShop].currentIndex].name),e.addMessage("Recieived "+MATH.doGrammar(jt[e.currentShop].items[jt[e.currentShop].currentIndex].name));else jt[e.currentShop].items[jt[e.currentShop].currentIndex].owned=!0,e.currentGear[jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot]=jt[e.currentShop].items[jt[e.currentShop].currentIndex].name,g.addMessage("Received "+MATH.doGrammar(jt[e.currentShop].items[jt[e.currentShop].currentIndex].name));e.updateInventory(),e.updateGear()}}},e.health=100,e.respawnTimer=3,e.dead=!1,e.respawn=function(){e.health=100,e.dead=!1,e.body.position.x=8,e.body.position.y=0,e.body.position.z=7,e.endAntChallenge()},e.attacked=[],e.messages=[],e.beeHighlightMesh=new _t(!0),e.statsStringLastUpdate=0,e.statsString="",e.itemDragging="",e.beequipDragging="",e.updateInventory=function(){noItemsMessage.style.display="block";for(let e in se){se[e].amount=o.floor(se[e].amount),se[e].amount<=0?(se[e].amount=0,se[e].svg.style.display="none"):(se[e].svg.style.display="inline",se[e].amountText.textContent="x"+se[e].amount,noItemsMessage.style.display="none");for(let t in G)G[t].itemType===e&&(G[t].innerHTML=V[e].replace("SCALE","scale(0.512,0.512);margin-left:-18px;margin-top:-19px")+"<div style='font-size:9px;text-align:right;margin-top:-30px'>x"+se[e].amount+"</div>",G[t].style.backgroundColor=se[e].amount>0?"rgb(235,235,235)":"rgb(190,190,190)",G[t].style.filter=se[e].amount>0?"none":"grayscale(1)")}},e.addItem=function(t,i){se[t].amount+=i,e.updateInventory()},e.updateInventory(),e.hiveBalloon={pollen:0,size:0,displaySize:0,maxPollen:0,blessing:0,deflateTimer:0},e.updateHiveBalloon=function(){if(!e.hiveBalloon.pollen){if(e.hiveBalloon.maxPollen){e.addEffect("balloonBlessing",void 0,e.hiveBalloon.blessing),e.hiveBalloon.maxPollen=0,e.hiveBalloon.pollen=0;for(let t in e.effects)"balloonBlessing"===e.effects[t].type&&(e.effects[t].amount<=e.hiveBalloon.blessing?e.addMessage("The hive balloon granted x"+e.hiveBalloon.blessing+" balloon blessing!",[205,205,0]):e.addMessage("The hive balloon refreshed your balloon blessing!",[205,205,0]))}return e.hiveBalloon.size=0,void(e.hiveBalloon.displaySize=0)}if(e.hiveBalloon.deflateTimer-=f,e.hiveBalloon.deflateTimer<=0){e.hiveBalloon.deflateTimer=10,e.hiveBalloon.pollen=o.round(e.hiveBalloon.pollen);let t=e.hiveBalloon.pollen/e.capacity;t*=45e-5,e.hiveBalloon.pollen-=e.hiveBalloon.pollen*t}e.hiveBalloon.pollen=o.round(e.hiveBalloon.pollen);let t=e.hiveBalloon.pollen.toString();e.hiveBalloon.size=(2*o.pow(e.hiveBalloon.pollen,1/7)-2)/20+.5,e.hiveBalloon.displaySize+=.015*(e.hiveBalloon.size-e.hiveBalloon.displaySize),de.explosions.instanceData.push(e.hivePos[0]+1.5,e.hivePos[1]-1.5+.5*e.hiveBalloon.displaySize,e.hivePos[2]+3,0,0,.6*g.isNight,.75,e.hiveBalloon.displaySize,1.05),de.cylinder_explosions.instanceData.push(e.hivePos[0]+1.5,e.hivePos[1]-2.5,e.hivePos[2]+3,g.isNight,g.isNight,g.isNight,1,.05,40),Kt.addSingle(t,[e.hivePos[0]+1.5,e.hivePos[1]-1.6+.5*e.hiveBalloon.displaySize,e.hivePos[2]+3],ae.whiteArr,-1),t=o.round(e.hiveBalloon.maxPollen).toString(),e.hiveBalloon.blessing=o.max(o.ceil(2*o.pow(e.hiveBalloon.maxPollen,1/7)-4),1),Kt.addSingle("Blessing x"+e.hiveBalloon.blessing,[e.hivePos[0]+1.5,e.hivePos[1]-1.4+.5*e.hiveBalloon.displaySize,e.hivePos[2]+3],[0,100,255],-1,!0,!1)},e.toolRot=0,e.toolMatrix=new Float32Array(16),e.toolMesh=new _t(!1),e.toolUses=0,e.toolCooldown=0,e.hive=[[]],e.hivePos=[7.375,1.5,-7.5],j.hive={minX:e.hivePos[0]-1,maxX:e.hivePos[0]+4.5,minY:-5,maxY:7,minZ:e.hivePos[2]-1,maxZ:e.hivePos[2]+4.5},e.hiveMesh=new _t(!0),e.addSlot=function(t,i=!0,o=0,n,s,r){e.hive[e.hive.length-1].length<5||e.hive.push([]),e.hive[e.hive.length-1].push({type:t,level:1,bond:o,gifted:i,mutation:n,radioactive:s,beequip:r})},e.effects=[],e.addEffect=function(t,i,n,s,r){if(i){let n;for(let i in e.effects)if(e.effects[i].type===t){n=i;break}if(void 0!==n)return void(e.effects[n].cooldown=o.min($[t].maxCooldown,$[t].maxCooldown*i+e.effects[n].cooldown+f));e.effects.push({cooldown:$[t].maxCooldown*i,type:t,amount:1})}else{let i;for(let o in e.effects)if(e.effects[o].type===t){i=o;break}if(void 0!==i)return e.effects[i].amount=n?o.min(o.max(e.effects[i].amount,n),$[t].maxAmount):o.min(s??e.effects[i].amount+(r||1),$[t].maxAmount),void(e.effects[i].cooldown=$[t].maxCooldown);e.effects.push({cooldown:$[t].maxCooldown,type:t,amount:n||(s??(r||1))})}$[t].svg.style.display="inline"},e.computeStats=function(t){for(let t=e.effects.length;t--;)$[e.effects[t].type].isPassive&&($[e.effects[t].type].svg.style.display="none",e.effects.splice(t,1));for(let t in e.precomputedStats)e.defaultStats[t]=e.precomputedStats[t];e.defaultStats.capacityMultiplier=1,e.defaultStats.convertTotal=0,e.defaultStats.attackTotal=0;let i=[];e.bubbleBonus=1,e.flameBonus=1,e.ownsCrimsonBee=!1,e.ownsCobaltBee=!1,e.cloudBoostAmount=1.15,e.beeColorAmounts={r:0,b:0,w:0};for(let t=0;t<20;t++)e.stats["beesToLevel"+t]=0;for(let t in le.bees){for(let i=0;i<=g.hive[le.bees[t].hiveY][le.bees[t].hiveX].level;i++)e.stats["beesToLevel"+i]++;if(e.discoveredBees.indexOf(le.bees[t].type)<0&&(e.discoveredBees.push(le.bees[t].type),e.stats.beeTypes++,le.bees[t].gifted&&e.discoveredGifteds.push(le.bees[t].type)),e.discoveredGifteds.indexOf(le.bees[t].type)<0&&e.discoveredGifteds.push(le.bees[t].type),!g.hive[le.bees[t].hiveY][le.bees[t].hiveX].roboDisabled&&(e.beeColorAmounts[K[le.bees[t].type].color[0]]++,e.defaultStats.convertTotal+=le.bees[t].convertAmount,e.defaultStats.attackTotal+=le.bees[t].attack,le.bees[t].gifted&&i.indexOf(le.bees[t].type)<0&&(i.push(le.bees[t].type),"blue"===K[le.bees[t].type].color&&(e.bubbleBonus+=.1)),"red"===K[le.bees[t].type].color&&(e.flameBonus+=le.bees[t].gifted?.08:.04),"crimson"===le.bees[t].type&&(e.ownsCrimsonBee=!0),"cobalt"===le.bees[t].type&&(e.ownsCobaltBee=!0),"windy"===le.bees[t].type&&le.bees[t].gifted&&(e.cloudBoostAmount=1.25),g.hive[le.bees[t].hiveY][le.bees[t].hiveX].beequip)){let e=g.hive[le.bees[t].hiveY][le.bees[t].hiveX].beequip.stats.player;e=e.split(",");for(let t in e){let i=e[t];"*"===i[0]?g.defaultStats[i.substring(i.indexOf(" ")+1,i.indexOf("("))]*=Number(i.substr(1,i.indexOf(" ")-1))+Number(i.substr(i.indexOf("(")+2,i.length).replace(")","")):g.defaultStats[i.substring(i.indexOf(" ")+1,i.indexOf("("))]+=Number(i.substr(1,i.indexOf(" ")-1))+Number(i.substr(i.indexOf("(")+2,i.length).replace(")",""))}}}for(let t in i){let o=K[i[t]].giftedHiveBonus;if("+"===o.oper){let t=o.stat.split(",");for(let i in t)t[i].indexOf("Conversion")>-1?e.defaultStats[t[i]]=MATH.applyPercentage(e.defaultStats[t[i]],o.num):e.defaultStats[t[i]]+=o.num}else{let t=o.stat.split(",");for(let i in t)e.defaultStats[t[i]]*=o.num}}for(let t in e.effects)$[e.effects[t].type].isPassive&&($[e.effects[t].type].svg.style.display="none",e.effects.splice(t,1));for(let t in e.currentGear)if("tool"!==t&&"sprinkler"!==t)if(t.indexOf("Amulet")>-1){let i=e.currentGear[t];i=i.split(",");for(let t in i){let o=i[t];"*"===o[0]?e.defaultStats[o.substr(o.indexOf(" ")+1,o.length)]*=Number(o.substr(1,o.indexOf(" ")-1)):"+"===o[0]?e.defaultStats[o.substr(o.indexOf(" ")+1,o.length)]+=Number(o.substr(1,o.indexOf(" ")-1)):(e.addEffect(o.split(" ")[1]),e.defaultStats.capacityMultiplier*=1.25)}}else"beequips"!==t&&Xt[t][e.currentGear[t]].applyStats&&Xt[t][e.currentGear[t]].applyStats(e.defaultStats,e);if(e.defaultStats.capacity*=e.defaultStats.capacityMultiplier,!t){let t={...g.restrictionInfo};e.computeRestrictionInfo();for(let e in t)if(t[e]!==g.restrictionInfo[e]&&"wall"!==e){window.setTimeout((()=>Pi()),500);break}}},e.currentGear={tool:"shovel",boots:"none",belt:"none",backpack:"pouch",mask:"none",leftGuard:"none",rightGuard:"none",glider:"none",sprinkler:"none",beequips:[]},e.generateBeequip=function(t){let i=re[t].potentials[o.random()*re[t].potentials.length|0],n=re[t].generateStats(i);e.currentGear.beequips.push({type:t,bee:null,stats:n,id:e.extraInfo.beequipIds++,potential:i,waxes:[]}),e.updateBeequipPage()},e.beequipLookingAt=!1,e.updateBeequipPage=function(){if(e.beequipPageHTML="",!1===e.beequipLookingAt){e.currentGear.beequips.length||(e.beequipPageHTML="<div style='text-align:center;font-size:17px;color:rgb(0,0,0,0.5)'><br>(You have no beequips)</div>");for(let t in e.currentGear.beequips)e.beequipPageHTML+=re[e.currentGear.beequips[t].type].svgCode.replaceAll("#ID",e.currentGear.beequips[t].id)}else{let t=re[e.currentGear.beequips[e.beequipLookingAt].type].svgCode.split("</text>");t=t[t.length-1];let i,o=re[e.currentGear.beequips[e.beequipLookingAt].type].svgCode.split("<text"),n="";for(let e in o)if(o[e].indexOf("</text>")>-1){if(!i){i=!0;continue}n+=o[e].substr(o[e].indexOf(">")+1,o[e].indexOf("<"))+" "}let s=e.currentGear.beequips[e.beequipLookingAt].stats.bee.split(","),r="";if(e.currentGear.beequips[e.beequipLookingAt].stats.bee.length){s.sort();for(let e in s){let t=s[e].replace("*","x");t=t.substr(0,t.indexOf(" ")+1)+MATH.doGrammar(t.substring(t.indexOf(" ")+1,t.indexOf("(")))+'<l style="color:rgb(20,160,20)">'+t.substring(t.indexOf("("),t.length)+"</l>",r+="<p style='color:"+(Number(t.substr(1,t.indexOf(" ")))<1?"rgb(200,0,0)":"rgb(20,160,20)")+";font-size:14px;margin-top:-10px'>"+t+"</p>"}}if(s=e.currentGear.beequips[e.beequipLookingAt].stats.player.split(","),e.currentGear.beequips[e.beequipLookingAt].stats.player.length){r+="<br><p style='color:rgb(227, 194, 7);font-size:14px;margin-top:-10px'>[Hive Bonus]</p>",s.sort();for(let e in s){let t=s[e].replace("*","x");t=t.substr(0,t.indexOf(" ")+1)+MATH.doGrammar(t.substring(t.indexOf(" ")+1,t.indexOf("(")))+t.substring(t.indexOf("("),t.length),r+="<p style='color:rgb(227, 194, 7);font-size:14px;margin-top:-10px'>"+t+"</p>"}}let a=[];for(let t=0;t<5;t++){let i=e.currentGear.beequips[e.beequipLookingAt].waxes[t];a.push(i?V[i.substring(1)].replace("SCALE","translate(-24px,-22px) scale(0.5,0.5)")+"<div style='font-size:14px;margin-top:-55px;margin-left:10px'>"+(Number(i[0])?"✔️":"❌")+"</div>":"")}e.beequipPageHTML+="<div onmousedown='window.selectBeequip()' style='position:fixed;left:5px;top:250px;background-color:rgb(240, 196, 0);border:2px solid black;border-radius:4px;text-align:center;width:90px;height:20px;cursor:pointer;'><svg style='margin:0px;width:100px;height:20px'><text x='45' y='16' style='color:black;font-family:cursive;font-size:17px' text-anchor='middle'>Equip"+(e.currentGear.beequips[e.beequipLookingAt].bee&&e.hive[e.currentGear.beequips[e.beequipLookingAt].bee[1]][e.currentGear.beequips[e.beequipLookingAt].bee[0]].type?"ped":"")+"</text></svg></div><div onmousedown='window.deleteBeequip()' style='position:fixed;top:250px;background-color:rgb(240, 0, 0);border:2px solid black;border-radius:4px;left:105px;text-align:center;width:90px;height:20px;cursor:pointer;'><svg style='margin:0px;width:100px;height:20px'><text x='20' y='16' style='color:black;font-family:cursive;font-size:17px'>Delete</text></svg></div><svg style='position:fixed;border-radius:10px;background-color:rgb(240,240,240);width:75px;height:75px;margin-top:28px'>"+t+"<div onmousedown='window.exitBeequipLooking()' style='position:fixed;background-color:rgb(240,0,0);border:2px solid black;border-radius:4px;text-align:center;font-size:19px;font-family:trebuchet ms;width:20px;height:20px;cursor:pointer;'><svg style='margin:0px;width:20px;height:20px'><path stroke='black' stroke-width='2' d='M5 4L15 16M15 4L5 16'></path></svg></div><div style='position:fixed;background-color:rgb(240,240,240);border-radius:10px;text-align:center;font-size:19px;font-family:trebuchet ms;margin-left:28px;width:172px;padding-bottom:2px;'>"+MATH.doGrammar(e.currentGear.beequips[e.beequipLookingAt].type.replaceAll("candycane","candyCane"))+"</div><div style='position:fixed;background-color:rgb(240,240,240);margin-left:80px;margin-top:29px;border-radius:10px;font-size:13px;padding-top:0px;font-family:trebuchet ms;width:113px;padding-left:7px;padding-top:3px;padding-bottom:3px;'>Level: "+re[e.currentGear.beequips[e.beequipLookingAt].type].level+"</div><div style='position:fixed;background-color:rgb(240,240,240);margin-left:80px;margin-top:55px;border-radius:10px;padding-left:7px;padding-top:3px;padding-bottom:3px;font-size:13px;font-family:trebuchet ms;width:113px;'>Color: "+MATH.doGrammar(re[e.currentGear.beequips[e.beequipLookingAt].type].color)+"</div><div style='position:fixed;background-color:rgb(240,240,240);margin-left:80px;margin-top:81px;border-radius:10px;padding-left:7px;padding-top:3px;padding-bottom:3px;font-size:13px;font-family:trebuchet ms;width:113px;'>Potential: "+e.currentGear.beequips[e.beequipLookingAt].potential+"</div><svg style='postition:fixed;left:0px;top:107px;width:20px;height:20px'><path stroke='black' stroke-width='2' d='M5 4L15 16M15 4L5 16'></path></svg><div style='background-color:rgb(240,240,240);margin-left:2px;margin-top:112px;border-radius:9px;padding-left:7px;padding-top:3px;padding-bottom:3px;width:30px;height:30px;'>"+a[0]+"</div><div style='background-color:rgb(240,240,240);margin-left:42px;margin-top:-36px;border-radius:9px;padding-left:7px;padding-top:3px;padding-bottom:3px;width:30px;height:30px;'>"+a[1]+"</div><div style='background-color:rgb(240,240,240);margin-left:82px;margin-top:-36px;border-radius:9px;padding-left:7px;padding-top:3px;padding-bottom:3px;width:30px;height:30px;'>"+a[2]+"</div><div style='background-color:rgb(240,240,240);margin-left:122px;margin-top:-36px;border-radius:9px;padding-left:7px;padding-top:3px;padding-bottom:3px;width:30px;height:30px;'>"+a[3]+"</div><div style='background-color:rgb(240,240,240);margin-left:162px;margin-top:-36px;border-radius:9px;padding-left:7px;padding-top:3px;padding-bottom:3px;width:30px;height:30px;'>"+a[4]+"</div><div style='background-color:rgb(240,240,240);margin-left:0px;margin-top:5px;border-radius:10px;padding-left:7px;padding-top:3px;padding-bottom:3px;font-size:12px;font-family:trebuchet ms;width:193px;'>"+n+re[e.currentGear.beequips[e.beequipLookingAt].type].reqStr+r.replaceAll("(+0)","")+(re[e.currentGear.beequips[e.beequipLookingAt].type].extraAbility?'<br><p style="font-size:15px">+Ability: '+MATH.doGrammar(re[e.currentGear.beequips[e.beequipLookingAt].type].extraAbility.split("_")[1])+"</p>":"")+"</div>"}},e.beesPageBee=!1,window.exitBeesPageBee=function(){e.beesPageBee=!1,e.updateBeesPage()},e.updateBeesPage=function(){if(O[2].scrollTop=0,O[2].innerHTML="",O[2].style.backgroundColor="rgba(195,195,195,0.9)",e.beesPageBee){O[2].style.backgroundColor="rgb(160,150,0,0.9)";let t=document.createElement("canvas");t.width=76,t.height=76,t.style.borderRadius="5px",t.style.margin="5px",t.style.marginLeft="5px",t.style.marginTop="35px",t.getContext("2d").drawImage(i,2048*K[e.beesPageBee].u,2048*K[e.beesPageBee].v,128,128,0,0,76,76);let o,n=0,s=K[e.beesPageBee].giftedHiveBonus,r="",a=s.stat.split(","),l=["energy","speed","attack","gather","convert"];for(let e in a)r+="<br>"+s.oper.replace("*","x")+("*"==s.oper?s.num:100*s.num+"%")+" "+MATH.doGrammar(a[e]);for(let t in e.hive)for(let i in e.hive[t])e.hive[t][i].type===e.beesPageBee&&(n++,e.hive[t][i].gifted&&(o=!0));for(let t in l){let i=l[t],o=[230,220,150];if("gather"===i||"convert"===i){let t=MATH.constrain(.05*(K[e.beesPageBee][i+"Amount"]/K[e.beesPageBee][i+"Speed"]-K.basic[i+"Amount"]/K.basic[i+"Speed"]),-1,1),n=t;t*=t,n<0?vec3.lerp(o,o,[255,0,0],t):vec3.lerp(o,o,[0,255,0],t)}else{let t=MATH.constrain((K[e.beesPageBee][i]-K.basic[i])*{attack:.4,energy:.15,speed:.3}[i],-1,1),n=t;t*=t,n<0?vec3.lerp(o,o,[255,0,0],t):vec3.lerp(o,o,[0,255,0],t)}l[t]="rgb("+o[0]+","+o[1]+","+o[2]+")"}O[2].innerHTML+="<div style='margin-left:3px;margin-top:-118px;width:188px;height:26px;background-color:rgb(245,235,90);border-radius:2px;padding-left:3px;padding-top:2px;font-family:trebuchet ms;font-size:19px;text-align:center'><div style='position:absolute;left:8px;top:7px;width:20px;height:20px;font-size:19px;background-color:rgb(255,0,0);cursor:pointer;border:2px solid black;border-radius:4px;padding-top:0px'><div style='margin-top:-3px' onclick='window.exitBeesPageBee()'>x</div></div>&nbsp;&nbsp;"+MATH.doGrammar(e.beesPageBee)+" Bee</div><div style='margin-left:90px;margin-top:5px;width:103px;height:16px;background-color:rgb(230,220,150);border-radius:2px;padding-left:3px;font-family:trebuchet ms;font-size:13px;text-align:center'>"+MATH.doGrammar(K[e.beesPageBee].rarity)+"</div><div style='margin-left:90px;margin-top:3px;width:103px;height:16px;background-color:rgb(230,220,150);border-radius:2px;padding-left:3px;font-family:trebuchet ms;font-size:13px;text-align:center'>"+MATH.doGrammar(K[e.beesPageBee].color)+"</div><div style='margin-left:90px;margin-top:3px;width:103px;height:16px;background-color:"+l[0]+";border-radius:2px;padding-left:3px;font-family:trebuchet ms;font-size:13px;text-align:center'>Energy: "+K[e.beesPageBee].energy+"</div><div style='margin-left:90px;margin-top:3px;width:103px;height:16px;background-color:"+l[1]+";border-radius:2px;padding-left:3px;font-family:trebuchet ms;font-size:13px;text-align:center'>Speed: "+K[e.beesPageBee].speed+"</div><div style='margin-left:90px;margin-top:3px;width:103px;height:16px;background-color:"+l[2]+";border-radius:2px;padding-left:3px;font-family:trebuchet ms;font-size:13px;text-align:center'>Attack: "+K[e.beesPageBee].attack+"</div><div style='margin-left:0px;margin-top:-15px;width:90px;height:16px;background-color:rgb(0,0,0,0);border-radius:2px;padding-left:3px;font-family:trebuchet ms;font-size:13px;text-align:center'><b>x"+n+"</b>"+(o?"&nbsp;&nbsp;&nbsp;&nbsp;⭐":"")+"</div><div style='margin-left:5px;margin-top:5px;width:188px;height:16px;background-color:"+l[3]+";border-radius:2px;padding-left:3px;font-family:trebuchet ms;font-size:13px;text-align:center;padding-top:1px;padding-bottom:1px;'>Collects "+K[e.beesPageBee].gatherAmount+" pollen in "+K[e.beesPageBee].gatherSpeed+"s</div><div style='margin-left:5px;margin-top:3px;width:188px;height:16px;background-color:"+l[4]+";border-radius:2px;padding-left:3px;font-family:trebuchet ms;font-size:13px;text-align:center;padding-top:1px;padding-bottom:1px;'>Makes "+K[e.beesPageBee].convertAmount+" honey in "+K[e.beesPageBee].convertSpeed+"s</div><div style='margin-left:5px;margin-top:3px;width:188px;background-color:rgb(230,220,150);border-radius:2px;padding-left:3px;font-family:trebuchet ms;font-size:13px;text-align:center;padding-top:1px;padding-bottom:1px;'><b>⭐ Gifted Hive Bonus ⭐</b><div style='margin-top:-8px'>"+r+"</div></div>";let d,h=[];K[e.beesPageBee].tokens&&h.push(...K[e.beesPageBee].tokens),K[e.beesPageBee].attackTokens&&h.push(...K[e.beesPageBee].attackTokens);for(let e=h.length;e--;)h.indexOf(h[e])!==e&&h.splice(e,1);for(let e in h)O[2].innerHTML+="<div style='margin-left:5px;margin-top:3px;width:188px;background-color:rgb(230,220,150);border-radius:2px;padding-left:3px;font-family:trebuchet ms;font-size:13px;text-align:center;padding-top:2px;padding-bottom:2px;'><b>["+(h[e].indexOf("*")>-1?"⭐":"")+MATH.doGrammar(h[e].replace("*","")).replace(" _","+")+"</b>"+(h[e].indexOf("*")>-1?"⭐":"")+"]<br><br><div style='font-size:11px;user-select:text;padding-left:4px;padding-right:4px;'>"+($[h[e].replace("*","")]?$[h[e].replace("*","")].desc:"ERROR DESCRIPTION UNDEFINED")+"</div></div>";switch(e.beesPageBee){case"fire":d=["Gathering Flames","Has a 35%(50% if gifted) to summon a flame when collecting.<br><br>Flames last for 3s, collecting 10R/4W/1B pollen from 9 nearby flowers every second. Pollen collected is multiplied by 4% per red bee(8% is gifted). Flames also deal 15 damage to mobs every second. Standing in flames grant Flame Heat, lasting for 20s, and giving up to x2 red pollen and x1.2 bee attack."];break;case"bubble":d=["Gathering Bubbbles","Has a 35%(50% if gifted) to summon a bubble when collecting.<br><br>Bubbles last for 10s. When popped, they collect 10B/6W/2R pollen and replenish 33 flowers. Pollen collected is multiplied by 10% per gifted blue bee type."];break;case"demon":d=["Gathering Flames","Has a 55%(75% if gifted) to summon a flame when collecting.<br><br>Flames last for 3s, collecting 10R/4W/1B pollen from 9 nearby flowers every second. Pollen collected is multiplied by 4% per red bee(8% is gifted). Flames also deal 15 damage to mobs every second. Standing in flames grant Flame Heat, lasting for 20s, and giving up to x2 red pollen and x1.2 bee attack."];break;case"diamond":d=["Shimmering Honey","Whenever this bee converts at the hive, it grants 40% bonus honey (+3% per level). This bonus is doubled if the bee is gifted."];break;case"shy":d=["Nectar Lover","Shy Bee is x2(x2.5 if gifted) as likely to drink from a planter than any other bee. When drinking it also collects x2(x2.5 if gifted) as much nectar and contributes x2(x2.5 if gifted) as much to the growth of the planter."];break;case"tadpole":d=["Gathering Bubbbles+","Has a 55%(75% if gifted) to summon a bubble when collecting.<br><br>Bubbles last for 10s. When popped, they collect 10B/6W/2R pollen and replenish 33 flowers. Pollen collected is multiplied by 10% per gifted blue bee type."];break;case"digital":d=["Drive Expansion","When using drives, this bee is permanently upgraded. A maximum of 50 drives of each type can be applied.<br><br>• Red drives grant up to +15 attack.<br><br>• Blue drives grant up to +1,000 convert amount.<br><br>• White drives grant up to +125 gather amount.<br><br>• Glitched drives grant up to +37.5% ability rate.<br><br>• Maxing out all types of drives grants the bee +10 speed.<br><br>"];break;case"fuzzy":d=["Fuzzy Coat","When collecting, this bee has a large chance to pollinate nearby flowers.<br><br>When a flower is pollinated, it moves up a tier. If the flower is already at it's maximum pollination, it is replenished. Flowers can be at the single, double, triple, large, or star tier. Pollen from the flower is multiplied based on it's tier, and higher tier flowers deplete slower. Over time, flowers naturally downgrade to it's original tier."];break;case"spicy":d=["Steam Engine","This bee's gather speed and movespeed increases up to x1.5 with Flame Heat."];break;case"precise":d=["Sniper","This bee uses slower, long ranged attacks. Its attack's accuracy is calculated as if the bee's lvl is 1(2 if gifted) higher and can never be below 5%. It deals x1.5(x2 if gifted) damage per hit."];break;case"buoyant":d=["Balloon Enthusiast","As Dat's favorite bee, this bee gains the advantage of *favoritism*. With *favoritism*, it emits a shiny golden glowing effect. It also recieves x1.5 bond and is x1.15 more likely to become gifted when fed its favorite treat.<br><br>When converting from balloons, this bee gains x3(x4 if gifted, buffed due to *favoritism*) convert rate. Additionally, this bee's base attack scales up to x3 with Balloon Blessing."]}d&&(O[2].innerHTML+="<div style='margin-left:5px;margin-top:3px;width:188px;background-color:rgb(230,220,150);border-radius:2px;padding-left:3px;font-family:trebuchet ms;font-size:13px;text-align:center;padding-top:2px;padding-bottom:2px;'><b>[Passive: "+d[0]+"]</b><br><br><div style='font-size:11px;user-select:text;padding-left:4px;padding-right:4px;'>"+d[1]+"</div></div>"),O[2].prepend(t)}else{O[2].innerHTML='<div style="margin-top:3px;background-color:rgb(240,240,240);text-align:center;font-size:15px;border-radius:8px;font-family:trebuchet ms;padding:3px">You have '+le.bees.length+' bees</div><div style="margin-top:3px;background-color:rgb(240,240,240);text-align:center;font-size:15px;border-radius:8px;font-family:trebuchet ms;padding:3px">Discovered '+e.discoveredBees.length+' bee types</div><div style="margin-top:2px;margin-bottom:5px;background-color:rgb(240,240,240);text-align:center;font-size:15px;border-radius:8px;font-family:trebuchet ms;padding:3px">Discovered '+e.discoveredGifteds.length+" gifted types</div>";let t={},o=[];for(let e in K)o.push(e);o.sort(),o.sort(((e,t)=>["common","rare","epic","legendary","mythic","event"].indexOf(K[e].rarity)-["common","rare","epic","legendary","mythic","event"].indexOf(K[t].rarity)));for(let e in o)t[o[e]]=K[o[e]];for(let o in t){let t=document.createElement("div"),n=document.createElement("canvas"),s=document.createElement("div");t.style.cursor="pointer",t.style.width="195px",t.style.height="70px",t.style.marginTop="3px",t.style.borderRadius="5px",t.style.backgroundColor="red"===K[o].color?"rgb(255,0,0,0.5)":"blue"===K[o].color?"rgb(0,0,255,0.5)":"rgb(255,255,255,0.5)",n.width=70,n.height=70,n.style.borderTopLeftRadius="5px",n.style.borderBottomLeftRadius="5px",n.getContext("2d").drawImage(i,2048*K[o].u,2048*K[o].v,128,128,0,0,70,70),s.innerHTML="<p style='margin-left:70px;margin-top:-70px;font-family:trebuchet ms;font-size:17px;text-align:center'>"+MATH.doGrammar(o)+" Bee</p><p style='margin-left:73px;margin-top:-13px;font-family:trebuchet ms;font-size:9px;text-align:center;width:122px'>"+(e.discoveredBees.indexOf(o)>-1?K[o].description:"<br>(Undiscovered)")+"</p>",t.appendChild(n),t.appendChild(s),t.onclick=function(){e.beesPageBee=o,e.updateBeesPage()},O[2].appendChild(t)}}},e.updateGear=function(t){e.sprinklers=[],e.sprinklerMesh=new _t(!0),e.sprinklerMesh.setBuffers(),e.currentSprinkler=0;for(let t=0;t<Xt.sprinkler[e.currentGear.sprinkler].count;t++)e.sprinklers.push(new ge);e.computeStats(t),e.toolMesh.setMeshFromFunction((function(t,i,o,n,s,r,a){Xt.tool[e.currentGear.tool].mesh(t,o,n,a,s)})),e.toolMesh.setBuffers(),Wt.setMeshFromFunction((function(t,i,n,s,r,a,l){t(0,0,0,.5,1,.5,!1,[1.45,1.45,1]);let d=0,h=0;for(let t in e.currentGear)t.indexOf("Amulet")>-1&&d++;for(let i in e.currentGear)if("tool"!==i&&"sprinkler"!==i)if(i.indexOf("Amulet")<0&&"beequips"!==i)"glider"===i||"parachute"===i?g.isGliding&&Xt[i][e.currentGear[i]].mesh(t,n,s,l,r):Xt[i][e.currentGear[i]].mesh(t,n,s,l,r);else if("beequips"!==i){let e=((1+h++)/(d+1)-.5)*(.25*d+1),r=1.5*o.sin(e),a=1.5*o.cos(e);window.amuletOffset=[r,a-1.5],Xt[i].mesh(t,n,s,l)}})),Wt.setBuffers()},e.updateHive=function(){e.hiveMesh.setMeshFromFunction((function(t,i,o,n,s,r){for(let e in le.bees)for(let t in le.bees[e].trails)le.bees[e].trails[t].splice=!0;le.bees=[];for(let e in Z.bodies)Z.removeBody(Z.bodies[e]);for(let t=0;t<e.hive.length;t++)for(let o=0;o<e.hive[t].length;o++){let n,s=e.hive[t][o].bond,a=[0,10,50,250,750,1500,3e3,6e3,125e3,25e3,5e4,1e5,2e5,4e5,8e5,16e5,32e5,64e5,128e5,256e5];for(let e in a)s>=a[e]&&(n=e);if(n<20&&n++,(!n||n>20)&&(n=20),e.hive[t][o].level=n,i(e.hivePos[0]+.8*o,e.hivePos[1]+.8*t-2.25,e.hivePos[2],.35,.35,e.hive[t][o].type,e.hive[t][o].gifted),null!==e.hive[t][o].type){e.hive[t][o].gifted&&r(e.hivePos[0]+.8*o,e.hivePos[1]+.8*t-2.25,e.hivePos[2]-.2,.45,.45,e.hive[t][o].type);let i=new he([e.hivePos[0]+.8*o,e.hivePos[1]+.8*t-2.25,e.hivePos[2]],e.hive[t][o].type,e.hive[t][o].level,e.hive[t][o].gifted,o,t,e.hive[t][o].mutation);e.hive[t][o].bee=i,le.bees.push(i)}let l=new CANNON.Body({position:new CANNON.Vec3(g.hivePos[0]+.8*o,g.hivePos[1]+.8*t-2.25,g.hivePos[2]-.2),shape:new CANNON.Box(new CANNON.Vec3(.4,.4,.1)),mass:0});l.hiveIndex=[o,t],Z.addBody(l)}e.computeStats()})),e.hiveMesh.setBuffers()},e.resetStats=function(){for(let t in e.defaultStats)e[t]=e.defaultStats[t]},e.resetStats(),e.sensitivity=.005,e.yaw=0,e.pitch=-.9,e.friction=20,e.grounded=!1,e.cameraDir=[],e.zoom=11,e.lookDir=[0,1],e.lookQuat=[0,1,0,0],e.rotQuat=[0,1,0,0],e.shiftLock=!1,e.flowerIn={},e._flowerIn={},e.pollen=0,e.honey=0,e.cameraRaycastPoint=new CANNON.Vec3,e.cameraRaycastResult=new CANNON.RaycastResult,e.cameraRaycastFilter={collisionFilterMask:4},e.viewMatrix=new Float32Array(16),e.modelMatrix=new Float32Array(16),e.body=new CANNON.Body({shape:new CANNON.Box(new CANNON.Vec3(.25,.5,.25)),position:new CANNON.Vec3(8,0,7),mass:5,fixedRotation:!0,collisionFilterGroup:2,collisionFilterMask:12}),e.body.addEventListener("collide",(function(t){o.abs(t.contact.ni.y)>.5&&(e.grounded=!0),t.body.isBannedGate&&(e.bannedGateMessage=t.body.isBannedGate,window.setTimeout((()=>{e.bannedGateMessage=void 0}),3e3))})),X.addBody(e.body),e.setProjectionMatrix=function(t,i,n,s){let r=o.tan(MATH.HALF_PI-t*MATH.HALF_TO_RAD),a=1/(n-s);e.projectionMatrix=new Float32Array([r/i,0,0,0,0,r,0,0,0,0,(n+s)*a,-1,0,0,n*s*a*2,0])},e.fov=75,e.setProjectionMatrix(e.fov,l,.1,275),e.updateUI=function(){e.pollen=o.round(o.max(e.pollen,0)),e.capacity=o.round(e.capacity),e.honey=o.round(e.honey),_.textContent=S.textContent=MATH.addCommas(e.pollen.toString())+"/"+MATH.addCommas(g.capacity.toString()),R.textContent=M.textContent=MATH.addCommas(e.honey.toString());let t=o.min(e.pollen/e.capacity,1);if(C.setAttribute("width",196*t),C.style.fill="rgb("+255*t*1.5+","+255*(1-t)*1.5+",0)",e.health=o.min(e.health+2.5*f,100),(e.health<=0||e.body.position.y<-50)&&(e.dead||(e.dead=!0,e.respawnTimer=3,e.deadBodyPos=e.body.position.clone()),e.respawnTimer-=f,e.health=-1e4,e.body.velocity.setZero(),Qt.keys={},e.body.position.copy(e.deadBodyPos),e.respawnTimer<=0&&e.respawn(),u.fillStyle="rgb(225,0,0,0.4)",u.fillRect(0,0,n,s)),F.setAttribute("width",.72*e.health),F.style.fill="rgb("+3.75*(100-e.health)+","+3.75*e.health+",0)",Qt.clickedKeys.r&&e.sprinklers.length&&(e.sprinklers[e.currentSprinkler].set(g.fieldIn,g.flowerIn.x,g.flowerIn.z),e.currentSprinkler=(e.currentSprinkler+1)%e.sprinklers.length,e.sprinklerMesh.setMeshFromFunction((function(t,i,o){for(let i in e.sprinklers){let n=e.sprinklers[i];if(n.field){let i=n.x+ti[n.field].x,s=ti[n.field].y+.5,r=n.z+ti[n.field].z;Xt.sprinkler[e.currentGear.sprinkler].mesh(i,s,r,t,o)}}})),e.sprinklerMesh.setBuffers()),(e.itemDragging||e.beequipDragging)&&(u.textAlign="end",u.font="bold 20px arial",u.fillStyle="rgb(255,255,255)",u.strokeStyle="rgb(0,0,0)",u.lineWidth=4,u.strokeText(MATH.doGrammar(e.itemDragging||e.beequipDragging.type),Qt.mouseX,Qt.mouseY),u.fillText(MATH.doGrammar(e.itemDragging||e.beequipDragging.type),Qt.mouseX,Qt.mouseY),u.textAlign="center"),1===Y){O[1].innerHTML=e.quests.length?"":"<div style='text-align:center;font-size:17px;color:rgb(0,0,0,0.5)'><br>(You have no quests)</div>";for(let t in e.quests)O[1].innerHTML+=`<div style='background-color:${e.quests[t].completed?"rgb(0,"+(20*o.sin(5*T)+215)+",0)":"rgb(240,240,240)"};font-size:17px;text-align:center;margin-top:-16px;border-radius:3px;margin-bottom:20px'><p style='margin-bottom:5px'>${e.quests[t].name}</p>${function(){let i="",n=!0;for(let s in e.quests[t].req){(e.stats[e.quests[t].req[s][0]]-e.quests[t].req[s][2])/e.quests[t].req[s][1]>=1?e.quests[t].req[s][3]=!0:n=!1;let r=MATH.doStatGrammar(e.quests[t].req[s][0])+" "+MATH.addCommas(e.quests[t].req[s][1].toString())+" "+(e.quests[t].req[s][1]>1&&"Defeat"===MATH.doStatGrammar(e.quests[t].req[s][0])?MATH.doPlural(MATH.doGrammar(e.quests[t].req[s][0])):MATH.doGrammar(e.quests[t].req[s][0]))+"<br>("+(100*MATH.constrain((e.stats[e.quests[t].req[s][0]]-e.quests[t].req[s][2])/e.quests[t].req[s][1],0,1)).toFixed(0);i+="<div style='border-radius:3px;width:190px;margin-top:0px;margin-bottom:5px;background-color:rgb(255,0,0);color:black;font-family:calibri;font-size:13px;margin-left:5px;position:relative;'><div style='position:absolute;left:0px;top:0px;border-radius:2px;right:"+(190-o.min((e.stats[e.quests[t].req[s][0]]-e.quests[t].req[s][2])/e.quests[t].req[s][1]*190,190))+"px;bottom:0px;background-color:rgb(0,250,0);'></div><div style='position:absolute;left:0px;top:0px;border-radius:2px;right:0px;bottom:0px'>"+r+"%)</div><u style='color:rgb(0,0,0,0)'>"+r+"</u></div>"}return e.quests[t].completed=n,b[e.quests[t].NPC].activeQuest=!n,i+'<p style="font-size:2px"><br></p>'}()}</div>`}3===Y&&T-g.statsStringLastUpdate>.4&&(g.statsStringLastUpdate=T,statString.innerHTML="<br>FPS: "+(1/f).toFixed(2)+"<br>Delta Time: "+f.toFixed(4)+"<br><br>Convert Rate: "+o.round(100*g.convertRate)+"%<br>Red Pollen: "+o.round(100*g.redPollen)+"%<br>Blue Pollen: "+o.round(100*g.bluePollen)+"%<br>White Pollen: "+o.round(100*g.whitePollen)+"%<br>Walk Speed: "+g.walkSpeed.toFixed(1)+"<br>Jump Power: "+g.jumpPower.toFixed(1)+"<br>Instant Red Conversion: "+o.round(100*g.instantRedConversion)+"%<br>Instant Blue Conversion: "+o.round(100*g.instantBlueConversion)+"%<br>Instant White Conversion: "+o.round(100*g.instantWhiteConversion)+"%<br>Instant Flame Conversion: "+o.round(100*g.instantFlameConversion)+"%<br>Critical Chance: "+o.round(100*g.criticalChance)+"%<br>Critical Power: "+o.round(100*g.criticalPower)+"%<br>Super-Crit Chance: "+o.round(100*g.superCritChance)+"%<br>Super-Crit Power: "+o.round(100*g.superCritPower)+"%<br>Goo: "+o.round(100*g.goo)+"%<br>Flame Pollen: "+o.round(100*g.flamePollen)+"%<br>Bubble Pollen: "+o.round(100*g.bubblePollen)+"%<br>Pollen From Tools: "+o.round(100*g.pollenFromTools)+"%<br>Pollen From Bees: "+o.round(100*g.pollenFromBees)+"%<br>White Bomb Pollen: "+o.round(100*g.whiteBombPollen)+"%<br>Red Bomb Pollen: "+o.round(100*g.redBombPollen)+"%<br>Blue Bomb Pollen: "+o.round(100*g.blueBombPollen)+"%<br>White Bee Attack: "+g.whiteBeeAttack+"<br>Blue Bee Attack: "+g.blueBeeAttack+"<br>Red Bee Attack: "+g.redBeeAttack+"<br>Bee Attack Multiplier: "+o.round(100*g.beeAttack)+"%<br>Honey From Tokens: "+o.round(100*g.honeyFromTokens)+"%<br>Red Bee Ability Rate: "+o.round(100*g.redBeeAbilityRate)+"%<br>Blue Bee Ability Rate: "+o.round(100*g.blueBeeAbilityRate)+"%<br>White Bee Ability Rate: "+o.round(100*g.whiteBeeAbilityRate)+"%<br>Bee Movespeed: "+o.round(100*g.beeSpeed)+"%<br>Bee Energy: "+o.round(100*g.beeEnergy)+"%<br>Honey At Hive: "+o.round(100*g.honeyAtHive)+"%<br>Honey Per Pollen: "+o.round(100*g.honeyPerPollen)+"%<br>Loot Luck: "+o.round(100*g.lootLuck)+"%<br>Red Field Capacity: "+o.round(100*g.redFieldCapacity)+"%<br>White Field Capacity: "+o.round(100*g.whiteFieldCapacity)+"%<br>Blue Field Capacity: "+o.round(100*g.blueFieldCapacity)+"%<br>Ability Duplication Chance: "+o.round(100*g.abilityDuplicationChance+(g.hasDigitalBee&&g.extraInfo.drives.maxed?1:0))+"%<br>Bond From Treats: "+o.round(100*g.bondFromTreats)+"%<br>Nectar Multiplier: "+o.round(100*g.nectarMultiplier)+"%<br>Defense: "+o.round(100*g.defense)+"%<br><br>Convert Total: "+o.round(g.convertTotal)+"<br>Attack Total: "+o.round(g.attackTotal)),4===Y&&(O[4].innerHTML=g.beequipPageHTML);for(let t=e.messages.length;t--;){let i=e.messages[t];i.life-=f,u.font=i.size+"px arial",u.fillStyle=i.color+i.life+")",u.fillRect(n-250,s-24-22*t,244,20),u.fillStyle="rgb(255,255,255,"+i.life+")",u.fillText(i.message,n-125,s-13-22*t),i.life<=0&&e.messages.splice(t,1)}if(!g.fieldIn){if(g.currentNPC)Qt.clickedKeys.e&&Ft.onclick();else for(let e in b)j[e+"_NPC"].colliding&&(!b[e].activeQuest&&"roboBear"!==e||"roboBear"===e&&g.roboChallenge&&g.roboChallenge.questCompleted&&g.roboChallenge.isPlaying||"roboBear"===e&&!g.roboChallenge)&&(Dt.style.display="block",Lt.innerHTML=("antChallengeSign"!==e?"Talk To ":"Look at ")+MATH.doGrammar(e),zt.style.backgroundColor="rgb(30,70,255,0.8)",document.getElementById("actionEButton").style.display="block",Dt.onclick=function(){g.onStartChat(e)},Qt.clickedKeys.e&&g.onStartChat(e));if(g.currentShop){Dt.style.display="block",Lt.innerHTML="Leave Shop";let t,i=!0;t="item"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot||"beequip"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot?jt[e.currentShop].items[jt[e.currentShop].currentIndex].cost.slice():Xt[jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot][jt[e.currentShop].items[jt[e.currentShop].currentIndex].name].cost;for(let o in t){"function"==typeof t[o]&&(t[o]=t[o](jt[e.currentShop].items[jt[e.currentShop].currentIndex].amountPurchased,jt[e.currentShop].increments?jt[e.currentShop].increments[jt[e.currentShop].currentIncrement]:1));let n=t[o].split(" ");("honey"===n[1]&&g.honey<Number(n[0])||"honey"!==n[1]&&se[n[1]].amount<Number(n[0]))&&(i=!1)}"item"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot||"beequip"===jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot?(purchaseButton.innerHTML=jt[e.currentShop].items[jt[e.currentShop].currentIndex].owned?"Sold Out":i?"Purchase":"Not Enough",purchaseButton.style.backgroundColor=jt[e.currentShop].items[jt[e.currentShop].currentIndex].owned?"rgb(255,50,50)":i?"rgb(0,200,0)":"rgb(225,0,0)"):(purchaseButton.innerHTML=jt[e.currentShop].items[jt[e.currentShop].currentIndex].owned?e.currentGear[jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot]===jt[e.currentShop].items[jt[e.currentShop].currentIndex].name?"Equipped":"Equip":i?"Purchase":"Not Enough",purchaseButton.style.backgroundColor=jt[e.currentShop].items[jt[e.currentShop].currentIndex].owned?e.currentGear[jt[e.currentShop].items[jt[e.currentShop].currentIndex].slot]===jt[e.currentShop].items[jt[e.currentShop].currentIndex].name?"rgb(100,200,100)":"rgb(0,200,0)":i?"rgb(0,200,0)":"rgb(225,0,0)"),Qt.clickedKeys.e&&(e.currentShop=void 0,e.viewMatrixToChange=void 0,Ut.style.display="none")}else for(let t in jt)j[t+"_shop"].colliding&&!e.currentShop&&(Dt.style.display="block",Lt.innerHTML=jt[t].message,zt.style.backgroundColor="rgb(30,70,255,0.8)",document.getElementById("actionEButton").style.display="block",Dt.onclick=function(){g.currentShop=t,g.onStartShop()},Qt.clickedKeys.e&&(g.currentShop=t,g.onStartShop()))}if(e.passivePopupTimer<=0)P.style.display="none";else{e.passivePopupTimer-=f;let t=[g.body.position.x,g.body.position.y+1.75,g.body.position.z,1];vec4.transformMat4(t,t,e.viewMatrix),t[0]/=t[3],t[1]/=t[3],t[0]+=1,t[1]+=1,t[0]*=r,t[1]*=a,P.style.marginLeft=t[0]-15+"px",P.style.marginTop=s-t[1]+"px"}if(g.beePopup){document.exitPointerLock();let e=g.beePopup.type;u.translate(r+40,a+20),u.scale(o.min(1,10*(T-g.beePopup.time)),o.min(1,10*(T-g.beePopup.time))),u.fillStyle=g.beePopup.gifted?"rgb("+70*(o.sin(2*T)+.85)+","+127*(o.cos(2.5*T)+.85)+","+100*(o.sin(2*T+3.14)+.85)+")":"rgb(166, 166, 51)",u.fillRect(-127,-177,245,330),u.fillStyle="rgb(255,255,150)",u.fillRect(-125,-175,240,30),u.fillRect(-125,40,240,110),u.fillStyle=[K[e].color],u.fillRect(-125,10,240,25),Qt.mouseX>r+40-125&&Qt.mouseX<r-125+30+40&&Qt.mouseY>a-175+20&&Qt.mouseY<a-175+30+20?(u.fillStyle="rgb(180,0,0)",(Qt.mouseClicked||Qt.keys.j)&&(g.beePopup=!1)):u.fillStyle="rgb(255,0,0)",u.fillRect(-125,-175,30,30),u.strokeStyle="rgb(0,0,0)",u.lineWidth=2,u.beginPath(),u.moveTo(-120,-170),u.lineTo(-100,-150),u.moveTo(-100,-170),u.lineTo(-120,-150),u.stroke(),u.lineWidth=1.5,u.fillStyle={common:"rgb(255,255,255)",rare:"rgb(200,200,200)",epic:"rgb(255,220,0)",legendary:"rgb(0,200,255)",mythic:"rgb(255, 0, 255)",event:"rgb(100,230,0)"}[K[e].rarity],u.font="bold 27px arial",u.fillText((g.beePopup.gifted?"Gifted ":"")+MATH.doGrammar(e+"Bee")+"!".repeat({common:1,rare:1,epic:2,legendary:3,mythic:4,event:5}[K[e].rarity]),0,-120),u.strokeText((g.beePopup.gifted?"Gifted ":"")+MATH.doGrammar(e+"Bee")+"!".repeat({common:1,rare:1,epic:2,legendary:3,mythic:4,event:5}[K[e].rarity]),0,-120),u.font="bold 13px arial",u.fillStyle="black",u.textAlign="default",u.fillText(g.beePopup.message,-40,-160),u.textAlign="center",u.font="bold 16px arial";let t=K[e].description.split(" "),n=0,s="",l=0;for(let e in t){let i=u.measureText(t[e]);n+=o.abs(i.actualBoundingBoxLeft)+o.abs(i.actualBoundingBoxRight),s+=t[e]+" ",n>150&&(n=0,u.fillText(s,0,20*l+60),s="",l++)}u.fillText(s,0,20*l+60),u.font="bold 17px arial",u.fillText(MATH.doGrammar(K[e].color)+" "+MATH.doGrammar(K[e].rarity),0,23),u.rotate(.1*o.cos(5*T)),u.drawImage(i,2048*K[e].u,2048*K[e].v,128,128,-45,7*o.sin(2*T)-95,90,90),u.setTransform(1,0,0,1,0,0)}if(e.sunSwitchTimer-=f,e.sunSwitchTimer<=0){if(e.isNight<.9)e.targetLight=1,e.sunSwitchTimer=300;else{e.targetLight=.6,e.sunSwitchTimer=105,le.mobs.push(new _e);let t=0;for(let e in le.mobs)le.mobs[e]instanceof ke&&t++;if(t<3){let e=["CloverField","SpiderField","CactusField","RoseField","MountainTopField","PepperPatch"][6*o.random()|0];le.mobs.push(new ke(e,0|MATH.random(...{Cl:[1,4],Sp:[2,5],Ca:[4,8],Ro:[5,8],Mo:[6,9],Pe:[9,12]}[e.substring(0,2)])))}}e.computeRestrictionInfo(),Pi()}if(e.isNight!==e.targetLight&&(e.isNight=MATH.constrain(e.isNight+.0666667*f*o.sign(e.targetLight-e.isNight),.6,1),vec3.scale(e.skyColor,[.4,.6,1],MATH.map(e.isNight,.6,1,0,1)),m.useProgram(yt),m.uniform1f(St.static_isNight,e.isNight),m.useProgram(vt),m.uniform1f(St.dynamic_isNight,e.isNight),m.useProgram(xt),m.uniform1f(St.token_isNight,e.isNight),m.useProgram(At),m.uniform1f(St.flower_isNight,e.isNight),m.useProgram(Tt),m.uniform1f(St.bee_isNight,e.isNight),m.useProgram(Et),m.uniform1f(St.mob_isNight,e.isNight),m.useProgram(kt),m.uniform1f(St.trail_isNight,e.isNight)),g.isCrafting&&"block"===document.getElementById("blenderMenu").style.display){let e=MATH.constrain((g.isCrafting.time-T)/g.isCrafting.waitTime,0,1),t=g.isCrafting.amount*(1-e)|0,i=o.ceil(e*g.isCrafting.amount*.25);document.getElementById("blenderName").innerHTML="Crafting"+".".repeat((0|T)%5)+"<div style='position:fixed;left:50%;top:175%;transform:translate(-50%,-50%);width:200px;height:25px;border-radius:2px;border:1.5px solid black;background-color:rgb(150,0,0)'><div style='height:25px;width:"+(200-200*e)+"px;background-color:rgb(0,200,0)'></div><p style='color:white;font-size:16px;position:fixed;left:50%;top:-20%;transform:translate(-50%,-50%)'>"+MATH.doTime(o.max(g.isCrafting.time-T,0))+"</p><p style='color:white;font-size:20px;position:fixed;left:-40%;top:200%;transform:translate(-50%,-50%)'>"+MATH.addCommas(t+"")+" / "+MATH.addCommas(g.isCrafting.amount+"")+"</p></div>",i<1&&(document.getElementById("blenderSpeed").style.display="none"),document.getElementById("blenderSpeed").innerHTML="Speed Up for "+MATH.addCommas(i+"")+(1===i?" ticket":" Tickets"),document.getElementById("blenderEnd").style.backgroundColor=i?"rgb(200,0,0)":"rgb(0,200,0)",se.ticket.amount<i?document.getElementById("blenderSpeed").style.backgroundColor="rgb(230, 193, 99)":document.getElementById("blenderSpeed").style.backgroundColor="rgb(255,190,0)",document.getElementById("blenderEnd").onclick=function(){se[g.isCrafting.item].amount+=t,g.stats.itemsUsingTheBlender+=t,t&&g.addMessage("+"+MATH.addCommas(t+"")+" "+(t>1?MATH.doPlural(MATH.doGrammar(g.isCrafting.item)):MATH.doGrammar(g.isCrafting.item))+" (from Blender)");for(let e in E){let i=E[e];if(i.item===g.isCrafting.item){for(let e in i.req){let o=g.isCrafting.amount-t;se[i.req[e][0]].amount+=i.req[e][1]*o,o&&g.addMessage("+"+MATH.addCommas(i.req[e][1]*o+"")+" "+(o>1?MATH.doPlural(MATH.doGrammar(i.req[e][0])):MATH.doGrammar(i.req[e][0]))+" (from Blender Refund)")}break}}g.isCrafting=!1,g.updateInventory(),document.getElementById("blenderX").onclick()},document.getElementById("blenderSpeed").onclick=function(){se.ticket.amount<i||(se.ticket.amount-=i,g.addMessage("-"+MATH.addCommas(i+"")+(1===i?" Ticket":" Tickets")),se[g.isCrafting.item].amount+=g.isCrafting.amount,g.addMessage("+"+MATH.addCommas(g.isCrafting.amount+"")+" "+(g.isCrafting.amount>1?MATH.doPlural(MATH.doGrammar(g.isCrafting.item)):MATH.doGrammar(g.isCrafting.item))+" (from Blender)"),g.stats.itemsUsingTheBlender+=g.isCrafting.amount,g.isCrafting=!1,g.updateInventory(),document.getElementById("blenderX").onclick())}}if(e.roboChallenge&&e.roboChallenge.isPlaying){roboQuestSeparator.innerHTML="<div style='font-size:21px;margin-top:5px'>Robo Challenge</div><div style='font-size:13px;margin-left:12px;margin-top:5px;margin-bottom:10px'>"+(e.roboChallenge.questCompleted?"<b style='font-size:17px'>DONE!</b><br>Talk to Robo Bear!":"Round: "+e.roboChallenge.round+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Time: "+MATH.doTime(e.roboChallenge.timer))+"</div>",e.roboChallenge.questCompleted=!0;for(let t in e.roboChallenge.quest){let i=e.roboChallenge.quest[t],n=MATH.doStatGrammar(i[0])+" "+MATH.addCommas(i[1]+"")+" "+MATH.doGrammar(i[0]);roboQuestSeparator.innerHTML+="<div style='border-radius:3px;width:183px;margin-top:0px;margin-bottom:5px;background-color:rgb(255,0,0);color:black;font-family:calibri;font-size:13px;margin-left:10px;position:relative;'><div style='position:absolute;left:0px;top:0px;border-radius:2px;right:"+(183-o.min((e.stats[i[0]]-i[2])/i[1]*183,183))+"px;bottom:0px;background-color:rgb(0,250,0);'></div><div style='position:absolute;left:0px;top:0px;border-radius:2px;right:0px;bottom:0px'>"+n+"</div><u style='color:rgb(0,0,0,0)'>"+n+"</u></div>",e.stats[i[0]]-i[2]<i[1]&&(e.roboChallenge.questCompleted=!1)}}},e.updateShrineMenu=function(){let t;document.getElementById("shrineX").onclick=function(){document.getElementById("shrineMenu").style.display="none"};for(let e in k)if(se[k[e].item].amount>0){t=!0;break}if(!t)return document.getElementById("shrineX").onclick(),e.addMessage("You're supposed to donate, not get donations here lol",ae.redArr),void e.addMessage("Stop being poor(haha) and get an item that you can donate",ae.redArr);for(;se[k[e.shrineIndex].item].amount<=0;)e.shrineIndex=(e.shrineIndex+1)%k.length;document.getElementById("shrineMenu").style.display="block",document.getElementById("shrineItemName").innerHTML=MATH.doGrammar(k[e.shrineIndex].item),document.getElementById("shrineItem").innerHTML=V[k[e.shrineIndex].item].replace("SCALE","translate(0px,-30px)"),document.getElementById("shrineLeft").onclick=function(){for(e.shrineIndex=(e.shrineIndex+k.length-1)%k.length;se[k[e.shrineIndex].item].amount<=0;)e.shrineIndex=(e.shrineIndex+k.length-1)%k.length;e.updateShrineMenu()},document.getElementById("shrineRight").onclick=function(){for(e.shrineIndex=(e.shrineIndex+1)%k.length;se[k[e.shrineIndex].item].amount<=0;)e.shrineIndex=(e.shrineIndex+1)%k.length;e.updateShrineMenu()},document.getElementById("shrineAmount").value=o.min(document.getElementById("shrineAmount").value,se[k[e.shrineIndex].item].amount),document.getElementById("shrineAmount").oninput=function(){document.getElementById("shrineAmount").value=o.min(document.getElementById("shrineAmount").value,se[k[e.shrineIndex].item].amount)},document.getElementById("shrineDonate").onclick=function(){g.extraInfo.windShrineDonate=o.floor(Date.now()),document.getElementById("shrineX").onclick();let t=[["The time has stopped...","It's as if the items has changed its color...","The items follow the light of the sun...","The items feel confused and lonely inside...","The items are playing games of the wrong kind...","The items are crimsonly burned down...","The items fly away like a blue butterfly...","The items fly away like a white petal...","The items are drawn by a gently wind...","It's all on you that you couldn't hold on..."],["You can't shake the emptyness inside...","You feel so lost...","You don't know how to go on...","You let nights and days pass...","But questions race through your mind...","It's weird, it's really weird...","Are you really this calm or were you electrocuted?","Is it a sky, mountain, sea, or a kind of splendor?","You feel the wind blows...","It's precious, something you can't lose...","A cool breeze when you're burning...","You want to scream out loud...","All you feel now is regret...","You stay still admiring the stunning view...","You count on the stars to tell you...","You fall into the abyss of one-sided feelings..."],["Sometimes the sky is overcast...","You've found the light that leads the way...","A dream that comes to life...","Is it what you're meant to find?","Everything beatifully glows...","Your heart skips a beat when it's near...","Don't rush to find out, don't go anywhere...","Something rings gently in your heart...","You must be the luckiest guy on earth...","100 seasons pass by...","It's not far from your heart...","A soft breeze passes by..."]];for(let i in t)window.setTimeout((function(){e.addMessage(t[i][o.random()*t[i].length|0],[96,141,153])}),3250*i+750);"spiritPetal"===k[e.shrineIndex].item?window.setTimeout((function(){se.windyBeeEgg.amount>0?g.addMessage("Hey! Stop being greedy! You have a Windy Bee already! >:(",ae.redArr):(e.addMessage("🎉 You've tamed a Windy Bee! 🎉",[120,176.25,191.25]),e.addMessage("+1 Windy Bee Egg"),se[k[e.shrineIndex].item].amount--,e.updateInventory(),document.getElementById("shrineAmount").value>1&&e.addMessage("Hey! No soft-locking! You donated 1+ petals! >:(",ae.redArr))}),10500):(se[k[e.shrineIndex].item].amount-=document.getElementById("shrineAmount").value,e.stats[k[e.shrineIndex].item+"ToTheWindShrine"]+=document.getElementById("shrineAmount").value),e.updateInventory(),window.setTimeout((function(){if("spiritPetal"===k[e.shrineIndex].item&&se.windyBeeEgg.amount>0)return;let t,i=k[e.shrineIndex],n="spiritPetal"===k[e.shrineIndex].item?1e3:document.getElementById("shrineAmount").value;switch(i.rewardType){case"honey":t=3+.5*i.rewardAmount|0;for(let e=0;e<t;e++){let s=.5*(e-.5*(t-1)),r=4.5*-o.cos(s),a=4.5*o.sin(s);window.setTimeout((function(){le.tokens.push(new oi(60,[68+r,23.75,-21.5+a],"honey",(i.rewardAmount*i.rewardAmount*i.rewardAmount*40*(.025*n+1)-20)*MATH.random(.8,1.25)|0,!1,"Wind Shrine"))}),150*e)}let e=[];for(let t in ti)"AntField"!==t&&e.push(t);e=e[o.random()*e.length|0],le.mobs.push(new Qe(e,o.random()*ti[e].width|0,o.random()*ti[e].length|0,300,!0)),window.setTimeout((()=>g.addMessage("☁️A Wild Windy Bee has appeared!☁️",[160,160,160])),750);break;case"winds":t=3+.6*i.rewardAmount|0;let s=[];for(let e in ti)"AntField"!==e&&s.push(e);for(let e=0;e<t;e++){let r=.5*(e-.5*(t-1)),a=4.5*-o.cos(r),l=4.5*o.sin(r);if(o.random()<.2)window.setTimeout((function(){le.tokens.push(new oi(60,[68+a,23.75,-21.5+l],"honey",i.rewardAmount*i.rewardAmount*2500*(.02*n+1)*MATH.random(.8,1.25)|0,!1,"Wind Shrine"))}),150*e);else{let t=o.random()*s.length|0,n=s[t];s.splice(t,1);for(let e=0,t=2.5*o.random();e<t;e++)le.mobs.push(new Qe(n,o.random()*ti[n].width|0,o.random()*ti[n].length|0,300));n+="Winds",n=n[0].toLowerCase()+n.substring(1),window.setTimeout((function(){le.tokens.push(new ii(60,[68+a,23.75,-21.5+l],n,{},!1,o.max(o.ceil(i.rewardAmount+o.round(MATH.random(-1.25,1.25))),1)))}),150*e)}}}}),8250)}},e.updateBlenderMenu=function(){if(document.getElementById("blenderX").onclick=function(){document.getElementById("blenderMenu").style.display="none"},document.getElementById("blenderItem").style.transform="translate(70px,50px) scale(3,3)",g.isCrafting)return document.getElementById("blenderMenu").style.display="block",document.getElementById("blenderTitle").style.display="none",document.getElementById("leftBlenderButton").style.display="none",document.getElementById("rightBlenderButton").style.display="none",document.getElementById("blenderIndex").style.display="none",document.getElementById("blenderCraft").style.display="none",document.getElementById("blenderCraftAmount").style.display="none",document.getElementById("blenderReq").style.display="none",document.getElementById("blenderEnd").style.display="block",document.getElementById("blenderSpeed").style.display="block",void(document.getElementById("blenderItem").innerHTML=V[g.isCrafting.item].replace("SCALE","translate(-47px,-17px) scale(0.64,0.64)"));document.getElementById("leftBlenderButton").style.display="block",document.getElementById("rightBlenderButton").style.display="block",document.getElementById("blenderIndex").style.display="block",document.getElementById("blenderTitle").style.display="block",document.getElementById("blenderCraft").style.display="block",document.getElementById("blenderCraftAmount").style.display="block",document.getElementById("blenderReq").style.display="block",document.getElementById("blenderEnd").style.display="none",document.getElementById("blenderSpeed").style.display="none",document.getElementById("blenderMenu").style.display="block",document.getElementById("blenderTitle").innerHTML="What do you want to craft?",document.getElementById("leftBlenderButton").onclick=function(){g.blenderIndex=(g.blenderIndex+E.length-1)%E.length,e.updateBlenderMenu()},document.getElementById("rightBlenderButton").onclick=function(){g.blenderIndex=(g.blenderIndex+1)%E.length,e.updateBlenderMenu()},document.getElementById("blenderIndex").innerHTML=g.blenderIndex+1+" / "+E.length;let t=E[g.blenderIndex].item;document.getElementById("blenderName").innerHTML=MATH.doGrammar(t)+'<p style="position:fixed;font-size:13px;left:50%;top:120%;transform:translate(-50%,-50%)">'+V[t+"_description"]+"</p></div>",document.getElementById("blenderItem").innerHTML=V[t].replace("SCALE","translate(-47px,-17px) scale(0.64,0.64)");let i=function(){let i=1/0;for(let e in E[g.blenderIndex].req){let t=E[g.blenderIndex].req[e];i=o.min(i,se[t[0]].amount/t[1]|0)}document.getElementById("blenderCraftAmount").value=MATH.constrain(document.getElementById("blenderCraftAmount").value,i?1:0,i),Number(document.getElementById("blenderCraftAmount").value)?(document.getElementById("blenderCraft").style.backgroundColor="rgb(0,170,0)",document.getElementById("blenderCraft").onclick=function(){let i=Number(document.getElementById("blenderCraftAmount").value),o=i+45;g.isCrafting={time:T+o,waitTime:o,item:t,amount:i};for(let e in E){let t=E[e];if(t.item===g.isCrafting.item){for(let e in t.req)se[t.req[e][0]].amount-=t.req[e][1]*i,g.addMessage("-"+MATH.addCommas(t.req[e][1]*i+"")+" "+(i>1?MATH.doPlural(MATH.doGrammar(t.req[e][0])):MATH.doGrammar(t.req[e][0])));break}}e.updateInventory(),e.updateBlenderMenu()}):(document.getElementById("blenderCraft").style.backgroundColor="rgb(50,120,50)",document.getElementById("blenderCraft").onclick=function(){}),document.getElementById("blenderReq").innerHTML="";Number(document.getElementById("blenderCraftAmount").value);for(let e in E[g.blenderIndex].req){let t=E[g.blenderIndex].req[e],i=V[t[0]].replace("SCALE","translate(-20px,-10px) scale(0.5,0.5)");document.getElementById("blenderReq").innerHTML+="<div style='position:fixed;left:75%;top:20px;transform:translate(-50%,-50%) translate("+90*(e-.5*E[g.blenderIndex].req.length)+"px,20px) scale(1.75,1.75)'>"+i+"<p style='position:fixed;font-size:8px;left:20px;top:20px'>x"+t[1]+"</p></div>"}};i(),document.getElementById("blenderMenu").onmousemove=document.getElementById("blenderCraftAmount").oninput=i},e.addMessage=function(t,i=[30,70,255]){u.textAlign="center",u.textBaseline="middle",u.font="16px arial";let n=u.measureText(t);n=o.abs(n.actualBoundingBoxLeft)+o.abs(n.actualBoundingBoxRight);let s=1;n>232&&(s=232/n),e.messages=[{message:t,color:"rgb("+i[0]+","+i[1]+","+i[2]+",",size:16*s,life:30===i[0]&&70===i[1]&&255===i[2]?3:5},...e.messages]},e.bodyDir=[],e.updateCamera=function(){if(Qt.clickedKeys.shift&&(e.shiftLock=!e.shiftLock),e.shiftLock){MATH.xRotate(MATH.yRotate(e.viewMatrix,e.cosYaw,e.sinYaw),e.cosPitch,e.sinPitch),e.cameraDir[0]=e.viewMatrix[2],e.cameraDir[1]=e.viewMatrix[6],e.cameraDir[2]=e.viewMatrix[10],e.cameraRaycastPoint.set(g.body.position.x+e.cameraDir[0]*e.zoom,g.body.position.y+.5+e.cameraDir[1]*e.zoom,g.body.position.z+e.cameraDir[2]*e.zoom),X.raycastClosest(e.body.position,e.cameraRaycastPoint,e.cameraRaycastFilter,e.cameraRaycastResult);let t=e.cameraRaycastResult.distance<0?e.zoom:e.cameraRaycastResult.distance;e.lookDir=[-e.cameraDir[0],-e.cameraDir[2]];let i=vec2.normalize([],e.lookDir);MATH.translate(e.viewMatrix,-g.body.position.x-e.cameraDir[0]*t+i[1],-g.body.position.y-.5-e.cameraDir[1]*t,-g.body.position.z-e.cameraDir[2]*t-i[0]),MATH.mult(e.viewMatrix,e.projectionMatrix,e.viewMatrix),e.playerAngle=o.atan2(-e.cameraDir[0],-e.cameraDir[2]),quat.setAxisAngle(e.rotQuat,MATH.Y_AXIS,e.playerAngle),vec3.transformQuat(e.bodyDir,MATH.Z,e.rotQuat),mat4.fromQuat(e.modelMatrix,e.rotQuat),e.modelMatrix[12]=g.body.position.x,e.modelMatrix[13]=g.body.position.y,e.modelMatrix[14]=g.body.position.z}else{MATH.xRotate(MATH.yRotate(e.viewMatrix,e.cosYaw,e.sinYaw),e.cosPitch,e.sinPitch),e.cameraDir[0]=e.viewMatrix[2],e.cameraDir[1]=e.viewMatrix[6],e.cameraDir[2]=e.viewMatrix[10],e.cameraRaycastPoint.set(g.body.position.x+e.cameraDir[0]*e.zoom,g.body.position.y+.5+e.cameraDir[1]*e.zoom,g.body.position.z+e.cameraDir[2]*e.zoom),X.raycastClosest(e.body.position,e.cameraRaycastPoint,e.cameraRaycastFilter,e.cameraRaycastResult);let t=e.cameraRaycastResult.distance<0?e.zoom:e.cameraRaycastResult.distance;MATH.translate(e.viewMatrix,-g.body.position.x-e.cameraDir[0]*t,-g.body.position.y-.5-e.cameraDir[1]*t,-g.body.position.z-e.cameraDir[2]*t),MATH.mult(e.viewMatrix,e.projectionMatrix,e.viewMatrix),vec2.normalize(e.lookDir,[e.body.velocity.x,e.body.velocity.z]),e.playerAngle=o.atan2(e.lookDir[0],e.lookDir[1]),quat.setAxisAngle(e.lookQuat,MATH.Y_AXIS,e.playerAngle),e.currentNPC||(Qt.keys.w||Qt.keys.s||Qt.keys.a||Qt.keys.d)&&quat.slerp(e.rotQuat,e.rotQuat,e.lookQuat,6.5*f),mat4.fromQuat(e.modelMatrix,e.rotQuat),vec3.transformQuat(e.bodyDir,MATH.Z,e.rotQuat),e.modelMatrix[12]=g.body.position.x,e.modelMatrix[13]=g.body.position.y,e.modelMatrix[14]=g.body.position.z}e.toolRot+=10*f,mat4.copy(e.toolMatrix,e.modelMatrix),mat4.rotateX(e.toolMatrix,e.toolMatrix,o.max(0,(2-o.abs(e.toolRot-2))*MATH.QUATER_PI)),e.viewMatrixToChange&&(e.easeAmount+=(1-e.easeAmount)*f*5,MATH.lerpMatrix(e.viewMatrixCopy,e.viewMatrixToChange,e.easeAmount),e.viewMatrix=e.viewMatrixCopy.slice())},e.updatePhysics=function(){e.cosYaw=o.cos(e.yaw),e.sinYaw=o.sin(e.yaw),e.cosPitch=o.cos(e.pitch),e.sinPitch=o.sin(e.pitch);let t=f*e.walkSpeed,i=e.cosYaw,n=e.sinYaw;if(e.currentNPC||e.currentShop||e.removeAirFrictionUntilGrounded||e.isGliding)e.isGliding&&(i*=.7,n*=.7,Qt.keys.d&&(e.bodyDir[0]+=i,e.bodyDir[2]+=n),Qt.keys.w&&(e.bodyDir[0]+=n,e.bodyDir[2]-=i),Qt.keys.a&&(e.bodyDir[0]-=i,e.bodyDir[2]-=n),Qt.keys.s&&(e.bodyDir[0]-=n,e.bodyDir[2]+=i),vec3.normalize(e.bodyDir,e.bodyDir),e.body.velocity.x=e.bodyDir[0]*e.gliderSpeed,e.body.velocity.z=e.bodyDir[2]*e.gliderSpeed,e.body.velocity.y=e.gliderFall);else{let o=0,s=0,r=0;Qt.keys.d&&(o=i,s=n,r=1),Qt.keys.w&&(o+=n,s-=i,r++),Qt.keys.a&&(o-=i,s-=n,r++),Qt.keys.s&&(o-=n,s+=i,r++),r>1&&(o*=.707106781,s*=.707106781),e.body.velocity.x+=o*t,e.body.velocity.z+=s*t}if(e.grounded?(e.isGliding&&(e.isGliding=!1,e.updateGear(!0)),e.removeAirFrictionUntilGrounded=!1,Qt.keys[" "]&&(e.grounded=!1,e.body.velocity.y=e.jumpPower),e.body.velocity.x/=f*e.friction+1,e.body.velocity.z/=f*e.friction+1):e.removeAirFrictionUntilGrounded||(e.body.position.y+=.001,e.body.velocity.x/=f*e.friction+1,e.body.velocity.z/=f*e.friction+1),(e.body.velocity.y<5||e.removeAirFrictionUntilGrounded)&&Qt.clickedKeys[" "]&&"none"!==e.currentGear.glider&&(e.isGliding?e.isGliding=!1:(e.isGliding=!0,e.grounded=!1,e.removeAirFrictionUntilGrounded=!1),e.updateGear(!0)),(e.pollen||e.hiveBalloon.pollen)&&(e.stopConverting=!1),e.converting=e.convertingBalloon=j.hive.colliding&&!e.stopConverting,j.hive.colliding){g.radioactiveParticleTimer-=f;for(let e=0;e<g.hive.length;e++)for(let t=0;t<g.hive[e].length;t++){if(g.hive[e][t].type){let i=ae.whiteArr,o=g.hive[e][t].bee.mutation;o&&(i={maxEnergy:[100,170,255],attack:[255,20,20],gatherAmount:[100,255,100],convertAmount:ae.honey,abilityRate:[255,100,255]}[o.stat]),Kt.addSingle(g.hive[e][t].level.toString(),[g.hivePos[0]+.8*t-.25,g.hivePos[1]+.8*e-2.5,g.hivePos[2]+.1],i,-1.5)}g.hive[e][t].beequip&&Kt.addDecal([g.hivePos[0]+.8*t+0,g.hivePos[1]+.8*e-2.5,g.hivePos[2]+.2],g.hive[e][t].beequip.type,[-1,-1]),g.hive[e][t].radioactive>0&&(g.hive[e][t].radioactive-=f,Kt.addDecal([g.hivePos[0]+.8*t+.25,g.hivePos[1]+.8*e-2.5,g.hivePos[2]+.1],"radioactive",[1.3,1.3]),g.radioactiveParticleTimer<=0&&(g.radioactiveParticleTimer=1,$t.add({x:g.hivePos[0]+.8*t,y:g.hivePos[1]+.8*e-2.25,z:g.hivePos[2]+.1,vx:MATH.random(-.15,.15),vy:MATH.random(-.15,.15),vz:0,grav:0,size:250,col:[0,1,0],life:2,rotVel:MATH.random(-3,3),alpha:.5})))}}},e.updateFields=function(){g.fieldIn=null;for(let e in ti)if(ti[e].degration=o.max(ti[e].degration-.00027777777*f,0),ti[e].corruption=MATH.constrain(ti[e].corruption-.6*f,0,100),Ci(e,0|MATH.random(0,ti[e].width),0|MATH.random(0,ti[e].length),(function(t){if(t.height+=.05,t.goo=o.max(t.goo-.25,0),t.pollinationTimer-=.075,t.pollinationTimer<=0&&(t.pollinationTimer=1,t.level=o.max(t.ogLevel,t.level-1)),T-ti[e].haze.start<30&&T-ti[e].haze.delay>.07){ti[e].haze.delay=T,t.level<5?(t.level++,t.pollinationTimer=1):t.height=1;for(let i=0;i<6;i++)$t.add({x:t.x+ti[e].x,y:ti[e].y+.5,z:t.z+ti[e].z,vx:MATH.random(-1,1),vy:2*o.random(),vz:MATH.random(-1,1),grav:-3,size:100,col:[1,1,MATH.random(.6,1)],life:1,rotVel:MATH.random(-3,3),alpha:2})}else T-ti[e].haze.start>30&&(ti[e].haze={})}),!0,!0,!0),!g.fieldIn){let t=o.round(g.body.position.x-ti[e].x),i=o.round(g.body.position.z-ti[e].z);t>=0&&t<ti[e].width&&i>=0&&i<ti[e].length&&o.abs(g.body.position.y-ti[e].y)<3&&(g.fieldIn=e,g.flowerIn.x=t,g.flowerIn.z=i,0|ti[e].corruption&&g.addEffect("corruption",!1,!1,0|ti[e].corruption))}if(g.fieldIn&&(g._flowerIn.x===g.flowerIn.x&&g._flowerIn.z===g.flowerIn.z||(Hi({x:g.flowerIn.x,z:g.flowerIn.z,pattern:[[0,0]],amount:g.movementCollection,stackOffset:.4,yOffset:1,gooTrail:"gummyBoots"===e.currentGear.boots}),g._flowerIn={...g.flowerIn}),B-=f,B<=0)){B=45;let e="treat";"SunflowerField"===g.fieldIn&&o.random()<.85&&(e="sunflowerSeed"),"PineapplePatch"===g.fieldIn&&o.random()<.85&&(e="pineapple"),"CoconutField"===g.fieldIn&&o.random()<.4&&(e="coconut"),ti[g.fieldIn].generalColorComp.r>.5&&o.random()<.85&&(e="strawberry"),ti[g.fieldIn].generalColorComp.b>.5&&o.random()<.85&&(e="blueberry"),le.tokens.push(new oi(8,[ti[g.fieldIn].x+(o.random()*ti[g.fieldIn].width|0),ti[g.fieldIn].y+1,ti[g.fieldIn].z+(o.random()*ti[g.fieldIn].length|0)],e,1,!1,"Leaves"))}if(e.toolCooldown-=f,Xt.tool[e.currentGear.tool].particles&&Xt.tool[e.currentGear.tool].particles(),(Qt.keys.j||Qt.mousePressed)&&e.toolCooldown<=0){e.toolUses++;let t=[];if(e.fieldIn){let i=[],n=e.playerAngle;if(void 0===Xt.tool[e.currentGear.tool].computeDirection){for(let t in Xt.tool[e.currentGear.tool].collectPattern)i.push(Xt.tool[e.currentGear.tool].collectPattern[t].slice());if(o.abs(n)>MATH.PI_SUB_QUATER);else if(o.abs(n)<MATH.QUATER_PI)for(let e in i)i[e][1]=-i[e][1];else if(MATH.HALF_PI-n>MATH.QUATER_PI)for(let e in i)i[e]=[i[e][1],-i[e][0]];else if(MATH.HALF_PI-n<MATH.QUATER_PI)for(let e in i)i[e]=[-i[e][1],i[e][0]]}else i=Xt.tool[e.currentGear.tool].collectPattern;t=i.slice(),Hi({x:g.flowerIn.x,z:g.flowerIn.z,pattern:i,amount:Xt.tool[e.currentGear.tool].collectAmount,yOffset:1.5,stackHeight:.75,isGummyBaller:"gummyBaller"===e.currentGear.tool,multiplier:g.pollenFromTools})}Xt.tool[e.currentGear.tool].ability&&Xt.tool[e.currentGear.tool].ability(t),e.toolCooldown=Xt.tool[e.currentGear.tool].cooldown/g.collectorSpeed,e.toolRot=0}for(let t in e.sprinklers)e.sprinklers[t].update();for(let e=le.flames.length;e--;)le.flames[e].update()&&le.flames[e].die(e)},e.computeRestrictionInfo(),e}({});let Jt=["Beep boop. I'm Robo Bear!","Talk to me whenever you want to start or learn about the Robo Challenge!","What do you want to do?",[["Robo Challenge Instructions",function(){b.roboBear.dialogue.push("","The Robo Challenge is a special questing challenge. To play, you'll a need Robo Pass. At the start, you can select 2 bees to activate and use. The other inactive bees will sleep at the hive.","Then, you can select a quest to complete. You have 3 mins to complete and turn in the quest to me. If you're not happy with the quests given, you can choose to reroll them.","After selecting a quest, you can select an upgrade to help you with challenges. Upgrades can give buffs(or debuffs) to bee attack or pollen, while some can give more rewards like more bees per round.","When the challenge starts, you are given a Robo Challenge debuff, decreasing more pollen and capacity per round. Each round, you need to complete and turn in the quest before the time limit.","While you complete quests, many mobs like Mechquitos and Cogmowers may spawn. They'll try to stop you from completing the challenge. Some quests may require you to defeat them.","After completing and turning in quests, you can get Cogs and Drives, with the amount depending on how fast you complete the quest.","Cogs can be used to buy more quest rerolls and items like drives. There are 4 colors of drives, which can be used to buff your pollen and bee attack depending on which color the drives are.","The challenge ends when you run out of time. You can get many rewards based on how many rounds you completed. You can also get Cog Amulets, which give many permanent buffs to your hive."," Amulet stats are increased based on how many rounds you do. With enough drives, you can also buy a Digital Bee, which is an event bee that can be hatched and used in your hive!","That's it! Have fun!"),b.roboBear.dialogueIndex++}],["Claim a Free Robo Pass",function(){Date.now()-g.extraInfo.freeRoboPass<36e5?b.roboBear.dialogue.push("","You can claim a free Robo Pass in "+function(e){return(e>=3600?(.00027777777*e|0)+"h ":"")+(e>=60?(.0166666667*e%60|0)+"m ":"")+(0|e)%60+"s"}(3600-.001*(Date.now()-g.extraInfo.freeRoboPass)+"")+"!"):b.roboBear.dialogue.push("","Ok!",(function(){se.roboPass.amount++,g.addMessage("+1 Robo Pass"),g.updateInventory(),g.extraInfo.freeRoboPass=o.floor(Date.now())})),b.roboBear.dialogueIndex++}],["Start Robo Challenge(1 Robo Pass)",function(){se.roboPass.amount?b.roboBear.dialogue.push("",(function(){g.roboChallenge={page:"bee",beesPerRound:2,beesPicked:0,activeBees:[],scene:"bee",rerollCost:10,activeUpgrades:[],round:1},g.updateRoboUI()})):b.roboBear.dialogue.push("","You need a Robo Pass to start the challenge!"),b.roboBear.dialogueIndex++}]]];b={blackBear:{viewMatrix:[24,2,.5,MATH.HALF_PI,-.25],exclaimPos:[29,.5,.5],dialogueIndex:0,dialogue:window.dialogue_blackBear(g,se,b),mesh:new _t,meshParams:{x:.5,y:0,z:-31.5,r:1,s:1.2,texture:{face:{u:0,v:0},torso:{texture:!1,u:0,v:.5},extremities:{u:0,v:0},ears:{u:0,v:0}}}},polarBear:{portionLength:10,portionsDone:0,seed:1e5*o.random()*(o.random()<.5?-1:1)|0,repeatable:!0,viewMatrix:[-1.5,24.5,60,o.PI,-.25],exclaimPos:[-1.5,22.5,66],dialogueIndex:0,dialogue:[],mesh:new _t,meshParams:{x:1.5,y:22,z:-68,r:2,s:1.2,texture:{face:{u:1,v:0},torso:{texture:!1,u:1,v:0},extremities:{u:0,v:0},ears:{u:0,v:0}}}},roboBear:{viewMatrix:[48.5,7,40,MATH.HALF_PI,-.25],exclaimPos:[53.5,5.5,40],dialogueIndex:0,dialogue:Jt.slice(),mesh:new _t,meshParams:{x:40,y:5,z:-55,r:1,s:1.2,texture:{face:{u:3,v:0},torso:{texture:!1,u:3.1,v:.5},extremities:{u:0,v:0},ears:{u:0,v:0}}}},pandaBear:{viewMatrix:[-37,8.5,39.5,o.PI,-.25],exclaimPos:[-37,7.5,45.5],dialogueIndex:0,dialogue:window.dialogue_pandaBear(g,se,b),mesh:new _t,meshParams:{x:37,y:7,z:-47.5,r:2,s:1.2,texture:{face:{u:4,v:0},torso:{texture:!1,u:4,v:.8},extremities:{u:.3,v:.5},ears:{u:.3,v:.5}}}},spiritBear:{viewMatrix:[45,18.5,-29.5,0,-.25],exclaimPos:[45,17.5,-35],dialogueIndex:0,dialogue:window.dialogue_spiritBear(g,se,b),mesh:new _t,meshParams:{x:45,y:17,z:-37,r:0,s:1.2,texture:{face:{u:5,v:0},torso:{texture:!1,u:5,v:0},extremities:{u:0,v:.8},ears:{u:0,v:0}}}},scienceBear:{viewMatrix:[-68,25,49.5,-MATH.HALF_PI,-.25],exclaimPos:[-74,24,49.5],dialogueIndex:0,dialogue:window.dialogue_scienceBear(g,se,b),mesh:new _t,meshParams:{x:-49.5,y:23.5,z:-76,r:3,s:1.2,texture:{face:{u:0,v:1},torso:{texture:!1,u:1,v:2},extremities:{u:0,v:0},ears:{u:0,v:.1}}}},brownBear:{portionLength:7,portionsDone:0,seed:1e5*o.random()*(o.random()<.5?-1:1)|0,repeatable:!0,viewMatrix:[-65.5,9.5,9.5,-MATH.HALF_PI,-.25],exclaimPos:[-71.5,8.5,9.5],dialogueIndex:0,dialogue:[],mesh:new _t,meshParams:{x:-10,y:8,z:-73.5,r:3,s:1.2,texture:{face:{u:2,v:0},torso:{texture:!1,u:2.1,v:.7},extremities:{u:0,v:0},ears:{u:0,v:0}}}},datsocool:{viewMatrix:[-23,37.3,125.1,o.PI,-.15],exclaimPos:[-23,37.9,125],dialogueIndex:0,dialogue:window.dialogue_datsocool(g,se,b),mesh:new _t,meshParams:{x:23,y:36.9,z:-127,r:2,s:.4,texture:{face:{u:2,v:1},torso:{texture:!1,u:1,v:.7},extremities:{u:0,v:0},ears:{u:0,v:.1}}}},hbpencil:{viewMatrix:[-25,49.8,125.1,o.PI,-.15],exclaimPos:[-25,50.4,125],dialogueIndex:0,dialogue:window.dialogue_hbpencil(g,se,b),mesh:new _t,meshParams:{x:25,y:49.4,z:-127,r:2,s:.4,texture:{face:{u:2,v:1},torso:{texture:!0,u:1,v:2},extremities:{u:0,v:0},ears:{u:0,v:.1}}}},giftedBuckoBee:{portionLength:10,portionsDone:0,seed:1e5*o.random()*(o.random()<.5?-1:1)|0,repeatable:!0,viewMatrix:[-73.5,11.5,34,-MATH.HALF_PI,-.2],exclaimPos:[-75.5,10,34],dialogueIndex:0,dialogue:[],mesh:new _t,doesntHaveMesh:!0},giftedRileyBee:{portionLength:10,portionsDone:0,seed:1e5*o.random()*(o.random()<.5?-1:1)|0,repeatable:!0,viewMatrix:[46.75,16.5,22,MATH.HALF_PI,-.2],exclaimPos:[48.75,15,22],dialogueIndex:0,dialogue:[],mesh:new _t,doesntHaveMesh:!0},honeyBee:{portionLength:16,portionsDone:0,seed:0,repeatable:!0,viewMatrix:[50.5,20.5,88,MATH.HALF_PI+MATH.QUATER_PI,-.2],exclaimPos:[51.5,20,89],dialogueIndex:0,dialogue:[],mesh:new _t,doesntHaveMesh:!0},gummyBear:{portionLength:11,portionsDone:0,seed:0,repeatable:!0,viewMatrix:[0,1005,1002,0,-.1],exclaimPos:[0,1003.5,997],dialogueIndex:0,dialogue:[],mesh:new _t,meshParams:{x:0,y:1003.5,z:995,r:0,s:1.35,texture:{face:{u:3,v:1},torso:{texture:!1,u:3,v:1},extremities:{u:.1,v:.8},ears:{u:0,v:.1}}}},antChallengeSign:{portionLength:9,portionsDone:0,seed:0,repeatable:!0,viewMatrix:[-15,7.5,-43,MATH.QUATER_PI,-.3],exclaimPos:[-14,5,-44],dialogueIndex:0,dialogue:[],mesh:new _t,doesntHaveMesh:!0},motherBear:{viewMatrix:[17.5,2,35,o.PI,-.25],exclaimPos:[17.5,.5,37],dialogueIndex:0,dialogue:window.dialogue_motherBear(g,se,b),mesh:new _t,meshParams:{x:-17.5,y:0,z:-40,r:2,s:1.2,texture:{face:{u:1,v:1},torso:{texture:!1,u:1.5,v:1.7},extremities:{u:0,v:0},ears:{u:.1,v:.1}}}},dapperBear:{viewMatrix:[-101,24.5,113,-MATH.HALF_PI,-.15],exclaimPos:[-104,23.5,113],dialogueIndex:0,dialogue:window.dialogue_dapperBear(g,se,b),mesh:new _t,meshParams:{x:-113,y:22.5,z:-107,r:3,s:1.2,texture:{face:{u:6,v:0},torso:{texture:!0,u:7,v:0},extremities:{u:1.1,v:.1},ears:{u:.1,v:.1}}}}};for(let e in b)b[e].viewMatrix=Zt(...b[e].viewMatrix);let jt={robo:{items:[{amountPurchased:0,maxPurchasedAmount:1/0,name:"redDrive",slot:"item",viewMatrix:[58,11,38,MATH.HALF_PI,-.25],cost:["10 cog"],desc:"A red computer drive for use in the Robo Challenge.<br><br>Grants x1.25 red pollen, x1.25 red field capacity, and +1 red bee attack"},{amountPurchased:0,maxPurchasedAmount:1/0,name:"blueDrive",slot:"item",viewMatrix:[58,11,39.8315,MATH.HALF_PI,-.25],cost:["10 cog"],desc:"A blue computer drive for use in the Robo Challenge.<br><br>Grants x1.25 blue pollen, x1.25 blue field capacity, and +1 blue bee attack"},{amountPurchased:0,maxPurchasedAmount:1/0,name:"whiteDrive",slot:"item",viewMatrix:[58,11,41.663,MATH.HALF_PI,-.25],cost:["10 cog"],desc:"A white computer drive for use in the Robo Challenge.<br><br>Grants x1.25 white pollen, x1.25 white field capacity, and +1 white bee attack"},{amountPurchased:0,maxPurchasedAmount:1/0,name:"glitchedDrive",slot:"item",viewMatrix:[58,11,43.5,MATH.HALF_PI,-.25],cost:["20 cog"],desc:"A glitched computer drive for use in the Robo Challenge.<br><br>Grants x1.25 pollen, x1.25 capacity, and +1 attack"},{amountPurchased:0,maxPurchasedAmount:1,name:"digitalBeeEgg",slot:"item",viewMatrix:[58,12.5,34,MATH.HALF_PI,-.25],cost:["24232021 honey","5 glitchedDrive","3 redDrive","3 whiteDrive","3 blueDrive"],desc:"A virtual bee with a malfunctioning AI. It corrupts fields to duplicate ability tokens and hacks the mind of enemies!"}],currentIndex:0,message:"Explore Robo Shop"},noob:{items:[{name:"pouch",slot:"backpack",viewMatrix:[-36.5,1.3,4.5,-MATH.HALF_PI,-.3],displayRot:[0,-90,0],displayPos:[-40.5,.3,4.5],displayScale:[1.5,1.5,1.5],owned:!0},{name:"jar",slot:"backpack",viewMatrix:[-36.5,1.3,1.5,-MATH.HALF_PI,-.3],displayRot:[0,-90,0],displayPos:[-40.5,.3,1.5],displayScale:[1,1,1]},{name:"backpack",slot:"backpack",viewMatrix:[-36.5,1.3,-1.5,-MATH.HALF_PI,-.3],displayRot:[0,-90,0],displayPos:[-40.5,.3,-1.5],displayScale:[1.4,1.4,1.4]},{name:"canister",slot:"backpack",viewMatrix:[-36.5,1.3,-4.5,-MATH.HALF_PI,-.3],displayRot:[0,-90,0],displayPos:[-40.5,.3,-4.5],displayScale:[1.1,1.1,1.1]},{name:"shovel",slot:"tool",viewMatrix:[-35,2,-3,0,-.3],displayRot:[80,10,0],displayPos:[-34.5,2,-7],displayScale:[1.4,1.4,1.4],owned:!0},{name:"rake",slot:"tool",viewMatrix:[-32.5,2,-3,0,-.3],displayRot:[80,-10,0],displayPos:[-32,2,-7],displayScale:[1.4,1.4,1.4]},{name:"clippers",slot:"tool",viewMatrix:[-30,2,-3.5,0,-.3],displayRot:[-10,0,10],displayPos:[-29.5,.5,-7.5],displayScale:[1.4,1.4,1.4]},{name:"magnet",slot:"tool",viewMatrix:[7.5-34.7,2,-3.5,0,-.3],displayRot:[-10,5,-10],displayPos:[-27,.5,-7.5],displayScale:[1.3,1.3,1.3]},{name:"vacuum",slot:"tool",viewMatrix:[10-34.7,2,-3.5,0,-.3],displayRot:[-10,8,0],displayPos:[-24.5,.5,-7.5],displayScale:[1.3,1.3,1.3]},{name:"helmet",slot:"mask",viewMatrix:[-26,2.4,.5,o.PI,-.5],displayRot:[-30,188,0],displayPos:[-26,-.6,4.5],displayScale:[1.5,1.5,1.5]},{name:"beltPocket",slot:"belt",viewMatrix:[-29,1.7,4.7-4,o.PI,-.4],displayRot:[0,172,0],displayPos:[-29,.7,4.7],displayScale:[1.9,1.9,1.9]},{name:"basicBoots",slot:"boots",viewMatrix:[-32,1.7,4.7-4,o.PI,-.4],displayRot:[0,182,0],displayPos:[-32,.5,4.7],displayScale:[1.1,1.1,1.1]}],currentIndex:0,message:"Explore Noob Shop"},pro:{items:[{name:"megaJug",slot:"backpack",viewMatrix:[-42,15.65,81.5,MATH.HALF_PI,-.2],displayRot:[0,90,0],displayPos:[-38,15,81.5],displayScale:[1.15,1.15,1.15]},{name:"compressor",slot:"backpack",viewMatrix:[-42,15.65,84.25,MATH.HALF_PI,-.2],displayRot:[0,90,0],displayPos:[-38,15.25,84.25],displayScale:[1.25,1.25,1.25]},{name:"eliteBarrel",slot:"backpack",viewMatrix:[-42,15.65,87,MATH.HALF_PI,-.2],displayRot:[0,90,0],displayPos:[-38,15.05,87],displayScale:[1.5,1.5,1.5]},{name:"portOHive",slot:"backpack",viewMatrix:[-42,15.65,89.75,MATH.HALF_PI,-.2],displayRot:[0,90,0],displayPos:[-37.75,15.1,89.75],displayScale:[1.5,1.5,1.5]},{name:"superScooper",slot:"tool",viewMatrix:[-41.5,16,88.5,o.PI,-.2],displayRot:[96,0,10],displayPos:[-41.3,17,91.3],displayScale:[1.2,1.2,1.2]},{name:"pulsar",slot:"tool",viewMatrix:[-43.5,16,88.5,o.PI,-.2],displayRot:[2,0,-8],displayPos:[-43.3,15,91],displayScale:[1.35,1.35,1.35]},{name:"electroMagnet",slot:"tool",viewMatrix:[-45.5,16,88.5,o.PI,-.2],displayRot:[2,30,5],displayPos:[-45.3,15,91],displayScale:[1.35,1.35,1.35]},{name:"scissors",slot:"tool",viewMatrix:[-47.5,16,88.5,o.PI,-.2],displayRot:[2,-5,-5],displayPos:[-47.3,15,91],displayScale:[1.45,1.45,1.45]},{name:"honeyDipper",slot:"tool",viewMatrix:[-49.7,16,88.5,o.PI,-.2],displayRot:[4,0,11],displayPos:[-49.3,14.5,91],displayScale:[1.2,1.2,1.2]},{name:"braveGuard",slot:"rightGuard",viewMatrix:[-47,15.65,89,-MATH.HALF_PI,-.2],displayRot:[0,90,0],displayPos:[-50.5,14.65,88.15],displayScale:[2.5,2.5,2.5]},{name:"hastyGuard",slot:"rightGuard",viewMatrix:[-47,15.65,86.5,-MATH.HALF_PI,-.2],displayRot:[0,90,0],displayPos:[-50.5,14.65,85.65],displayScale:[2.5,2.5,2.5]},{name:"bomberGuard",slot:"leftGuard",viewMatrix:[-47,15.65,84,-MATH.HALF_PI,-.2],displayRot:[0,90,0],displayPos:[-50.5,14.65,84.75],displayScale:[2.5,2.5,2.5]},{name:"lookerGuard",slot:"leftGuard",viewMatrix:[-47,15.65,81.5,-MATH.HALF_PI,-.2],displayRot:[0,90,0],displayPos:[-50.5,14.65,82.25],displayScale:[2.5,2.5,2.5]},{name:"parachute",slot:"glider",viewMatrix:[-41.5,18.25,88.5,o.PI-MATH.QUATER_PI,.1],displayRot:[-20,0,20],displayPos:[-38.5,18.25,91.5],displayScale:[1,1,1]},{name:"propellerHat",slot:"mask",viewMatrix:[-47,20.5,90.5,-MATH.HALF_PI,-.3],displayRot:[0,70,0],displayPos:[-50.5,18.5,90.5],displayScale:[1.5,1.5,1.5]},{name:"beltBag",slot:"belt",viewMatrix:[-46.5,20.65,87.3,-MATH.HALF_PI,-.2],displayRot:[0,105,0],displayPos:[-50.5,20.15,87.5],displayScale:[2,2,2]},{name:"hikingBoots",slot:"boots",viewMatrix:[-46.5,20.7,84.3,-MATH.HALF_PI,-.2],displayRot:[0,82,0],displayPos:[-50.5,20.2,84.5],displayScale:[1.5,1.5,1.5]},{amountPurchased:0,maxPurchasedAmount:1/0,name:"paperPlanter",slot:"item",viewMatrix:[-46.5,20.5,81.3,-MATH.HALF_PI,-.2],cost:["10000 honey","1 sunflowerSeed"],desc:"A biodegradable pot that grows in about 10m. Grow and harvest to collect pollen, items, and Nectar boosts!<br><br>• Bees can speed up the growth of planters and give nectar by sipping on them while collecting pollen.<br><br>• Using Glitter on a planter will make it glister, increasing its growth rate by x1.25"}],currentIndex:0,message:"Explore Pro Shop"},top:{items:[{name:"mondoBoots",slot:"boots",viewMatrix:[-13,35.75,77.5,-MATH.HALF_PI,-.2],displayRot:[0,87,0],displayPos:[-16.7,35.25,77.5],displayScale:[1.45,1.45,1.45]},{name:"mondoBeltBag",slot:"belt",viewMatrix:[-13,35.75,75,-MATH.HALF_PI,-.2],displayRot:[0,97,0],displayPos:[-16.7,35.1,75],displayScale:[1.7,1.7,1.7]},{name:"beekeeperMask",slot:"mask",viewMatrix:[-13,35.75,72.5,-MATH.HALF_PI,-.2],displayRot:[0,83,0],displayPos:[-16.4,34.35,72.5],displayScale:[1.2,1.2,1.2]},{name:"glider",slot:"glider",viewMatrix:[-13,35.75,70,-MATH.HALF_PI,-.2],displayRot:[0,60,20],displayPos:[-16.4,34.5,70],displayScale:[.6,.6,.6]},{name:"goldenRake",slot:"tool",viewMatrix:[-13,40,77.5,-MATH.HALF_PI,-.2],displayRot:[0,104,-10],displayPos:[-17.5,39.15,77.5],displayScale:[1.35,1.35,1.35]},{name:"sparkStaff",slot:"tool",viewMatrix:[-13,40,75,-MATH.HALF_PI,-.2],displayRot:[0,34,-10],displayPos:[-16.25,39.05,74.3],displayScale:[1.35,1.35,1.35]},{name:"porcelainDipper",slot:"tool",viewMatrix:[-13,40,72.5,-MATH.HALF_PI,-.2],displayRot:[0,94,0],displayPos:[-16.5,38.75,72.4],displayScale:[1,1,1]},{name:"porcelainOHive",slot:"backpack",viewMatrix:[-13,40,70,-MATH.HALF_PI,-.2],displayRot:[-8,-85,4],displayPos:[-16.75,39.6,70],displayScale:[1.25,1.25,1.25]},{amountPurchased:0,maxPurchasedAmount:25,name:"hiveSlot",slot:"item",viewMatrix:[-10,37,74,MATH.HALF_PI,0],cost:[e=>o.floor(1e6*o.pow(1.375,e))+" honey"],desc:"Increases the capacity of your hive, allowing you to hatch an additional bee!"}],currentIndex:0,message:"Explore Top Shop"},blueHQ:{items:[{name:"bubbleWand",slot:"tool",viewMatrix:[-63.5,1.8,37,o.PI,-.3],displayRot:[0,-20,10],displayPos:[-63,.3,40.5],displayScale:[.9,.9,.9]},{name:"blueGuard",slot:"rightGuard",viewMatrix:[-66.25,1.3,37.5,o.PI,-.3],displayPos:[-65.75,.3,40.5],displayScale:[1.9,1.9,1.9]},{name:"eliteBlueGuard",slot:"rightGuard",viewMatrix:[-69,1.3,37.5,o.PI,-.3],displayPos:[-68.5,.3,40.5],displayScale:[1.9,1.9,1.9]},{name:"buckoGuard",slot:"rightGuard",viewMatrix:[-71.75,1.3,37.5,o.PI,-.3],displayPos:[-71.25,.3,40.5],displayScale:[1.9,1.9,1.9]},{amountPurchased:0,maxPurchasedAmount:1,name:"blueClayPlanter",slot:"item",viewMatrix:[-63.5,6.8,37,o.PI,-.3],cost:["10000000 honey","1 magicBean","10 blueExtract","10 softWax"],desc:"Alone, grows in about 19m. Grants bonus blueberries, blue extracts, micro-converters, and honeysuckles.<br><br>• Grows x1.25 faster in fields with blue flowers.<br><br>• Grants x1.25 Comforting and Refreshing nectar.<br><br>• Blue bees are 1.25x more likely to sip from this planter, but red bees ignore it."},{name:"bluePortOHive",slot:"backpack",viewMatrix:[-68,6.5,37,o.PI,-.3],displayPos:[-68,5,40],displayRot:[0,185,2],displayScale:[1.4,1.4,1.4]},{name:"bubbleMask",slot:"mask",viewMatrix:[-72.5,6.5,38.25,o.PI,-.3],displayPos:[-72.5,4.75,41.9],displayRot:[10,180,0],displayScale:[1.4,1.4,1.4]},{name:"tidePopper",slot:"tool",viewMatrix:[-77.4,4,35,o.PI,-.1],displayPos:[-77,2,40],displayScale:[1.5,1.5,1.5]}],currentIndex:0,message:"Explore Blue HQ Shop"},redHQ:{items:[{name:"redGuard",slot:"leftGuard",viewMatrix:[43.7,4.75,25.5,o.PI,-.3],displayPos:[43,3.75,28],displayScale:[1.9,1.9,1.9]},{name:"eliteRedGuard",slot:"leftGuard",viewMatrix:[43.7-2.15,4.75,25.5,o.PI,-.3],displayPos:[40.85,3.75,28],displayScale:[1.9,1.9,1.9]},{name:"rileyGuard",slot:"leftGuard",viewMatrix:[43.7-4.3,4.75,25.5,o.PI,-.3],displayPos:[38.7,3.75,28],displayScale:[1.9,1.9,1.9]},{name:"scythe",slot:"tool",viewMatrix:[37.25,4.75,25.5,o.PI,-.3],displayPos:[38.05,3.75,28],displayRot:[5,-70,10]},{name:"redPortOHive",slot:"backpack",viewMatrix:[43.5,9,25.5,o.PI,-.3],displayPos:[43.5,8,28],displayRot:[0,175,-2],displayScale:[1.4,1.4,1.4]},{name:"fireMask",slot:"mask",viewMatrix:[40.5,9,26,o.PI,-.3],displayPos:[40.5,7.75,29.25],displayRot:[10,180,0],displayScale:[1.4,1.4,1.4]},{amountPurchased:0,maxPurchasedAmount:1,name:"redClayPlanter",slot:"item",viewMatrix:[37.5,9,24.75,o.PI,-.3],cost:["10000000 honey","1 magicBean","10 redExtract","10 softWax"],desc:"Alone, grows in about 19m. Grants bonus strawberries, red extracts, and waxes.<br><br>• Grows x1.25 faster in fields with red flowers.<br><br>• Grants x1.25 Invigorating and Satisfying nectar.<br><br>• Red bees are 1.25x more likely to sip from this planter, but blue bees ignore it."},{name:"darkScythe",slot:"tool",viewMatrix:[46,7,22,MATH.HALF_PI,-.2],displayPos:[50,6,23.5],displayRot:[30,180,15]}],currentIndex:0,message:"Explore Red HQ Shop"},ace:{items:[{name:"honeyMask",slot:"mask",viewMatrix:[71.5,16.5,58.5,MATH.HALF_PI,.15],displayPos:[74.5,16.5,58.5],displayRot:[0,-90,10],displayScale:[1.4,1.4,1.4]},{name:"cobaltGuard",slot:"rightGuard",viewMatrix:[72,15.5,60.1,MATH.HALF_PI,0],displayPos:[74.25,15.5,59.5],displayRot:[0,90,0],displayScale:[1.6,1.6,1.6]},{name:"honeycombBelt",slot:"belt",viewMatrix:[72.25,14,58.5,MATH.HALF_PI,0],displayPos:[74.75,14,58.5],displayRot:[0,-90,0],displayScale:[2,2,2]},{name:"crimsonGuard",slot:"leftGuard",viewMatrix:[71.75,15.5,56.9,MATH.HALF_PI,0],displayPos:[74.25,15.5,57.5],displayRot:[0,90,0],displayScale:[1.6,1.6,1.6]}],currentIndex:0,message:"Explore Ace Shop"},petal:{items:[{name:"petalWand",slot:"tool",viewMatrix:[66,10.75,-39,0,0],displayPos:[65.5,10,-43.6],displayRot:[30,50,-10],displayScale:[1,1,1]},{amountPurchased:0,maxPurchasedAmount:1,name:"petalPlanter",slot:"item",viewMatrix:[67.5,13.5,-39,0,0],cost:["5000000000000 honey","75 magicBean","75 glitter","150 softWax","25 swirledWax"],desc:"Alone, grows in about 33m. Grants bonus jellies, glitter, field dice, and white items.<br><br>• Grows x1.5 faster in fields with white flowers.<br><br>• Grants x1.5 Comforting and Satisfying nectar.<br><br>• White bees are 1.5x more likely to sip from this planter."},{name:"petalBelt",slot:"belt",viewMatrix:[69,10.75,-39,0,0],displayPos:[69.15,10.7,-44],displayRot:[0,0,0],displayScale:[3,3,3]}],currentIndex:0,message:"Explore Petal Shop"},planter:{items:[{amountPurchased:0,maxPurchasedAmount:1,name:"plasticPlanter",slot:"item",viewMatrix:[-98,23,108.5,0,0],cost:["750000 honey","1 magicBean","1 softWax"],desc:"A reusable planter that grows in about 17m. Grow and harvest to collect random items and Nectar boosts!<br><br>• Bees can speed up the growth of planters and give nectar by sipping on them while collecting pollen.<br><br>• Using Glitter on a planter will make it glister, increasing its growth rate by x1.25"},{amountPurchased:0,maxPurchasedAmount:1,name:"plentyPlanter",slot:"item",viewMatrix:[-107,23,108.5,0,0],cost:["100000000000000 honey","100 magicBean","25 swirledWax","25 causticWax","10 turpentine"],desc:"Alone, grows in about 60m. Grants many bonus items such as fruits, crafting ingredients, and waxes.<br><br>• Grows x1.5 faster in the Coconut, Stump, Pepper, and Mountain Top fields.<br><br>• Grants x1.5 nectar.<br><br>• Gifted bees are 1.5x more likely to sip from this planter."},{amountPurchased:0,maxPurchasedAmount:1,name:"pesticidePlanter",slot:"item",viewMatrix:[-104.75,23,108.5,0,0],cost:["750000000 honey","10 magicBean","10 neonberry","1 causticWax","5 hardWax"],desc:"Alone, grows in about 45m. Grants bonus neonberries and bitterberries.<br><br>• Grows x1.35 faster in the 5 bee zone.<br><br>• Grants x1.35 Satisfying and Motivating nectar.<br><br>• Bees with mutations are 1.3x more likely to sip from this planter."},{amountPurchased:0,maxPurchasedAmount:1,name:"tackyPlanter",slot:"item",viewMatrix:[-102.5,23,108.5,0,0],cost:["50000000 honey","5 magicBean","1 purplePotion","1 hardWax","10 softWax"],desc:"Alone, grows in about 39m. Grants bonus sunflower seeds and field dice.<br><br>• Grows x1.25 faster in the Sunflower, Dandelion, Mushroom, Blue Flower, and Coconut fields.<br><br>• Grants x1.3 Satisfying and Comforting nectar."},{amountPurchased:0,maxPurchasedAmount:1,name:"candyPlanter",slot:"item",viewMatrix:[-100.25,23,108.5,0,0],cost:["5000000 honey","3 magicBean","30 gumdrops","3 softWax"],desc:"Alone, grows in about 25m. Grants bonus gumdrops, glue, and jelly beans!<br><br>• Grows x1.25 faster in the Strawberry, Pineapple, and Coconut fields.<br><br>• Grants x1.2 Motivating nectar."}],currentIndex:0,message:"Explore Planter Shop"},beequip:{items:[{amountPurchased:0,maxPurchasedAmount:1/0,name:"pencil",slot:"beequip",viewMatrix:[-97.75,23,119,o.PI,0],cost:["50000 honey","2 ticket","1 royalJelly"],desc:"A special pencil beequip only for the smartest of bees(and people).<br><br>Stats and potential of each beequip are randomly generated."},{amountPurchased:0,maxPurchasedAmount:1/0,name:"bobertPlushie",slot:"beequip",viewMatrix:[-99.65,23,119,o.PI,0],cost:["100000 honey","3 ticket","50 treat"],desc:"A slightly deformed plushie beequip. It loves to terrorize bees and you.<br><br>Stats and potential of each beequip are randomly generated."},{amountPurchased:0,maxPurchasedAmount:1/0,name:"boombox",slot:"beequip",viewMatrix:[-101.55,23,119,o.PI,0],cost:["750000 honey","5 ticket","1 microConverter"],desc:"Energize and motivate your bees with upbeat musical hits by Bee Gees or Beethoven from!<br><br>Stats and potential of each beequip are randomly generated."},{amountPurchased:0,maxPurchasedAmount:1/0,name:"candycane",slot:"beequip",viewMatrix:[-103.45,23,119,o.PI,0],cost:["1500000 honey","7 ticket","1 stinger","1 redExtract"],desc:"This stick of candy causes dramatic bee hyperactivity, sticks to pollen, and turns into a sharp, deadly weapon.<br><br>Stats and potential of each beequip are randomly generated."},{amountPurchased:0,maxPurchasedAmount:1/0,name:"books",slot:"beequip",viewMatrix:[-105.35,23,119,o.PI,0],cost:["7500000 honey","9 ticket","2 whirligig"],desc:"A set of books for bees to read. Improves the performance of bees.<br><br>Stats and potential of each beequip are randomly generated."},{amountPurchased:0,maxPurchasedAmount:1/0,name:"coffeeMug",slot:"beequip",viewMatrix:[-107.25,23,119,o.PI,0],cost:["15000000 honey","10 ticket","10 honeysuckle"],desc:"Bees drink *whatever* is in this coffee mug for a boost of energy!<br><br>Stats and potential of each beequip are randomly generated."},{amountPurchased:0,maxPurchasedAmount:1/0,name:"comfortingVial",slot:"item",viewMatrix:[-98,26,119,o.PI,0],cost:[e=>o.floor(o.min(1e6*o.pow(1.125,e),1e12))+" honey","5 ticket","5 moonCharm"],desc:"Instantly grants 1h of Comforting nectar."},{amountPurchased:0,maxPurchasedAmount:1/0,name:"invigoratingVial",slot:"item",viewMatrix:[-100.25,26,119,o.PI,0],cost:[e=>o.floor(o.min(1e6*o.pow(1.125,e),1e12))+" honey","5 ticket","1 redExtract"],desc:"Instantly grants 1h of Invigoration nectar."},{amountPurchased:0,maxPurchasedAmount:1/0,name:"motivatingVial",slot:"item",viewMatrix:[-102.5,26,119,o.PI,0],cost:[e=>o.floor(o.min(1e6*o.pow(1.125,e),1e12))+" honey","5 ticket","14 sunflowerSeed"],desc:"Instantly grants 1h of Motivating nectar."},{amountPurchased:0,maxPurchasedAmount:1/0,name:"refreshingVial",slot:"item",viewMatrix:[-104.75,26,119,o.PI,0],cost:[e=>o.floor(o.min(1e6*o.pow(1.125,e),1e12))+" honey","5 ticket","1 enzymes"],desc:"Instantly grants 1h of Refreshing nectar."},{amountPurchased:0,maxPurchasedAmount:1/0,name:"satisfyingVial",slot:"item",viewMatrix:[-107,26,119,o.PI,0],cost:[e=>o.floor(o.min(1e6*o.pow(1.125,e),1e12))+" honey","5 ticket","7 gumdrops"],desc:"Instantly grants 1h of Satisfying nectar."}],currentIndex:0,message:"Explore Beequip Shop"},treat:{items:[{amountPurchased:0,maxPurchasedAmount:1/0,name:"treat",slot:"item",viewMatrix:[23.5,1,34,o.PI,.04],cost:[(e,t=1)=>o.floor(o.min(50*e+100,1e4)*t)+" honey"],desc:"Can be fed to a bee to increase its bond by 10!"}],currentIndex:0,message:"Explore Treat Shop",currentIncrement:0,increments:[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9]},royalJelly:{items:[{amountPurchased:0,maxPurchasedAmount:1/0,name:"royalJelly",slot:"item",viewMatrix:[36.5,12,45.75,-MATH.HALF_PI-MATH.QUATER_PI,.02],cost:[(e,t=1)=>o.floor(o.min(2500*e+25e3,1e6)*t)+" honey"],desc:"Can be fed to a bee to transform it into a different type!"}],currentIndex:0,message:"Explore Royal Jelly Shop",currentIncrement:0,increments:[1,10,100,1e3,1e4,1e5]},basicEgg:{items:[{amountPurchased:0,maxPurchasedAmount:1/0,name:"basicEgg",slot:"item",viewMatrix:[5.5,1,9,MATH.HALF_PI+MATH.QUATER_PI,.02],cost:[(e,t=1)=>(0|o.min(500*o.pow(1.35,e)*t,1e7))+" honey"],desc:"Can be used to hatch a Basic Bee!"}],currentIndex:0,message:"Explore Basic Egg Shop"},stinger:{items:[{amountPurchased:0,maxPurchasedAmount:1/0,name:"stinger",slot:"item",viewMatrix:[1.8-25.4,8.5,-40,o.PI+.33,.02],cost:[(e,t=1)=>5*t+" ticket"],desc:"Can be used to temporarily increase bee attack by x1.5 for 45s!"}],currentIndex:0,message:"Explore Stinger Shop",currentIncrement:0,increments:[1,10,100]},magicBean:{items:[{amountPurchased:0,maxPurchasedAmount:1/0,name:"magicBean",slot:"item",viewMatrix:[-84.5,22,66,0,.02],cost:[(e,t=1)=>10*t+" ticket"],desc:"Can be used to summon a sprout in a field. Collect pollen to grow the sprout, and collect loot when it fully grows!"}],currentIndex:0,message:"Explore Magic Bean Shop",currentIncrement:0,increments:[1,10]},ticket:{items:[{amountPurchased:0,maxPurchasedAmount:1/0,name:"ticket",slot:"item",viewMatrix:[-16.25,35,83.75,MATH.HALF_PI+MATH.QUATER_PI,.02],cost:[(e,t=1)=>o.min(o.floor(5e3*o.pow(1.003,e)*t),1e12)+" honey"],desc:"Can be used to purchase special items and activate machines!"}],currentIndex:0,message:"Explore Ticket Shop",currentIncrement:0,increments:[1,10,100,500]},gumdrops:{items:[{amountPurchased:0,maxPurchasedAmount:1/0,name:"gumdrops",slot:"item",viewMatrix:[-23,4.5,46,-MATH.HALF_PI,.02],cost:[(e,t=3)=>t/3+" ticket"],desc:"Can be used to cover fields in goo, granting bonus honey!"}],currentIndex:0,message:"Explore Gumdrop Shop",currentIncrement:0,increments:[3,30,300]},diamond:{items:[{name:"diamondMask",slot:"mask",viewMatrix:[29,31,88,o.PI,0],displayPos:[29,31,92.5],displayRot:[20,180,0],displayScale:[1.5,1.5,1.5]}],currentIndex:0,message:"View Diamond Mask"},demon:{items:[{name:"demonMask",slot:"mask",viewMatrix:[-57,2.5,-11.5,-MATH.HALF_PI,0],displayPos:[-61.5,2.5,-11.5],displayRot:[0,90,-20],displayScale:[1.5,1.5,1.5]}],currentIndex:0,message:"View Demon Mask"},ticketTent:{items:[{amountPurchased:0,maxPurchasedAmount:1/0,name:"goldEgg",slot:"item",viewMatrix:[30.25,4,-17.25,-MATH.HALF_PI,-.2],cost:["25 ticket"],desc:"Can be used to hatch an epic, legendary, or mythic bee!<br><br>The bee has a small chance to be gifted!"},{amountPurchased:0,maxPurchasedAmount:1/0,name:"starTreat",slot:"item",viewMatrix:[30.25,4,-19.25,-MATH.HALF_PI,-.2],cost:["500 ticket"],desc:"Can be fed to any bee to make it gifted!<br><br>Its best to use Star Treats on event bees as it's the only way to make them gifted."},{amountPurchased:0,maxPurchasedAmount:1,name:"puppyBeeEgg",slot:"item",viewMatrix:[30.25,4,-21.25,-MATH.HALF_PI,-.2],cost:["250 ticket"],desc:"This bee loves to play! It helps with bee bonding and will sometimes reward you treats by playing fetch!<br><br>(Honestly even with the buff in this version you still shouldn't buy it, it's rlly bad)"},{amountPurchased:0,maxPurchasedAmount:1,name:"photonBeeEgg",slot:"item",viewMatrix:[30.25,4,-23.25,-MATH.HALF_PI,-.2],cost:["250 ticket"],desc:"An entity made of pure light! Fires beams from the sky to collect massive amounts of pollen at once."},{amountPurchased:0,maxPurchasedAmount:1,name:"tabbyBeeEgg",slot:"item",viewMatrix:[31.75,4,-23.25,MATH.HALF_PI,-.2],cost:["250 ticket"],desc:"An affectionate bee who becomes a harder worker as it warms up to you."},{amountPurchased:0,maxPurchasedAmount:1,name:"festiveBeeEgg",slot:"item",viewMatrix:[31.75,4,-21.25,MATH.HALF_PI,-.2],cost:["250 ticket"],desc:"A generous bee who spreads the joy of Beesmas by occasionally hands out random gifts to you!"},{amountPurchased:0,maxPurchasedAmount:1,name:"crimsonBeeEgg",slot:"item",viewMatrix:[31.75,4,-19.25,MATH.HALF_PI,-.2],cost:["125 ticket"],desc:"Defender of all things red! Excels in hives with many red bees. Has enhanced abilities when working with Cobalt Bee."},{amountPurchased:0,maxPurchasedAmount:1,name:"cobaltBeeEgg",slot:"item",viewMatrix:[31.75,4,-17.25,MATH.HALF_PI,-.2],cost:["125 ticket"],desc:"Defender of all things blue! Excels in hives with many blue bees. Has enhanced abilities when working with Crimson Bee."}],currentIndex:0,message:"Explore Ticket Tent"},lair:{items:[{name:"gummyMask",slot:"mask",viewMatrix:[-1.5,1003.5,1009,-.35,0],displayPos:[-2.75,1003.2,1005.5],displayRot:[10,20,0],displayScale:[1.5,1.5,1.5]},{name:"gummyBoots",slot:"boots",viewMatrix:[1.5,1003.5,1009,.35,0],displayPos:[2.85,1004.3,1005.5],displayRot:[10,-20,0],displayScale:[1.5,1.5,1.5]},{name:"gummyBaller",slot:"tool",viewMatrix:[0,1006,1009,0,.2],displayPos:[0,1005.8,1005],displayRot:[20,0,-30],displayScale:[.9,.9,.9]}],currentIndex:0,message:"Explore Gummy Lair Shop"},coconutCave:{items:[{name:"coconutCanister",slot:"backpack",viewMatrix:[14.75,16.3,-34.3,-MATH.HALF_PI,-.3],displayPos:[10.75,14.9,-34.5],displayRot:[0,-100,0],displayScale:[1.2,1.2,1.2]},{name:"coconutClogs",slot:"boots",viewMatrix:[14.75,16.2,-38.5,-MATH.HALF_PI,-.3],displayPos:[10.75,14.9,-38.5],displayRot:[0,82,0],displayScale:[1.45,1.45,1.45]}],currentIndex:0,message:"Explore Coconut Cave Shop"},sprinkler:{items:[{name:"basicSprinkler",slot:"sprinkler",viewMatrix:[52,15.5,63.075,-MATH.HALF_PI,-.3],displayPos:[48,14,63.075],displayRot:[0,0,0],displayScale:[1.2,1.2,1.2]},{name:"silverSoakers",slot:"sprinkler",viewMatrix:[52,15.5,61.075,-MATH.HALF_PI,-.3],displayPos:[48,14,61.075],displayRot:[0,0,0],displayScale:[1.2,1.2,1.2]},{name:"goldenGushers",slot:"sprinkler",viewMatrix:[52,15.5,59.075,-MATH.HALF_PI,-.3],displayPos:[48,14,59.075],displayRot:[0,0,0],displayScale:[1.2,1.2,1.2]},{name:"diamondDiluters",slot:"sprinkler",viewMatrix:[52,15.5,57.075,-MATH.HALF_PI,-.3],displayPos:[48,14,57.075],displayRot:[0,0,0],displayScale:[1.2,1.2,1.2]},{name:"superSaturator",slot:"sprinkler",viewMatrix:[52,15.5,55.075,-MATH.HALF_PI,-.3],displayPos:[48,14,55.075],displayRot:[0,90,0],displayScale:[1.2,1.2,1.2]}],currentIndex:0,message:"Explore Sprinkler Shop"}};Vt.setMeshFromFunction((function(e,t,i,o,n,s,r){for(let t in jt){let s=jt[t].items;for(let t in s){let a=s[t];"item"!==a.slot&&"beequip"!==a.slot&&(mat4.fromRotationTranslationScale(Vt.matrix,quat.fromEuler([],...a.displayRot||[0,0,0]),a.displayPos,a.displayScale||[1,1,1]),"sprinkler"===a.slot?Xt[a.slot][a.name].shopMesh(0,0,0,e,i,o,r,n,!1):Xt[a.slot][a.name].mesh(e,i,o,r,n,!1))}}})),Vt.setBuffers();for(let e in jt)for(let t in jt[e].items)jt[e].items[t].viewMatrix=Zt(...jt[e].items[t].viewMatrix);let Qt=function(e){return e.mouseX=0,e.mouseY=0,e.mousePressed=!1,e.mouseClicked=!1,e.keys={},e.clickedKeys={},c.onmousedown=function(t){if(e.mousePressed=!0,g.itemDragging||g.beequipDragging){if(g.canUseItem||g.itemDragging&&!se[g.itemDragging].canUseOnSlot)if(g.beequipDragging)if(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip&&g.currentGear.beequips[g.beequipLookingAt].id===g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id)g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=void 0,g.currentGear.beequips[g.beequipLookingAt].bee=void 0,g.updateBeequipPage(),g.beequipDragging=!1,g.updateHive();else{if(g.currentGear.beequips[g.beequipLookingAt].bee)for(let e in g.currentGear.beequips)if(g.currentGear.beequips[e].id===g.hive[g.currentGear.beequips[g.beequipLookingAt].bee[1]][g.currentGear.beequips[g.beequipLookingAt].bee[0]].beequip.id){g.hive[g.currentGear.beequips[g.beequipLookingAt].bee[1]][g.currentGear.beequips[g.beequipLookingAt].bee[0]].beequip=void 0,g.currentGear.beequips[e].bee=void 0;break}if(g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip)for(let e in g.currentGear.beequips)if(g.currentGear.beequips[e].id===g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip.id){g.currentGear.beequips[e].bee=void 0;break}g.hive[g.hiveIndex[1]][g.hiveIndex[0]].beequip=g.beequipDragging,g.currentGear.beequips[g.beequipLookingAt].bee=g.hiveIndex,g.updateBeequipPage(),g.beequipDragging=!1,g.updateHive()}else{if(T-se[g.itemDragging].cooldown>se[g.itemDragging].maxCooldown){let e=se[g.itemDragging].amount;se[g.itemDragging].use(),e>se[g.itemDragging].amount&&!se[g.itemDragging].canUseOnSlot&&(se[g.itemDragging].cooldown=T,g.addMessage("-1 "+MATH.doGrammar(g.itemDragging)),["treat","atomicTreat","starTreat","pineapple","sunflowerSeed","blueberry","strawberry","moonCharm","bitterberry","neonberry"].indexOf(g.itemDragging)<0&&g.stats[g.itemDragging]++),g.updateInventory()}else g.addMessage("Item is on a cooldown of "+MATH.doTime(se[g.itemDragging].maxCooldown-(T-se[g.itemDragging].cooldown))+"!",ae.redArr);g.itemDragging=!1}}else g.pointerLocked||c.requestPointerLock()},c.onmouseup=function(t){e.mousePressed=!1,e.mouseClicked=!0},c.onmousemove=function(t){e.mouseX=t.x,e.mouseY=t.y,g.pointerLocked&&(g.yaw+=t.movementX*g.sensitivity,g.pitch=MATH.constrain(g.pitch-t.movementY*g.sensitivity,-MATH.HALF_PI,MATH.HALF_PI))},document.onkeydown=function(t){e.keys[t.key.toLowerCase()]=!0,e.clickedKeys[t.key.toLowerCase()]=!0,"i"===t.key&&H.onclick(),"q"===t.key&&D.onclick(),g.currentMachineTrigger&&"e"===t.key&&g.currentMachineTrigger.func(g)},document.onkeyup=function(t){if(e.keys[t.key.toLowerCase()]=!1,"123456".indexOf(t.key)>-1){let e=Number(t.key)-1;if(G[e].itemType)if(T-se[G[e].itemType].cooldown>se[G[e].itemType].maxCooldown){if(se[G[e].itemType].amount>0){let t=se[G[e].itemType].amount;se[G[e].itemType].use(),se[G[e].itemType].amount!==t&&(se[G[e].itemType].cooldown=T,g.stats[G[e].itemType]++,g.updateInventory())}}else g.addMessage("Item is on a cooldown of "+MATH.doTime(se[G[e].itemType].maxCooldown-(T-se[G[e].itemType].cooldown))+"!",ae.redArr)}},c.oncontextmenu=function(e){e.preventDefault()},c.onwheel=function(e){e.preventDefault(),g.zoom=MATH.constrain(g.zoom+.01*e.deltaY,0,30)},e.update=function(){e.clickedKeys={},e.mouseClicked=!1},e}({}),Kt=function(e){e.data=[],e.decals=[],e.decalUV={radioactive:[0,0],rect:[.125,0],flower:[.25,0],glow:[.375,0],candycane:[.5,0],boombox:[.625,0],pencil:[.75,0],bobertPlushie:[.125,.625],coffeeMug:[.25,.625],books:[.375,.625],exclaim:[.875,0],lightrays:[0,.125],circle:[.125,.125],arc:[.25,.125],smiley:[.375,.125]},e.instanceData=[],e.decal_instanceData=[],e.instanceBuffer=m.createBuffer(),e.vertBuffer=m.createBuffer(),e.indexBuffer=m.createBuffer(),e.decal_vertBuffer=m.createBuffer(),e.decal_indexBuffer=m.createBuffer();let t=.09,i=.105,n=.002,l=-.8955,d=[-t,-i,n,l,t,-i,t+n,l,t,i,t+n,-.9851,-t,i,n,-.9851],h=[0,1,2,2,3,0],c=2/1024;m.bindBuffer(m.ARRAY_BUFFER,e.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(d),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,e.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(h),m.STATIC_DRAW),e.indexAmount=h.length,d=[-.5,-.5,.125-c,0+c,.5,-.5,0+c,0+c,.5,.5,0+c,.125-c,-.5,.5,.125-c,.125-c],m.bindBuffer(m.ARRAY_BUFFER,e.decal_vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(d),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,e.decal_indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(h),m.STATIC_DRAW),e.decal_indexAmount=h.length;let p={0:[0,0],1:[.1,0],2:[.2,0],3:[.3,0],4:[.4,0],5:[.5,0],6:[.59,0],7:[.7,0],8:[.79,0],9:[.89,0],"+":[.002,.13],"-":[.002,.13],"⇆":[.1,.14],",":[.2075,.14],"/":[.3,.13],".":[.2075,.14],"-":[.4,.13],":":[.5,.13],"(":[.6,.13],")":[.68,.13],"%":[.79,.12],".":[.885,.13],a:[0,.25],b:[.1,.25],c:[.2,.25],d:[.3,.25],e:[.4,.25],f:[.5,.25],g:[.6,.26],h:[.69,.25],i:[.81,.25],j:[.9,.25],k:[.025,.375],l:[.11,.375],m:[.2,.375],n:[.31,.375],o:[.4,.375],p:[.5,.375],q:[.6,.375],r:[.7,.375],s:[.8,.375],t:[.9,.375],u:[.02,.5],v:[.108,.5],w:[.2,.5],x:[.305,.5],y:[.4,.5],z:[.5,.5],A:[0,.625],B:[.1,.625],C:[.2,.625],D:[.3,.625],E:[.4,.625],F:[.5,.625],G:[.6,.625],H:[.7,.625],I:[.8,.625],J:[.9,.625],K:[.01,.75],L:[.1,.75],M:[.2,.75],N:[.3,.75],O:[.4,.75],P:[.5,.75],Q:[.6,.75],R:[.7,.75],S:[.8,.75],T:[.9,.75],U:[.02,.875],V:[.1,.875],W:[.2,.875],X:[.3,.875],Y:[.4,.875],Z:[.5,.875]," ":[.7,.875]};return e.add=function(t,i,o,n,s="+",r=1,a=!0){let l,d;t=t.toString(),a?g.extraInfo.enablePollenAbv?(d=(.25*t.length+1.5)*r,l=s+MATH.abvNumber(t)):(l=s+MATH.addCommas(t),d=(.2*l.length+1.5)*r):(l=t.toString(),d=r);for(let t=0;t<l.length;t++)e.data.push({critType:n,life:1,uv:p[l[t]],pos:i,col:[o[0]*MATH.INV_255,o[1]*MATH.INV_255,o[2]*MATH.INV_255],offset:[.135*(t-.5*(l.length-1)),0],size:d})},e.addSingle=function(t,i,o,n=1,s=!0,r=!0,a=0,l=0){let d=t;s&&(d=t.split("/"),d=d.length>1?MATH.abvNumber(d[0])+"/"+MATH.abvNumber(d[1]):r?MATH.addCommas(d[0]):d[0]),ai=n>0?(.2*d.length+1.5)*n:-n;for(let t=0;t<d.length;t++)e.instanceData.push(i[0],i[1],i[2],(t-.5*(d.length-1))*(s?.145:.135)+a,l,p[d[t]][0],p[d[t]][1],o[0]*MATH.INV_255,o[1]*MATH.INV_255,o[2]*MATH.INV_255,ai,ai,0)},e.ctxData=[],e.addCTX=function(t,i,o,n){e.ctxData.push({message:t,pos:i,color:"rgb("+o[0]+","+o[1]+","+o[2]+")",scale:n})},e.addDecal=function(t,i,o,n=0){e.decal_instanceData.push(...t,0,0,...e.decalUV[i],1,1,1,...o,n)},e.addDecalRaw=function(){e.decal_instanceData.push(...arguments)},e.render=function(t,i){m.useProgram(It),m.uniformMatrix4fv(St.text_viewMatrix,m.FALSE,g.viewMatrix),m.bindTexture(m.TEXTURE_2D,Rt.decals),m.bindBuffer(m.ARRAY_BUFFER,e.decal_vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,e.decal_indexBuffer),m.vertexAttribPointer(St.text_vertPos,2,m.FLOAT,m.FALSE,16,0),m.vertexAttribPointer(St.text_vertUV,2,m.FLOAT,m.FALSE,16,8),m.bindBuffer(m.ARRAY_BUFFER,e.instanceBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(e.decal_instanceData),m.DYNAMIC_DRAW),m.vertexAttribPointer(St.text_instanceOrigin,3,m.FLOAT,m.FALSE,52,0),m.vertexAttribDivisor(St.text_instanceOrigin,1),m.vertexAttribPointer(St.text_instanceOffset,2,m.FLOAT,m.FALSE,52,12),m.vertexAttribDivisor(St.text_instanceOffset,1),m.vertexAttribPointer(St.text_instanceUV,2,m.FLOAT,m.FALSE,52,20),m.vertexAttribDivisor(St.text_instanceUV,1),m.vertexAttribPointer(St.text_instanceColor,3,m.FLOAT,m.FALSE,52,28),m.vertexAttribDivisor(St.text_instanceColor,1),m.vertexAttribPointer(St.text_instanceInfo,3,m.FLOAT,m.FALSE,52,40),m.vertexAttribDivisor(St.text_instanceInfo,1),m.drawElementsInstanced(m.TRIANGLES,e.decal_indexAmount,m.UNSIGNED_SHORT,0,e.decal_instanceData.length*MATH.INV_13);let n=.85*g.isNight,s=g.isNight;e.decal_instanceData=[61,10.25,43.5,0,0,.875,.125,n,n,n,-1.75,-1.75,0,61,10.25,41.663,0,0,.625,.125,n,n,n,-1.75,-1.75,0,61,10.25,39.8315,0,0,.75,.125,n,n,n,-1.75,-1.75,0,61,10.25,38,0,0,.5,.125,n,n,n,-1.75,-1.75,0,-98,23,106.5,0,0,.125,.25,n,n,n,-2,-2,0,-100.25,23,106.5,0,0,.25,.25,n,n,n,-2,-2,0,-102.5,23.07,106.5,0,0,.625,.25,n,n,n,-2,-2,0,-104.75,23.1,106.5,0,0,.75,.25,n,n,n,-2,-2,0,-107,23,106.5,0,0,0,.375,n,n,n,-2,-2,0,-63.5,5,41,0,0,.5,.25,n,n,n,-2.5,-2.5,0,37.5,8,28,0,0,.375,.25,n,n,n,-2.5,-2.5,0,67.5,13.5,-42.6,0,0,.875,.25,n,n,n,-2.5,-2.5,0,-50.5,20.1,81.5,0,0,0,.25,n,n,n,-2.5,-2.5,0,11.25,3.5,14.75,0,0,.125,.375,n,n,n,-4,-4,0,32,13.75,50.25,0,0,.25,.375,n,n,n,-4,-4,0,-30.5,6.7,46,0,0,.375,.375,n,n,n,-4,-4,0,-26,10.5,-33,0,0,.5,.375,n,n,n,-4,-4,0,-84.5,23.75,58.5,0,0,.625,.375,n,n,n,-4,-4,0,23.5,2,41,0,0,.75,.375,n,n,n,-3,-3,0,-31,10.1,-43,0,0,.877,.375,n,n,n,-4,-4,0,-10,37.75,90.5,0,0,.75,.5,n,n,n,-4.5,-4,0,-98,26,121,0,0,.125,.5,n,n,n,-2,-2,0,-100.25,26,121,0,0,.25,.5,n,n,n,-2,-2,0,-102.5,26,121,0,0,.375,.5,n,n,n,-2,-2,0,-104.75,26,121,0,0,.5,.5,n,n,n,-2,-2,0,-107,26,121,0,0,.625,.5,n,n,n,-2,-2,0,-97.75,23,121,0,0,e.decalUV.pencil[0],e.decalUV.pencil[1],n,n,n,-2,-2,0,-99.65,23,121,0,0,e.decalUV.bobertPlushie[0],e.decalUV.bobertPlushie[1],n,n,n,-2,-2,0,-101.55,23,121,0,0,e.decalUV.boombox[0],e.decalUV.boombox[1],n,n,n,-2,-2,0,-103.45,23,121,0,0,e.decalUV.candycane[0],e.decalUV.candycane[1],n,n,n,-2,-2,0,-105.35,23,121,0,0,e.decalUV.books[0],e.decalUV.books[1],n,n,n,-2,-2,0,-107.25,23,121,0,0,e.decalUV.coffeeMug[0],e.decalUV.coffeeMug[1],n,n,n,-2,-2,0,28.25,3.66,-17.25,0,0,.875,.5,s,s,s,-1.5,-1.5,0,28.25,3.64,-19.25,0,0,0,.625,s,s,s,-1.5,-1.5,0];let r=.5*i+.5,a=r;for(let n=e.data.length;n--;){let s=e.data[n],l=s.size*o.min(7*s.life,1);s.life-=t,1===s.critType?e.instanceData.push(s.pos[0],s.pos[1],s.pos[2],s.offset[0],s.offset[1],s.uv[0],s.uv[1],s.col[0]*r,MATH.lerp(1,s.col[1],r),s.col[2]*r,l,l,.4*i):2===s.critType?e.instanceData.push(s.pos[0],s.pos[1],s.pos[2],s.offset[0],s.offset[1],s.uv[0],s.uv[1],MATH.lerp(.7,s.col[0],a),s.col[1]*a,MATH.lerp(.7,s.col[2],a),l,l,.4*i):e.instanceData.push(s.pos[0],s.pos[1],s.pos[2],s.offset[0],s.offset[1],s.uv[0],s.uv[1],s.col[0],s.col[1],s.col[2],l,l,0),s.life<=0&&e.data.splice(n,1)}m.bindTexture(m.TEXTURE_2D,Rt.text),m.bindBuffer(m.ARRAY_BUFFER,e.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,e.indexBuffer),m.vertexAttribPointer(St.text_vertPos,2,m.FLOAT,m.FALSE,16,0),m.vertexAttribPointer(St.text_vertUV,2,m.FLOAT,m.FALSE,16,8),m.bindBuffer(m.ARRAY_BUFFER,e.instanceBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(e.instanceData),m.DYNAMIC_DRAW),m.vertexAttribPointer(St.text_instanceOrigin,3,m.FLOAT,m.FALSE,52,0),m.vertexAttribPointer(St.text_instanceOffset,2,m.FLOAT,m.FALSE,52,12),m.vertexAttribPointer(St.text_instanceUV,2,m.FLOAT,m.FALSE,52,20),m.vertexAttribPointer(St.text_instanceColor,3,m.FLOAT,m.FALSE,52,28),m.vertexAttribPointer(St.text_instanceInfo,3,m.FLOAT,m.FALSE,52,40),m.drawElementsInstanced(m.TRIANGLES,e.indexAmount,m.UNSIGNED_SHORT,0,e.instanceData.length*MATH.INV_13),m.vertexAttribDivisor(St.text_instanceOrigin,0),m.vertexAttribDivisor(St.text_instanceOffset,0),m.vertexAttribDivisor(St.text_instanceUV,0),m.vertexAttribDivisor(St.text_instanceColor,0),m.vertexAttribDivisor(St.text_instanceInfo,0),e.instanceData=[]},e.draw=function(){if(e.ctxData.length){u.strokeStyle="rgb(0,0,0)",u.fillStyle="rgb(255,255,255)",u.lineWidth=4;for(let t=e.ctxData.length;t--;){let i=e.ctxData[t],o=vec4.transformMat4([],[...i.pos,1],g.viewMatrix);o[0]/=o[3],o[1]/=o[3],o[2]>0&&(u.lineWidth=.2*i.scale/o[2],u.font=i.scale/o[2]+"px arial",u.strokeText(i.message,o[0]*r+r,s-(o[1]*a+a)),u.fillText(i.message,o[0]*r+r,s-(o[1]*a+a)))}e.ctxData=[]}},e}({}),$t=function(e){return e.particles=[],e.vertBuffer=m.createBuffer(),e.verts=[],e.add=function(t){t.rot=void 0!==t.rot?t.rot:o.random()*MATH.TWO_PI,t.lifespan=t.life,e.particles.push(t)},e.render=function(){if(e.particles.length){e.verts=[];for(let t=e.particles.length;t--;){let i=e.particles[t];i.vy+=i.grav*f,i.x+=i.vx*f,i.y+=i.vy*f,i.z+=i.vz*f,i.rot+=i.rotVel*f,i.life-=f,i.col[3]=i.life*i.alpha/i.lifespan,e.verts.push(i.x,i.y,i.z,i.col[0],i.col[1],i.col[2],i.col[3],i.size,i.rot),i.life<=0&&e.particles.splice(t,1)}m.useProgram(wt),m.uniformMatrix4fv(St.particle_viewMatrix,m.FALSE,g.viewMatrix),m.bindBuffer(m.ARRAY_BUFFER,e.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(e.verts),m.DYNAMIC_DRAW),m.vertexAttribPointer(St.particle_vertPos,3,m.FLOAT,m.FALSE,36,0),m.vertexAttribPointer(St.particle_vertColor,4,m.FLOAT,m.FALSE,36,12),m.vertexAttribPointer(St.particle_vertSize,1,m.FLOAT,m.FALSE,36,28),m.vertexAttribPointer(St.particle_vertRot,1,m.FLOAT,m.FALSE,36,32),m.drawArrays(m.POINTS,0,e.verts.length/9)}},e}({}),ei=function(e){e.trails=[],e.constantTrails=[],e.constantTrailVertBuffer=m.createBuffer(),e.constantTrailIndexBuffer=m.createBuffer(),e.regenerateConstantTrails=function(){let t=[],i=[],o=0;for(let n in e.constantTrails){e.constantTrails[n].meshOffsetIndex=2*o*7,o+=e.constantTrails[n].length;let s=t.length/7;t.push(...e.constantTrails[n].verts),i.push(...e.constantTrails[n].index.map((e=>e+s)))}e.constantTrailVerts=new Float32Array(t),e.constantTrailIndex=new Uint16Array(i),m.bindBuffer(m.ARRAY_BUFFER,e.constantTrailVertBuffer),m.bufferData(m.ARRAY_BUFFER,e.constantTrailVerts,m.DYNAMIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,e.constantTrailIndexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,e.constantTrailIndex,m.STATIC_DRAW)},e.Trail=function(t){e.trails.push(this),this.length=t.length,this.size=t.size,this.pos=[],this.color=t.color,this.fadeTo=t.fadeTo,this.triangle=t.triangle,this.vertical=t.vertical,this.skipFrame=t.skipFrame||1,this.skipAdd=t.skipAdd||1;for(let e=0;e<this.length;e++)this.pos.push([]);this.vertBuffer=m.createBuffer(),this.indexBuffer=m.createBuffer(),this.verts=new Float32Array(2*this.length*7),this.index=new Uint16Array(12*(this.length-1));for(let e=0,t=0;e<12*(this.length-1);e+=12,t+=2)this.index[e]=0+t,this.index[e+1]=1+t,this.index[e+2]=2+t,this.index[e+3]=2+t,this.index[e+4]=3+t,this.index[e+5]=1+t,this.index[e+6]=2+t,this.index[e+7]=1+t,this.index[e+8]=0+t,this.index[e+9]=1+t,this.index[e+10]=3+t,this.index[e+11]=2+t;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,this.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,this.index,m.STATIC_DRAW),this.addPos=function(e){A%this.skipAdd==0&&(this.pos.push(e),this.pos.length>=this.length&&this.pos.shift(),this.recomputeMeshThisFrame=!0)};this.render=function(){if(this.recomputeMeshThisFrame&&A%this.skipFrame==0)if(this.vertical)for(let e=0;e<this.pos.length;e++){let t,i,o,n,s,r,a,l,d=e/this.length,h=this.triangle?this.size*d:this.size;this.fadeTo?(t=MATH.lerp(this.fadeTo[0],this.color[0],d),i=MATH.lerp(this.fadeTo[1],this.color[1],d),o=MATH.lerp(this.fadeTo[2],this.color[2],d),n=MATH.lerp(this.fadeTo[3],this.color[3],d),s=t,r=i,a=o,l=n):(t=this.color[0],i=this.color[1],o=this.color[2],n=this.color[3],s=t,r=i,a=o,l=n),this.verts[14*e]=this.pos[e][0],this.verts[14*e+1]=this.pos[e][1]+h,this.verts[14*e+2]=this.pos[e][2],this.verts[14*e+3]=t,this.verts[14*e+4]=i,this.verts[14*e+5]=o,this.verts[14*e+6]=n,this.verts[14*e+7]=this.pos[e][0],this.verts[14*e+8]=this.pos[e][1]-h,this.verts[14*e+9]=this.pos[e][2],this.verts[14*e+10]=s,this.verts[14*e+11]=r,this.verts[14*e+12]=a,this.verts[14*e+13]=l}else for(let e=0;e<this.pos.length;e++){let t,i,o,n,s,r,a,l,d,h,m,c,u,p,f=e/this.length,g=this.triangle?this.size*f:this.size;if(this.fadeTo?(a=MATH.lerp(this.fadeTo[0],this.color[0],f),l=MATH.lerp(this.fadeTo[1],this.color[1],f),d=MATH.lerp(this.fadeTo[2],this.color[2],f),h=MATH.lerp(this.fadeTo[3],this.color[3],f),m=a,c=l,u=d,p=h):(a=this.color[0],l=this.color[1],d=this.color[2],h=this.color[3],m=a,c=l,u=d,p=h),0===e){let a=vec3.sub([],this.pos[e+1],this.pos[e]);a=[a[2],0,-a[0]],vec3.normalize(a,a),vec3.scale(a,a,g),t=a[0]+this.pos[e][0],i=a[1]+this.pos[e][1],o=a[2]+this.pos[e][2],n=-a[0]+this.pos[e][0],s=-a[1]+this.pos[e][1],r=-a[2]+this.pos[e][2]}else if(e===this.pos.length-1){let a=vec3.sub([],this.pos[e],this.pos[e-1]);a=[a[2],0,-a[0]],vec3.normalize(a,a),vec3.scale(a,a,g),t=a[0]+this.pos[e][0],i=a[1]+this.pos[e][1],o=a[2]+this.pos[e][2],n=-a[0]+this.pos[e][0],s=-a[1]+this.pos[e][1],r=-a[2]+this.pos[e][2]}else{let a=vec3.sub([],this.pos[e],this.pos[e-1]),l=vec3.sub([],this.pos[e+1],this.pos[e]);vec3.normalize(a,a),vec3.normalize(l,l),vec3.add(a,a,l),a=[a[2],0,-a[0]],vec3.normalize(a,a),vec3.scale(a,a,g),t=a[0]+this.pos[e][0],i=a[1]+this.pos[e][1],o=a[2]+this.pos[e][2],n=-a[0]+this.pos[e][0],s=-a[1]+this.pos[e][1],r=-a[2]+this.pos[e][2]}this.verts[14*e]=t,this.verts[14*e+1]=i,this.verts[14*e+2]=o,this.verts[14*e+3]=a,this.verts[14*e+4]=l,this.verts[14*e+5]=d,this.verts[14*e+6]=h,this.verts[14*e+7]=n,this.verts[14*e+8]=s,this.verts[14*e+9]=r,this.verts[14*e+10]=m,this.verts[14*e+11]=c,this.verts[14*e+12]=u,this.verts[14*e+13]=p}this.recomputeMeshThisFrame=!1,m.bindBuffer(m.ARRAY_BUFFER,this.vertBuffer),m.bufferData(m.ARRAY_BUFFER,this.verts,m.DYNAMIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,this.indexBuffer),m.vertexAttribPointer(St.trail_vertPos,3,m.FLOAT,m.FALSE,28,0),m.vertexAttribPointer(St.trail_vertColor,4,m.FLOAT,m.FALSE,28,12),m.drawElements(m.TRIANGLES,this.index.length,m.UNSIGNED_SHORT,0)}},e.ConstantTrail=function(t){this.length=t.length,this.size=t.size,this.pos=[],this.color=t.color,this.fadeTo=t.fadeTo,this.triangle=t.triangle,this.vertical=t.vertical,this.skipFrame=t.skipFrame||1,this.skipAdd=t.skipAdd||1,this.verts=new Float32Array(2*this.length*7),this.index=[];for(let e=0;e<this.length;e++)this.pos.push([]);for(let e=0,t=0;e<12*(this.length-1);e+=12,t+=2)this.index[e]=0+t,this.index[e+1]=1+t,this.index[e+2]=2+t,this.index[e+3]=2+t,this.index[e+4]=3+t,this.index[e+5]=1+t,this.index[e+6]=2+t,this.index[e+7]=1+t,this.index[e+8]=0+t,this.index[e+9]=1+t,this.index[e+10]=3+t,this.index[e+11]=2+t;this.addPos=function(e){A%this.skipAdd==0&&(this.pos.push(e),this.pos.length>=this.length&&this.pos.shift(),this.recomputeMeshThisFrame=!0)};return this.render=function(){if(this.recomputeMeshThisFrame&&A%this.skipFrame==0)if(this.vertical)for(let t=0;t<this.pos.length;t++){let i,o,n,s,r,a,l,d,h=t/this.length,m=this.triangle?this.size*h:this.size;this.fadeTo?(i=MATH.lerp(this.fadeTo[0],this.color[0],h),o=MATH.lerp(this.fadeTo[1],this.color[1],h),n=MATH.lerp(this.fadeTo[2],this.color[2],h),s=MATH.lerp(this.fadeTo[3],this.color[3],h),r=i,a=o,l=n,d=s):(i=this.color[0],o=this.color[1],n=this.color[2],s=this.color[3],r=i,a=o,l=n,d=s),e.constantTrailVerts[14*t+this.meshOffsetIndex]=this.pos[t][0],e.constantTrailVerts[14*t+1+this.meshOffsetIndex]=this.pos[t][1]+m,e.constantTrailVerts[14*t+2+this.meshOffsetIndex]=this.pos[t][2],e.constantTrailVerts[14*t+3+this.meshOffsetIndex]=i,e.constantTrailVerts[14*t+4+this.meshOffsetIndex]=o,e.constantTrailVerts[14*t+5+this.meshOffsetIndex]=n,e.constantTrailVerts[14*t+6+this.meshOffsetIndex]=s,e.constantTrailVerts[14*t+7+this.meshOffsetIndex]=this.pos[t][0],e.constantTrailVerts[14*t+8+this.meshOffsetIndex]=this.pos[t][1]-m,e.constantTrailVerts[14*t+9+this.meshOffsetIndex]=this.pos[t][2],e.constantTrailVerts[14*t+10+this.meshOffsetIndex]=r,e.constantTrailVerts[14*t+11+this.meshOffsetIndex]=a,e.constantTrailVerts[14*t+12+this.meshOffsetIndex]=l,e.constantTrailVerts[14*t+13+this.meshOffsetIndex]=d}else for(let t=0;t<this.pos.length;t++){let i,o,n,s,r,a,l,d,h,m,c,u,p,f,g=t/this.length,b=this.triangle?this.size*g:this.size;if(this.fadeTo?(l=MATH.lerp(this.fadeTo[0],this.color[0],g),d=MATH.lerp(this.fadeTo[1],this.color[1],g),h=MATH.lerp(this.fadeTo[2],this.color[2],g),m=MATH.lerp(this.fadeTo[3],this.color[3],g),c=l,u=d,p=h,f=m):(l=this.color[0],d=this.color[1],h=this.color[2],m=this.color[3],c=l,u=d,p=h,f=m),0===t){let e=vec3.sub([],this.pos[t+1],this.pos[t]);e=[e[2],0,-e[0]],vec3.normalize(e,e),vec3.scale(e,e,b),i=e[0]+this.pos[t][0],o=e[1]+this.pos[t][1],n=e[2]+this.pos[t][2],s=-e[0]+this.pos[t][0],r=-e[1]+this.pos[t][1],a=-e[2]+this.pos[t][2]}else if(t===this.pos.length-1){let e=vec3.sub([],this.pos[t],this.pos[t-1]);e=[e[2],0,-e[0]],vec3.normalize(e,e),vec3.scale(e,e,b),i=e[0]+this.pos[t][0],o=e[1]+this.pos[t][1],n=e[2]+this.pos[t][2],s=-e[0]+this.pos[t][0],r=-e[1]+this.pos[t][1],a=-e[2]+this.pos[t][2]}else{let e=vec3.sub([],this.pos[t],this.pos[t-1]),l=vec3.sub([],this.pos[t+1],this.pos[t]);vec3.normalize(e,e),vec3.normalize(l,l),vec3.add(e,e,l),e=[e[2],0,-e[0]],vec3.normalize(e,e),vec3.scale(e,e,b),i=e[0]+this.pos[t][0],o=e[1]+this.pos[t][1],n=e[2]+this.pos[t][2],s=-e[0]+this.pos[t][0],r=-e[1]+this.pos[t][1],a=-e[2]+this.pos[t][2]}e.constantTrailVerts[14*t+this.meshOffsetIndex]=i,e.constantTrailVerts[14*t+1+this.meshOffsetIndex]=o,e.constantTrailVerts[14*t+2+this.meshOffsetIndex]=n,e.constantTrailVerts[14*t+3+this.meshOffsetIndex]=l,e.constantTrailVerts[14*t+4+this.meshOffsetIndex]=d,e.constantTrailVerts[14*t+5+this.meshOffsetIndex]=h,e.constantTrailVerts[14*t+6+this.meshOffsetIndex]=m,e.constantTrailVerts[14*t+7+this.meshOffsetIndex]=s,e.constantTrailVerts[14*t+8+this.meshOffsetIndex]=r,e.constantTrailVerts[14*t+9+this.meshOffsetIndex]=a,e.constantTrailVerts[14*t+10+this.meshOffsetIndex]=c,e.constantTrailVerts[14*t+11+this.meshOffsetIndex]=u,e.constantTrailVerts[14*t+12+this.meshOffsetIndex]=p,e.constantTrailVerts[14*t+13+this.meshOffsetIndex]=f}this.recomputeMeshThisFrame=!1},e.constantTrails.push(this),e.regenerateConstantTrails(),this};let t=new e.ConstantTrail({length:15,size:.2,triangle:!0,color:[1,1,1,1]}),i=new e.ConstantTrail({length:15,size:.2,triangle:!0,color:[1,1,1,1]}),o=new e.ConstantTrail({length:12,size:.1,triangle:!0,color:[1,0,0,1]}),n=new e.ConstantTrail({length:12,size:.1,triangle:!0,color:[0,0,1,1]});return e.render=function(){"crimsonGuard"===g.currentGear.leftGuard&&(t.addPos([g.body.position.x+.65*g.bodyDir[2],g.body.position.y,g.body.position.z-.65*g.bodyDir[0]]),o.addPos([g.body.position.x+.6*g.bodyDir[2],g.body.position.y+.175,g.body.position.z-.6*g.bodyDir[0]])),"cobaltGuard"===g.currentGear.rightGuard&&(i.addPos([g.body.position.x-.65*g.bodyDir[2],g.body.position.y,g.body.position.z+.65*g.bodyDir[0]]),n.addPos([g.body.position.x-.6*g.bodyDir[2],g.body.position.y+.175,g.body.position.z+.6*g.bodyDir[0]])),m.useProgram(kt),m.uniformMatrix4fv(St.trail_viewMatrix,m.FALSE,g.viewMatrix);for(let t in e.trails)e.trails[t].render(),e.trails[t].splice&&e.trails.splice(t,1);for(let t in e.constantTrails)e.constantTrails[t].render(),e.constantTrails[t].splice&&(e.constantTrails.splice(t,1),e.regenerateConstantTrails());m.bindBuffer(m.ARRAY_BUFFER,e.constantTrailVertBuffer),m.bufferData(m.ARRAY_BUFFER,e.constantTrailVerts,m.DYNAMIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,e.constantTrailIndexBuffer),m.vertexAttribPointer(St.trail_vertPos,3,m.FLOAT,m.FALSE,28,0),m.vertexAttribPointer(St.trail_vertColor,4,m.FLOAT,m.FALSE,28,12),m.drawElements(m.TRIANGLES,e.constantTrailIndex.length,m.UNSIGNED_SHORT,0)},e}({}),ti={};class ii{constructor(e,t,i,n,s,r=1){if(this.amplify=r,this.funcParams=n,this.backupFunc=s?$[i].backupFunc:null,this.life=e*g.tokenLifespan*1.5,this.pos=t,this.type=i,this.rotation=o.random()*MATH.TWO_PI,this.func=!$[i].svg&&$[i].func,this.canBeLinked=void 0===$[i].canBeLinked||$[i].canBeLinked,o.random()<(g.hasDigitalBee&&g.extraInfo.drives.maxed?g.abilityDuplicationChance+.01:g.abilityDuplicationChance)&&!s&&g.fieldIn&&n){let s,r=n,a=o.random()*ti[r.field].width|0,l=o.random()*ti[r.field].length|0;r.x=a,r.z=l,s=[ti[r.field].x+a,t[1],ti[r.field].z+l],le.tokens.push(new ni(e*(.1*(n.bee.level-1)+2),s,i,r)),le.mobs.push(new ot(g.fieldIn,1))}}die(e){le.tokens.splice(e,1)}collect(){if(!this.collected){if(this.collected=!0,this.life=.75,g.stats.abilityTokens++,$[this.type].statsToAddTo){for(let e in $[this.type].statsToAddTo)g.stats[$[this.type].statsToAddTo[e]]++;$[this.type].statsToAddTo.indexOf(this.type+"Tokens")<0&&g.stats[this.type+"Tokens"]++}this.func?this.backupFunc?(this.bee=this.funcParams.bee,this.backupFunc(this)):this.func(this.funcParams):this.type.indexOf("Winds")>-1?(g.addMessage("x"+this.amplify+' "'+MATH.doGrammar(this.type)+'"'),g.addEffect(this.type,!1,!1,this.amplify)):g.addEffect(this.type)}}update(){return this.life-=f,this.collected?(this.pos[1]+=(this.pos[1]+5-this.pos[1])*f,this.rotation+=20*f,de.tokens.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.rotation,$[this.type].u,$[this.type].v,5*this.life,1)):(this.rotation+=2.6*f,de.tokens.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.rotation,$[this.type].u,$[this.type].v,.3*this.life,1),o.abs(this.pos[0]-g.body.position.x)+o.abs(this.pos[1]-g.body.position.y)+o.abs(this.pos[2]-g.body.position.z)<1.75&&this.collect()),this.life<=0}}class oi{constructor(e,t,i,n,s=!1,r,a){this.statsToAdd=a||[],this.life=e,this.pos=t,this.type=i,this.amount=o.abs(n),this.rotation=o.random()*MATH.TWO_PI,this.canBeLinked=s,this.from=r,"honey"===this.type?(this.u=.1875,this.v=.25):(this.u=se[this.type].u,this.v=se[this.type].v)}die(e){le.tokens.splice(e,1)}collect(){if(!this.collected){this.collected=!0,this.life=.75,g.stats[this.type+"Tokens"]++;for(let e in this.statsToAdd)g.stats[this.statsToAdd[e]]++;"honey"===this.type?(this.amount=o.round(g.honeyFromTokens*this.amount),g.honey+=this.amount,g.extraInfo.enablePollenText&&Kt.add(this.amount+"",[g.body.position.x,g.body.position.y+2,g.body.position.z],ae.honey,0,"+"),g.addMessage("+"+MATH.addCommas(this.amount+"")+" Honey"+(this.from?" (from "+this.from+")":"")),g.stats.honeyTokens++):(g.addItem(this.type,this.amount),g.addMessage("+"+MATH.addCommas(this.amount+"")+" "+(this.amount>1?MATH.doPlural(MATH.doGrammar(this.type)):MATH.doGrammar(this.type)+(this.from?" (from "+this.from+")":""))))}}update(){return this.life-=f,this.collected?(this.pos[1]+=(this.pos[1]+5-this.pos[1])*f,this.rotation+=20*f,de.tokens.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.rotation,this.u,this.v,5*this.life,1)):(this.rotation+=2.6*f,de.tokens.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.rotation,this.u,this.v,.3*this.life,1),o.abs(this.pos[0]-g.body.position.x)+o.abs(this.pos[1]-g.body.position.y)+o.abs(this.pos[2]-g.body.position.z)<1.75&&this.collect()),this.life<=0}}class ni{constructor(e,t,i,n){(o.random()<.1+.001*g.extraInfo.drives.glitched||"glitch"===i||"mapCorruption"===i)&&(i="smiley"),this.funcParams=n,this.life=e*g.tokenLifespan*1.5,this.pos=t,this.type=i,this.rotation=o.random()*MATH.TWO_PI,this.func=!$[i].svg&&$[i].func,this.canBeLinked=void 0===$[i].canBeLinked||$[i].canBeLinked,this.activationTimer=0,this.pos[1]+=3.5}die(e){le.tokens.splice(e,1)}collect(){if(!this.collected){if(this.collected=!0,this.life=.75,g.stats.abilityTokens++,$[this.type].statsToAddTo)for(let e in $[this.type].statsToAddTo)g.stats[$[this.type].statsToAddTo[e]]++;this.func?this.func(this.funcParams):g.addEffect(this.type)}}update(){return this.life-=f,this.collected?Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.smiley,1,0,.85,-3,-3,0):(Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.circle,.1,.1,.1,3,3,0),Kt.addDecalRaw(this.pos[0],this.pos[1],this.pos[2],0,0,...Kt.decalUV.arc,1,1,1,-3,-3,MATH.dupedTokenLoadingArcRotation(this.activationTimer)),this.rotation+=2.6*f,de.tokens.instanceData.push(this.pos[0],this.pos[1],this.pos[2],this.rotation,$[this.type].u,$[this.type].v,.15*this.life,1.5),o.abs(this.pos[0]-g.body.position.x)+o.abs(this.pos[1]-3.5-g.body.position.y)+o.abs(this.pos[2]-g.body.position.z)<3.5?this.activationTimer+=f:this.activationTimer=o.max(this.activationTimer-f,0),this.activationTimer>=1&&this.collect()),this.life<=0}}de.token={},de.token.vertBuffer=m.createBuffer(),de.token.indexBuffer=m.createBuffer();let si=[],ri=[],ai=25,li=.5;for(let e=0,t=MATH.TWO_PI/ai;e<MATH.TWO_PI;e+=t){let t=o.sin(e),i=o.cos(e),n=.0625;si.push(t*li,i*li,.05,(.495*t+.5)*n,(.495*-i+.5)*n,t*li,i*li,-.05,(.495*t+.5)*n,(.495*-i+.5)*n)}let di=si.length/5;for(let e=0;e<2*ai;e+=2)ri.push((e+2)%di,(e+1)%di,e%di,(e+1)%di,(e+2)%di,(e+3)%di);for(let e=1;e<ai-1;e++)ri.push(2*(e+1),2*e,0),ri.push(1,2*e+1,2*(e+1)+1);function hi(e,t,i,o,n,s,r,a,l,d,h,m,c,u,p){let f,g=[[-.5*o,.5*n,-.5*s],[-.5*o,.5*n,.5*s],[.5*o,.5*n,.5*s],[.5*o,.5*n,-.5*s],[-.5*o,-.5*n,-.5*s],[-.5*o,-.5*n,.5*s],[.5*o,-.5*n,.5*s],[.5*o,-.5*n,-.5*s]],b=.95,y=.9,v=.85,x=.92,A=.87;d&&(f=quat.fromEuler([],d,h,m));for(let o in g)d&&vec3.transformQuat(g[o],g[o],f),c&&vec3.mul(g[o],g[o],[c,u,p]),vec3.add(g[o],g[o],[e,t,i]);di=si.length/6,si.push(g[0][0],g[0][1],g[0][2],1*r,1*a,1*l,g[1][0],g[1][1],g[1][2],1*r,1*a,1*l,g[2][0],g[2][1],g[2][2],1*r,1*a,1*l,g[3][0],g[3][1],g[3][2],1*r,1*a,1*l,g[1][0],g[1][1],g[1][2],r*b,a*b,l*b,g[2][0],g[2][1],g[2][2],r*b,a*b,l*b,g[5][0],g[5][1],g[5][2],r*b,a*b,l*b,g[6][0],g[6][1],g[6][2],r*b,a*b,l*b,g[0][0],g[0][1],g[0][2],r*y,a*y,l*y,g[3][0],g[3][1],g[3][2],r*y,a*y,l*y,g[4][0],g[4][1],g[4][2],r*y,a*y,l*y,g[7][0],g[7][1],g[7][2],r*y,a*y,l*y,g[2][0],g[2][1],g[2][2],r*v,a*v,l*v,g[3][0],g[3][1],g[3][2],r*v,a*v,l*v,g[6][0],g[6][1],g[6][2],r*v,a*v,l*v,g[7][0],g[7][1],g[7][2],r*v,a*v,l*v,g[0][0],g[0][1],g[0][2],r*x,a*x,l*x,g[1][0],g[1][1],g[1][2],r*x,a*x,l*x,g[4][0],g[4][1],g[4][2],r*x,a*x,l*x,g[5][0],g[5][1],g[5][2],r*x,a*x,l*x,g[4][0],g[4][1],g[4][2],r*A,a*A,l*A,g[5][0],g[5][1],g[5][2],r*A,a*A,l*A,g[6][0],g[6][1],g[6][2],r*A,a*A,l*A,g[7][0],g[7][1],g[7][2],r*A,a*A,l*A),ri.push(0+di,1+di,2+di,0+di,2+di,3+di,5+di,6+di,7+di,6+di,5+di,4+di,8+di,9+di,10+di,11+di,10+di,9+di,14+di,13+di,12+di,13+di,14+di,15+di,18+di,17+di,16+di,17+di,18+di,19+di,22+di,21+di,20+di,23+di,22+di,20+di,24+di,25+di,26+di,26+di,25+di,24+di,24+di,26+di,27+di,27+di,26+di,24+di)}function mi(e,t,i,n,s,r,a,l=.75,d=.25,h=0,m=0,c=0){e*=.8;let u=[],p=[],f=[],g=[],b=0;for(let n=0;n<MATH.TWO_PI;n+=MATH.TWO_PI/10){let s=b++%2==0?t:e;p.push([o.sin(n)*s,o.cos(n)*s,-i])}b=0;for(let n=0;n<MATH.TWO_PI;n+=MATH.TWO_PI/10){let s=b++%2==0?t:e;p.push([o.sin(n)*s,o.cos(n)*s,i])}p.push([0,0,-n],[0,0,n]),f.push(0,1,20,1,2,20,2,3,20,3,4,20,4,5,20,5,6,20,6,7,20,7,8,20,8,9,20,9,0,20,11,10,21,12,11,21,13,12,21,14,13,21,15,14,21,16,15,21,17,16,21,18,17,21,19,18,21,10,19,21,9,10,0),g.push(2,1,0,5,4,3,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62);for(let e=0;e<10;e++)f.push(0+e,10+e,1+e,11+e,1+e,10+e),g.push(6*e,6*e+1,6*e+2,6*e+3,6*e+4,6*e+5);for(let e=63;e<g.length;e++)g[e]+=63;for(let e in f)f[e]=[p[f[e]][0]+h,p[f[e]][1]+m,p[f[e]][2]+c];u=g;let y=(e,t,i)=>{e=f[e],t=f[t],i=f[i];let o=vec3.cross([],[e[0]-t[0],e[1]-t[1],e[2]-t[2]],[e[0]-i[0],e[1]-i[1],e[2]-i[2]]);return vec3.normalize(o,o)};for(let e=0;e<u.length;e+=3){let t=u[e],i=u[e+1],o=u[e+2],n=vec3.dot([.035,.175,.053],y(t,i,o))*l+d;si.push(...f[t],s*n,r*n,a*n,...f[i],s*n,r*n,a*n,...f[o],s*n,r*n,a*n)}ri.push(...u)}function ci(e,t,i,n,s,r,a,l,d,h,m,c,u,p=!0,f=!0,g=!0){let b=u??n,y=si.length/6,v=[],x=[];if(g)for(let e=0,t=MATH.TWO_PI/r;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,r=e+.5*t;v.push(o.cos(i)*n,o.sin(i)*n,.5*s,a*(.1*o.cos(i)+.9),l*(.1*o.cos(i)+.9),d*(.1*o.cos(i)+.9),o.cos(i)*b,o.sin(i)*b,.5*-s,a*(.1*o.cos(i)+.9),l*(.1*o.cos(i)+.9),d*(.1*o.cos(i)+.9),o.cos(r)*n,o.sin(r)*n,.5*s,a*(.1*o.cos(r)+.9),l*(.1*o.cos(r)+.9),d*(.1*o.cos(r)+.9),o.cos(r)*b,o.sin(r)*b,.5*-s,a*(.1*o.cos(r)+.9),l*(.1*o.cos(r)+.9),d*(.1*o.cos(r)+.9));let h=v.length/6;x.push(h,h+1,h+2,h+3,h+2,h+1)}else for(let e=0,t=MATH.TWO_PI/r;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,r=e+.5*t;v.push(o.cos(i)*n,o.sin(i)*n,.5*s,a,l,d,o.cos(i)*b,o.sin(i)*b,.5*-s,a,l,d,o.cos(r)*n,o.sin(r)*n,.5*s,a,l,d,o.cos(r)*b,o.sin(r)*b,.5*-s,a,l,d);let h=v.length/6;x.push(h,h+1,h+2,h+3,h+2,h+1)}let A=v.length/6;for(let e=0,t=MATH.TWO_PI/r;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,r=e+.5*t;v.push(o.cos(i)*n,o.sin(i)*n,.5*s,a,l,d,o.cos(r)*n,o.sin(r)*n,.5*s,a,l,d)}for(let e=v.length/6,t=A;t<e-3&&f;t++)x.push(A,t,t+1);A=v.length/6;for(let e=0,t=MATH.TWO_PI/r;e<=MATH.TWO_PI;e+=t){let i=e-.5*t,n=e+.5*t;v.push(o.cos(i)*b,o.sin(i)*b,.5*-s,a,l,d,o.cos(n)*b,o.sin(n)*b,.5*-s,a,l,d)}for(let e=v.length/6,t=A;t<e&&p;t++)x.push(t,t-1,A);for(let e in x)x[e]+=y;ri.push(...x);let T=quat.fromEuler([],h,m,c);for(let o=0;o<v.length;o+=6)if(h){let n=vec3.transformQuat([],[v[o],v[o+1],v[o+2]],T);v[o]=n[0]+e,v[o+1]=n[1]+t,v[o+2]=n[2]+i}else v[o]+=e,v[o+1]+=t,v[o+2]+=i;si.push(...v)}m.bindBuffer(m.ARRAY_BUFFER,de.token.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.token.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.token.indexAmount=ri.length,de.explosion={},de.explosion.vertBuffer=m.createBuffer(),de.explosion.indexBuffer=m.createBuffer(),si=MATH.icosphere(3),ri=si.index,si=si.verts,m.bindBuffer(m.ARRAY_BUFFER,de.explosion.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.explosion.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.explosion.indexAmount=ri.length,de.cylinder_explosion={},de.cylinder_explosion.vertBuffer=m.createBuffer(),de.cylinder_explosion.indexBuffer=m.createBuffer(),si=[],ri=[];for(let e=0,t=MATH.TWO_PI/ai;e<MATH.TWO_PI;e+=t){let t=o.sin(e),i=o.cos(e);si.push(.5*t,.5,.5*i,.5*t,-.5,.5*i)}di=si.length/3;for(let e=0;e<2*ai;e+=2)ri.push((e+2)%di,(e+1)%di,e%di,(e+1)%di,(e+2)%di,(e+3)%di);for(let e=1;e<ai-1;e++)ri.push(2*(e+1),2*e,0),ri.push(1,2*e+1,2*(e+1)+1);ri.reverse(),m.bindBuffer(m.ARRAY_BUFFER,de.cylinder_explosion.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.cylinder_explosion.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.cylinder_explosion.indexAmount=ri.length,de.bee={},de.bee.vertBuffer=m.createBuffer(),de.bee.indexBuffer=m.createBuffer(),si=[],ri=[];let ui=.4,pi=.4,fi=.6,gi=[[-.5*ui,.5*pi,-.5*fi],[-.5*ui,.5*pi,.5*fi],[.5*ui,.5*pi,.5*fi],[.5*ui,.5*pi,-.5*fi],[-.5*ui,-.5*pi,-.5*fi],[-.5*ui,-.5*pi,.5*fi],[.5*ui,-.5*pi,.5*fi],[.5*ui,-.5*pi,-.5*fi]];ui=.0625,e=1/2048,pi=ui,fi=ui,si.push(gi[0][0],gi[0][1],gi[0][2],0,fi+ui,1,0,gi[1][0],gi[1][1],gi[1][2],0,0+ui,1,0,gi[2][0],gi[2][1],gi[2][2],ui,0+ui,1,0,gi[3][0],gi[3][1],gi[3][2],ui,fi+ui,1,0,gi[1][0],gi[1][1],gi[1][2],0,0,.85,0,gi[2][0],gi[2][1],gi[2][2],ui,0,.85,0,gi[5][0],gi[5][1],gi[5][2],0,pi,.85,0,gi[6][0],gi[6][1],gi[6][2],ui,pi,.85,0,gi[0][0],gi[0][1],gi[0][2],e,ui+ui-e,.9,0,gi[3][0],gi[3][1],gi[3][2],e,ui+ui-e,.9,0,gi[4][0],gi[4][1],gi[4][2],e,ui+ui-e,.9,0,gi[7][0],gi[7][1],gi[7][2],e,ui+ui-e,.9,0,gi[2][0],gi[2][1],gi[2][2],0,0+ui,.75,0,gi[3][0],gi[3][1],gi[3][2],0,pi+ui,.75,0,gi[6][0],gi[6][1],gi[6][2],ui,0+ui,.75,0,gi[7][0],gi[7][1],gi[7][2],ui,pi+ui,.75,0,gi[0][0],gi[0][1],gi[0][2],0,pi+ui,.8,0,gi[1][0],gi[1][1],gi[1][2],0,0+ui,.8,0,gi[4][0],gi[4][1],gi[4][2],ui,pi+ui,.8,0,gi[5][0],gi[5][1],gi[5][2],ui,0+ui,.8,0,gi[4][0],gi[4][1],gi[4][2],0,fi+ui,.95,0,gi[5][0],gi[5][1],gi[5][2],0,0+ui,.95,0,gi[6][0],gi[6][1],gi[6][2],ui,0+ui,.95,0,gi[7][0],gi[7][1],gi[7][2],ui,fi+ui,.95,0,-.6,0,.6*gi[0][2],0,0,0,0,.6,0,.6*gi[0][2],0,0,0,0,.6,0,-.6*gi[0][2],0,0,0,0,-.6,0,-.6*gi[0][2],0,0,0,0),ri.push(0,1,2,0,2,3,5,6,7,6,5,4,8,9,10,11,10,9,14,13,12,13,14,15,18,17,16,17,18,19,22,21,20,23,22,20,24,25,26,26,25,24,24,26,27,27,26,24),vi(-.085,.05,0,.05,.5,.5,.01,.01,1,0,0,20),xi(-.17,.3,.2,.075,.1375,6,.05,.01,1,90,0,180),xi(-.17,.3,-.2,.075,.1375,6,.05,.01,1,90,0,180),xi(-.17,.3,0,.05,.275,6,.01,.01,1,90,0,0),vi(-.2,0,.285,.2828,.2828,.025,.01,.09,2,0,0,45),vi(.2,0,.285,.2828,.2828,.025,.04,.09,2,0,0,45),xi(0,.195,.05,.175,.05,10,.04,.09,3,0,0,0,.175,100),xi(0,.35,.05,0,.25,10,.03125,.03125,3,0,0,0,.2);let bi=MATH.icosphere(1);for(let e in bi.index)ri.push(bi.index[e]+si.length/7);for(let e=0;e<bi.verts.length;e+=3)si.push(.1*bi.verts[e],.1*bi.verts[e+1]+.6,.1*bi.verts[e+2]+.05,.04,.09,100,3);function yi(e,t,i,o,n){let s=MATH.random(.7,.9),r=[[e+n,t,i],[e-n,t,i],[e,t+.8*n,i-n]],a=si.length/7;for(let e in r)vec3.rotateZ(r[e],r[e],[0,0,0],.017*o);si.push(r[0][0],r[0][1],r[0][2],.01,.01,s,7,r[1][0],r[1][1],r[1][2],.01,.01,s,7,r[2][0],r[2][1],r[2][2],.01,.01,s,7),ri.push(a,a+1,a+2,a+2,a+1,a)}function vi(e,t,i,o,n,s,r,a,l,d=0,h=0,m=0,c){c=c??1;let u=[[-.5*o,.5*n,-.5*s],[-.5*o,.5*n,.5*s],[.5*o,.5*n,.5*s],[.5*o,.5*n,-.5*s],[-.5*o,-.5*n,-.5*s],[-.5*o,-.5*n,.5*s],[.5*o,-.5*n,.5*s],[.5*o,-.5*n,-.5*s]],p=quat.fromEuler([],d,h,m);for(let o in u)vec3.transformQuat(u[o],u[o],p),vec3.add(u[o],u[o],[e,t,i]);let f=si.length/7;si.push(u[0][0],u[0][1],u[0][2],r,a,1*c,l,u[1][0],u[1][1],u[1][2],r,a,1*c,l,u[2][0],u[2][1],u[2][2],r,a,1*c,l,u[3][0],u[3][1],u[3][2],r,a,1*c,l,u[1][0],u[1][1],u[1][2],r,a,.85*c,l,u[2][0],u[2][1],u[2][2],r,a,.85*c,l,u[5][0],u[5][1],u[5][2],r,a,.85*c,l,u[6][0],u[6][1],u[6][2],r,a,.85*c,l,u[0][0],u[0][1],u[0][2],r,a,.9*c,l,u[3][0],u[3][1],u[3][2],r,a,.9*c,l,u[4][0],u[4][1],u[4][2],r,a,.9*c,l,u[7][0],u[7][1],u[7][2],r,a,.9*c,l,u[2][0],u[2][1],u[2][2],r,a,.75*c,l,u[3][0],u[3][1],u[3][2],r,a,.75*c,l,u[6][0],u[6][1],u[6][2],r,a,.75*c,l,u[7][0],u[7][1],u[7][2],r,a,.75*c,l,u[0][0],u[0][1],u[0][2],r,a,.8*c,l,u[1][0],u[1][1],u[1][2],r,a,.8*c,l,u[4][0],u[4][1],u[4][2],r,a,.8*c,l,u[5][0],u[5][1],u[5][2],r,a,.8*c,l,u[4][0],u[4][1],u[4][2],r,a,.95*c,l,u[5][0],u[5][1],u[5][2],r,a,.95*c,l,u[6][0],u[6][1],u[6][2],r,a,.95*c,l,u[7][0],u[7][1],u[7][2],r,a,.95*c,l);let g=[0,1,2,0,2,3,5,6,7,6,5,4,8,9,10,11,10,9,14,13,12,13,14,15,18,17,16,17,18,19,22,21,20,23,22,20];for(let e in g)g[e]+=f;ri.push(...g)}function xi(e,t,i,n,s,r,a,l,d,h=0,m=0,c=0,u,p){let f=si.length,g=f/7;u=u??n;for(let e=0,t=MATH.TWO_PI/r;e<MATH.TWO_PI;e+=t){let t=o.sin(e),i=o.cos(e);si.push(t*n,s,i*n,a,l,p||.2*i+.8,d,t*u,-s,i*u,a,l,p||.25*i+.75,d)}let b=quat.fromEuler([],h,m,c);for(let o=f;o<si.length;o+=7){let n=[];vec3.transformQuat(n,[si[o],si[o+1],si[o+2]],b),vec3.add(n,n,[e,t,i]);si[o]=n[0],si[o+1]=n[1],si[o+2]=n[2]}let y=2*r,v=[];for(let e=0;e<2*r;e+=2)v.push((e+2)%y,e+1,e,(e+3)%y,e+1,(e+2)%y);for(let e=1;e<r-1;e++)v.push(2*(e+1),2*e,0),v.push(1,2*e+1,2*(e+1)+1);for(let e in v)v[e]+=g;v.reverse(),ri.push(...v)}xi(.075,.185,-.35,.075,.2,8,-.04,.01,4,-10,0,0),xi(-.075,.185,-.35,.075,.2,8,-.04,.01,4,-10,0,0),vi(0,.25,-.35,.05,.55,.075,.01,.01,5,-25,0,0),vi(0,.4,-.5,.05,.2,.075,.01,.01,5,20,0,0),vi(0,0,-.3,.5,.5,.075,.01,.01,6,0,0,15),vi(0,0,-.3,.5,.5,.075,.01,.01,6,0,0,45),vi(0,0,-.3,.5,.5,.075,.01,.01,6,0,0,75),yi(-.05,.2,.25,0,.15),yi(.06,.2,.17,0,.15),yi(.08,.2,0,0,.12),yi(0,.2,-.2,0,.15),yi(-.05,.2,.25,90,.15),yi(.06,.2,.17,90,.15),yi(.08,.2,0,90,.12),yi(0,.2,-.2,90,.15),yi(-.05,.2,.25,-90,.15),yi(.06,.2,.17,-90,.15),yi(.08,.2,0,-90,.12),yi(0,.2,-.2,-90,.15),yi(-.05,.2,.25,180,.15),yi(.06,.2,.17,180,.15),yi(.08,.2,0,180,.12),yi(0,.2,-.2,45,.15),yi(-.05,.2,.25,-45,.15),yi(.06,.2,.17,120,.15),yi(.08,.2,0,-120,.12),yi(0,.2,-.2,120,.15),yi(-.05,.2,.25,45,.15),yi(.06,.2,.17,-120,.15),yi(.08,.2,0,-45,.12),vi(0,.15,0,.15,.35,.35,.01,.09,8,45,0,0),vi(0,.1,0,.45,.3,.4,.1,-.025,9),vi(0,.2,.175,.45,.1,.4,.1,-.025,9),vi(.2,.1,.175,.05,.3,.4,.1,-.025,9),vi(-.2,.1,.175,.05,.3,.4,.1,-.025,9),vi(.065,.245,.075,.05,.05,.55,.01,.09,9),vi(-.065,.245,.075,.05,.05,.55,.01,.09,9),vi(.124,.2,.2495,.115,.115,.1,1e-4,1e-4,10,0,0,45),vi(-.124,.2,.2495,.115,.115,.1,1e-4,1e-4,10,0,0,45),vi(0,.1,-.42,.075,.075,.4,.01,.01,10,45,0,0),vi(-.175,.2,.225,.07,.3,.07,.01,.09,11,0,0,35),vi(.175,.2,.225,.07,.3,.07,.01,.09,11,0,0,-35),vi(0,.3,0,.2,.2,.25,.37,.09,12),xi(0,.3,.225,.1,.05,8,.37,.09,12,90,0,180),xi(0,.3,.1,.05,.1,6,.37,.09,12,90,0,180),vi(.05,.35,-.2,.06,.06,.25,.37,.09,12,-10,0,0),vi(-.05,.35,-.2,.06,.06,.25,.37,.09,12,-10,0,0),vi(0,0,.125,.55,.55,.2,.4,-.18,13),vi(0,0,.125,.55,.55,.2,.4,-.18,13),xi(0,.175,.125,.16,.05,10,.1,-.13,14),xi(0,.22,.125,.1,.05,10,.01,.09,14),xi(0,.3375,.125,.1,.0675,10,.1,-.13,14),xi(0,.35,.175,0,.25,10,.01,.02,15,0,0,0,.075),xi(0,.275,-.1,0,.25,10,.01,.02,15,-30,0,0,.075),xi(0,.2,-.3,0,.25,10,.01,.02,15,-45,0,0,.075),xi(.2,.2,.26,.1,.05,10,.01,.01,16,-90,0,0,.1,.85),xi(-.2,.2,.26,.1,.05,10,.01,.01,16,-90,0,0,.1,.85),xi(.275,.04,.15,.2,.02,10,.01,.09,17,0,0,-60,.2,.9),xi(-.275,.04,.15,.2,.02,10,.01,.09,17,0,0,60,.2,.9),vi(0,.175,-.225,.475,.2,.25,.03,.09,18),vi(0,.175,.225,.475,.2,.25,.03,.09,18),vi(0,.175,0,.475,.2,.2,.01,.01,18),xi(0,.2+.1+.02,0,.13,.04,4,.001,.001,18,0,45,0,.05),xi(0,.34,0,.05,.04,4,.001,.001,18,0,0,0,.13),vi(.225,0,.21,.05,.45,.25,.01,.09,19,0,0,0,1.25),vi(-.225,0,.21,.05,.45,.25,.01,.09,19,0,0,0,1.25),vi(0,.225,.21,.45,.05,.25,.01,.09,19,0,0,0,1.25),vi(0,-.215,.21,.45,.05,.25,.01,.09,19,0,0,0,1.25),xi(0,.25,.2,.075,.02,10,.01,.12,19,0,0,0),xi(0,.2+.1,.2,.02,.1,10,.01,.12,19,0,0,0),vi(0,.4,.2,.1,.1,.1,.01,.08,19,0,0,0,100),vi(-.085,.2,0,.05,.2,.4,.01,.01,20,20,0,10),vi(.085,.2,0,.05,.2,.4,.01,.01,20,20,0,-10),m.bindBuffer(m.ARRAY_BUFFER,de.bee.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.bee.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.bee.indexAmount=ri.length,de.frog={},de.frog.vertBuffer=m.createBuffer(),de.frog.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,.25,0,1,.5,1.5,.1,.8,.3,30,0,0),hi(0,-.17,-.28,1.05,.6,1.6,.8,.8,.4,30,0,0),hi(.5,-.5,-.2,.75,.4,1.3,.1,.8,.3,1e-5,-20,0),hi(-.5,-.5,-.2,.75,.4,1.3,.1,.8,.3,1e-5,20,0),ci(-.5,.75,-.35,.25,.45,9,.1,.8,.3,30,20,0,.25,!0,!0),ci(.5,.75,-.35,.25,.45,9,.1,.8,.3,30,-20,0,.25,!0,!0),ci(.5,.77,-.42,.2,.4,9,1,1,1,30,-20,0,.2,!0,!1),ci(-.5,.77,-.42,.2,.4,9,1,1,1,30,20,0,.2,!0,!1),hi(-.475,.77,-.42,.15,.225,.5,.05,.4,.175,30,20,10),hi(.475,.77,-.42,.15,.225,.5,.05,.4,.175,30,-20,-10),m.bindBuffer(m.ARRAY_BUFFER,de.frog.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.frog.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.frog.indexAmount=ri.length,de.giftedFrog={},de.giftedFrog.vertBuffer=m.createBuffer(),de.giftedFrog.indexBuffer=m.createBuffer(),si=[],ri=[],mi(.2,.4,.05,.05,5,5,0,.75,.25,0,.4,-.4);for(let e=0;e<si.length;e+=6){let t=vec3.rotateX([],[si[e],si[e+1],si[e+2]],[0,1,0],-60*MATH.TO_RAD);si[e]=t[0],si[e+1]=t[1],si[e+2]=t[2]}hi(0,.25,0,1,.5,1.5,.3,.4,.8,30,0,0),hi(0,-.17,-.28,1.05,.6,1.6,.405,.54,1.08,30,0,0),hi(.5,-.5,-.2,.75,.4,1.3,.3,.4,.8,1e-5,-20,0),hi(-.5,-.5,-.2,.75,.4,1.3,.3,.4,.8,1e-5,20,0),ci(-.5,.75,-.35,.25,.45,9,.3,.4,.8,30,20,0,.25,!0,!0),ci(.5,.75,-.35,.25,.45,9,.3,.4,.8,30,-20,0,.25,!0,!0),ci(.5,.77,-.42,.2,.4,9,1,1,1,30,-20,0,.2,!0,!1),ci(-.5,.77,-.42,.2,.4,9,1,1,1,30,20,0,.2,!0,!1),hi(-.475,.77,-.42,.15,.225,.5,.05,.15,.4,30,20,10),hi(.475,.77,-.42,.15,.225,.5,.05,.15,.4,30,-20,-10),m.bindBuffer(m.ARRAY_BUFFER,de.giftedFrog.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.giftedFrog.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.giftedFrog.indexAmount=ri.length,de.rhinoBeetle={},de.rhinoBeetle.vertBuffer=m.createBuffer(),de.rhinoBeetle.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,0,1,1,1.25,.025,.025,.4),hi(-.3,.65,-.8,.1,.1,1,0,0,0,30,45,0),hi(.3,.65,-.8,.1,.1,1,0,0,0,30,-45,0),hi(.65,-.5,.4,.7,.1,.1,0,0,0,1e-5,0,-30),hi(.65,-.5,-.4,.7,.1,.1,0,0,0,1e-5,0,-30),hi(-.65,-.5,.4,.7,.1,.1,0,0,0,1e-5,0,30),hi(-.65,-.5,-.4,.7,.1,.1,0,0,0,1e-5,0,30),m.bindBuffer(m.ARRAY_BUFFER,de.rhinoBeetle.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.rhinoBeetle.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.rhinoBeetle.indexAmount=ri.length,de.ladybug={},de.ladybug.vertBuffer=m.createBuffer(),de.ladybug.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,0,1,1,1.25,.7,0,0),hi(-.3,.65,-.8,.1,.1,1,0,0,0,30,45,0),hi(.3,.65,-.8,.1,.1,1,0,0,0,30,-45,0),hi(.65,-.5,.4,.7,.1,.1,0,0,0,1e-5,0,-30),hi(.65,-.5,-.4,.7,.1,.1,0,0,0,1e-5,0,-30),hi(-.65,-.5,.4,.7,.1,.1,0,0,0,1e-5,0,30),hi(-.65,-.5,-.4,.7,.1,.1,0,0,0,1e-5,0,30),m.bindBuffer(m.ARRAY_BUFFER,de.ladybug.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.ladybug.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.ladybug.indexAmount=ri.length,de.spider={},de.spider.vertBuffer=m.createBuffer(),de.spider.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,-.78,.78,.78,.78,.05,.05,.05),hi(0,0,-.13,.75*1.3,.75*1.3,.78,.05,.05,.05),hi(0,0,1.04,1.3,.9*1.3,1.625,.05,.05,.05),hi(.55,.3,-.7,.2,1.5,.2,.05,.05,.05,1e-4,0,-35),hi(1.6-.2,.375,-.7,.2,1.5,.2,.05,.05,.05,1e-4,0,45),hi(-.55,.3,-.7,.2,1.5,.2,.05,.05,.05,1e-4,0,35),hi(.2-1.6,.375,-.7,.2,1.5,.2,.05,.05,.05,1e-4,0,-45),hi(.75,.3,0,.2,1.5,.2,.05,.05,.05,1e-4,0,-35),hi(1.6,.375,0,.2,1.5,.2,.05,.05,.05,1e-4,0,45),hi(-.75,.3,0,.2,1.5,.2,.05,.05,.05,1e-4,0,35),hi(-1.6,.375,0,.2,1.5,.2,.05,.05,.05,1e-4,0,-45),hi(1.05,.3+.15,.7,.2,1.5,.2,.05,.05,.05,1e-4,0,-35),hi(1.6+.3,.525,.7,.2,1.5,.2,.05,.05,.05,1e-4,0,45),hi(-1.05,.3+.15,.7,.2,1.5,.2,.05,.05,.05,1e-4,0,35),hi(-1.6-.3,.525,.7,.2,1.5,.2,.05,.05,.05,1e-4,0,-45),hi(1.05,.6,1.5,.2,1.5,.2,.05,.05,.05,1e-4,0,-35),hi(1.6+.3,.675,1.5,.2,1.5,.2,.05,.05,.05,1e-4,0,45),hi(-1.05,.6,1.5,.2,1.5,.2,.05,.05,.05,1e-4,0,35),hi(-1.6-.3,.675,1.5,.2,1.5,.2,.05,.05,.05,1e-4,0,-45),hi(.25,.2,1.3*-.9,.1,.1,.15,.7,0,0),hi(-.25,.2,1.3*-.9,.1,.1,.15,.7,0,0),m.bindBuffer(m.ARRAY_BUFFER,de.spider.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.spider.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.spider.indexAmount=ri.length,de.werewolf={},de.werewolf.vertBuffer=m.createBuffer(),de.werewolf.indexBuffer=m.createBuffer(),si=[],ri=[],hi(-.3,2.2,-.05,.1,.1,1,.05,.05,.05),hi(.3,2.2,-.05,.1,.1,1,.05,.05,.05),hi(.2,2.3,-.05,.2,.075,1,.05,.05,.05,.001,0,30),hi(-.2,2.3,-.05,.2,.075,1,.05,.05,.05,.001,0,-30),hi(0,2,0,1,1,1,.35,.35,.35),hi(0,1,.675,1.75,1.75,.8,.35,.35,.35,-15,0,0),hi(.5,0,.5,.5,1.3,.5,.35,.35,.35,25,0,0),hi(-.5,0,.5,.5,1.3,.5,.35,.35,.35,25,0,0),hi(.5,-.7,.3,.5,.75,.5,.35,.35,.35),hi(-.5,-.7,.3,.5,.75,.5,.35,.35,.35),hi(1,1.25,.25,1.3,.5,.5,.35,.35,.35,.001,45,-20),hi(1.3,1.1,-.5,1.3,.5,.5,.35,.35,.35,.001,-85,-20),hi(-1,1.25,.25,1.3,.5,.5,.35,.35,.35,.001,-45,20),hi(-1.3,1.1,-.5,1.3,.5,.5,.35,.35,.35,.001,85,20),hi(0,1.8,-.25,.3,.3,1,.35,.35,.35,.001,0,45),hi(0,1.8,-.35,.25,.25,1,.15,.15,.15,.001,0,45),hi(.4,2.45,-.3,.5,.5,.2,.35,.35,.35,.001,0,45),hi(-.4,2.45,-.3,.5,.5,.2,.35,.35,.35,.001,0,45),hi(.4,2.45,-.35,.4,.4,.2,.15,.15,.15,.001,0,45),hi(-.4,2.45,-.35,.4,.4,.2,.15,.15,.15,.001,0,45),m.bindBuffer(m.ARRAY_BUFFER,de.werewolf.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.werewolf.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.werewolf.indexAmount=ri.length,de.mantis={},de.mantis.vertBuffer=m.createBuffer(),de.mantis.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,1,0,.75,2.5,.75,.1*.75,.7*.75,.2*.75,165,0,0),hi(.275,.25,-.5,.2,1.5,.2,.1*.75,.7*.75,.2*.75,215,0,0),hi(.275,.25,-1.2,.2,1.5,.2,.1*.75,.7*.75,.2*.75,155,0,0),hi(.275,.45,-2,.2,1.5,.2,.1*.75,.7*.75,.2*.75,235,0,0),hi(-.275,.25,-.5,.2,1.5,.2,.1*.75,.7*.75,.2*.75,215,0,0),hi(-.275,.25,-1.2,.2,1.5,.2,.1*.75,.7*.75,.2*.75,155,0,0),hi(-.275,.45,-2,.2,1.5,.2,.1*.75,.7*.75,.2*.75,235,0,0),hi(-.5,.45,0,.2,1.6,.2,.1*.75,.7*.75,.2*.75,.001,0,-40),hi(.5,.45,0,.2,1.6,.2,.1*.75,.7*.75,.2*.75,.001,0,40),hi(-.3,2.15,-.7,.2,.2,.2,.2,.5,.5),hi(.3,2.15,-.7,.2,.2,.2,.2,.5,.5),m.bindBuffer(m.ARRAY_BUFFER,de.mantis.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.mantis.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.mantis.indexAmount=ri.length,de.scorpion={},de.scorpion.vertBuffer=m.createBuffer(),de.scorpion.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,0,1,.8,1.5,.8,.1,.1),hi(.3,.25,-.75,.15,.15,.15,.05,.05,.05),hi(-.3,.25,-.75,.15,.15,.15,.05,.05,.05),hi(.5,-.25,-1,.3,.3,1,.8,.1,.1,.001,-30,0),hi(.65,-.25,-1.85,.3,.3,1,.8,.1,.1,.001,10,0),hi(-.5,-.25,-1,.3,.3,1,.8,.1,.1,.001,30,0),hi(-.65,-.25,-1.85,.3,.3,1,.8,.1,.1,.001,-10,0),hi(0,.5,1,.3,.3,1.5,.8,.1,.1,-45,0,0),hi(0,1.4,1.2,.3,.3,1.5,.8,.1,.1,-115,0,0),hi(-.2,1.9,.9,.4,.3,.6,.8,.1,.1,-45,35,-35),hi(.2,1.9,.9,.4,.3,.6,.8,.1,.1,-45,-35,35),m.bindBuffer(m.ARRAY_BUFFER,de.scorpion.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.scorpion.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.scorpion.indexAmount=ri.length,de.kingBeetle={},de.kingBeetle.vertBuffer=m.createBuffer(),de.kingBeetle.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,0,1,1,1.25,10,0,0),hi(-.3,.65,-.8,.1,.1,1,10,10,0,30,45,0),hi(.3,.65,-.8,.1,.1,1,10,10,0,30,-45,0),hi(.65,-.5,.4,.7,.1,.1,0,10,0,1e-5,0,-30),hi(.65,-.5,-.4,.7,.1,.1,0,10,0,1e-5,0,-30),hi(-.65,-.5,.4,.7,.1,.1,0,10,0,1e-5,0,30),hi(-.65,-.5,-.4,.7,.1,.1,0,10,0,1e-5,0,30),m.bindBuffer(m.ARRAY_BUFFER,de.kingBeetle.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.kingBeetle.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.kingBeetle.indexAmount=ri.length,de.tunnelBear={},de.tunnelBear.vertBuffer=m.createBuffer(),de.tunnelBear.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,0,1.5,2,.8,0,0,0),hi(-.4,-1.2,0,.75,1.4,.8,0,0,0,.01,0,-10),hi(.4,-1.2,0,.75,1.4,.8,0,0,0,.01,0,10),hi(.9,1.6-1.5,0,.75,1.5,.8,0,0,0,.01,0,40),hi(-.9,1.6-1.5,0,.75,1.5,.8,0,0,0,.01,0,-40),hi(0,2.8-1.5,0,1.6,1.6,.8,0,0,0),ci(-.7,2,0,.5,.8,10,0,0,0),ci(.7,2,0,.5,.8,10,0,0,0),m.bindBuffer(m.ARRAY_BUFFER,de.tunnelBear.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.tunnelBear.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.tunnelBear.indexAmount=ri.length,de.mechsquito={},de.mechsquito.vertBuffer=m.createBuffer(),de.mechsquito.indexBuffer=m.createBuffer(),si=[],ri=[],_s=MATH.icosphere(1),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)_s.verts[e]*=1.1,_s.verts[e+1]*=1.1,_s.verts[e+2]*=1.1,si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2],.1,.1,.1);for(let e in _s.index)ri.push(_s.index[e]+_vl);_s=MATH.icosphere(1),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)_s.verts[e]*=.45,_s.verts[e+1]*=.45,_s.verts[e+2]*=.45,_s.verts[e]-=.2,_s.verts[e+1]+=.15,_s.verts[e+2]-=.35,si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2],10,0,0);for(let e in _s.index)ri.push(_s.index[e]+_vl);_s=MATH.icosphere(1),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)_s.verts[e]*=.45,_s.verts[e+1]*=.45,_s.verts[e+2]*=.45,_s.verts[e]+=.2,_s.verts[e+1]+=.15,_s.verts[e+2]-=.35,si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2],10,0,0);for(let e in _s.index)ri.push(_s.index[e]+_vl);hi(0,-.1,-.6,.1,.1,1,.12,.12,.12,-5,0,45),ci(.7,0,.7,.6,.1,10,0,10,0,90,0,0),ci(-.7,0,.7,.6,.1,10,0,10,0,90,0,0),m.bindBuffer(m.ARRAY_BUFFER,de.mechsquito.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.mechsquito.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.mechsquito.indexAmount=ri.length,de.megaMechsquito={},de.megaMechsquito.vertBuffer=m.createBuffer(),de.megaMechsquito.indexBuffer=m.createBuffer(),si=[],ri=[],_s=MATH.icosphere(1),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)_s.verts[e]*=1.1,_s.verts[e+1]*=1.1,_s.verts[e+2]*=1.1,si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2],.1,.1,.1);for(let e in _s.index)ri.push(_s.index[e]+_vl);_s=MATH.icosphere(1),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2]+.75,.1,.1,.1);for(let e in _s.index)ri.push(_s.index[e]+_vl);_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2]+1.5,.1,.1,.1);for(let e in _s.index)ri.push(_s.index[e]+_vl);_s=MATH.icosphere(1),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)_s.verts[e]*=.45,_s.verts[e+1]*=.45,_s.verts[e+2]*=.45,_s.verts[e]-=.2,_s.verts[e+1]+=.15,_s.verts[e+2]-=.35,si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2],10,0,0);for(let e in _s.index)ri.push(_s.index[e]+_vl);_s=MATH.icosphere(1),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)_s.verts[e]*=.45,_s.verts[e+1]*=.45,_s.verts[e+2]*=.45,_s.verts[e]+=.2,_s.verts[e+1]+=.15,_s.verts[e+2]-=.35,si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2],10,0,0);for(let e in _s.index)ri.push(_s.index[e]+_vl);hi(0,-.1,-.6,.1,.1,1,.12,.12,.12,-5,0,45),hi(.4,.4,-.15,.1,1,.1,.12,.12,.12,35,45,0),hi(-.4,.4,-.15,.1,1,.1,.12,.12,.12,35,-45,0),ci(.75,0,.75,.7,.1,10,0,10,0,90,0,0),ci(-.75,0,.75,.7,.1,10,0,10,0,90,0,0),ci(0,0,1.5,.7,.2,10,.2,.2,.2),m.bindBuffer(m.ARRAY_BUFFER,de.megaMechsquito.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.megaMechsquito.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.megaMechsquito.indexAmount=ri.length,de.cogmower={},de.cogmower.vertBuffer=m.createBuffer(),de.cogmower.indexBuffer=m.createBuffer(),si=[],ri=[],_s=MATH.icosphere(1),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)_s.verts[e]*=1.75,_s.verts[e+1]*=1.75,_s.verts[e+2]*=1.75,si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2],.85,.85,.9);for(let e in _s.index)ri.push(_s.index[e]+_vl);ci(0,0,0,1.15,.2,10,10,0,0,90,0,0),ci(0,0,0,1.05,.35,10,.5,.7,.7,90,0,0),hi(0,0,0,2.75,.35,.5,.5,.75,.8,.001,0,0),hi(0,0,0,2.75,.35,.5,.5,.75,.8,.001,60,0),hi(0,0,0,2.75,.35,.5,.5,.75,.8,.001,120,0),m.bindBuffer(m.ARRAY_BUFFER,de.cogmower.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.cogmower.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.cogmower.indexAmount=ri.length,de.goldenCogmower={},de.goldenCogmower.vertBuffer=m.createBuffer(),de.goldenCogmower.indexBuffer=m.createBuffer(),si=[],ri=[],_s=MATH.icosphere(1),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)_s.verts[e]*=1.75,_s.verts[e+1]*=1.75,_s.verts[e+2]*=1.75,si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2],.9,.85,.2);for(let e in _s.index)ri.push(_s.index[e]+_vl);ci(0,0,0,1.15,.2,10,10,10,0,90,0,0),ci(0,0,0,1.05,.35,10,.75,.7,.1,90,0,0),hi(0,0,0,2.75,.35,.5,.75,.7,.1,.001,0,0),hi(0,0,0,2.75,.35,.5,.75,.7,.1,.001,60,0),hi(0,0,0,2.75,.35,.5,.75,.7,.1,.001,120,0),m.bindBuffer(m.ARRAY_BUFFER,de.goldenCogmower.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.goldenCogmower.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.goldenCogmower.indexAmount=ri.length,de.cogTurret={},de.cogTurret.vertBuffer=m.createBuffer(),de.cogTurret.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,0,0,1.2,.25,6,.38,.38,.4275,.001,0,30),hi(0,0,0,2.75,.6,.25,.4,.4,.45,.001,0,0),hi(0,0,0,2.75,.6,.25,.4,.4,.45,.001,0,60),hi(0,0,0,2.75,.6,.25,.4,.4,.45,.001,0,120),ci(0,0,0,1.2,.4,6,.38,.38,.4275,.001,90,0),hi(0,0,0,.4,2.75,.6,.4,.4,.45,.001,0,0),hi(0,0,0,.4,2.75,.6,.4,.4,.45,60,0,0),hi(0,0,0,.4,2.75,.6,.4,.4,.45,120,0,0),ci(0,-.5,0,.75,2,10,.7,.7,.7,90,0,0),ci(0,-.25,0,.8,.25,10,.9,.9,.9,90,0,0),ci(0,.15,0,.8,.25,10,.9,.9,.9,90,0,0),ci(-.4,.15,.2,.1,.7,10,10,0,0,.001,120,0),ci(-.4,.15,-.2,.1,.7,10,10,0,0,.001,60,0),m.bindBuffer(m.ARRAY_BUFFER,de.cogTurret.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.cogTurret.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.cogTurret.indexAmount=ri.length,de.cog={},de.cog.vertBuffer=m.createBuffer(),de.cog.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,0,0,1.05,1.5,10,10,0,0,90,0,0),hi(0,0,0,2.75,1.5,.5,10,0,0,.001,0,0),hi(0,0,0,2.75,1.5,.5,10,0,0,.001,60,0),hi(0,0,0,2.75,1.5,.5,10,0,0,.001,120,0),m.bindBuffer(m.ARRAY_BUFFER,de.cog.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.cog.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.cog.indexAmount=ri.length,de.puffshroom={},de.puffshroom.vertBuffer=m.createBuffer(),de.puffshroom.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,.2,-.2,.3,.4,8,.8,.7,.5,-90,0,0,.33),ci(0,.525,.02-.2,.27,.3,8,.8,.7,.5,-84,0,0,.3),ci(0,.7+.09,-.13,.21,.3,8,.8,.7,.5,-76,0,0,.27),ci(0,1.015,.12-.2,.65,.45,8,.5,.4,.2,-80,0,0,.75),ci(0,1.4,.19-.2,.4,.35,8,.5,.4,.2,-80,0,0,.65),ci(0,1.027+.37+.225,.03,.15,.1,8,.5,.4,.2,-80,0,0,.4),m.bindBuffer(m.ARRAY_BUFFER,de.puffshroom.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.puffshroom.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.puffshroom.indexAmount=ri.length,de.rarePuffshroom={},de.rarePuffshroom.vertBuffer=m.createBuffer(),de.rarePuffshroom.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,.2,-.2,.3,.4,8,.9,.9,.95,-90,0,0,.33),ci(0,.525,.02-.2,.27,.3,8,.9,.9,.95,-84,0,0,.3),ci(0,.7+.09,-.13,.21,.3,8,.9,.9,.95,-76,0,0,.27),ci(0,1.015,.12-.2,.65,.45,8,.75,.75,.8,-80,0,0,.75),ci(0,1.4,.19-.2,.4,.35,8,.75,.75,.8,-80,0,0,.65),ci(0,1.027+.37+.225,.03,.15,.1,8,.75,.75,.8,-80,0,0,.4),m.bindBuffer(m.ARRAY_BUFFER,de.rarePuffshroom.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.rarePuffshroom.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.rarePuffshroom.indexAmount=ri.length,de.epicPuffshroom={},de.epicPuffshroom.vertBuffer=m.createBuffer(),de.epicPuffshroom.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,.2,-.2,.3,.4,8,1,.9,.5,-90,0,0,.33),ci(0,.525,.02-.2,.27,.3,8,1,.9,.5,-84,0,0,.3),ci(0,.7+.09,-.13,.21,.3,8,1,.9,.5,-76,0,0,.27),ci(0,1.015,.12-.2,.65,.45,8,1,.9,.1,-80,0,0,.75),ci(0,1.4,.19-.2,.4,.35,8,1,.9,.1,-80,0,0,.65),ci(0,1.027+.37+.225,.03,.15,.1,8,1,.9,.1,-80,0,0,.4),m.bindBuffer(m.ARRAY_BUFFER,de.epicPuffshroom.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.epicPuffshroom.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.epicPuffshroom.indexAmount=ri.length,de.legendaryPuffshroom={},de.legendaryPuffshroom.vertBuffer=m.createBuffer(),de.legendaryPuffshroom.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,.2,-.2,.3,.4,8,.8,1,1,-90,0,0,.33),ci(0,.525,.02-.2,.27,.3,8,.8,1,1,-84,0,0,.3),ci(0,.7+.09,-.13,.21,.3,8,.8,1,1,-76,0,0,.27),ci(0,1.015,.12-.2,.65,.45,8,.2,1,1,-80,0,0,.75),ci(0,1.4,.19-.2,.4,.35,8,.2,1,1,-80,0,0,.65),ci(0,1.027+.37+.225,.03,.15,.1,8,.2,1,1,-80,0,0,.4),m.bindBuffer(m.ARRAY_BUFFER,de.legendaryPuffshroom.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.legendaryPuffshroom.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.legendaryPuffshroom.indexAmount=ri.length,de.mythicPuffshroom={},de.mythicPuffshroom.vertBuffer=m.createBuffer(),de.mythicPuffshroom.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,.2,-.2,.3,.4,8,.9,.5,1,-90,0,0,.33),ci(0,.525,.02-.2,.27,.3,8,.9,.5,1,-84,0,0,.3),ci(0,.7+.09,-.13,.21,.3,8,.9,.5,1,-76,0,0,.27),ci(0,1.015,.12-.2,.65,.45,8,.8,.3,1,-80,0,0,.75),ci(0,1.4,.19-.2,.4,.35,8,.8,.3,1,-80,0,0,.65),ci(0,1.027+.37+.225,.03,.15,.1,8,.8,.3,1,-80,0,0,.4),m.bindBuffer(m.ARRAY_BUFFER,de.mythicPuffshroom.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.mythicPuffshroom.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.mythicPuffshroom.indexAmount=ri.length,de.mondoChick={},de.mondoChick.vertBuffer=m.createBuffer(),de.mondoChick.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,.85,0,1.2,.5,10,.9,.9,.9,-90,0,0,1.5,!0,!0,!0),ci(0,1.35,0,.7,.5,10,.9,.9,.9,-90,0,0,1.2,!0,!0,!0),ci(0,1.85-.15,0,.2,.2,10,.9,.9,.9,-90,0,0,.7,!0,!0,!0);for(let e=0;e<si.length;e+=6){let t=vec3.rotateX([],[si[e],si[e+1],si[e+2]],MATH.ORIGIN,.3);si[e]=t[0],si[e+1]=t[1],si[e+2]=t[2]}ci(0,-.85,0,1.5,.5,10,.9,.9,.9,-90,0,0,1.2,!0,!0,!0),ci(0,-1.35,0,1.2,.5,10,.9,.9,.9,-90,0,0,.7,!0,!0,!0),ci(0,.15-1.85,0,.7,.2,10,.8,.8,.8,-90,0,0,.2,!0,!0,!0);for(let e=0;e<si.length;e+=6)si[e]*=1.2,si[e+1]*=1.2,si[e+2]*=1.2;ci(0,.075,-.8,.15,.4,10,1,.5,0,.001,90,0),hi(0,0,0,1.5,1.5,1.5,1,1,.6,15,0,0),hi(.9,0,0,.2,.5,.75,1.2,0,0,15,20,0),hi(-.9,0,0,.2,.5,.75,0,0,1.2,15,-20,0),hi(.5,-2,-.4,1,.1,2,1,.5,.1,.001,-30,0),hi(-.5,-2,-.4,1,.1,2,1,.5,.1,.001,30,0),_s=MATH.icosphere(1),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)_s.verts[e]*=.175,_s.verts[e+1]*=.175,_s.verts[e+2]*=.175,_s.verts[e+2]-=.7,_s.verts[e+1]+=.4,_s.verts[e]+=.3,si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2],0,0,0);for(let e in _s.index)ri.push(_s.index[e]+_vl);_s=MATH.icosphere(1),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)_s.verts[e]*=.175,_s.verts[e+1]*=.175,_s.verts[e+2]*=.175,_s.verts[e+2]-=.7,_s.verts[e+1]+=.4,_s.verts[e]-=.3,si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2],0,0,0);for(let e in _s.index)ri.push(_s.index[e]+_vl);m.bindBuffer(m.ARRAY_BUFFER,de.mondoChick.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.mondoChick.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.mondoChick.indexAmount=ri.length,de.coconutCrab={},de.coconutCrab.vertBuffer=m.createBuffer(),de.coconutCrab.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,1,0,1.75,1.75,1.75,.8,.7,.55,-8,0,0),hi(0,1.6,.3,1.25,1.5,1.5,.6,.6,.65,13,0,0),hi(.4,2.4,.7,.25,1,.25,.8,.7,.55,14,0,-8),hi(-.4,2.4,.7,.25,1,.25,.8,.7,.55,14,0,8),hi(-.475,2.9,.825,.3,.45,.3,10,0,0,14,0,8),hi(.475,2.9,.825,.3,.45,.3,10,0,0,14,0,-8),hi(-1.2,1,.1,.5,1.75,.5,.6,.6,.65,.001,0,60),hi(-2.5,1,.1,.5,1.75,.5,.6,.6,.65,.001,0,-60),hi(-1.2,1,.5,.5,1.75,.5,.6,.6,.65,30,0,40),hi(-2,1,1.3,.5,1.75,.5,.6,.6,.65,-30,0,-40),hi(-1.2,1,-.2,.5,1.75,.5,.6,.6,.65,-30,0,50),hi(-2.1,1,-1,.5,1.75,.5,.6,.6,.65,30,0,-50),hi(1.2,1,.1,.5,1.75,.5,.6,.6,.65,.001,0,-60),hi(2.5,1,.1,.5,1.75,.5,.6,.6,.65,.001,0,60),hi(1.2,1,.5,.5,1.75,.5,.6,.6,.65,30,0,-40),hi(2,1,1.3,.5,1.75,.5,.6,.6,.65,-30,0,40),hi(1.2,1,-.2,.5,1.75,.5,.6,.6,.65,-30,0,-50),hi(2.1,1,-1,.5,1.75,.5,.6,.6,.65,30,0,50),_s=MATH.icosphere(2),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)_s.verts[e]*=3.5,_s.verts[e+1]*=3.5,_s.verts[e+2]*=3.5,_s.verts[e+1]+=1.5,_s.verts[e+2]-=2,si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2],.48,.41,.19);for(let e in _s.index)ri.push(_s.index[e]+_vl);m.bindBuffer(m.ARRAY_BUFFER,de.coconutCrab.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.coconutCrab.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.coconutCrab.indexAmount=ri.length,de.crabClaw={},de.crabClaw.vertBuffer=m.createBuffer(),de.crabClaw.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,-3.5,1,1,9,.8,.7,.55),hi(.4,0,1,1.1,1.1,1,.6,.6,.65,.01,45,0),hi(-.4,0,1,1.1,1.1,1,.6,.6,.65,.01,-45,0),m.bindBuffer(m.ARRAY_BUFFER,de.crabClaw.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.crabClaw.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.crabClaw.indexAmount=ri.length,de.stumpSnail={},de.stumpSnail.vertBuffer=m.createBuffer(),de.stumpSnail.indexBuffer=m.createBuffer(),si=[],ri=[],_s=MATH.icosphere(2),_vl=si.length/6;for(let e=0;e<_s.verts.length;e+=3)_s.verts[e]*=2.5,_s.verts[e+1]*=4,_s.verts[e+2]*=6,si.push(_s.verts[e],_s.verts[e+1],_s.verts[e+2]-2.5,.3,.7,.4);for(let e in _s.index)ri.push(_s.index[e]+_vl);ci(0,2.75,-3.5,2,2,15,.4,.3,.1,.001,90,0),ci(0,2.75,-3.5,1.5,2.1,15,.4*.9,.27,.1*.9,.001,90,0),ci(0,2.75,-3.5,1.35,2.2,15,.4,.3,.1,.001,90,0),ci(0,2.75,-3.5,.8,2.3,15,.4*.9,.27,.1*.9,.001,90,0),ci(0,2.75,-3.5,.65,2.4,15,.4,.3,.1,.001,90,0),hi(-.475,2,0,.2,.25,.2,1,0,0,24,0,8),hi(.475,2,0,.2,.25,.2,1,0,0,24,0,-8),hi(-.4,1.5,2.275-2.5,.15,1,.15,.3,.7,.4,24,0,8),hi(.4,1.5,2.275-2.5,.15,1,.15,.3,.7,.4,24,0,-8),m.bindBuffer(m.ARRAY_BUFFER,de.stumpSnail.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.stumpSnail.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.stumpSnail.indexAmount=ri.length,de.ant={},de.ant.vertBuffer=m.createBuffer(),de.ant.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,0,1,1,1.25,.05,.05,.05),hi(-.3,.65,-.8,.1,.1,1,0,0,0,30,45,0),hi(.3,.65,-.8,.1,.1,1,0,0,0,30,-45,0),hi(.65,-.5,.4,.7,.1,.1,0,0,0,1e-5,0,-30),hi(.65,-.5,-.4,.7,.1,.1,0,0,0,1e-5,0,-30),hi(-.65,-.5,.4,.7,.1,.1,0,0,0,1e-5,0,30),hi(-.65,-.5,-.4,.7,.1,.1,0,0,0,1e-5,0,30),m.bindBuffer(m.ARRAY_BUFFER,de.ant.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.ant.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.ant.indexAmount=ri.length,de.armyAnt={},de.armyAnt.vertBuffer=m.createBuffer(),de.armyAnt.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,0,1,1,1.25,.05,.05,.05),hi(-.3,.65,-.8,.1,.1,1,0,0,0,30,45,0),hi(.3,.65,-.8,.1,.1,1,0,0,0,30,-45,0),hi(.65,-.5,.4,.7,.1,.1,0,0,0,1e-5,0,-30),hi(.65,-.5,-.4,.7,.1,.1,0,0,0,1e-5,0,-30),hi(-.65,-.5,.4,.7,.1,.1,0,0,0,1e-5,0,30),hi(-.65,-.5,-.4,.7,.1,.1,0,0,0,1e-5,0,30),ci(0,.6,-.25,.45,.3,10,0,.7,0,-90,0,0),m.bindBuffer(m.ARRAY_BUFFER,de.armyAnt.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.armyAnt.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.armyAnt.indexAmount=ri.length,de.flyingAnt={},de.flyingAnt.vertBuffer=m.createBuffer(),de.flyingAnt.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,0,1,1,1.25,.05,.05,.05),hi(-.3,.65,-.8,.1,.1,1,0,0,0,30,45,0),hi(.3,.65,-.8,.1,.1,1,0,0,0,30,-45,0),hi(.65,-.5,.4,.7,.1,.1,0,0,0,1e-5,0,-30),hi(.65,-.5,-.4,.7,.1,.1,0,0,0,1e-5,0,-30),hi(-.65,-.5,.4,.7,.1,.1,0,0,0,1e-5,0,30),hi(-.65,-.5,-.4,.7,.1,.1,0,0,0,1e-5,0,30),hi(-.2,.5,.35,.95,.05,1.25,.5,.6,.8,1e-5,-40,0),hi(.2,.5,.35,.95,.05,1.25,.5,.6,.8,1e-5,40,0),m.bindBuffer(m.ARRAY_BUFFER,de.flyingAnt.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.flyingAnt.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.flyingAnt.indexAmount=ri.length,de.fireAnt={},de.fireAnt.vertBuffer=m.createBuffer(),de.fireAnt.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,0,1,1,1.25,1,.05,.05),hi(-.3,.65,-.8,.1,.1,1,.8,0,0,30,45,0),hi(.3,.65,-.8,.1,.1,1,.8,0,0,30,-45,0),hi(.65,-.5,.4,.7,.1,.1,.8,0,0,1e-5,0,-30),hi(.65,-.5,-.4,.7,.1,.1,.8,0,0,1e-5,0,-30),hi(-.65,-.5,.4,.7,.1,.1,.8,0,0,1e-5,0,30),hi(-.65,-.5,-.4,.7,.1,.1,.8,0,0,1e-5,0,30),m.bindBuffer(m.ARRAY_BUFFER,de.fireAnt.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.fireAnt.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.fireAnt.indexAmount=ri.length,de.petalShuriken={},de.petalShuriken.vertBuffer=m.createBuffer(),de.petalShuriken.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,-.6,.8,.05,.8,.8,.8,.8,360,45,0,.75,1,1),hi(0,0,.6,.8,.05,.8,.8,.8,.8,360,45,0,.75,1,1),hi(-.6,0,0,.8,.05,.8,.8,.8,.8,360,45,0,1,1,.75),hi(.6,0,0,.8,.05,.8,.8,.8,.8,360,45,0,1,1,.75),hi(0,0,0,.6,.075,.6,.9,.7,0),hi(0,0,0,.6,.075,.6,.9,.7,0,360,45,0),m.bindBuffer(m.ARRAY_BUFFER,de.petalShuriken.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.petalShuriken.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.petalShuriken.indexAmount=ri.length,de.lawnMower={},de.lawnMower.vertBuffer=m.createBuffer(),de.lawnMower.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,0,4,1,3,.8,.1,.1),hi(0,0,0,3,2.5,2.25,.5,.5,.5),hi(-3,1.5,1.25,3,.2,.2,.6,.6,.6,1e-5,0,-50),hi(-3,1.5,-1.25,3,.2,.2,.6,.6,.6,1e-5,0,-50),hi(-3-1.5*o.cos(-50*MATH.TO_RAD),1.5-1.5*o.sin(-50*MATH.TO_RAD),0,.2,.2,2.5,.6,.6,.6,1e-5,0,-50),m.bindBuffer(m.ARRAY_BUFFER,de.lawnMower.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.lawnMower.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.lawnMower.indexAmount=ri.length,de.lawnMowerWarning={},de.lawnMowerWarning.vertBuffer=m.createBuffer(),de.lawnMowerWarning.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,0,.51,5.01,10/3+.01,100,0,0),m.bindBuffer(m.ARRAY_BUFFER,de.lawnMowerWarning.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.lawnMowerWarning.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.lawnMowerWarning.indexAmount=ri.length,de.popStar={},de.popStar.vertBuffer=m.createBuffer(),de.popStar.indexBuffer=m.createBuffer(),si=[],ri=[],mi(.75,1.3,.15,.45,.5,1.5,3),m.bindBuffer(m.ARRAY_BUFFER,de.popStar.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.popStar.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.popStar.indexAmount=ri.length,de.scorchingStar={},de.scorchingStar.vertBuffer=m.createBuffer(),de.scorchingStar.indexBuffer=m.createBuffer(),si=[],ri=[],mi(.75,1.3,.15,.45,.9,0,0,0,1),m.bindBuffer(m.ARRAY_BUFFER,de.scorchingStar.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.scorchingStar.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.scorchingStar.indexAmount=ri.length,de.gummyStar={},de.gummyStar.vertBuffer=m.createBuffer(),de.gummyStar.indexBuffer=m.createBuffer(),si=[],ri=[],mi(.75,1.3,.15,.45,0,0,0,0,1);let Ai=[],Ti=[.1,1,.5],wi=[1,.2,1];for(let e=0;e<si.length;e+=6)vec3.lerp(Ai,Ti,wi,.5*si[e]+.5),si[e+3]=Ai[0],si[e+4]=Ai[1],si[e+5]=Ai[2];m.bindBuffer(m.ARRAY_BUFFER,de.gummyStar.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.gummyStar.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.gummyStar.indexAmount=ri.length,de.starSaw={},de.starSaw.vertBuffer=m.createBuffer(),de.starSaw.indexBuffer=m.createBuffer(),si=[],ri=[],mi(.75,1.3,.15,.25,1,1,1,.2,.8);for(let e=0;e<si.length;e+=6){let t=vec3.rotateX([],[si[e],si[e+1],si[e+2]],MATH.ORIGIN,MATH.HALF_PI);si[e]=t[0],si[e+1]=t[1],si[e+2]=t[2]}m.bindBuffer(m.ARRAY_BUFFER,de.starSaw.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.starSaw.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.starSaw.indexAmount=ri.length,de.guidingStar={},de.guidingStar.vertBuffer=m.createBuffer(),de.guidingStar.indexBuffer=m.createBuffer(),si=[],ri=[],mi(.75,1.3,.075,.2,3.5,1.75,0);for(let e=0;e<si.length;e+=6){let t=vec3.rotateX([],[si[e],si[e+1],si[e+2]],MATH.ORIGIN,.75*MATH.HALF_PI);si[e]=t[0],si[e+1]=t[1],si[e+2]=t[2]}m.bindBuffer(m.ARRAY_BUFFER,de.guidingStar.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.guidingStar.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.guidingStar.indexAmount=ri.length,de.levitatingStarShower={},de.levitatingStarShower.vertBuffer=m.createBuffer(),de.levitatingStarShower.indexBuffer=m.createBuffer(),si=[],ri=[],mi(.75,1.3,.15,.15,100,100,2);for(let e=0;e<si.length;e+=6){let t=vec3.rotateX([],[si[e],si[e+1],si[e+2]],MATH.ORIGIN,-MATH.HALF_PI);si[e]=t[0],si[e+1]=t[1],si[e+2]=t[2]}m.bindBuffer(m.ARRAY_BUFFER,de.levitatingStarShower.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.levitatingStarShower.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.levitatingStarShower.indexAmount=ri.length,de.fallingStar={},de.fallingStar.vertBuffer=m.createBuffer(),de.fallingStar.indexBuffer=m.createBuffer(),si=[],ri=[],mi(.6,1,.05,.15,100,100,0),m.bindBuffer(m.ARRAY_BUFFER,de.fallingStar.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.fallingStar.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.fallingStar.indexAmount=ri.length,de.wave={},de.wave.vertBuffer=m.createBuffer(),de.wave.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,1,0,1,.1,1,.2,.4,1,30,0,0),hi(0,.5,.4,1,.3,1,.2,.4,1,60,0,0),hi(0,-.1,.6,1,.5,1,.2,.4,1,80,0,0),hi(0,-.8,.6,1,.7,1.3,.2,.4,1,90,0,0),m.bindBuffer(m.ARRAY_BUFFER,de.wave.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.wave.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.wave.indexAmount=ri.length,de.gummyBall={},de.gummyBall.vertBuffer=m.createBuffer(),de.gummyBall.indexBuffer=m.createBuffer(),si=[],ri=[];let Bi=MATH.icosphere(2),Ii=Bi.verts;for(let e=0;e<Ii.length;e+=3){let t=.9*(vec3.dot([Ii[e],Ii[e+1],Ii[e+2]],dt)+1);si.push(Ii[e],Ii[e+1],Ii[e+2],t,.2*t,t)}ri.push(...Bi.index),m.bindBuffer(m.ARRAY_BUFFER,de.gummyBall.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.gummyBall.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.gummyBall.indexAmount=ri.length,de.drainingDiamond={},de.drainingDiamond.vertBuffer=m.createBuffer(),de.drainingDiamond.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,0,0,1,1.25,10,.3,.7,1,-90,0,0,0,!0,!1),ci(0,.875,0,.6,.5,10,.3,.7,1,-90,0,0,1,!1,!0),m.bindBuffer(m.ARRAY_BUFFER,de.drainingDiamond.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.drainingDiamond.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.drainingDiamond.indexAmount=ri.length,de.shiningDiamond={},de.shiningDiamond.vertBuffer=m.createBuffer(),de.shiningDiamond.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,0,0,1,1.25,10,100,100,100,-90,0,0,0,!0,!1,!1),ci(0,.875,0,.6,.5,10,100,100,100,-90,0,0,1,!1,!0,!1),m.bindBuffer(m.ARRAY_BUFFER,de.shiningDiamond.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.shiningDiamond.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.shiningDiamond.indexAmount=ri.length,de.tornado={},de.tornado.vertBuffer=m.createBuffer(),de.tornado.indexBuffer=m.createBuffer(),si=[],ri=[];for(let e=7;e>=0;e--)ci(o.sin(.5*e),e,o.cos(.5*e),.5*e+1,1,10,.7,.7,.7,-90,0,0,.5*e+1,!0,!0);m.bindBuffer(m.ARRAY_BUFFER,de.tornado.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.tornado.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.tornado.indexAmount=ri.length,de.tornado_red={},de.tornado_red.vertBuffer=m.createBuffer(),de.tornado_red.indexBuffer=m.createBuffer(),si=[],ri=[];for(let e=7;e>=0;e--)ci(o.sin(.5*e),e,o.cos(.5*e),.5*e+1,1,10,1,.05,.05,-90,0,0,.5*e+1,!0,!0);m.bindBuffer(m.ARRAY_BUFFER,de.tornado_red.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.tornado_red.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.tornado_red.indexAmount=ri.length,de.scratch={},de.scratch.vertBuffer=m.createBuffer(),de.scratch.indexBuffer=m.createBuffer(),si=[],ri=[],hi(-2,1,-.5,.75,.75,3,.7,.7,.7,0,0,0),hi(-2,.5,1,.75,1.75,.75,.7,.7,.7,0,0,0),hi(2,1,-.5,.75,.75,3,.7,.7,.7,0,0,0),hi(2,.5,1,.75,1.75,.75,.7,.7,.7,0,0,0),hi(0,1,-.5,.75,.75,3,.7,.7,.7,0,0,0),hi(0,.5,1,.75,1.75,.75,.7,.7,.7,0,0,0),m.bindBuffer(m.ARRAY_BUFFER,de.scratch.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.scratch.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.scratch.indexAmount=ri.length,de.goldenRakeScratch={},de.goldenRakeScratch.vertBuffer=m.createBuffer(),de.goldenRakeScratch.indexBuffer=m.createBuffer(),si=[],ri=[],hi(-2,1,-1.5,.75,.75,5,1,1,.35,0,0,0),hi(-2,.5,1,.75,1.75,.75,1.1,1.1,.35,0,0,0),hi(2,1,-1.5,.75,.75,5,1.1,1.1,.35,0,0,0),hi(2,.5,1,.75,1.75,.75,1.1,1.1,.35,0,0,0),hi(0,1,-1.5,.75,.75,5,1.1,1.1,.35,0,0,0),hi(0,.5,1,.75,1.75,.75,1.1,1.1,.35,0,0,0),m.bindBuffer(m.ARRAY_BUFFER,de.goldenRakeScratch.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.goldenRakeScratch.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.goldenRakeScratch.indexAmount=ri.length,de.paperPlanter={},de.paperPlanter.vertBuffer=m.createBuffer(),de.paperPlanter.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,0,0,1.1,3,1.1,1,.7,.3),hi(0,0,0,1,3.05,1,.35,.7*.35,.105),hi(.275,.7,0,.85,.1,1.11,.6,.42,.18,.001,0,45),hi(-.275,.7,0,.85,.1,1.11,.6,.42,.18,.001,0,-45),m.bindBuffer(m.ARRAY_BUFFER,de.paperPlanter.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.paperPlanter.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.paperPlanter.indexAmount=ri.length,de.candyPlanter={},de.candyPlanter.vertBuffer=m.createBuffer(),de.candyPlanter.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,0,0,.75,1,10,1,.4,1,-90,0,0,.45,!0,!0,!0),ci(0,.8,0,.75,.8,10,1,.4,1,-90,0,0,.75,!0,!0,!0),ci(0,1,0,.89,.4,10,1,.4,1,-90,0,0,.89,!0,!0,!0),ci(0,1.01,0,.65,.4,10,.35,.7*.35,.105,-90,0,0,.65,!0,!0,!0),ci(0,.2,0,.7,.1,10,1,1,1,-90,0,0,.7,!0,!0,!0),ci(0,.45,0,.8,.1,10,1,1,1,-90,0,0,.8,!0,!0,!0),ci(0,.7,0,.8,.1,10,1,1,1,-90,0,0,.8,!0,!0,!0);for(let e=0,t=0;e<MATH.TWO_PI;e+=.1*MATH.TWO_PI,t++)ci(.87*o.sin(e),1,.87*o.cos(e),.1,.1,10,...[[.9,.9,0],[0,.9,0],[0,0,.9],[.9,0,0]][t%4],.001,e*MATH.TO_DEG,0,.1,!0,!0,!0);m.bindBuffer(m.ARRAY_BUFFER,de.candyPlanter.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.candyPlanter.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.candyPlanter.indexAmount=ri.length,de.plasticPlanter={},de.plasticPlanter.vertBuffer=m.createBuffer(),de.plasticPlanter.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,0,0,.75,1,10,1,.8,.4,-90,0,0,.45,!0,!0,!0),ci(0,.8,0,.75,.8,10,1,.8,.4,-90,0,0,.75,!0,!0,!0),ci(0,1,0,.89,.4,10,1,.8,.4,-90,0,0,.89,!0,!0,!0),ci(0,1.01,0,.65,.4,10,.35,.7*.35,.105,-90,0,0,.65,!0,!0,!0),m.bindBuffer(m.ARRAY_BUFFER,de.plasticPlanter.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.plasticPlanter.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.plasticPlanter.indexAmount=ri.length,de.pesticidePlanter={},de.pesticidePlanter.vertBuffer=m.createBuffer(),de.pesticidePlanter.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,-.375,0,.8,.75,10,0,.65,0,-90,0,0,.35,!0,!0,!0),ci(0,.375,0,.35,.75,10,0,.65,0,-90,0,0,.8,!0,!0,!0),ci(0,.375,0,.7,.75,10,0,.65,0,-90,0,0,.3,!0,!0,!0),ci(0,1.125,0,.3,.75,10,0,.65,0,-90,0,0,.7,!0,!0,!0),ci(0,.75,0,.25,1.51,10,.9,.9,0,0,0,0,.25,!0,!0,!0),ci(0,.75,0,.25,1.51,10,.9,.9,0,.001,90,0,.25,!0,!0,!0),ci(0,.75,0,.075,1.515,10,0,0,0,0,0,0,.075,!0,!0,!0),ci(0,.75,0,.075,1.515,10,0,0,0,.001,90,0,.075,!0,!0,!0),ci(0,.9,0,.05,1.515,10,0,0,0,0,0,0,.05,!0,!0,!0),ci(0,.9,0,.05,1.515,10,0,0,0,.001,90,0,.05,!0,!0,!0),ci(.15,.665,0,.05,1.515,10,0,0,0,0,0,0,.05,!0,!0,!0),ci(0,.665,.15,.05,1.515,10,0,0,0,.001,90,0,.05,!0,!0,!0),ci(-.15,.665,0,.05,1.515,10,0,0,0,0,0,0,.05,!0,!0,!0),ci(0,.7,-.15,.05,1.515,10,0,0,0,.001,90,0,.05,!0,!0,!0),ci(0,0,0,.27,3.1,10,.35,.7*.35,.105,-90,0,0,.27,!0,!0,!0),m.bindBuffer(m.ARRAY_BUFFER,de.pesticidePlanter.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.pesticidePlanter.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.pesticidePlanter.indexAmount=ri.length,de.redClayPlanter={},de.redClayPlanter.vertBuffer=m.createBuffer(),de.redClayPlanter.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,0,0,.75,1,10,.75,0,0,-90,0,0,.5,!0,!0,!0),ci(0,.8,0,.75,.8,10,.75,0,0,-90,0,0,.75,!0,!0,!0),ci(0,1,0,.89,.4,10,.75,0,0,-90,0,0,.89,!0,!0,!0),ci(0,1.01,0,.65,.4,10,.35,.7*.35,.105,-90,0,0,.65,!0,!0,!0);for(let e=0;e<MATH.TWO_PI;e+=.1*MATH.TWO_PI)ci(.725*o.sin(e),.5,.725*o.cos(e),.075,.1,10,.4,0,0,.001,e*MATH.TO_DEG,0,.1,!0,!0,!0);m.bindBuffer(m.ARRAY_BUFFER,de.redClayPlanter.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.redClayPlanter.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.redClayPlanter.indexAmount=ri.length,de.blueClayPlanter={},de.blueClayPlanter.vertBuffer=m.createBuffer(),de.blueClayPlanter.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,0,0,.75,1,10,0,0,.75,-90,0,0,.5,!0,!0,!0),ci(0,.8,0,.75,.8,10,0,0,.75,-90,0,0,.75,!0,!0,!0),ci(0,1,0,.89,.4,10,0,0,.75,-90,0,0,.89,!0,!0,!0),ci(0,1.01,0,.65,.4,10,.35,.7*.35,.105,-90,0,0,.65,!0,!0,!0);for(let e=0;e<MATH.TWO_PI;e+=.1*MATH.TWO_PI)ci(.725*o.sin(e),.5,.725*o.cos(e),.075,.1,10,0,0,.4,.001,e*MATH.TO_DEG,0,.1,!0,!0,!0);m.bindBuffer(m.ARRAY_BUFFER,de.blueClayPlanter.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.blueClayPlanter.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.blueClayPlanter.indexAmount=ri.length,de.tackyPlanter={},de.tackyPlanter.vertBuffer=m.createBuffer(),de.tackyPlanter.indexBuffer=m.createBuffer(),si=[],ri=[];let Ei=MATH.icosphere(1);for(let e=0;e<Ei.verts.length;e+=3)si.push(1.75*Ei.verts[e],1.75*Ei.verts[e+1]+.25,1.75*Ei.verts[e+2],.4*(.2*Ei.verts[e+1]+.8),1.1*(.2*Ei.verts[e+1]+.8),.4*(.2*Ei.verts[e+1]+.8));ri.push(...Ei.index),ci(0,1,0,.825,.4,10,.8,.8,.8,-90,0,0,.825,!0,!0,!0),ci(0,1.01,0,.65,.4,10,.35,.7*.35,.105,-90,0,0,.65,!0,!0,!0),ci(0,.25,0,.92,.1,10,.1,.1,.8,45,0,0,.92,!0,!0,!0),ci(0,.25,0,.92,.1,10,.8,.4,.1,-45,0,0,.92,!0,!0,!0),ci(0,.25,0,.92,.1,10,.1,.1,.8,45,0,90,.92,!0,!0,!0),ci(0,.25,0,.92,.1,10,.8,.4,.1,-45,0,90,.92,!0,!0,!0);for(let e=0;e<MATH.TWO_PI;e+=.2*MATH.TWO_PI)ci(.88*o.sin(e),.25,.88*o.cos(e),.15,.1,10,.75,0,0,.001,e*MATH.TO_DEG,0,.1,!0,!0,!0);for(let e=0;e<MATH.TWO_PI;e+=.2*MATH.TWO_PI)hi(.825*o.sin(e),1,.825*o.cos(e),.3,.4,.1,.8,.8,0,.01,e*MATH.TO_DEG,0);m.bindBuffer(m.ARRAY_BUFFER,de.tackyPlanter.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.tackyPlanter.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.tackyPlanter.indexAmount=ri.length,de.petalPlanter={},de.petalPlanter.vertBuffer=m.createBuffer(),de.petalPlanter.indexBuffer=m.createBuffer(),si=[],ri=[];for(let e=0;e<Ei.verts.length;e+=3)si.push(1.75*Ei.verts[e],1.75*Ei.verts[e+1]+.25,1.75*Ei.verts[e+2],1*(.2*Ei.verts[e+1]+.8),1*(.2*Ei.verts[e+1]+.8),.5*(.2*Ei.verts[e+1]+.8));for(let e=0;e<MATH.TWO_PI;e+=.166667*MATH.TWO_PI)hi(.925*o.sin(e),1,.925*o.cos(e),1,.1,.85,.85,.85,.85,45,e*MATH.TO_DEG,0);ri.push(...Ei.index),ci(0,1,0,.825,.4,10,.8,.8,.8,-90,0,0,.825,!0,!0,!0),ci(0,1.01,0,.65,.4,10,.35,.7*.35,.105,-90,0,0,.65,!0,!0,!0);for(let e=0,t=0;e<MATH.TWO_PI;e+=.25*MATH.TWO_PI,t++)ci(.875*o.sin(e),.25,.875*o.cos(e),.25,.1,10,...[[.9,.9,0],[0,.9,0]][t%2],.001,e*MATH.TO_DEG,0,.25,!0,!0,!0);m.bindBuffer(m.ARRAY_BUFFER,de.petalPlanter.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.petalPlanter.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.petalPlanter.indexAmount=ri.length,de.plentyPlanter={},de.plentyPlanter.vertBuffer=m.createBuffer(),de.plentyPlanter.indexBuffer=m.createBuffer(),si=[],ri=[];for(let e=0;e<Ei.verts.length;e+=3)si.push(1.75*Ei.verts[e],1.75*Ei.verts[e+1]+1.5,1.75*Ei.verts[e+2],1*(.2*Ei.verts[e+1]+.8),.75*(.2*Ei.verts[e+1]+.8),.1*(.2*Ei.verts[e+1]+.8));ri.push(...Ei.index),ci(0,-.2,0,.3,.6,9,1,.75,.1,-90,0,0,.6,!0,!0,!0),ci(0,1,0,.2,2,9,1,.75,.1,-90,0,0,.3,!0,!0,!0),ci(0,2.25,0,.8,.3,10,.1,.425,.8,-90,0,0,.8,!0,!0,!0),ci(0,2.26,0,.65,.3,10,.35,.7*.35,.105,-90,0,0,.65,!0,!0,!0),hi(0,1.25,0,2.25,.15,.15,1,.75,.1),hi(0,1.75,0,2.25,.15,.15,1,.75,.1),hi(1.05,1.5,0,.15,.4,.15,1,.75,.1),hi(-1.05,1.5,0,.15,.5,.15,1,.75,.1),ci(0,1.5,.05,.95,.1,10,.9,0,0,-90,0,-10,.95,!0,!0,!0),ci(0,1.5,-.05,.95,.1,10,0,0,.9,-90,0,10,.95,!0,!0,!0),m.bindBuffer(m.ARRAY_BUFFER,de.plentyPlanter.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.plentyPlanter.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.plentyPlanter.indexAmount=ri.length,de.spike={},de.spike.vertBuffer=m.createBuffer(),de.spike.indexBuffer=m.createBuffer(),si=[],ri=[],ci(0,0,0,0,10,10,1.2,1.2,1.2,-90,0,0,.7,!0,!0,!0),m.bindBuffer(m.ARRAY_BUFFER,de.spike.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.spike.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.spike.indexAmount=ri.length,de.basicSprout={},de.basicSprout.vertBuffer=m.createBuffer(),de.basicSprout.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,.5,0,.5,2,.5,.1,.5,.1),hi(-.1,2,0,.4,1,.4,.1,.5,.1,.01,32,8),hi(-.5,2.5,1,1.5,.2,1.5,.1,.5,.1,.01,32,-15),hi(0,2.5,-1.25,1.75,.2,1.75,.1,.5,.1,.01,35,5),m.bindBuffer(m.ARRAY_BUFFER,de.basicSprout.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.basicSprout.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.basicSprout.indexAmount=ri.length,de.rareSprout={},de.rareSprout.vertBuffer=m.createBuffer(),de.rareSprout.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,.5,0,.5,2,.5,.6,.6,.6),hi(-.1,2,0,.4,1,.4,.6,.6,.6,.01,32,8),hi(-.5,2.5,1,1.5,.2,1.5,.6,.6,.6,.01,32,-15),hi(0,2.5,-1.25,1.75,.2,1.75,.6,.6,.6,.01,35,5),m.bindBuffer(m.ARRAY_BUFFER,de.rareSprout.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.rareSprout.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.rareSprout.indexAmount=ri.length,de.epicSprout={},de.epicSprout.vertBuffer=m.createBuffer(),de.epicSprout.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,.5,0,.5,2,.5,.9,.765,0),hi(-.1,2,0,.4,1,.4,.9,.765,0,.01,32,8),hi(-.5,2.5,1,1.5,.2,1.5,.9,.765,0,.01,32,-15),hi(0,2.5,-1.25,1.75,.2,1.75,.9,.765,0,.01,35,5),m.bindBuffer(m.ARRAY_BUFFER,de.epicSprout.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.epicSprout.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.epicSprout.indexAmount=ri.length,de.legendarySprout={},de.legendarySprout.vertBuffer=m.createBuffer(),de.legendarySprout.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,.5,0,.5,2,.5,0,.7,.9),hi(-.1,2,0,.4,1,.4,0,.7,.9,.01,32,8),hi(-.5,2.5,1,1.5,.2,1.5,0,.7,.9,.01,32,-15),hi(0,2.5,-1.25,1.75,.2,1.75,0,.7,.9,.01,35,5),m.bindBuffer(m.ARRAY_BUFFER,de.legendarySprout.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.legendarySprout.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.legendarySprout.indexAmount=ri.length,de.supremeSprout={},de.supremeSprout.vertBuffer=m.createBuffer(),de.supremeSprout.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,.5,0,.5,2,.5,0,10,0),hi(-.1,2,0,.4,1,.4,0,10,0,.01,32,8),hi(-.5,2.5,1,1.5,.2,1.5,0,10,0,.01,32,-15),hi(0,2.5,-1.25,1.75,.2,1.75,0,10,0,.01,35,5),m.bindBuffer(m.ARRAY_BUFFER,de.supremeSprout.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.supremeSprout.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.supremeSprout.indexAmount=ri.length,de.gummySprout={},de.gummySprout.vertBuffer=m.createBuffer(),de.gummySprout.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,.5,0,.5,2,.5,1,.4,1),hi(-.1,2,0,.4,1,.4,1,.4,1,.01,32,8),hi(-.5,2.5,1,1.5,.2,1.5,1,.4,1,.01,32,-15),hi(0,2.5,-1.25,1.75,.2,1.75,1,.4,1,.01,35,5),m.bindBuffer(m.ARRAY_BUFFER,de.gummySprout.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.gummySprout.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.gummySprout.indexAmount=ri.length,de.moonSprout={},de.moonSprout.vertBuffer=m.createBuffer(),de.moonSprout.indexBuffer=m.createBuffer(),si=[],ri=[],hi(0,.5,0,.5,2,.5,.7,.9,100),hi(-.1,2,0,.4,1,.4,.7,.9,100,.01,32,8),hi(-.5,2.5,1,1.5,.2,1.5,.7,.9,100,.01,32,-15),hi(0,2.5,-1.25,1.75,.2,1.75,.7,.9,100,.01,35,5),m.bindBuffer(m.ARRAY_BUFFER,de.moonSprout.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(si),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.moonSprout.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(ri),m.STATIC_DRAW),de.moonSprout.indexAmount=ri.length,g.createdMesh=(I?"box(23,-1,2,1,1,1,false,[1,0,1],false,false);box(23,-1,4,1,1,1,false,[1,0,0],false,false);box(23,-1,6,1,1,1,false,[0,0,1],false,false);box(23,-1,8,1,1,1,false,[1,1,1],false,false);box(23,-1,10,1,1,1,false,[1,1,0],false,false);box(19,-1,10,1,1,1,false,[1,1,0],false,false);box(17,-1,10,1,1,1,false,[1,1,1],false,false);box(15,-1,10,1,1,1,false,[1,1,1],false,false);box(13,-1,10,1,1,1,false,[1,1,1],false,false);box(11,-1,10,1,1,1,false,[1,1,1],false,false);":"")+window.mapMesh;let ki=new _t(!0);function Pi(){ki.setMeshFromFunction((function(e,t,i,o,n,s,r){Object.constructor("box","a","cylinder","sphere","d","e","star","INFO",g.createdMesh)(e,t,i,o,n,s,r,g.restrictionInfo)})),ki.setBuffers()}Pi();let Si={},Mi=.25,_i=-1/1024;si=[],ri=[];let Ri=0;function Fi(e,t,i){Si[e][i]||(Si[e][i]=[]);let o=ti[e].y,n=ti[e].getColor(),s=ti[e].getLevel();Si[e][i][t]={x:t,z:i,color:n,level:s,ogLevel:s,height:1,id:Ri++,y:o,goo:0,gooColor:gt(.2*t+10*ti[e].x,.2*i+10*ti[e].z)<.49?-1:1,pollinationTimer:1,puffshrooms:[]};let r,a,l=si.length/8,d=.5*Si[e][i][t].height,h=Si[e][i][t].level,m=Si[e][i][t].goo*Si[e][i][t].gooColor;switch(Si[e][i][t].color){case"red":1===h?(r=0,a=0):2===h?(r=.75,a=0):3===h?(r=.5,a=.25):4===h?(r=.25,a=.5):h>=5&&(r=0,a=.75);break;case"blue":1===h?(r=.25,a=0):2===h?(r=0,a=.25):3===h?(r=.75,a=.25):4===h?(r=.5,a=.5):h>=5&&(r=.25,a=.75);break;case"white":1===h?(r=.5,a=0):2===h?(r=.25,a=.25):3===h?(r=0,a=.5):4===h?(r=.75,a=.5):h>=5&&(r=.5,a=.75)}t+=ti[e].x,i+=ti[e].z,si.push(t-.5,o+d,i-.5,_i+r,_i+a,1,1,m,t+.5,o+d,i-.5,Mi+r,_i+a,1,1,m,t+.5,o+d,i+.5,Mi+r,Mi+a,1,1,m,t-.5,o+d,i+.5,_i+r,Mi+a,1,1,m,t-.5,o,i-.5,0,0,1,-1e4,0,t+.5,o,i-.5,0,0,1,-1e4,0,t+.5,o,i+.5,0,0,1,-1e4,0,t-.5,o,i+.5,0,0,1,-1e4,0),ri.push(l+2,l+1,l,l+3,l+2,l,l+6,l+5,l+2,l+7,l+6,l+2,l+1,l+5,l+4,l,l+1,l+4,l+3,l+7,l+2,l+4,l+3,l,l+3,l+4,l+7,l+1,l+2,l+5)}function Ci(e,t,i,n,s,r,a){n(Si[e][i][t]),Si[e][i][t].height=MATH.constrain(Si[e][i][t].height,0,1);let l=64*Si[e][i][t].id;if(d=!0,s){let n=Si[e][i][t].y+o.max(.5*Si[e][i][t].height,.05);Si.mesh.verts[l+1]=n,Si.mesh.verts[l+9]=n,Si.mesh.verts[l+17]=n,Si.mesh.verts[l+25]=n,n=o.max(Si[e][i][t].height,0),Si.mesh.verts[l+5]=n,Si.mesh.verts[l+13]=n,Si.mesh.verts[l+21]=n,Si.mesh.verts[l+29]=n}if(r){let o=Si[e][i][t].goo*Si[e][i][t].gooColor*.7;Si.mesh.verts[l+7]=o,Si.mesh.verts[l+15]=o,Si.mesh.verts[l+23]=o,Si.mesh.verts[l+31]=o}if(a){let o,n,s=Si[e][i][t].level;switch(Si[e][i][t].color){case"red":1===s?(o=0,n=0):2===s?(o=.75,n=0):3===s?(o=.5,n=.25):4===s?(o=.25,n=.5):s>=5&&(o=0,n=.75);break;case"blue":1===s?(o=.25,n=0):2===s?(o=0,n=.25):3===s?(o=.75,n=.25):4===s?(o=.5,n=.5):s>=5&&(o=.25,n=.75);break;case"white":1===s?(o=.5,n=0):2===s?(o=.25,n=.25):3===s?(o=0,n=.5):4===s?(o=.75,n=.5):s>=5&&(o=.5,n=.75)}Si.mesh.verts[l+3]=_i+o,Si.mesh.verts[l+4]=_i+n,Si.mesh.verts[l+11]=Mi+o,Si.mesh.verts[l+12]=_i+n,Si.mesh.verts[l+19]=Mi+o,Si.mesh.verts[l+20]=Mi+n,Si.mesh.verts[l+27]=_i+o,Si.mesh.verts[l+28]=Mi+n}}function Hi(e){if(g.pollen>=g.capacity||e.pattern.length<1)return 0;let t=ti[e.field||g.fieldIn],i=e.x,n=e.z,s={r:0,b:0,w:0},r=e.stackHeight||.425,a={r:e.alwaysCrit||o.random()<g.criticalChance?o.random()<g.superCritChance?2:1:0,b:e.alwaysCrit||o.random()<g.criticalChance?o.random()<g.superCritChance?2:1:0,w:e.alwaysCrit||o.random()<g.criticalChance?o.random()<g.superCritChance?2:1:0},l="number"==typeof e.amount?{r:e.amount,b:e.amount,w:e.amount}:e.amount,d=e.pattern,h={r:0,b:0,w:0},m=e.multiplier?"number"==typeof e.multiplier?{r:e.multiplier,b:e.multiplier,w:e.multiplier}:e.multiplier:{r:1,b:1,w:1},c=0,u=0,p=e.yOffset||2;m.r*=g.redPollen*(0===a.r?1:1===a.r?g.criticalPower:g.criticalPower*g.superCritPower),m.b*=g.bluePollen*(0===a.b?1:1===a.b?g.criticalPower:g.criticalPower*g.superCritPower),m.w*=g.whitePollen*(0===a.w?1:1===a.w?g.criticalPower:g.criticalPower*g.superCritPower);let f={r:e.instantConversion?(g.instantRedConversion-1)*e.instantConversion+1:g.instantRedConversion,b:e.instantConversion?(g.instantBlueConversion-1)*e.instantConversion+1:g.instantBlueConversion,w:e.instantConversion?(g.instantWhiteConversion-1)*e.instantConversion+1:g.instantWhiteConversion};function b(t){let i=o.min(l[t.color[0]],100*t.height),n=.01*i;if(t.height-=o.min(e.depleteAll?t.height:n/(.2*(t.level-1)+1),t.height),i*=m[t.color[0]],i*=t.level,t.goo&&(i*=g.goo,u+=i,e.isGummyBaller&&(g.addEffect("gummyBall",.45*t.goo/180),t.goo*=.5)),e.replenish&&(t.height+=e.replenish),e.gooTrail&&(t.goo=1),t.balloon&&(i*="blue"===t.color?1.2:1.1,i*=t.balloon.golden?1.05:1,t.balloon.pollen+=i,h[t.color[0]]+=i*(1-f[t.color[0]])),t.puffshrooms.length){for(let e in t.puffshrooms)t.puffshrooms[e].pollen+=i;h[t.color[0]]+=i*(1-f[t.color[0]])}else s[t.color[0]]+=i}f.r=2===a.r?1:f.r,f.w=2===a.w?1:f.w,f.b=2===a.b?1:f.b;for(let o in d){let s=d[o],r=i+s[0],a=n+s[1];r>=0&&r<t.width&&a>=0&&a<t.length&&Ci(e.field||g.fieldIn,r,a,b,!0,e.gooTrail||e.isGummyBaller,!1)}if(s.r=o.round(s.r),s.b=o.round(s.b),s.w=o.round(s.w),h.r=o.round(h.r),h.b=o.round(h.b),h.w=o.round(h.w),u=o.round(u),g.extraInfo.enablePollenText){let o=[];if((s.w||h.w)&&o.push({c:"white",v:s.w+h.w}),(s.r||h.r)&&o.push({c:"red",v:s.r+h.r}),(s.b||h.b)&&o.push({c:"blue",v:s.b+h.b}),o[1]&&o[0].v>o[1].v){let e=o[0];o[0]=o[1],o[1]=e}if(o[2]&&o[0].v>o[2].v){let e=o[0];o[0]=o[2],o[2]=e}if(o[1]&&o[2]&&o[1].v>o[2].v){let e=o[1];o[1]=o[2],o[2]=e}for(let s in o)Kt.add(o[s].v,e.otherPos?[e.otherPos[0],e.otherPos[1]+p+r*s,e.otherPos[2]]:[t.x+i,t.y+p+r*s+.3*(o[s].v+"").length,t.z+n],ae[o[s].c+"Arr"],a[o[s].c[0]])}c=s.r*f.r+s.b*f.b+s.w*f.w,g.pollen=o.min(g.pollen+o.ceil(s.w+s.r+s.b-c),g.capacity),c=o.ceil((c+.1*u)*g.honeyPerPollen),g.honey+=c,c&&g.extraInfo.enablePollenText&&Kt.add(c,[g.body.position.x,g.body.position.y+.8*p+.4+.75*o.random(),g.body.position.z],ae.honey,0,"+",.85),g.stats.redPollen+=s.r+h.r,g.stats.bluePollen+=s.b+h.b,g.stats.whitePollen+=s.w+h.w,g.stats.goo+=u;let y=s.r+s.b+s.w+h.r+h.b+h.w;return g.stats["pollenFrom"+(e.field||g.fieldIn)]+=y,g.stats.pollen+=y,y}function Di(e,t,i,o,n,s,r,a,l,d){g.stats["pollenFrom"+e]=0,ti[e]={x:t,y:i,z:o,width:n,length:s,getColor:r,getLevel:a,haze:{},generalColorComp:l,nectarType:d+"Nectar",degration:0,corruption:0},Si[e]=[];for(let t=0;t<n;t++)for(let i=0;i<s;i++)Fi(e,t,i)}Di("CoconutField",25,12.5,-39.5,17,14,(function(){o.random();return o.random()<.1?o.random()<.4?"blue":"red":"white"}),(function(){return 3}),{w:.9,b:.04,r:.06},"refreshing"),Di("PepperPatch",61,20.5,-44,15,15,(function(){o.random();return o.random()<.1?"white":"red"}),(function(){return 3}),{b:0,r:.9,w:.1},"invigorating"),Di("RoseField",31,2,31.5,18,13,(function(){o.random();return o.random()<.12?"white":"red"}),(function(){return o.random()<.5?3:o.random()<.12?1:2}),{r:.88,w:.12,b:0},"motivating"),Di("PineTreeForest",31,12.5,74,14,19,(function(){o.random();return o.random()<.1?"white":"blue"}),(function(){return o.random()<.46?3:o.random()<.6?1:2}),{w:.1,b:.9,r:0},"comforting"),Di("PumpkinPatch",4,12.5,76.5,18,12,(function(){o.random();return o.random()<.57?"white":o.random()<.52?"red":"blue"}),(function(){return o.random()<.76?3:2}),{w:.57,r:.52*(1-.57),b:.48*(1-.57)},"satisfying"),Di("CactusField",4,12.5,63.5,18,11,(function(){o.random();return o.random()<.06?"white":o.random()<.58?"blue":"red"}),(function(){return o.random()<.56?3:2}),{w:.06,b:.94*.58,r:.3948},"invigorating"),Di("MountainTopField",-35,33,73,15,15,(function(){o.random();return o.random()<.5?"red":"blue"}),(function(){return 3}),{r:.5,b:.5,w:0},"invigorating"),Di("SunflowerField",15.5,-1.5,16,11,18,(function(){o.random();return o.random()>.7?o.random()<.4?"blue":"red":"white"}),(function(){return o.random()<.1?2:1}),{w:.7,b:.15,r:.15},"satisfying"),Di("MushroomField",-6,-1.5,29,19,13,(function(){o.random();return o.random()<.69?"red":"white"}),(function(){return o.random()<.9?1:2}),{w:.31,b:0,r:.69},"motivating"),Di("StrawberryField",6,2,47.5,15,15,(function(){o.random();return o.random()<.69?"red":"white"}),(function(){return o.random()<.04?3:o.random()<.8?2:1}),{w:.31,b:0,r:.69},"refreshing"),Di("SpiderField",-18.5,2,48.5,17,13,(function(){o.random();return"white"}),(function(){return o.random()<.8?2:o.random()<.5?3:1}),{w:1,b:0,r:0},"motivating"),Di("BambooField",-52,2,50.375,21,12,(function(){o.random();return o.random()<.25?"white":"blue"}),(function(){return o.random()<.75?2:o.random()<.25?3:1}),{w:.25,b:.75,r:0},"comforting"),Di("PineapplePatch",-71.5,12.5,79,19,14,(function(){o.random();return o.random()<.89?"white":o.random()>.56?"blue":"red"}),(function(){return o.random()<.5?2:o.random()<.38?1:3}),{w:.89,b:.05,r:.06},"satisfying"),Di("StumpField",-102.5,16,74.5,16,16,(function(){o.random();return o.random()<.8?"blue":o.random()>.2?"white":"red"}),(function(){return 3}),{w:.15,b:.8,r:.05},"motivating"),Di("BlueFlowerField",-55,-1.5,29,24,13,(function(){o.random();return o.random()<.69?"blue":"white"}),(function(){return o.random()<.89?1:2}),{w:.31,r:0,b:.69},"refreshing"),Di("CloverField",-50,4,8.5,18,18,(function(){o.random();return o.random()<.32?"white":o.random()<.5?"blue":"red"}),(function(){return o.random()<.51?1:2}),{w:.32,r:.34,b:.34},"invigorating"),Di("DandelionField",-15,-1.5,7,19,13,(function(){o.random();return o.random()<.85?"white":o.random()<.366?"blue":"red"}),(function(){return o.random()<.871?1:2}),{w:.85,r:.05,b:.1},"comforting"),Di("AntField",-29.5,5.5,-59,18,12,(function(){o.random();return o.random()<.333333?"white":o.random()<.5?"blue":"red"}),(function(){return 1}),{w:.33333,r:.33333,b:.33333}),Si.mesh={},Si.mesh.vertBuffer=m.createBuffer(),Si.mesh.indexBuffer=m.createBuffer(),Si.mesh.verts=si,Si.mesh.index=ri,Si.mesh.indexAmount=ri.length,m.bindBuffer(m.ARRAY_BUFFER,Si.mesh.vertBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(Si.mesh.verts),m.DYNAMIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,Si.mesh.indexBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Uint16Array.from(Si.mesh.index),m.DYNAMIC_DRAW);for(let e=0;e<25;e++)g.addSlot(null);if(g.updateHive(),g.updateGear(),I){let e=0;for(let t in se)t.indexOf("Planter")>-1||(le.tokens.push(new oi(1e4,[e%9-2,-1,(e/9|0)-7],t,1e5)),e++);le.tokens.push(new oi(1e4,[0,1,0],"honey",1e14))}if(u.textAlign="center",u.textBaseline="middle",window.thisProgramIsInFullScreen?(document.getElementById("UIBar").style.display="none",document.getElementById("honeyAndPollenAmount").style.display="none",document.getElementById("abilityUI").style.display="none"):document.getElementById("meshCreator").style.display="none",document.getElementById("runMeshStr").onclick=function(){if(!window.thisProgramIsInFullScreen){let e=document.getElementById("meshStr");return e.select(),document.execCommand("copy"),e.setSelectionRange(0,0),void(document.getElementById("meshCreator").style.display="none")}g.createdMesh=document.getElementById("meshStr").value,Pi(),ki.setBuffers();let e=document.getElementById("meshStr");e.select(),document.execCommand("copy"),e.setSelectionRange(0,0)},document.getElementById("meshStr").value=g.createdMesh,g.updateHive(),window.functionToRunOnBeequipClick=function(e){for(let t in g.currentGear.beequips)g.currentGear.beequips[t].id===e&&(g.beequipLookingAt=Number(t));g.updateBeequipPage()},window.exitBeequipLooking=function(e){g.beequipDragging=!1,g.beequipLookingAt=!1,g.updateBeequipPage()},window.selectBeequip=function(){g.beequipDragging=g.currentGear.beequips[g.beequipLookingAt],g.updateBeequipPage()},window.deleteBeequip=function(){g.currentGear.beequips[g.beequipLookingAt].bee&&(g.hive[g.currentGear.beequips[g.beequipLookingAt].bee[1]][g.currentGear.beequips[g.beequipLookingAt].bee[0]].beequip=null),g.currentGear.beequips.splice(g.beequipLookingAt,1),g.beequipDragging=!1,g.beequipLookingAt=!1,g.updateBeequipPage(),g.updateHive()},u.textAlign="center",u.textBaseline="middle",t.saveCode)!function(e){let t=e;e="";for(let i=0;i<t.length;i++){let o=["","","ะ","๐","๑","๒","๓","๔","๕","๖","๗","๘","๙","ก","ง","ข","น","า","ว","อ","ล","ค","ย","ๆ","ม","จ","ธ","ฐ","ฎ","ฮ","พ","ถ","เ","ใ","บ","ป","ศ","ห","ฉ","โ","฿","ร"].indexOf(t[i+1]);o<2?(o=1,e+=t[i].repeat(o)):(e+=t[i].repeat(o),i++)}let i,o=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];t=e,e="";for(let i in t){let n=o.indexOf(t[i]);e+=n>-1?o[(n+o.length-18)%o.length]:t[i]}t=e,e="";for(let i=0;i<t.length;i+=2)i+1<t.length&&(e+=t[i+1]+t[i]);"{"!==(e=(e=e.split("").reverse().join("")).replaceAll("Φ",".").replaceAll("δ","-").replaceAll("∂",'"').replaceAll("∩","]").replaceAll("⩒","}").replaceAll("π"," ").replaceAll("ω",",").replaceAll("×","false").replaceAll("ž","true").replaceAll("±","null").replaceAll("€","Field").replaceAll("‡","ToTheWindShrine").replaceAll("ø","Tokens").replaceAll("ÿ","Puffshrooms").replaceAll("ö",',"').replaceAll("ç",'":').replaceAll("þ",'":0,"').replaceAll("Þ","},{").replaceAll("£",'"type":').replaceAll("•",'"gifted":').replaceAll("⁑",'"bond":').replaceAll("ξ",'"pollen').replaceAll("←","invigorating").replaceAll("↑","comforting").replaceAll("→","satisfying").replaceAll("↓","motivating").replaceAll("↔","refreshing").replaceAll("∀","Nectar").replaceAll("÷","hoursOf").replaceAll("õ","minutesOf").replaceAll("ô","Amulet").replaceAll("Θ","Bear"))[0]&&(e="{"+e);try{i=JSON.parse(e)}catch(e){return void alert("\nSave code is invalid! The save code may contain other errors not detected by this program.\n\nAn empty new game will now be loaded.")}g.extraInfo=i.extraInfo,g.honey=i.honey,g.pollen=i.pollen,g.currentGear=i.currentGear,g.hive=[[]],g.quests=i.quests,g.isCrafting=i.isCrafting,T=i.TIME,g.hiveBalloon=i.hiveBalloon,g.discoveredBees=i.discoveredBees,g.discoveredGifteds=i.discoveredGifteds;for(let e in i.stats)g.stats[e]=i.stats[e];let n={};for(let e in g.quests)n[g.quests[e].NPC]=!0;for(let e in i.items)se[e].amount=i.items[e];for(let e in jt)for(let t in jt[e].items)jt[e].items[t].owned=i.owned[jt[e].items[t].name],"item"!==jt[e].items[t].slot||jt[e].items[t].owned||(jt[e].items[t].amountPurchased=0|i.amountPurchased[jt[e].items[t].name]);for(let e in i.hive){g.hive[e]||(g.hive[e]=[]);for(let t in i.hive[e]){let o=i.hive[e][t];g.addSlot(o.type,o.gifted,o.bond,o.mutation,o.radioactive,o.beequip)}}for(let e in $)i.passives[e]&&($[e].startVal=i.passives[e].startVal,$[e].currentCooldown=i.passives[e].currentCooldown);for(let e in i.hotbar)i.hotbar[e]&&(g.itemDragging=i.hotbar[e],G[e].onmousedown());g.updateInventory(),g.updateGear(),g.updateHive();for(let e in i.effects)null===i.effects[e].cooldown&&(i.effects[e].cooldown=1/0),g.effects.push(i.effects[e]),$[i.effects[e].type].svg.style.display="inline";for(let e in b)"roboBear"!==e&&(b[e].dialogueIndex=i.NPCs[e].index,b[e].seed=i.NPCs[e].seed,b[e].portionsDone=i.NPCs[e].portionsDone,b[e].translatored=i.NPCs[e].translatored,b[e].activeQuest=n[e]);for(let e in i.degration)ti[e].degration=i.degration[e];for(let e in i.planters)le.planters.push(new $e(i.planters[e].type,i.planters[e].field,i.planters[e].x,i.planters[e].z,i.planters[e].growth,i.planters[e].glistering))}(t.saveCode);else{se.basicEgg.amount=1,g.updateInventory();let e=["Welcome to Bee Swarm Simulator!",5e3,"Click the egg icon on the bar on","the left to open your inventory!",4e3,"Click on the Basic Egg to select it!",4e3,"Hover your mouse over a hive slot","and click to hatch it!",4e3,"Collect pollen in fields with your bee!",4e3,"After filling up your bag, stand near","your hive to convert the pollen into honey!",4e3,"Use honey to buy more bee eggs and new tools!",5e3,"Talk to bears and complete their quests!",3e3,"Have fun!"],t=1e3;for(let i in e)"number"==typeof e[i]?t+=e[i]:window.setTimeout((function(){g.addMessage(e[i],[35,75,255])}),t)}function Li(){let e=function(){let e={};e.extraInfo=g.extraInfo,e.honey=g.honey,e.pollen=g.pollen,e.hive=[],e.items={},e.owned={},e.amountPurchased={},e.currentGear=g.currentGear,e.effects=g.effects.slice(),e.passives={},e.NPCs={},e.hotbar=[],e.quests=g.quests,e.isCrafting=g.isCrafting,e.TIME=o.ceil(T),e.hiveBalloon=g.hiveBalloon,e.stats={},e.discoveredBees=g.discoveredBees,e.discoveredGifteds=g.discoveredGifteds,e.degration={},e.planters=[];for(let t in ti)ti[t].degration&&(e.degration[t]=ti[t].degration);for(let t in le.planters)e.planters.push({field:le.planters[t].field,x:le.planters[t].x,z:le.planters[t].z,growth:0|le.planters[t].growth,type:le.planters[t].type,glistering:le.planters[t].glistering});for(let t in g.stats)g.stats[t]&&(e.stats[t]=g.stats[t]);for(let t in G)e.hotbar.push(G[t].itemType);let t=[];for(let i=e.effects.length;i--;)e.effects[i].cooldown=o.ceil(e.effects[i].cooldown),e.effects[i].type.indexOf("Passive")>-1?(t.push(e.effects[i].type),e.effects.splice(i,1)):(e.effects[i].type.indexOf("Aura")>-1||"roboChallengeBuff"===e.effects[i].type||"antChallenge"===e.effects[i].type)&&e.effects.splice(i,1);for(let i in $)t.indexOf(i)>-1&&(e.passives[i]={startVal:$[i].startVal,currentCooldown:o.ceil($[i].currentCooldown)});for(let t in se)se[t].amount&&(e.items[t]=se[t].amount);for(let t in g.hive){e.hive[t]||(e.hive[t]=[]);for(let i in g.hive[t]){let o=g.hive[t][i];e.hive[t][i]={type:o.type,gifted:o.gifted,bond:o.bond,mutation:o.mutation,radioactive:o.radioactive,beequip:o.beequip}}}for(let t in jt)for(let i in jt[t].items)e.owned[jt[t].items[i].name]=jt[t].items[i].owned,jt[t].items[i].amountPurchased&&!jt[t].items[i].owned&&(e.amountPurchased[jt[t].items[i].name]=jt[t].items[i].amountPurchased);for(let t in b)"roboBear"!==t&&(e.NPCs[t]={index:b[t].dialogueIndex},e.NPCs[t].seed=b[t].seed,e.NPCs[t].translatored=b[t].translatored,e.NPCs[t].portionsDone=b[t].portionsDone);let i=JSON.stringify(e);i=i.replaceAll("Bear","Θ").replaceAll("Amulet","ô").replaceAll("minutesOf","õ").replaceAll("hoursOf","÷").replaceAll("Nectar","∀").replaceAll("refreshing","↔").replaceAll("motivating","↓").replaceAll("satisfying","→").replaceAll("comforting","↑").replaceAll("invigorating","←").replaceAll('"pollen',"ξ").replaceAll('"bond":',"⁑").replaceAll('"gifted":',"•").replaceAll('"type":',"£").replaceAll("},{","Þ").replaceAll('":0,"',"þ").replaceAll('":',"ç").replaceAll(',"',"ö").replaceAll("Puffshrooms","ÿ").replaceAll("Tokens","ø").replaceAll("ToTheWindShrine","‡").replaceAll("Field","€").replaceAll("null","±").replaceAll("true","ž").replaceAll("false","×").replaceAll(" ","π").replaceAll(",","ω").replaceAll("}","⩒").replaceAll("]","∩").replaceAll('"',"∂").replaceAll("-","δ").replaceAll(".","Φ"),i=i.split("").reverse().join("");let n=i;i="";for(let e=0;e<n.length;e+=2)e+1<n.length&&(i+=n[e+1]+n[e]);let s=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];n=i,i="";for(let e in n){let t=s.indexOf(n[e]);i+=t>-1?s[(t+18)%s.length]:n[e]}n=i,i="";for(let e=0;e<n.length;e++){let t=0;for(let i=e+1;i<n.length&&n[i]===n[e];i++)t++;i+=n[e]+["","ะ","๐","๑","๒","๓","๔","๕","๖","๗","๘","๙","ก","ง","ข","น","า","ว","อ","ล","ค","ย","ๆ","ม","จ","ธ","ฐ","ฎ","ฮ","พ","ถ","เ","ใ","บ","ป","ศ","ห","ฉ","โ","฿","ร"][t],e+=t}return i}();console.error(e),saveToDB(t.id,{lastSaved:Date.now(),saveCode:e,name:t.name})}Li(),window.addEventListener("beforeunload",(function(e){Li()})),g.updateGear(),le.mobs.push(new Ie([-50,3,61],{minX:-52,maxX:-31,minZ:50,maxZ:63,minY:1,maxY:7},2,15,"rhinoBeetle","mob_bamb1")),le.mobs.push(new Ie([-33,3,61],{minX:-52,maxX:-31,minZ:50,maxZ:63,minY:1,maxY:7},3,18,"rhinoBeetle","mob_bamb2")),le.mobs.push(new Ie([-33,-.5,40],{minX:-55,maxX:-31,minZ:29,maxZ:42,minY:-2,maxY:5},1,8,"rhinoBeetle","mob_bluf1")),le.mobs.push(new Ie([-33,5,9.5],{minX:-50,maxX:-32,minZ:8.5,maxZ:26.5,minY:3,maxY:8},2,12,"rhinoBeetle","mob_clov1")),le.mobs.push(new Ie([-53,5,24.5],{minX:-50,maxX:-32,minZ:8.5,maxZ:26.5,minY:3,maxY:8},2,10,"ladybug","mob_clov2")),le.mobs.push(new Ie([-54.5,13.5,87],{minX:-71.5,maxX:-52.5,minZ:78,maxZ:93,minY:11.5,maxY:18},5,20,"rhinoBeetle","mob_pinea1")),le.mobs.push(new Ie([-62,13.5,92],{minX:-71.5,maxX:-52.5,minZ:78,maxZ:93,minY:11.5,maxY:18},4,25,"mantis","mob_pinea2")),le.mobs.push(new Ie([6.5,3,61],{minX:5.5,maxX:22.5,minZ:47,maxZ:63,minY:1,maxY:6},2,10,"ladybug","mob_straw1")),le.mobs.push(new Ie([20.5,3,48],{minX:5.5,maxX:22.5,minZ:47,maxZ:63,minY:1,maxY:6},3,12,"ladybug","mob_straw2")),le.mobs.push(new Ie([5,-.5,41],{minX:-6,maxX:13,minZ:29,maxZ:42,minY:-2,maxY:4},1,6,"ladybug","mob_mush1")),le.mobs.push(new Ie([-10.5,2.75,62.5],{minX:-20,maxX:-1,minZ:47.5,maxZ:61.5,minY:-0,maxY:6},4,25,"spider","mob_spi1")),le.mobs.push(new Ie([6,13.5,75],{minX:4,maxX:50,minZ:63.5,maxZ:88.5,minY:11,maxY:15},6,75,"werewolf","mob_were1")),le.mobs.push(new Ie([45,13.5,75],{minX:31,maxX:46,minZ:74,maxZ:93,minY:11,maxY:15},5,35,"mantis","mob_pine1")),le.mobs.push(new Ie([45,13.5,92],{minX:31,maxX:46,minZ:74,maxZ:93,minY:11,maxY:15},6,45,"mantis","mob_pine2")),le.mobs.push(new Ie([49,2.75,32.5],{minX:31,maxX:50,minZ:31.5,maxZ:44.5,minY:0,maxY:6},5,35,"scorpion","mob_rose1")),le.mobs.push(new Ie([32,2.75,43.5],{minX:31,maxX:50,minZ:31.5,maxZ:44.5,minY:0,maxY:6},5,35,"scorpion","mob_rose2")),le.mobs.push(new Ie([-40.5,-.75,8.5],{minX:-55,maxX:-28,minZ:6.5,maxZ:26.5,minY:-10,maxY:3.5},7,2500,"kingBeetle","mob_king1")),le.mobs.push(new Ie([4,-22,45],{minX:-50,maxX:10,minZ:40,maxZ:50,minY:-27,maxY:-19},9,1e4,"tunnelBear","mob_tun1")),le.mobs.push(new Se),le.mobs.push(new Me),document.addEventListener("pointerlockchange",(function(e){g.pointerLocked=document.pointerLockElement===c}),!1),c.requestPointerLock(),window.setInterval((()=>{Li(),g.addMessage("Game Autosaved!")}),3e4),function e(){window.setTimeout((()=>{let t=[];for(let e in ti)"AntField"!==e&&t.push(e);t=t[o.random()*t.length|0],le.mobs.push(new rt(t,MATH.random(.25,.75)*ti[t].width|0,z=MATH.random(.25,.75)*ti[t].length|0,300,1,"puffshroom")),e()}),1e3*(1800-.001*Date.now()%1800))}(),function e(){window.setTimeout((()=>{le.mobs.push(new Ee),e()}),1e3*(3600-.001*Date.now()%3600))}(),window.parent.raf&&window.cancelAnimationFrame(window.parent.raf),function e(t){if(f=o.min(.001*(t-x),.07),T+=f,A++,y=.25*o.sin(15*T),v=.1*o.sin(35*T),w=A%10==1,w){g.resetStats();for(let e in g.effects)if($[g.effects[e].type].isPassive){let t=$[g.effects[e].type];if(t.currentCooldown-=10*f,t.currentCooldown>0)t.amount.textContent=(0|t.currentCooldown)+"s",$[g.effects[e].type].cooldown.setAttribute("height",30),t.currentVal=0,t.startVal=g.stats[t.triggerType];else if($[g.effects[e].type].cooldown.setAttribute("height",0),t.currentVal=g.stats[t.triggerType]-t.startVal,t.amount.textContent=t.currentVal,t.currentVal>=t.triggerVal){t.currentCooldown=t.maxCooldown,t.activate(),P.style.display="block",g.passivePopupTimer=2;let i=document.getElementById("abilityUI").innerHTML;i=i.split("</svg>");for(let t in i)if(i[t].indexOf(g.effects[e].type)>-1){i=i[t];break}let o=i.indexOf("<text"),n=i.indexOf("</text>");P.innerHTML=i.substr(0,o)+i.substr(n+5,i.length)+"</svg>"}}else g.effects[e].cooldown-=10*f,!0!==$[g.effects[e].type].hideAmount?($[g.effects[e].type].amount.textContent=g.effects[e].amount>1?"x"+g.effects[e].amount:"",$[g.effects[e].type].amountFromCooldown&&(g.effects[e].amount=g.effects[e].cooldown/$[g.effects[e].type].maxCooldown,$[g.effects[e].type].amount.textContent=(100*g.effects[e].amount+1|0)+"%")):$[g.effects[e].type].amountFromCooldown&&(g.effects[e].amount=g.effects[e].cooldown/$[g.effects[e].type].maxCooldown),$[g.effects[e].type].cooldown.setAttribute("height",30-30*g.effects[e].cooldown/$[g.effects[e].type].maxCooldown||30),$[g.effects[e].type].update(g.effects[e].amount,g),g.effects[e].cooldown<=0&&($[g.effects[e].type].svg.style.display="none",g.effects.splice(e,1));g.convertTotal*=g.convertRate,g.attackTotal=(g.attackTotal+g.beeColorAmounts.r*g.redBeeAttack+g.beeColorAmounts.b*g.blueBeeAttack+g.beeColorAmounts.w*g.whiteBeeAttack)*g.beeAttack,g.fieldIn&&(g.capacity*=(g.redFieldCapacity-1)*ti[g.fieldIn].generalColorComp.r+1,g.capacity*=(g.blueFieldCapacity-1)*ti[g.fieldIn].generalColorComp.b+1,g.capacity*=(g.whiteFieldCapacity-1)*ti[g.fieldIn].generalColorComp.w+1),Dt.style.display="none",g.bannedGateMessage&&(Lt.innerHTML=g.bannedGateMessage,Dt.style.display="block",zt.style.backgroundColor="rgb(255,0,0,0.6)",document.getElementById("actionEButton").style.display="none"),g.currentMachineTrigger=void 0;for(let e in j)if(j[e].colliding=g.body.position.x>j[e].minX&&g.body.position.x<j[e].maxX&&g.body.position.y>j[e].minY&&g.body.position.y<j[e].maxY&&g.body.position.z>j[e].minZ&&g.body.position.z<j[e].maxZ,j[e].colliding&&j[e].contactFunc)j[e].contactFunc(g);else if(j[e].isMachine)if(j[e].colliding){Dt.style.display="block";let t=!!j[e].requirements&&j[e].requirements(g);t?(Lt.innerHTML=t,zt.style.backgroundColor="rgb(255,0,0,0.6)",document.getElementById("actionEButton").style.display="none"):(Lt.innerHTML=j[e].message,zt.style.backgroundColor="rgb(30,70,255,0.8)",document.getElementById("actionEButton").style.display="block",g.currentMachineTrigger=j[e])}else Lt.innerHTML===j[e].message&&(Lt.style.display="block")}for(let e=le.marks.length;e--;)le.marks[e].update()&&le.marks[e].die(e);if(m.clearColor(...g.skyColor,1),m.clear(16640),g.updatePhysics(),X.step(f),g.updateCamera(),m.useProgram(vt),m.uniformMatrix4fv(St.dynamic_viewMatrix,m.FALSE,g.viewMatrix),m.uniformMatrix4fv(St.dynamic_modelMatrix,m.FALSE,MATH.IDENTITY_MATRIX),Vt.render(),g.zoom>1&&(m.uniformMatrix4fv(St.dynamic_modelMatrix,m.FALSE,g.modelMatrix),Wt.render()),m.uniformMatrix4fv(St.dynamic_modelMatrix,m.FALSE,g.toolMatrix),g.toolMesh.render(),m.bindTexture(m.TEXTURE_2D,Rt.flowers),m.useProgram(At),m.uniformMatrix4fv(St.flower_viewMatrix,m.FALSE,g.viewMatrix),m.bindBuffer(m.ARRAY_BUFFER,Si.mesh.vertBuffer),d&&m.bufferData(m.ARRAY_BUFFER,Float32Array.from(Si.mesh.verts),m.DYNAMIC_DRAW),d=!1,m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,Si.mesh.indexBuffer),m.vertexAttribPointer(St.flower_vertPos,3,m.FLOAT,m.FALSE,32,0),m.vertexAttribPointer(St.flower_vertUV,4,m.FLOAT,m.FALSE,32,12),m.vertexAttribPointer(St.flower_vertGoo,1,m.FLOAT,m.FALSE,32,28),m.drawElements(m.TRIANGLES,Si.mesh.indexAmount,m.UNSIGNED_SHORT,0),m.bindTexture(m.TEXTURE_2D,Rt.default),m.useProgram(yt),m.uniformMatrix4fv(St.static_viewMatrix,m.FALSE,g.viewMatrix),ki.render(),g.itemDragging&&se[g.itemDragging].canUseOnSlot||g.beequipDragging){let e=Qt.mouseX/r-1,t=(s-Qt.mouseY)/a-1,i=1,o=g.viewMatrix,n=[o[0],o[1],o[2],o[4],o[5],o[6],o[8],o[9],o[10]];mat3.invert(n,n);let l=vec3.transformMat3([],[e,t,i],n);vec3.normalize(l,l);let d=[g.cameraDir[0]*g.zoom,g.cameraDir[1]*g.zoom,g.cameraDir[2]*g.zoom];e=g.body.position.x+d[0]+8*l[0],t=g.body.position.y+.35+d[1]+8*l[1],i=g.body.position.z+d[2]+8*l[2];let h=new CANNON.RaycastResult;d[0]+=g.body.position.x,d[1]+=g.body.position.y+.35,d[2]+=g.body.position.z,Z.raycastClosest(new CANNON.Vec3(...d),new CANNON.Vec3(d[0]+1e4*l[0],d[1]+1e4*l[1],d[2]+1e4*l[2]),{},h),e=h.hitPointWorld.x,t=h.hitPointWorld.y,i=h.hitPointWorld.z,h.body?(g.hiveIndex=h.body.hiveIndex.slice(),g.canUseItem=!0):(g.canUseItem=!1,g.hiveIndex=!1),g.canUseItem?g.beeHighlightMesh.setMeshFromFunction((function(e){g.itemDragging&&se[g.itemDragging].canUseOnSlot(g.hive[g.hiveIndex[1]][g.hiveIndex[0]])||g.beequipDragging&&re[g.beequipDragging.type].canUseOnSlot(g.hive[g.hiveIndex[1]][g.hiveIndex[0]])?e(g.hivePos[0]+.8*g.hiveIndex[0],g.hivePos[1]+.8*g.hiveIndex[1]-2.25,g.hivePos[2]-.075,.8,.8,.1,!1,[0,100,0],!1,!1):(g.canUseItem=!1,e(g.hivePos[0]+.8*g.hiveIndex[0],g.hivePos[1]+.8*g.hiveIndex[1]-2.25,g.hivePos[2]-.075,.8,.8,.1,!1,[100,0,0],!1,!1))})):g.beeHighlightMesh.setMeshFromFunction((function(){})),g.beeHighlightMesh.setBuffers(),g.beeHighlightMesh.render()}for(let e=le.triangulates.length;e--;)le.triangulates[e].update()&&le.triangulates[e].die(e);g.sprinklerMesh.render(),m.bindTexture(m.TEXTURE_2D,Rt.bear);let i,n=1/0;for(let e in b){if(!b[e].computedMesh){n=-1,i=e,b[e].computedMesh=!0,b[i].animation=0;break}let t=o.abs(g.body.position.x-j[e+"_NPC"].minX)+o.abs(g.body.position.y-j[e+"_NPC"].minY)+o.abs(g.body.position.z-j[e+"_NPC"].minZ);n>t&&(n=t,i=e),b[e].doesntHaveMesh||b[e].mesh.render()}n<75&&((!b[i].activeQuest&&"roboBear"!==i||"roboBear"===i&&g.roboChallenge&&g.roboChallenge.questCompleted&&g.roboChallenge.isPlaying||"roboBear"===i&&!g.roboChallenge)&&Kt.addDecalRaw(...b[i].exclaimPos,0,0,...Kt.decalUV.exclaim,1,1,1,5,4,o.PI),A%3&&!(n<0)||b[i].doesntHaveMesh||g.fieldIn||(b[i].mesh.setMeshFromFunction((function(e,t,n,s,r,a,l,d,h){b[i].animation+=f+f+f;let m=b[i].meshParams.x,c=b[i].meshParams.y,u=b[i].meshParams.z,p=b[i].meshParams.r,g=b[i].meshParams.s,y=b[i].animation,v=5*o.sin(2.1*y)-.5;d(p,m,c+o.cos(v*MATH.TO_RAD*2)*g*.6,u+o.sin(v*MATH.TO_RAD*2)*g*.6,1.1*g,.9*g,.6*g,[2*v,0,0],128*b[i].meshParams.texture.torso.u/1024,128*b[i].meshParams.texture.torso.v/1024,b[i].meshParams.texture.torso.texture),d(p,m,c+o.cos(v*MATH.TO_RAD*2.75)*g*1.65,u+o.sin(v*MATH.TO_RAD*2.75)*g*1.65,1.2*g,1.15*g,.6*g,[4*v,0,0],128*b[i].meshParams.texture.face.u/1024,128*b[i].meshParams.texture.face.v/1024,!0),d(p,m,c,u,1.1*g,.25*g,.6*g,[v,0,0],128*b[i].meshParams.texture.torso.u/1024,128*b[i].meshParams.texture.torso.v/1024),d(p,m+g/1.25,c-o.cos(v*MATH.TO_RAD*3.5*2)*g*.65+1.15*g,u-o.sin(v*MATH.TO_RAD*3.5*2)*g*.2,.5*g,1.15*g,.5*g,[3.5*v*2,0,9],128*(b[i].meshParams.texture.face.u+b[i].meshParams.texture.extremities.u)/1024,128*(b[i].meshParams.texture.face.v+b[i].meshParams.texture.extremities.v)/1024),g/=1.25,d(p,m-.35*g,c-.55*g,u+.1*g,.55*g*1.25,.6*g*1.25,.55*g*1.25,[1.25*v-10,0,-5],128*(b[i].meshParams.texture.face.u+b[i].meshParams.texture.extremities.u)/1024,128*(b[i].meshParams.texture.face.v+b[i].meshParams.texture.extremities.v)/1024),d(p,m-.42*g,c-1.15*g,u+.1*g,.55*g*1.25,.6*g*1.25,.55*g*1.25,[10-.5*v,0,-5],128*(b[i].meshParams.texture.face.u+b[i].meshParams.texture.extremities.u)/1024,128*(b[i].meshParams.texture.face.v+b[i].meshParams.texture.extremities.v)/1024),d(p,m+.35*g,c-.55*g,u+.1*g,.55*g*1.25,.6*g*1.25,.55*g*1.25,[1.25*v-10,0,5],128*(b[i].meshParams.texture.face.u+b[i].meshParams.texture.extremities.u)/1024,128*(b[i].meshParams.texture.face.v+b[i].meshParams.texture.extremities.v)/1024),d(p,m+.42*g,c-1.15*g,u+.1*g,.55*g*1.25,.6*g*1.25,.55*g*1.25,[10-.5*v,0,5],128*(b[i].meshParams.texture.face.u+b[i].meshParams.texture.extremities.u)/1024,128*(b[i].meshParams.texture.face.v+b[i].meshParams.texture.extremities.v)/1024),g*=1.25,h(p,m-.6*g,c+o.cos(v*MATH.TO_RAD*3)*g*2.2,u+o.sin(v*MATH.TO_RAD*3)*g*2.2,.3*g,.65*g,10,.9,.9,.9,1,4*v,0,0,128*(b[i].meshParams.texture.face.u+b[i].meshParams.texture.ears.u)/1024,128*(b[i].meshParams.texture.face.v+b[i].meshParams.texture.ears.v)/1024),h(p,m+.6*g,c+o.cos(v*MATH.TO_RAD*3)*g*2.2,u+o.sin(v*MATH.TO_RAD*3)*g*2.2,.3*g,.65*g,10,.9,.9,.9,1,4*v,0,0,128*(b[i].meshParams.texture.face.u+b[i].meshParams.texture.ears.u)/1024,128*(b[i].meshParams.texture.face.v+b[i].meshParams.texture.ears.v)/1024),v=5*o.sin(2.1*y+.5)-.5,d(p,m-1*g/1.25,c-o.cos(v*MATH.TO_RAD*3.5*2)*g*.65+1.15*g,u-o.sin(v*MATH.TO_RAD*3.5*2)*g*.2,.5*g,1.15*g,.5*g,[3.5*v*2,0,-9],128*(b[i].meshParams.texture.face.u+b[i].meshParams.texture.extremities.u)/1024,128*(b[i].meshParams.texture.face.v+b[i].meshParams.texture.extremities.v)/1024)})),b[i].mesh.setBuffers())),m.bindTexture(m.TEXTURE_2D,Rt.bees),g.hiveMesh.render(),g.updateFields(),m.useProgram(Tt),m.uniformMatrix4fv(St.bee_viewMatrix,m.FALSE,g.viewMatrix);for(let e in le.bees)le.bees[e].update();for(let e in le.tempBees)if(le.tempBees[e].update()){for(let t in le.tempBees[e].trails)le.tempBees[e].trails[t].splice=!0;le.tempBees.splice(e,1)}m.bindTexture(m.TEXTURE_2D,Rt.bees),m.bindBuffer(m.ARRAY_BUFFER,de.bee.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.bee.indexBuffer),m.vertexAttribPointer(St.bee_vertPos,3,m.FLOAT,m.FLASE,28,0),m.vertexAttribPointer(St.bee_vertUV,4,m.FLOAT,m.FLASE,28,12),m.bindBuffer(m.ARRAY_BUFFER,de.bees.instanceBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(de.bees.instanceData),m.DYNAMIC_DRAW),m.vertexAttribPointer(St.bee_instancePos,4,m.FLOAT,m.FLASE,44,0),m.vertexAttribDivisor(St.bee_instancePos,1),m.vertexAttribPointer(St.bee_instanceRotation,4,m.FLOAT,m.FLASE,44,16),m.vertexAttribDivisor(St.bee_instanceRotation,1),m.vertexAttribPointer(St.bee_instanceUV,3,m.FLOAT,m.FLASE,44,32),m.vertexAttribDivisor(St.bee_instanceUV,1),m.drawElementsInstanced(m.TRIANGLES,de.bee.indexAmount,m.UNSIGNED_SHORT,0,de.bees.instanceData.length*MATH.INV_11),m.vertexAttribDivisor(St.bee_instancePos,0),m.vertexAttribDivisor(St.bee_instanceRotation,0),m.vertexAttribDivisor(St.bee_instanceUV,0),de.bees.instanceData=[-11,10.5,43,6,.2,-.2,-1,.1,K.basic.u,K.basic.v,K.basic.meshPartId,-58,20.5,63,6,.1,-.3,-1,.1,K.brave.u,K.brave.v,K.brave.meshPartId,24,20.3,63,6,-.45,-.1,-1,0,K.honey.u,K.honey.v,K.honey.meshPartId,-31,40.8,68.25,6,-.2,-.2,-1,0,K.lion.u,K.lion.v,K.lion.meshPartId,51.5,17,-19,6,-.5,-.1,.5,.2,K.windy.u,K.windy.v,K.windy.meshPartId,-7,15,-41,3,-.7,0,.3,-.1,K.gummy.u,K.gummy.v,K.gummy.meshPartId,2,6.5,61,3,0,-.2,-1,-.2,K.vicious.u,K.vicious.v,K.vicious.meshPartId,61,12,34,1.5,-1,0,0,v,K.digital.u,K.digital.v,K.digital.meshPartId,35,8.5,22,6,-1,-.2,-.2,-.08,K.riley.u,K.riley.v,K.riley.meshPartId,51.75,16,22,3,-1,0,0,v,K.riley.u,K.riley.v+.375,K.riley.meshPartId,-61,5.5,35,6,1,-.25,.2,.1,K.bucko.u,K.bucko.v,K.bucko.meshPartId,-78.5,11,34,3,1,0,0,v,K.bucko.u,K.bucko.v+.375,K.bucko.meshPartId,53,20,91,3,-.6,0,-1,v,K.honey.u,K.honey.v,K.honey.meshPartId,28.25,3.64,-21.25,1,1,-.1,.2,0,K.puppy.u,K.puppy.v,K.puppy.meshPartId,28.25,3.64,-23.25,1,1,.1,-.1,.1,K.photon.u,K.photon.v,K.photon.meshPartId,33.75,3.64,-17.25,1,-1,-.2,-.15,-.1,K.cobalt.u,K.cobalt.v,K.cobalt.meshPartId,33.75,3.64,-19.25,1,-1,.2,-.1,.2,K.crimson.u,K.crimson.v,K.crimson.meshPartId,33.75,3.64,-21.25,1,-1,-.1,.05,-.1,K.festive.u,K.festive.v,K.festive.meshPartId,33.75,3.64,-23.25,1,-1,0,.1,.2,K.tabby.u,K.tabby.v,K.tabby.meshPartId,31,8.25,-15,4,-.1,-.15,.8,0,K.photon.u,K.photon.v,K.photon.meshPartId,34,7.3,-15,4,-.1,-.15,.6,-.3,K.festive.u,K.festive.v,K.festive.meshPartId,28,7.3,-15,4,0,-.1,.8,.2,K.puppy.u,K.puppy.v,K.puppy.meshPartId],m.useProgram(xt),m.uniformMatrix4fv(St.token_viewMatrix,m.FALSE,g.viewMatrix);for(let e=le.tokens.length;e--;)le.tokens[e].update(f)&&le.tokens[e].die(e);m.bindTexture(m.TEXTURE_2D,Rt.effects),m.bindBuffer(m.ARRAY_BUFFER,de.token.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.token.indexBuffer),m.vertexAttribPointer(St.token_vertPos,3,m.FLOAT,m.FLASE,20,0),m.vertexAttribPointer(St.token_vertUV,2,m.FLOAT,m.FLASE,20,12),m.bindBuffer(m.ARRAY_BUFFER,de.tokens.instanceBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(de.tokens.instanceData),m.DYNAMIC_DRAW),m.vertexAttribPointer(St.token_instancePos,4,m.FLOAT,m.FALSE,32,0),m.vertexAttribDivisor(St.token_instancePos,1),m.vertexAttribPointer(St.token_instanceUV,4,m.FLOAT,m.FALSE,32,16),m.vertexAttribDivisor(St.token_instanceUV,1),m.drawElementsInstanced(m.TRIANGLES,de.token.indexAmount,m.UNSIGNED_SHORT,0,.125*de.tokens.instanceData.length),m.vertexAttribDivisor(St.token_instancePos,0),m.vertexAttribDivisor(St.token_instanceUV,0),de.tokens.instanceData=[],$t.render(),ei.render(),m.useProgram(Et),m.uniformMatrix4fv(St.mob_viewMatrix,m.FALSE,g.viewMatrix),g.attacked=[];for(let e=le.mobs.length;e--;)le.mobs[e].update()&&le.mobs[e].die(e);for(let e=le.planters.length;e--;)le.planters[e].update()&&le.planters[e].die(e);m.useProgram(Bt),m.uniformMatrix4fv(St.explosion_viewMatrix,m.FALSE,g.viewMatrix);for(let e=le.bubbles.length;e--;)le.bubbles[e].update()&&le.bubbles[e].die(e);for(let e=le.explosions.length;e--;)le.explosions[e].update()&&le.explosions[e].die(e);for(let e=le.balloons.length;e--;)le.balloons[e].update()&&le.balloons[e].die(e);for(let e=le.targets.length;e--;)le.targets[e].update()&&le.targets[e].die(e);for(let e=le.fuzzBombs.length;e--;)le.fuzzBombs[e].update()&&le.fuzzBombs[e].die(e);g.updateHiveBalloon(),g.updateAntChallenge(),g.updateRoboChallenge(),m.depthMask(!1),m.bindBuffer(m.ARRAY_BUFFER,de.cylinder_explosion.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.cylinder_explosion.indexBuffer),m.vertexAttribPointer(St.explosion_vertPos,3,m.FLOAT,m.FLASE,12,0),m.bindBuffer(m.ARRAY_BUFFER,de.cylinder_explosions.instanceBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(de.cylinder_explosions.instanceData),m.DYNAMIC_DRAW),m.vertexAttribPointer(St.explosion_instancePos,3,m.FLOAT,m.FLASE,36,0),m.vertexAttribDivisor(St.explosion_instancePos,1),m.vertexAttribPointer(St.explosion_instanceColor,4,m.FLOAT,m.FLASE,36,12),m.vertexAttribDivisor(St.explosion_instanceColor,1),m.vertexAttribPointer(St.explosion_instanceScale,2,m.FLOAT,m.FLASE,36,28),m.vertexAttribDivisor(St.explosion_instanceScale,1),m.drawElementsInstanced(m.TRIANGLES,de.cylinder_explosion.indexAmount,m.UNSIGNED_SHORT,0,de.cylinder_explosions.instanceData.length*MATH.INV_9),m.bindBuffer(m.ARRAY_BUFFER,de.explosion.vertBuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,de.explosion.indexBuffer),m.vertexAttribPointer(St.explosion_vertPos,3,m.FLOAT,m.FLASE,12,0),m.bindBuffer(m.ARRAY_BUFFER,de.explosions.instanceBuffer),m.bufferData(m.ARRAY_BUFFER,Float32Array.from(de.explosions.instanceData),m.DYNAMIC_DRAW),m.vertexAttribPointer(St.explosion_instancePos,3,m.FLOAT,m.FLASE,36,0),m.vertexAttribPointer(St.explosion_instanceColor,4,m.FLOAT,m.FLASE,36,12),m.vertexAttribPointer(St.explosion_instanceScale,2,m.FLOAT,m.FLASE,36,28),m.drawElementsInstanced(m.TRIANGLES,de.explosion.indexAmount,m.UNSIGNED_SHORT,0,de.explosions.instanceData.length*MATH.INV_9),m.depthMask(!0),m.vertexAttribDivisor(St.explosion_instancePos,0),m.vertexAttribDivisor(St.explosion_instanceColor,0),m.vertexAttribDivisor(St.explosion_instanceScale,0),de.explosions.instanceData=g.defense>=1?[g.body.position.x+g.body.velocity.x*f,g.body.position.y+g.body.velocity.y*f,g.body.position.z+g.body.velocity.z*f,.1,.05,0,.15*o.sin(10*T)+.5,2,1]:[],de.cylinder_explosions.instanceData=[],Kt.render(f,o.sin(20*T)),u.drawImage(m.canvas,0,0),Kt.draw(),g.updateUI(),Qt.update(),x=t,window.parent.raf=window.requestAnimationFrame(e)}(0),window.exposeCheats=function(){window.exposed_player=g,window.exposed_items=se,window.exposed_NPCs=b}}console.log=0;
//# sourceMappingURL=/sm/bdcf1aa25156ae4294a148beb24a5a92a7ca90d635a94181c29dafa36c2328ea.map